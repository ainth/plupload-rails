/**
 * mOxie - multi-runtime File API & XMLHttpRequest L2 Polyfill
 * v1.0.0
 *
 * Copyright 2013, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2013-09-23
 */
/**
 * Compiled inline version. (Library mode)
 */

/*jshint smarttabs:true, undef:true, latedef:true, curly:true, bitwise:true, camelcase:true */
/*globals $code */

(function(exports, undefined) {
	"use strict";

	var modules = {};

	function require(ids, callback) {
		var module, defs = [];

		for (var i = 0; i < ids.length; ++i) {
			module = modules[ids[i]] || resolve(ids[i]);
			if (!module) {
				throw 'module definition dependecy not found: ' + ids[i];
			}

			defs.push(module);
		}

		callback.apply(null, defs);
	}

	function define(id, dependencies, definition) {
		if (typeof id !== 'string') {
			throw 'invalid module definition, module id must be defined and be a string';
		}

		if (dependencies === undefined) {
			throw 'invalid module definition, dependencies must be specified';
		}

		if (definition === undefined) {
			throw 'invalid module definition, definition function must be specified';
		}

		require(dependencies, function() {
			modules[id] = definition.apply(null, arguments);
		});
	}

	function defined(id) {
		return !!modules[id];
	}

	function resolve(id) {
		var target = exports;
		var fragments = id.split(/[.\/]/);

		for (var fi = 0; fi < fragments.length; ++fi) {
			if (!target[fragments[fi]]) {
				return;
			}

			target = target[fragments[fi]];
		}

		return target;
	}

	function expose(ids) {
		for (var i = 0; i < ids.length; i++) {
			var target = exports;
			var id = ids[i];
			var fragments = id.split(/[.\/]/);

			for (var fi = 0; fi < fragments.length - 1; ++fi) {
				if (target[fragments[fi]] === undefined) {
					target[fragments[fi]] = {};
				}

				target = target[fragments[fi]];
			}

			target[fragments[fragments.length - 1]] = modules[id];
		}
	}

// Included from: src/javascript/core/utils/Basic.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/core/utils/Basic.js", "/**\n * Basic.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Basic', [], function() {\n\t/**\n\tGets the true type of the built-in object (better version of typeof).\n\t@author Angus Croll (http://javascriptweblog.wordpress.com/)\n\n\t@method typeOf\n\t@for Utils\n\t@static\n\t@param {Object} o Object to check.\n\t@return {String} Object [[Class]]\n\t*/\n\tvar typeOf = function(o) {\n\t\tvar undef;\n\n\t\tif (o === undef) {\n\t\t\treturn 'undefined';\n\t\t} else if (o === null) {\n\t\t\treturn 'null';\n\t\t} else if (o.nodeType) {\n\t\t\treturn 'node';\n\t\t}\n\n\t\t// the snippet below is awesome, however it fails to detect null, undefined and arguments types in IE lte 8\n\t\treturn ({}).toString.call(o).match(/\\s([a-z|A-Z]+)/)[1].toLowerCase();\n\t};\n\t\t\n\t/**\n\tExtends the specified object with another object.\n\n\t@method extend\n\t@static\n\t@param {Object} target Object to extend.\n\t@param {Object} [obj]* Multiple objects to extend with.\n\t@return {Object} Same as target, the extended object.\n\t*/\n\tvar extend = function(target) {\n\t\tvar undef;\n\n\t\teach(arguments, function(arg, i) {\n\t\t\tif (i > 0) {\n\t\t\t\teach(arg, function(value, key) {\n\t\t\t\t\tif (value !== undef) {\n\t\t\t\t\t\tif (typeOf(target[key]) === typeOf(value) && !!~inArray(typeOf(value), ['array', 'object'])) {\n\t\t\t\t\t\t\textend(target[key], value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget[key] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn target;\n\t};\n\t\t\n\t/**\n\tExecutes the callback function for each item in array/object. If you return false in the\n\tcallback it will break the loop.\n\n\t@method each\n\t@static\n\t@param {Object} obj Object to iterate.\n\t@param {function} callback Callback function to execute for each item.\n\t*/\n\tvar each = function(obj, callback) {\n\t\tvar length, key, i, undef;\n\n\t\tif (obj) {\n\t\t\ttry {\n\t\t\t\tlength = obj.length;\n\t\t\t} catch(ex) {\n\t\t\t\tlength = undef;\n\t\t\t}\n\n\t\t\tif (length === undef) {\n\t\t\t\t// Loop object items\n\t\t\t\tfor (key in obj) {\n\t\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\t\tif (callback(obj[key], key) === false) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Loop array items\n\t\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\t\tif (callback(obj[i], i) === false) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\tChecks if object is empty.\n\t\n\t@method isEmptyObj\n\t@static\n\t@param {Object} o Object to check.\n\t@return {Boolean}\n\t*/\n\tvar isEmptyObj = function(obj) {\n\t\tvar prop;\n\n\t\tif (!obj || typeOf(obj) !== 'object') {\n\t\t\treturn true;\n\t\t}\n\n\t\tfor (prop in obj) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\t/**\n\tRecieve an array of functions (usually async) to call in sequence, each  function\n\treceives a callback as first argument that it should call, when it completes. Finally,\n\tafter everything is complete, main callback is called. Passing truthy value to the\n\tcallback as a first argument will interrupt the sequence and invoke main callback\n\timmediately.\n\n\t@method inSeries\n\t@static\n\t@param {Array} queue Array of functions to call in sequence\n\t@param {Function} cb Main callback that is called in the end, or in case of erro\n\t*/\n\tvar inSeries = function(queue, cb) {\n\t\tvar i = 0, length = queue.length;\n\n\t\tif (typeOf(cb) !== 'function') {\n\t\t\tcb = function() {};\n\t\t}\n\n\t\tif (!queue || !queue.length) {\n\t\t\tcb();\n\t\t}\n\n\t\tfunction callNext(i) {\n\t\t\tif (typeOf(queue[i]) === 'function') {\n\t\t\t\tqueue[i](function(error) {\n\t\t\t\t\t/*jshint expr:true */\n\t\t\t\t\t++i < length && !error ? callNext(i) : cb(error);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcallNext(i);\n\t};\n\t\n\t\n\t/**\n\tFind an element in array and return it's index if present, otherwise return -1.\n\t\n\t@method inArray\n\t@static\n\t@param {Mixed} needle Element to find\n\t@param {Array} array\n\t@return {Int} Index of the element, or -1 if not found\n\t*/\n\tvar inArray = function(needle, array) {\n\t\tif (array) {\n\t\t\tif (Array.prototype.indexOf) {\n\t\t\t\treturn Array.prototype.indexOf.call(array, needle);\n\t\t\t}\n\t\t\n\t\t\tfor (var i = 0, length = array.length; i < length; i++) {\n\t\t\t\tif (array[i] === needle) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t};\n\n\n\t/**\n\tReturns elements of first array if they are not present in second. And false - otherwise.\n\n\t@private\n\t@method arrayDiff\n\t@param {Array} needles\n\t@param {Array} array\n\t@return {Array|Boolean}\n\t*/\n\tvar arrayDiff = function(needles, array) {\n\t\tvar diff = [];\n\n\t\tif (typeOf(needles) !== 'array') {\n\t\t\tneedles = [needles];\n\t\t}\n\n\t\tif (typeOf(array) !== 'array') {\n\t\t\tarray = [array];\n\t\t}\n\n\t\tfor (var i in needles) {\n\t\t\tif (inArray(needles[i], array) === -1) {\n\t\t\t\tdiff.push(needles[i]);\n\t\t\t}\t\n\t\t}\n\t\treturn diff.length ? diff : false;\n\t};\n\n\n\t/**\n\tFind intersection of two arrays.\n\n\t@private\n\t@method arrayIntersect\n\t@param {Array} array1\n\t@param {Array} array2\n\t@return {Array} Intersection of two arrays or null if there is none\n\t*/\n\tvar arrayIntersect = function(array1, array2) {\n\t\tvar result = [];\n\t\teach(array1, function(item) {\n\t\t\tif (inArray(item, array2) !== -1) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\t\t});\n\t\treturn result.length ? result : null;\n\t};\n\t\n\t\n\t/**\n\tForces anything into an array.\n\t\n\t@method toArray\n\t@static\n\t@param {Object} obj Object with length field.\n\t@return {Array} Array object containing all items.\n\t*/\n\tvar toArray = function(obj) {\n\t\tvar i, arr = [];\n\n\t\tfor (i = 0; i < obj.length; i++) {\n\t\t\tarr[i] = obj[i];\n\t\t}\n\n\t\treturn arr;\n\t};\n\t\n\t\t\t\n\t/**\n\tGenerates an unique ID. This is 99.99% unique since it takes the current time and 5 random numbers.\n\tThe only way a user would be able to get the same ID is if the two persons at the same exact milisecond manages\n\tto get 5 the same random numbers between 0-65535 it also uses a counter so each call will be guaranteed to be page unique.\n\tIt's more probable for the earth to be hit with an ansteriod. Y\n\t\n\t@method guid\n\t@static\n\t@param {String} prefix to prepend (by default 'o' will be prepended).\n\t@method guid\n\t@return {String} Virtually unique id.\n\t*/\n\tvar guid = (function() {\n\t\tvar counter = 0;\n\t\t\n\t\treturn function(prefix) {\n\t\t\tvar guid = new Date().getTime().toString(32), i;\n\n\t\t\tfor (i = 0; i < 5; i++) {\n\t\t\t\tguid += Math.floor(Math.random() * 65535).toString(32);\n\t\t\t}\n\t\t\t\n\t\t\treturn (prefix || 'o_') + guid + (counter++).toString(32);\n\t\t};\n\t}());\n\t\n\n\t/**\n\tTrims white spaces around the string\n\t\n\t@method trim\n\t@static\n\t@param {String} str\n\t@return {String}\n\t*/\n\tvar trim = function(str) {\n\t\tif (!str) {\n\t\t\treturn str;\n\t\t}\n\t\treturn String.prototype.trim ? String.prototype.trim.call(str) : str.toString().replace(/^\\s*/, '').replace(/\\s*$/, '');\n\t};\n\n\n\t/**\n\tParses the specified size string into a byte value. For example 10kb becomes 10240.\n\t\n\t@method parseSizeStr\n\t@static\n\t@param {String/Number} size String to parse or number to just pass through.\n\t@return {Number} Size in bytes.\n\t*/\n\tvar parseSizeStr = function(size) {\n\t\tif (typeof(size) !== 'string') {\n\t\t\treturn size;\n\t\t}\n\t\t\n\t\tvar muls = {\n\t\t\t\tt: 1099511627776,\n\t\t\t\tg: 1073741824,\n\t\t\t\tm: 1048576,\n\t\t\t\tk: 1024\n\t\t\t},\n\t\t\tmul;\n\n\t\tsize = /^([0-9]+)([mgk]?)$/.exec(size.toLowerCase().replace(/[^0-9mkg]/g, ''));\n\t\tmul = size[2];\n\t\tsize = +size[1];\n\t\t\n\t\tif (muls.hasOwnProperty(mul)) {\n\t\t\tsize *= muls[mul];\n\t\t}\n\t\treturn size;\n\t};\n\t\n\n\treturn {\n\t\tguid: guid,\n\t\ttypeOf: typeOf,\n\t\textend: extend,\n\t\teach: each,\n\t\tisEmptyObj: isEmptyObj,\n\t\tinSeries: inSeries,\n\t\tinArray: inArray,\n\t\tarrayDiff: arrayDiff,\n\t\tarrayIntersect: arrayIntersect,\n\t\ttoArray: toArray,\n\t\ttrim: trim,\n\t\tparseSizeStr: parseSizeStr\n\t};\n});\n");
__$coverInitRange("src/javascript/core/utils/Basic.js", "196:7377");
__$coverInitRange("src/javascript/core/utils/Basic.js", "498:863");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1109:1505");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1780:2282");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2409:2579");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3115:3513");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3755:4045");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4251:4585");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4783:4997");
__$coverInitRange("src/javascript/core/utils/Basic.js", "5172:5300");
__$coverInitRange("src/javascript/core/utils/Basic.js", "5870:6168");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6285:6470");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6712:7103");
__$coverInitRange("src/javascript/core/utils/Basic.js", "7109:7373");
__$coverInitRange("src/javascript/core/utils/Basic.js", "527:536");
__$coverInitRange("src/javascript/core/utils/Basic.js", "541:675");
__$coverInitRange("src/javascript/core/utils/Basic.js", "790:859");
__$coverInitRange("src/javascript/core/utils/Basic.js", "563:581");
__$coverInitRange("src/javascript/core/utils/Basic.js", "613:626");
__$coverInitRange("src/javascript/core/utils/Basic.js", "658:671");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1143:1152");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1157:1484");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1488:1501");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1195:1478");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1212:1473");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1250:1465");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1279:1458");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1381:1407");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1431:1450");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1819:1844");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1849:2278");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1863:1934");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1940:2274");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1873:1892");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1915:1929");
__$coverInitRange("src/javascript/core/utils/Basic.js", "1993:2129");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2017:2123");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2054:2116");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2102:2108");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2171:2269");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2207:2263");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2250:2256");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2444:2452");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2457:2515");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2520:2559");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2564:2575");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2500:2511");
__$coverInitRange("src/javascript/core/utils/Basic.js", "2543:2555");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3154:3186");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3191:3249");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3254:3296");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3301:3494");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3498:3509");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3227:3245");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3288:3292");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3327:3490");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3370:3485");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3429:3477");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3797:4028");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4032:4041");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3813:3903");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3911:4024");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3848:3898");
__$coverInitRange("src/javascript/core/utils/Basic.js", "3973:4019");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4005:4013");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4296:4309");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4314:4375");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4380:4435");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4440:4544");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4548:4581");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4352:4371");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4416:4431");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4468:4539");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4513:4534");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4833:4848");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4852:4953");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4957:4993");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4885:4947");
__$coverInitRange("src/javascript/core/utils/Basic.js", "4925:4942");
__$coverInitRange("src/javascript/core/utils/Basic.js", "5204:5219");
__$coverInitRange("src/javascript/core/utils/Basic.js", "5224:5281");
__$coverInitRange("src/javascript/core/utils/Basic.js", "5286:5296");
__$coverInitRange("src/javascript/core/utils/Basic.js", "5262:5277");
__$coverInitRange("src/javascript/core/utils/Basic.js", "5897:5912");
__$coverInitRange("src/javascript/core/utils/Basic.js", "5919:6161");
__$coverInitRange("src/javascript/core/utils/Basic.js", "5948:5995");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6001:6090");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6099:6156");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6031:6085");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6314:6343");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6347:6466");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6329:6339");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6750:6801");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6808:6902");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6907:6985");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6989:7002");
__$coverInitRange("src/javascript/core/utils/Basic.js", "7006:7021");
__$coverInitRange("src/javascript/core/utils/Basic.js", "7028:7084");
__$coverInitRange("src/javascript/core/utils/Basic.js", "7088:7099");
__$coverInitRange("src/javascript/core/utils/Basic.js", "6786:6797");
__$coverInitRange("src/javascript/core/utils/Basic.js", "7063:7080");
__$coverCall('src/javascript/core/utils/Basic.js', '196:7377');
define('moxie/core/utils/Basic', [], function () {
    __$coverCall('src/javascript/core/utils/Basic.js', '498:863');
    var typeOf = function (o) {
        __$coverCall('src/javascript/core/utils/Basic.js', '527:536');
        var undef;
        __$coverCall('src/javascript/core/utils/Basic.js', '541:675');
        if (o === undef) {
            __$coverCall('src/javascript/core/utils/Basic.js', '563:581');
            return 'undefined';
        } else if (o === null) {
            __$coverCall('src/javascript/core/utils/Basic.js', '613:626');
            return 'null';
        } else if (o.nodeType) {
            __$coverCall('src/javascript/core/utils/Basic.js', '658:671');
            return 'node';
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '790:859');
        return {}.toString.call(o).match(/\s([a-z|A-Z]+)/)[1].toLowerCase();
    };
    __$coverCall('src/javascript/core/utils/Basic.js', '1109:1505');
    var extend = function (target) {
        __$coverCall('src/javascript/core/utils/Basic.js', '1143:1152');
        var undef;
        __$coverCall('src/javascript/core/utils/Basic.js', '1157:1484');
        each(arguments, function (arg, i) {
            __$coverCall('src/javascript/core/utils/Basic.js', '1195:1478');
            if (i > 0) {
                __$coverCall('src/javascript/core/utils/Basic.js', '1212:1473');
                each(arg, function (value, key) {
                    __$coverCall('src/javascript/core/utils/Basic.js', '1250:1465');
                    if (value !== undef) {
                        __$coverCall('src/javascript/core/utils/Basic.js', '1279:1458');
                        if (typeOf(target[key]) === typeOf(value) && !!~inArray(typeOf(value), [
                                'array',
                                'object'
                            ])) {
                            __$coverCall('src/javascript/core/utils/Basic.js', '1381:1407');
                            extend(target[key], value);
                        } else {
                            __$coverCall('src/javascript/core/utils/Basic.js', '1431:1450');
                            target[key] = value;
                        }
                    }
                });
            }
        });
        __$coverCall('src/javascript/core/utils/Basic.js', '1488:1501');
        return target;
    };
    __$coverCall('src/javascript/core/utils/Basic.js', '1780:2282');
    var each = function (obj, callback) {
        __$coverCall('src/javascript/core/utils/Basic.js', '1819:1844');
        var length, key, i, undef;
        __$coverCall('src/javascript/core/utils/Basic.js', '1849:2278');
        if (obj) {
            __$coverCall('src/javascript/core/utils/Basic.js', '1863:1934');
            try {
                __$coverCall('src/javascript/core/utils/Basic.js', '1873:1892');
                length = obj.length;
            } catch (ex) {
                __$coverCall('src/javascript/core/utils/Basic.js', '1915:1929');
                length = undef;
            }
            __$coverCall('src/javascript/core/utils/Basic.js', '1940:2274');
            if (length === undef) {
                __$coverCall('src/javascript/core/utils/Basic.js', '1993:2129');
                for (key in obj) {
                    __$coverCall('src/javascript/core/utils/Basic.js', '2017:2123');
                    if (obj.hasOwnProperty(key)) {
                        __$coverCall('src/javascript/core/utils/Basic.js', '2054:2116');
                        if (callback(obj[key], key) === false) {
                            __$coverCall('src/javascript/core/utils/Basic.js', '2102:2108');
                            return;
                        }
                    }
                }
            } else {
                __$coverCall('src/javascript/core/utils/Basic.js', '2171:2269');
                for (i = 0; i < length; i++) {
                    __$coverCall('src/javascript/core/utils/Basic.js', '2207:2263');
                    if (callback(obj[i], i) === false) {
                        __$coverCall('src/javascript/core/utils/Basic.js', '2250:2256');
                        return;
                    }
                }
            }
        }
    };
    __$coverCall('src/javascript/core/utils/Basic.js', '2409:2579');
    var isEmptyObj = function (obj) {
        __$coverCall('src/javascript/core/utils/Basic.js', '2444:2452');
        var prop;
        __$coverCall('src/javascript/core/utils/Basic.js', '2457:2515');
        if (!obj || typeOf(obj) !== 'object') {
            __$coverCall('src/javascript/core/utils/Basic.js', '2500:2511');
            return true;
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '2520:2559');
        for (prop in obj) {
            __$coverCall('src/javascript/core/utils/Basic.js', '2543:2555');
            return false;
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '2564:2575');
        return true;
    };
    __$coverCall('src/javascript/core/utils/Basic.js', '3115:3513');
    var inSeries = function (queue, cb) {
        __$coverCall('src/javascript/core/utils/Basic.js', '3154:3186');
        var i = 0, length = queue.length;
        __$coverCall('src/javascript/core/utils/Basic.js', '3191:3249');
        if (typeOf(cb) !== 'function') {
            __$coverCall('src/javascript/core/utils/Basic.js', '3227:3245');
            cb = function () {
            };
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '3254:3296');
        if (!queue || !queue.length) {
            __$coverCall('src/javascript/core/utils/Basic.js', '3288:3292');
            cb();
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '3301:3494');
        function callNext(i) {
            __$coverCall('src/javascript/core/utils/Basic.js', '3327:3490');
            if (typeOf(queue[i]) === 'function') {
                __$coverCall('src/javascript/core/utils/Basic.js', '3370:3485');
                queue[i](function (error) {
                    __$coverCall('src/javascript/core/utils/Basic.js', '3429:3477');
                    ++i < length && !error ? callNext(i) : cb(error);
                });
            }
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '3498:3509');
        callNext(i);
    };
    __$coverCall('src/javascript/core/utils/Basic.js', '3755:4045');
    var inArray = function (needle, array) {
        __$coverCall('src/javascript/core/utils/Basic.js', '3797:4028');
        if (array) {
            __$coverCall('src/javascript/core/utils/Basic.js', '3813:3903');
            if (Array.prototype.indexOf) {
                __$coverCall('src/javascript/core/utils/Basic.js', '3848:3898');
                return Array.prototype.indexOf.call(array, needle);
            }
            __$coverCall('src/javascript/core/utils/Basic.js', '3911:4024');
            for (var i = 0, length = array.length; i < length; i++) {
                __$coverCall('src/javascript/core/utils/Basic.js', '3973:4019');
                if (array[i] === needle) {
                    __$coverCall('src/javascript/core/utils/Basic.js', '4005:4013');
                    return i;
                }
            }
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '4032:4041');
        return -1;
    };
    __$coverCall('src/javascript/core/utils/Basic.js', '4251:4585');
    var arrayDiff = function (needles, array) {
        __$coverCall('src/javascript/core/utils/Basic.js', '4296:4309');
        var diff = [];
        __$coverCall('src/javascript/core/utils/Basic.js', '4314:4375');
        if (typeOf(needles) !== 'array') {
            __$coverCall('src/javascript/core/utils/Basic.js', '4352:4371');
            needles = [needles];
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '4380:4435');
        if (typeOf(array) !== 'array') {
            __$coverCall('src/javascript/core/utils/Basic.js', '4416:4431');
            array = [array];
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '4440:4544');
        for (var i in needles) {
            __$coverCall('src/javascript/core/utils/Basic.js', '4468:4539');
            if (inArray(needles[i], array) === -1) {
                __$coverCall('src/javascript/core/utils/Basic.js', '4513:4534');
                diff.push(needles[i]);
            }
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '4548:4581');
        return diff.length ? diff : false;
    };
    __$coverCall('src/javascript/core/utils/Basic.js', '4783:4997');
    var arrayIntersect = function (array1, array2) {
        __$coverCall('src/javascript/core/utils/Basic.js', '4833:4848');
        var result = [];
        __$coverCall('src/javascript/core/utils/Basic.js', '4852:4953');
        each(array1, function (item) {
            __$coverCall('src/javascript/core/utils/Basic.js', '4885:4947');
            if (inArray(item, array2) !== -1) {
                __$coverCall('src/javascript/core/utils/Basic.js', '4925:4942');
                result.push(item);
            }
        });
        __$coverCall('src/javascript/core/utils/Basic.js', '4957:4993');
        return result.length ? result : null;
    };
    __$coverCall('src/javascript/core/utils/Basic.js', '5172:5300');
    var toArray = function (obj) {
        __$coverCall('src/javascript/core/utils/Basic.js', '5204:5219');
        var i, arr = [];
        __$coverCall('src/javascript/core/utils/Basic.js', '5224:5281');
        for (i = 0; i < obj.length; i++) {
            __$coverCall('src/javascript/core/utils/Basic.js', '5262:5277');
            arr[i] = obj[i];
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '5286:5296');
        return arr;
    };
    __$coverCall('src/javascript/core/utils/Basic.js', '5870:6168');
    var guid = function () {
            __$coverCall('src/javascript/core/utils/Basic.js', '5897:5912');
            var counter = 0;
            __$coverCall('src/javascript/core/utils/Basic.js', '5919:6161');
            return function (prefix) {
                __$coverCall('src/javascript/core/utils/Basic.js', '5948:5995');
                var guid = new Date().getTime().toString(32), i;
                __$coverCall('src/javascript/core/utils/Basic.js', '6001:6090');
                for (i = 0; i < 5; i++) {
                    __$coverCall('src/javascript/core/utils/Basic.js', '6031:6085');
                    guid += Math.floor(Math.random() * 65535).toString(32);
                }
                __$coverCall('src/javascript/core/utils/Basic.js', '6099:6156');
                return (prefix || 'o_') + guid + (counter++).toString(32);
            };
        }();
    __$coverCall('src/javascript/core/utils/Basic.js', '6285:6470');
    var trim = function (str) {
        __$coverCall('src/javascript/core/utils/Basic.js', '6314:6343');
        if (!str) {
            __$coverCall('src/javascript/core/utils/Basic.js', '6329:6339');
            return str;
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '6347:6466');
        return String.prototype.trim ? String.prototype.trim.call(str) : str.toString().replace(/^\s*/, '').replace(/\s*$/, '');
    };
    __$coverCall('src/javascript/core/utils/Basic.js', '6712:7103');
    var parseSizeStr = function (size) {
        __$coverCall('src/javascript/core/utils/Basic.js', '6750:6801');
        if (typeof size !== 'string') {
            __$coverCall('src/javascript/core/utils/Basic.js', '6786:6797');
            return size;
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '6808:6902');
        var muls = {
                t: 1099511627776,
                g: 1073741824,
                m: 1048576,
                k: 1024
            }, mul;
        __$coverCall('src/javascript/core/utils/Basic.js', '6907:6985');
        size = /^([0-9]+)([mgk]?)$/.exec(size.toLowerCase().replace(/[^0-9mkg]/g, ''));
        __$coverCall('src/javascript/core/utils/Basic.js', '6989:7002');
        mul = size[2];
        __$coverCall('src/javascript/core/utils/Basic.js', '7006:7021');
        size = +size[1];
        __$coverCall('src/javascript/core/utils/Basic.js', '7028:7084');
        if (muls.hasOwnProperty(mul)) {
            __$coverCall('src/javascript/core/utils/Basic.js', '7063:7080');
            size *= muls[mul];
        }
        __$coverCall('src/javascript/core/utils/Basic.js', '7088:7099');
        return size;
    };
    __$coverCall('src/javascript/core/utils/Basic.js', '7109:7373');
    return {
        guid: guid,
        typeOf: typeOf,
        extend: extend,
        each: each,
        isEmptyObj: isEmptyObj,
        inSeries: inSeries,
        inArray: inArray,
        arrayDiff: arrayDiff,
        arrayIntersect: arrayIntersect,
        toArray: toArray,
        trim: trim,
        parseSizeStr: parseSizeStr
    };
});

// Included from: src/javascript/core/I18n.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/core/I18n.js", "/**\n * I18n.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/core/I18n\", [\n\t\"moxie/core/utils/Basic\"\n], function(Basic) {\n\tvar i18n = {};\n\n\treturn {\n\t\t/**\n\t\t * Extends the language pack object with new items.\n\t\t *\n\t\t * @param {Object} pack Language pack items to add.\n\t\t * @return {Object} Extended language pack object.\n\t\t */\n\t\taddI18n: function(pack) {\n\t\t\treturn Basic.extend(i18n, pack);\n\t\t},\n\n\t\t/**\n\t\t * Translates the specified string by checking for the english string in the language pack lookup.\n\t\t *\n\t\t * @param {String} str String to look for.\n\t\t * @return {String} Translated string or the input string if it wasn't found.\n\t\t */\n\t\ttranslate: function(str) {\n\t\t\treturn i18n[str] || str;\n\t\t},\n\n\t\t/**\n\t\t * Shortcut for translate function\n\t\t *\n\t\t * @param {String} str String to look for.\n\t\t * @return {String} Translated string or the input string if it wasn't found.\n\t\t */\n\t\t_: function(str) {\n\t\t\treturn this.translate(str);\n\t\t},\n\n\t\t/**\n\t\t * Pseudo sprintf implementation - simple way to replace tokens with specified values.\n\t\t *\n\t\t * @param {String} str String with tokens\n\t\t * @return {String} String with replaced tokens\n\t\t */\n\t\tsprintf: function(str) {\n\t\t\tvar args = [].slice.call(arguments, 1);\n\n\t\t\treturn str.replace(/%[a-z]/g, function() {\n\t\t\t\treturn args.shift() || '';\n\t\t\t});\n\t\t}\n\t};\n});");
__$coverInitRange("src/javascript/core/I18n.js", "195:1453");
__$coverInitRange("src/javascript/core/I18n.js", "271:284");
__$coverInitRange("src/javascript/core/I18n.js", "288:1449");
__$coverInitRange("src/javascript/core/I18n.js", "506:537");
__$coverInitRange("src/javascript/core/I18n.js", "820:843");
__$coverInitRange("src/javascript/core/I18n.js", "1054:1080");
__$coverInitRange("src/javascript/core/I18n.js", "1318:1356");
__$coverInitRange("src/javascript/core/I18n.js", "1362:1441");
__$coverInitRange("src/javascript/core/I18n.js", "1409:1434");
__$coverCall('src/javascript/core/I18n.js', '195:1453');
define('moxie/core/I18n', ['moxie/core/utils/Basic'], function (Basic) {
    __$coverCall('src/javascript/core/I18n.js', '271:284');
    var i18n = {};
    __$coverCall('src/javascript/core/I18n.js', '288:1449');
    return {
        addI18n: function (pack) {
            __$coverCall('src/javascript/core/I18n.js', '506:537');
            return Basic.extend(i18n, pack);
        },
        translate: function (str) {
            __$coverCall('src/javascript/core/I18n.js', '820:843');
            return i18n[str] || str;
        },
        _: function (str) {
            __$coverCall('src/javascript/core/I18n.js', '1054:1080');
            return this.translate(str);
        },
        sprintf: function (str) {
            __$coverCall('src/javascript/core/I18n.js', '1318:1356');
            var args = [].slice.call(arguments, 1);
            __$coverCall('src/javascript/core/I18n.js', '1362:1441');
            return str.replace(/%[a-z]/g, function () {
                __$coverCall('src/javascript/core/I18n.js', '1409:1434');
                return args.shift() || '';
            });
        }
    };
});

// Included from: src/javascript/core/utils/Mime.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/core/utils/Mime.js", "/**\n * Mime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/core/utils/Mime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/I18n\"\n], function(Basic, I18n) {\n\t\n\tvar mimeData = \"\" +\n\t\t\"application/msword,doc dot,\" +\n\t\t\"application/pdf,pdf,\" +\n\t\t\"application/pgp-signature,pgp,\" +\n\t\t\"application/postscript,ps ai eps,\" +\n\t\t\"application/rtf,rtf,\" +\n\t\t\"application/vnd.ms-excel,xls xlb,\" +\n\t\t\"application/vnd.ms-powerpoint,ppt pps pot,\" +\n\t\t\"application/zip,zip,\" +\n\t\t\"application/x-shockwave-flash,swf swfl,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.presentationml.template,potx,\" +\n\t\t\"application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,\" +\n\t\t\"application/x-javascript,js,\" +\n\t\t\"application/json,json,\" +\n\t\t\"audio/mpeg,mp3 mpga mpega mp2,\" +\n\t\t\"audio/x-wav,wav,\" +\n\t\t\"audio/mp4,m4a,\" +\n\t\t\"audio/ogg,oga ogg,\" +\n\t\t\"audio/aiff,aiff aif,\" +\n\t\t\"audio/flac,flac,\" +\n\t\t\"audio/aac,aac,\" +\n\t\t\"audio/ac3,ac3,\" +\n\t\t\"audio/x-ms-wma,wma,\" +\n\t\t\"image/bmp,bmp,\" +\n\t\t\"image/gif,gif,\" +\n\t\t\"image/jpeg,jpg jpeg jpe,\" +\n\t\t\"image/photoshop,psd,\" +\n\t\t\"image/png,png,\" +\n\t\t\"image/svg+xml,svg svgz,\" +\n\t\t\"image/tiff,tiff tif,\" +\n\t\t\"text/plain,asc txt text diff log,\" +\n\t\t\"text/html,htm html xhtml,\" +\n\t\t\"text/css,css,\" +\n\t\t\"text/csv,csv,\" +\n\t\t\"text/rtf,rtf,\" +\n\t\t\"video/mpeg,mpeg mpg mpe m2v,\" +\n\t\t\"video/quicktime,qt mov,\" +\n\t\t\"video/mp4,mp4,\" +\n\t\t\"video/x-m4v,m4v,\" +\n\t\t\"video/x-flv,flv,\" +\n\t\t\"video/x-ms-wmv,wmv,\" +\n\t\t\"video/avi,avi,\" +\n\t\t\"video/webm,webm,\" +\n\t\t\"video/3gpp,3gpp 3gp,\" +\n\t\t\"video/3gpp2,3g2,\" +\n\t\t\"video/vnd.rn-realvideo,rv,\" +\n\t\t\"video/ogg,ogv,\" + \n\t\t\"video/x-matroska,mkv,\" +\n\t\t\"application/vnd.oasis.opendocument.formula-template,otf,\" +\n\t\t\"application/octet-stream,exe\";\n\t\n\t\n\tvar Mime = {\n\n\t\tmimes: {},\n\n\t\textensions: {},\n\n\t\t// Parses the default mime types string into a mimes and extensions lookup maps\n\t\taddMimeType: function (mimeData) {\n\t\t\tvar items = mimeData.split(/,/), i, ii, ext;\n\t\t\t\n\t\t\tfor (i = 0; i < items.length; i += 2) {\n\t\t\t\text = items[i + 1].split(/ /);\n\n\t\t\t\t// extension to mime lookup\n\t\t\t\tfor (ii = 0; ii < ext.length; ii++) {\n\t\t\t\t\tthis.mimes[ext[ii]] = items[i];\n\t\t\t\t}\n\t\t\t\t// mime to extension lookup\n\t\t\t\tthis.extensions[items[i]] = ext;\n\t\t\t}\n\t\t},\n\n\n\t\textList2mimes: function (filters, addMissingExtensions) {\n\t\t\tvar self = this, ext, i, ii, type, mimes = [];\n\t\t\t\n\t\t\t// convert extensions to mime types list\n\t\t\tfor (i = 0; i < filters.length; i++) {\n\t\t\t\text = filters[i].extensions.split(/\\s*,\\s*/);\n\n\t\t\t\tfor (ii = 0; ii < ext.length; ii++) {\n\t\t\t\t\t\n\t\t\t\t\t// if there's an asterisk in the list, then accept attribute is not required\n\t\t\t\t\tif (ext[ii] === '*') {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttype = self.mimes[ext[ii]];\n\t\t\t\t\tif (!type) {\n\t\t\t\t\t\tif (addMissingExtensions && /^\\w+$/.test(ext[ii])) {\n\t\t\t\t\t\t\tmimes.push('.' + ext[ii]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn []; // accept all\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (Basic.inArray(type, mimes) === -1) {\n\t\t\t\t\t\tmimes.push(type);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn mimes;\n\t\t},\n\n\n\t\tmimes2exts: function(mimes) {\n\t\t\tvar self = this, exts = [];\n\t\t\t\n\t\t\tBasic.each(mimes, function(mime) {\n\t\t\t\tif (mime === '*') {\n\t\t\t\t\texts = [];\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// check if this thing looks like mime type\n\t\t\t\tvar m = mime.match(/^(\\w+)\\/(\\*|\\w+)$/);\n\t\t\t\tif (m) {\n\t\t\t\t\tif (m[2] === '*') { \n\t\t\t\t\t\t// wildcard mime type detected\n\t\t\t\t\t\tBasic.each(self.extensions, function(arr, mime) {\n\t\t\t\t\t\t\tif ((new RegExp('^' + m[1] + '/')).test(mime)) {\n\t\t\t\t\t\t\t\t[].push.apply(exts, self.extensions[mime]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (self.extensions[mime]) {\n\t\t\t\t\t\t[].push.apply(exts, self.extensions[mime]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn exts;\n\t\t},\n\n\n\t\tmimes2extList: function(mimes) {\n\t\t\tvar accept = [], exts = [];\n\n\t\t\tif (Basic.typeOf(mimes) === 'string') {\n\t\t\t\tmimes = Basic.trim(mimes).split(/\\s*,\\s*/);\n\t\t\t}\n\n\t\t\texts = this.mimes2exts(mimes);\n\t\t\t\n\t\t\taccept.push({\n\t\t\t\ttitle: I18n.translate('Files'),\n\t\t\t\textensions: exts.length ? exts.join(',') : '*'\n\t\t\t});\n\t\t\t\n\t\t\t// save original mimes string\n\t\t\taccept.mimes = mimes;\n\n\t\t\treturn accept;\n\t\t},\n\n\n\t\tgetFileExtension: function(fileName) {\n\t\t\tvar matches = fileName && fileName.match(/\\.([^.]+)$/);\n\t\t\tif (matches) {\n\t\t\t\treturn matches[1].toLowerCase();\n\t\t\t}\n\t\t\treturn '';\n\t\t},\n\n\t\tgetFileMime: function(fileName) {\n\t\t\treturn this.mimes[this.getFileExtension(fileName)] || '';\n\t\t}\n\t};\n\n\tMime.addMimeType(mimeData);\n\n\treturn Mime;\n});\n");
__$coverInitRange("src/javascript/core/utils/Mime.js", "195:4826");
__$coverInitRange("src/javascript/core/utils/Mime.js", "305:2177");
__$coverInitRange("src/javascript/core/utils/Mime.js", "2184:4777");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4781:4807");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4811:4822");
__$coverInitRange("src/javascript/core/utils/Mime.js", "2353:2396");
__$coverInitRange("src/javascript/core/utils/Mime.js", "2405:2670");
__$coverInitRange("src/javascript/core/utils/Mime.js", "2449:2478");
__$coverInitRange("src/javascript/core/utils/Mime.js", "2517:2596");
__$coverInitRange("src/javascript/core/utils/Mime.js", "2634:2665");
__$coverInitRange("src/javascript/core/utils/Mime.js", "2560:2590");
__$coverInitRange("src/javascript/core/utils/Mime.js", "2742:2787");
__$coverInitRange("src/javascript/core/utils/Mime.js", "2840:3410");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3415:3427");
__$coverInitRange("src/javascript/core/utils/Mime.js", "2883:2927");
__$coverInitRange("src/javascript/core/utils/Mime.js", "2934:3405");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3065:3110");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3123:3149");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3156:3399");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3094:3103");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3175:3315");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3235:3260");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3284:3293");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3376:3392");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3471:3497");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3506:4068");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4073:4084");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3545:3604");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3659:3698");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3704:4061");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3570:3579");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3586:3598");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3718:4055");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3782:3957");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3839:3947");
__$coverInitRange("src/javascript/core/utils/Mime.js", "3896:3938");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4006:4048");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4131:4157");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4163:4254");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4260:4289");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4298:4404");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4446:4466");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4472:4485");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4207:4249");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4538:4592");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4597:4652");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4657:4666");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4616:4647");
__$coverInitRange("src/javascript/core/utils/Mime.js", "4713:4769");
__$coverCall('src/javascript/core/utils/Mime.js', '195:4826');
define('moxie/core/utils/Mime', [
    'moxie/core/utils/Basic',
    'moxie/core/I18n'
], function (Basic, I18n) {
    __$coverCall('src/javascript/core/utils/Mime.js', '305:2177');
    var mimeData = '' + 'application/msword,doc dot,' + 'application/pdf,pdf,' + 'application/pgp-signature,pgp,' + 'application/postscript,ps ai eps,' + 'application/rtf,rtf,' + 'application/vnd.ms-excel,xls xlb,' + 'application/vnd.ms-powerpoint,ppt pps pot,' + 'application/zip,zip,' + 'application/x-shockwave-flash,swf swfl,' + 'application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,' + 'application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,' + 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,' + 'application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,' + 'application/vnd.openxmlformats-officedocument.presentationml.template,potx,' + 'application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,' + 'application/x-javascript,js,' + 'application/json,json,' + 'audio/mpeg,mp3 mpga mpega mp2,' + 'audio/x-wav,wav,' + 'audio/mp4,m4a,' + 'audio/ogg,oga ogg,' + 'audio/aiff,aiff aif,' + 'audio/flac,flac,' + 'audio/aac,aac,' + 'audio/ac3,ac3,' + 'audio/x-ms-wma,wma,' + 'image/bmp,bmp,' + 'image/gif,gif,' + 'image/jpeg,jpg jpeg jpe,' + 'image/photoshop,psd,' + 'image/png,png,' + 'image/svg+xml,svg svgz,' + 'image/tiff,tiff tif,' + 'text/plain,asc txt text diff log,' + 'text/html,htm html xhtml,' + 'text/css,css,' + 'text/csv,csv,' + 'text/rtf,rtf,' + 'video/mpeg,mpeg mpg mpe m2v,' + 'video/quicktime,qt mov,' + 'video/mp4,mp4,' + 'video/x-m4v,m4v,' + 'video/x-flv,flv,' + 'video/x-ms-wmv,wmv,' + 'video/avi,avi,' + 'video/webm,webm,' + 'video/3gpp,3gpp 3gp,' + 'video/3gpp2,3g2,' + 'video/vnd.rn-realvideo,rv,' + 'video/ogg,ogv,' + 'video/x-matroska,mkv,' + 'application/vnd.oasis.opendocument.formula-template,otf,' + 'application/octet-stream,exe';
    __$coverCall('src/javascript/core/utils/Mime.js', '2184:4777');
    var Mime = {
            mimes: {},
            extensions: {},
            addMimeType: function (mimeData) {
                __$coverCall('src/javascript/core/utils/Mime.js', '2353:2396');
                var items = mimeData.split(/,/), i, ii, ext;
                __$coverCall('src/javascript/core/utils/Mime.js', '2405:2670');
                for (i = 0; i < items.length; i += 2) {
                    __$coverCall('src/javascript/core/utils/Mime.js', '2449:2478');
                    ext = items[i + 1].split(/ /);
                    __$coverCall('src/javascript/core/utils/Mime.js', '2517:2596');
                    for (ii = 0; ii < ext.length; ii++) {
                        __$coverCall('src/javascript/core/utils/Mime.js', '2560:2590');
                        this.mimes[ext[ii]] = items[i];
                    }
                    __$coverCall('src/javascript/core/utils/Mime.js', '2634:2665');
                    this.extensions[items[i]] = ext;
                }
            },
            extList2mimes: function (filters, addMissingExtensions) {
                __$coverCall('src/javascript/core/utils/Mime.js', '2742:2787');
                var self = this, ext, i, ii, type, mimes = [];
                __$coverCall('src/javascript/core/utils/Mime.js', '2840:3410');
                for (i = 0; i < filters.length; i++) {
                    __$coverCall('src/javascript/core/utils/Mime.js', '2883:2927');
                    ext = filters[i].extensions.split(/\s*,\s*/);
                    __$coverCall('src/javascript/core/utils/Mime.js', '2934:3405');
                    for (ii = 0; ii < ext.length; ii++) {
                        __$coverCall('src/javascript/core/utils/Mime.js', '3065:3110');
                        if (ext[ii] === '*') {
                            __$coverCall('src/javascript/core/utils/Mime.js', '3094:3103');
                            return [];
                        }
                        __$coverCall('src/javascript/core/utils/Mime.js', '3123:3149');
                        type = self.mimes[ext[ii]];
                        __$coverCall('src/javascript/core/utils/Mime.js', '3156:3399');
                        if (!type) {
                            __$coverCall('src/javascript/core/utils/Mime.js', '3175:3315');
                            if (addMissingExtensions && /^\w+$/.test(ext[ii])) {
                                __$coverCall('src/javascript/core/utils/Mime.js', '3235:3260');
                                mimes.push('.' + ext[ii]);
                            } else {
                                __$coverCall('src/javascript/core/utils/Mime.js', '3284:3293');
                                return [];
                            }
                        } else if (Basic.inArray(type, mimes) === -1) {
                            __$coverCall('src/javascript/core/utils/Mime.js', '3376:3392');
                            mimes.push(type);
                        }
                    }
                }
                __$coverCall('src/javascript/core/utils/Mime.js', '3415:3427');
                return mimes;
            },
            mimes2exts: function (mimes) {
                __$coverCall('src/javascript/core/utils/Mime.js', '3471:3497');
                var self = this, exts = [];
                __$coverCall('src/javascript/core/utils/Mime.js', '3506:4068');
                Basic.each(mimes, function (mime) {
                    __$coverCall('src/javascript/core/utils/Mime.js', '3545:3604');
                    if (mime === '*') {
                        __$coverCall('src/javascript/core/utils/Mime.js', '3570:3579');
                        exts = [];
                        __$coverCall('src/javascript/core/utils/Mime.js', '3586:3598');
                        return false;
                    }
                    __$coverCall('src/javascript/core/utils/Mime.js', '3659:3698');
                    var m = mime.match(/^(\w+)\/(\*|\w+)$/);
                    __$coverCall('src/javascript/core/utils/Mime.js', '3704:4061');
                    if (m) {
                        __$coverCall('src/javascript/core/utils/Mime.js', '3718:4055');
                        if (m[2] === '*') {
                            __$coverCall('src/javascript/core/utils/Mime.js', '3782:3957');
                            Basic.each(self.extensions, function (arr, mime) {
                                __$coverCall('src/javascript/core/utils/Mime.js', '3839:3947');
                                if (new RegExp('^' + m[1] + '/').test(mime)) {
                                    __$coverCall('src/javascript/core/utils/Mime.js', '3896:3938');
                                    [].push.apply(exts, self.extensions[mime]);
                                }
                            });
                        } else if (self.extensions[mime]) {
                            __$coverCall('src/javascript/core/utils/Mime.js', '4006:4048');
                            [].push.apply(exts, self.extensions[mime]);
                        }
                    }
                });
                __$coverCall('src/javascript/core/utils/Mime.js', '4073:4084');
                return exts;
            },
            mimes2extList: function (mimes) {
                __$coverCall('src/javascript/core/utils/Mime.js', '4131:4157');
                var accept = [], exts = [];
                __$coverCall('src/javascript/core/utils/Mime.js', '4163:4254');
                if (Basic.typeOf(mimes) === 'string') {
                    __$coverCall('src/javascript/core/utils/Mime.js', '4207:4249');
                    mimes = Basic.trim(mimes).split(/\s*,\s*/);
                }
                __$coverCall('src/javascript/core/utils/Mime.js', '4260:4289');
                exts = this.mimes2exts(mimes);
                __$coverCall('src/javascript/core/utils/Mime.js', '4298:4404');
                accept.push({
                    title: I18n.translate('Files'),
                    extensions: exts.length ? exts.join(',') : '*'
                });
                __$coverCall('src/javascript/core/utils/Mime.js', '4446:4466');
                accept.mimes = mimes;
                __$coverCall('src/javascript/core/utils/Mime.js', '4472:4485');
                return accept;
            },
            getFileExtension: function (fileName) {
                __$coverCall('src/javascript/core/utils/Mime.js', '4538:4592');
                var matches = fileName && fileName.match(/\.([^.]+)$/);
                __$coverCall('src/javascript/core/utils/Mime.js', '4597:4652');
                if (matches) {
                    __$coverCall('src/javascript/core/utils/Mime.js', '4616:4647');
                    return matches[1].toLowerCase();
                }
                __$coverCall('src/javascript/core/utils/Mime.js', '4657:4666');
                return '';
            },
            getFileMime: function (fileName) {
                __$coverCall('src/javascript/core/utils/Mime.js', '4713:4769');
                return this.mimes[this.getFileExtension(fileName)] || '';
            }
        };
    __$coverCall('src/javascript/core/utils/Mime.js', '4781:4807');
    Mime.addMimeType(mimeData);
    __$coverCall('src/javascript/core/utils/Mime.js', '4811:4822');
    return Mime;
});

// Included from: src/javascript/core/utils/Env.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/core/utils/Env.js", "/**\n * Env.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/core/utils/Env\", [\n\t\"moxie/core/utils/Basic\"\n], function(Basic) {\n\t\n\tvar browser = [{\n\t\t\ts1: navigator.userAgent,\n\t\t\ts2: \"Android\",\n\t\t\tid: \"Android Browser\", // default or Dolphin\n\t\t\tsv: \"Version\" \n\t\t},{\n\t\t\ts1: navigator.userAgent, // string\n\t\t\ts2: \"Chrome\", // substring\n\t\t\tid: \"Chrome\" // identity\n\t\t},{\n\t\t\ts1: navigator.vendor,\n\t\t\ts2: \"Apple\",\n\t\t\tid: \"Safari\",\n\t\t\tsv: \"Version\" // version\n\t\t},{\n\t\t\tprop: window.opera && window.opera.buildNumber,\n\t\t\tid: \"Opera\",\n\t\t\tsv: \"Version\"\n\t\t},{\n\t\t\ts1: navigator.vendor,\n\t\t\ts2: \"KDE\",\n\t\t\tid: \"Konqueror\"\n\t\t},{\n\t\t\ts1: navigator.userAgent,\n\t\t\ts2: \"Firefox\",\n\t\t\tid: \"Firefox\"\n\t\t},{\n\t\t\ts1: navigator.vendor,\n\t\t\ts2: \"Camino\",\n\t\t\tid: \"Camino\"\n\t\t},{\n\t\t\t// for newer Netscapes (6+)\n\t\t\ts1: navigator.userAgent,\n\t\t\ts2: \"Netscape\",\n\t\t\tid: \"Netscape\"\n\t\t},{\n\t\t\ts1: navigator.userAgent,\n\t\t\ts2: \"MSIE\",\n\t\t\tid: \"IE\",\n\t\t\tsv: \"MSIE\"\n\t\t},{\n\t\t\ts1: navigator.userAgent,\n\t\t\ts2: \"Trident\",\n\t\t\tid: \"IE\",\n\t\t\tsv: \"rv\"\n\t\t}, {\n\t\t\ts1: navigator.userAgent,\n\t\t\ts2: \"Gecko\",\n\t\t\tid: \"Mozilla\",\n\t\t\tsv: \"rv\"\n\t\t}],\n\n\t\tos = [{\n\t\t\ts1: navigator.platform,\n\t\t\ts2: \"Win\",\n\t\t\tid: \"Windows\"\n\t\t},{\n\t\t\ts1: navigator.platform,\n\t\t\ts2: \"Mac\",\n\t\t\tid: \"Mac\"\n\t\t},{\n\t\t\ts1: navigator.userAgent,\n\t\t\ts2: \"iPhone\",\n\t\t\tid: \"iOS\"\n\t\t},{\n\t\t\ts1: navigator.userAgent,\n\t\t\ts2: \"iPad\",\n\t\t\tid: \"iOS\"\n\t\t},{\n\t\t\ts1: navigator.userAgent,\n\t\t\ts2: \"Android\",\n\t\t\tid: \"Android\"\n\t\t},{\n\t\t\ts1: navigator.platform,\n\t\t\ts2: \"Linux\",\n\t\t\tid: \"Linux\"\n\t\t}]\n\t\t, version;\n\n\tfunction getStr(data) {\n\t\tvar str, prop;\n\t\t\n\t\tfor (var i = 0; i < data.length; i++)\t{\n\t\t\tstr = data[i].s1;\n\t\t\tprop = data[i].prop;\n\t\t\tversion = data[i].sv || data[i].id;\n\t\t\t\n\t\t\tif (str) {\n\t\t\t\tif (str.indexOf(data[i].s2) != -1) {\n\t\t\t\t\treturn data[i].id;\n\t\t\t\t}\n\t\t\t} else if (prop) {\n\t\t\t\treturn data[i].id;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\tfunction getVer(str) {\n\t\tvar index = str.indexOf(version);\n\n\t\tif (index == -1) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn parseFloat(str.substring(index + version.length + 1));\n\t}\n\n\tvar can = (function() {\n\t\tvar caps = {\n\t\t\t\tdefine_property: (function() {\n\t\t\t\t\t/* // currently too much extra code required, not exactly worth it\n\t\t\t\t\ttry { // as of IE8, getters/setters are supported only on DOM elements\n\t\t\t\t\t\tvar obj = {};\n\t\t\t\t\t\tif (Object.defineProperty) {\n\t\t\t\t\t\t\tObject.defineProperty(obj, 'prop', {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(ex) {}\n\n\t\t\t\t\tif (Object.prototype.__defineGetter__ && Object.prototype.__defineSetter__) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}*/\n\t\t\t\t\treturn false;\n\t\t\t\t}()),\n\n\t\t\t\tcreate_canvas: (function() {\n\t\t\t\t\t// On the S60 and BB Storm, getContext exists, but always returns undefined\n\t\t\t\t\t// so we actually have to call getContext() to verify\n\t\t\t\t\t// github.com/Modernizr/Modernizr/issues/issue/97/\n\t\t\t\t\tvar el = document.createElement('canvas');\n\t\t\t\t\treturn !!(el.getContext && el.getContext('2d'));\n\t\t\t\t}()),\n\n\t\t\t\treturn_response_type: function(responseType) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (Basic.inArray(responseType, ['', 'text', 'document']) !== -1) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} else if (window.XMLHttpRequest) {\n\t\t\t\t\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\t\t\t\t\txhr.open('get', '/'); // otherwise Gecko throws an exception\n\t\t\t\t\t\t\tif ('responseType' in xhr) {\n\t\t\t\t\t\t\t\txhr.responseType = responseType;\n\t\t\t\t\t\t\t\t// as of 23.0.1271.64, Chrome switched from throwing exception to merely logging it to the console (why? o why?)\n\t\t\t\t\t\t\t\tif (xhr.responseType !== responseType) {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (ex) {}\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\t// ideas for this heavily come from Modernizr (http://modernizr.com/)\n\t\t\t\tuse_data_uri: (function() {\n\t\t\t\t\tvar du = new Image();\n\n\t\t\t\t\tdu.onload = function() {\n\t\t\t\t\t\tcaps.use_data_uri = (du.width === 1 && du.height === 1);\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tdu.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\";\n\t\t\t\t\t}, 1);\n\t\t\t\t\treturn false;\n\t\t\t\t}()),\n\n\t\t\t\tuse_data_uri_over32kb: function() { // IE8\n\t\t\t\t\treturn caps.use_data_uri && (Env.browser !== 'IE' || Env.version >= 9);\n\t\t\t\t},\n\n\t\t\t\tuse_data_uri_of: function(bytes) {\n\t\t\t\t\treturn (caps.use_data_uri && bytes < 33000 || caps.use_data_uri_over32kb());\n\t\t\t\t},\n\n\t\t\t\tuse_fileinput: function() {\n\t\t\t\t\tvar el = document.createElement('input');\n\t\t\t\t\tel.setAttribute('type', 'file');\n\t\t\t\t\treturn !el.disabled;\n\t\t\t\t}\n\t\t\t};\n\n\t\treturn function(cap) {\n\t\t\tvar args = [].slice.call(arguments);\n\t\t\targs.shift(); // shift of cap\n\t\t\treturn Basic.typeOf(caps[cap]) === 'function' ? caps[cap].apply(this, args) : !!caps[cap];\n\t\t};\n\t}());\n\n\tvar Env = {\n\t\tcan: can,\n\t\tbrowser: getStr(browser),\n\t\tversion: getVer(navigator.userAgent) || getVer(navigator.appVersion),\n\t\tOS: getStr(os),\n\t\tswf_url: \"../flash/Moxie.swf\",\n\t\txap_url: \"../silverlight/Moxie.xap\",\n\t\tglobal_event_dispatcher: \"moxie.core.EventTarget.instance.dispatchEvent\"\n\t};\n\n\treturn Env;\n});\n");
__$coverInitRange("src/javascript/core/utils/Env.js", "194:5057");
__$coverInitRange("src/javascript/core/utils/Env.js", "277:1633");
__$coverInitRange("src/javascript/core/utils/Env.js", "1637:1951");
__$coverInitRange("src/javascript/core/utils/Env.js", "1958:2120");
__$coverInitRange("src/javascript/core/utils/Env.js", "2124:4744");
__$coverInitRange("src/javascript/core/utils/Env.js", "4748:5039");
__$coverInitRange("src/javascript/core/utils/Env.js", "5043:5053");
__$coverInitRange("src/javascript/core/utils/Env.js", "1663:1676");
__$coverInitRange("src/javascript/core/utils/Env.js", "1683:1948");
__$coverInitRange("src/javascript/core/utils/Env.js", "1726:1742");
__$coverInitRange("src/javascript/core/utils/Env.js", "1747:1766");
__$coverInitRange("src/javascript/core/utils/Env.js", "1771:1805");
__$coverInitRange("src/javascript/core/utils/Env.js", "1814:1944");
__$coverInitRange("src/javascript/core/utils/Env.js", "1829:1894");
__$coverInitRange("src/javascript/core/utils/Env.js", "1871:1888");
__$coverInitRange("src/javascript/core/utils/Env.js", "1922:1939");
__$coverInitRange("src/javascript/core/utils/Env.js", "1983:2015");
__$coverInitRange("src/javascript/core/utils/Env.js", "2020:2052");
__$coverInitRange("src/javascript/core/utils/Env.js", "2057:2117");
__$coverInitRange("src/javascript/core/utils/Env.js", "2042:2048");
__$coverInitRange("src/javascript/core/utils/Env.js", "2150:4539");
__$coverInitRange("src/javascript/core/utils/Env.js", "4544:4737");
__$coverInitRange("src/javascript/core/utils/Env.js", "2674:2686");
__$coverInitRange("src/javascript/core/utils/Env.js", "2933:2974");
__$coverInitRange("src/javascript/core/utils/Env.js", "2981:3028");
__$coverInitRange("src/javascript/core/utils/Env.js", "3097:3683");
__$coverInitRange("src/javascript/core/utils/Env.js", "3690:3702");
__$coverInitRange("src/javascript/core/utils/Env.js", "3109:3662");
__$coverInitRange("src/javascript/core/utils/Env.js", "3184:3195");
__$coverInitRange("src/javascript/core/utils/Env.js", "3246:3276");
__$coverInitRange("src/javascript/core/utils/Env.js", "3285:3305");
__$coverInitRange("src/javascript/core/utils/Env.js", "3353:3654");
__$coverInitRange("src/javascript/core/utils/Env.js", "3390:3421");
__$coverInitRange("src/javascript/core/utils/Env.js", "3552:3624");
__$coverInitRange("src/javascript/core/utils/Env.js", "3634:3645");
__$coverInitRange("src/javascript/core/utils/Env.js", "3602:3614");
__$coverInitRange("src/javascript/core/utils/Env.js", "3823:3843");
__$coverInitRange("src/javascript/core/utils/Env.js", "3851:3945");
__$coverInitRange("src/javascript/core/utils/Env.js", "3958:4093");
__$coverInitRange("src/javascript/core/utils/Env.js", "4100:4112");
__$coverInitRange("src/javascript/core/utils/Env.js", "3882:3937");
__$coverInitRange("src/javascript/core/utils/Env.js", "3988:4081");
__$coverInitRange("src/javascript/core/utils/Env.js", "4177:4247");
__$coverInitRange("src/javascript/core/utils/Env.js", "4301:4376");
__$coverInitRange("src/javascript/core/utils/Env.js", "4423:4463");
__$coverInitRange("src/javascript/core/utils/Env.js", "4470:4501");
__$coverInitRange("src/javascript/core/utils/Env.js", "4508:4527");
__$coverInitRange("src/javascript/core/utils/Env.js", "4570:4605");
__$coverInitRange("src/javascript/core/utils/Env.js", "4610:4622");
__$coverInitRange("src/javascript/core/utils/Env.js", "4643:4732");
__$coverCall('src/javascript/core/utils/Env.js', '194:5057');
define('moxie/core/utils/Env', ['moxie/core/utils/Basic'], function (Basic) {
    __$coverCall('src/javascript/core/utils/Env.js', '277:1633');
    var browser = [
            {
                s1: navigator.userAgent,
                s2: 'Android',
                id: 'Android Browser',
                sv: 'Version'
            },
            {
                s1: navigator.userAgent,
                s2: 'Chrome',
                id: 'Chrome'
            },
            {
                s1: navigator.vendor,
                s2: 'Apple',
                id: 'Safari',
                sv: 'Version'
            },
            {
                prop: window.opera && window.opera.buildNumber,
                id: 'Opera',
                sv: 'Version'
            },
            {
                s1: navigator.vendor,
                s2: 'KDE',
                id: 'Konqueror'
            },
            {
                s1: navigator.userAgent,
                s2: 'Firefox',
                id: 'Firefox'
            },
            {
                s1: navigator.vendor,
                s2: 'Camino',
                id: 'Camino'
            },
            {
                s1: navigator.userAgent,
                s2: 'Netscape',
                id: 'Netscape'
            },
            {
                s1: navigator.userAgent,
                s2: 'MSIE',
                id: 'IE',
                sv: 'MSIE'
            },
            {
                s1: navigator.userAgent,
                s2: 'Trident',
                id: 'IE',
                sv: 'rv'
            },
            {
                s1: navigator.userAgent,
                s2: 'Gecko',
                id: 'Mozilla',
                sv: 'rv'
            }
        ], os = [
            {
                s1: navigator.platform,
                s2: 'Win',
                id: 'Windows'
            },
            {
                s1: navigator.platform,
                s2: 'Mac',
                id: 'Mac'
            },
            {
                s1: navigator.userAgent,
                s2: 'iPhone',
                id: 'iOS'
            },
            {
                s1: navigator.userAgent,
                s2: 'iPad',
                id: 'iOS'
            },
            {
                s1: navigator.userAgent,
                s2: 'Android',
                id: 'Android'
            },
            {
                s1: navigator.platform,
                s2: 'Linux',
                id: 'Linux'
            }
        ], version;
    __$coverCall('src/javascript/core/utils/Env.js', '1637:1951');
    function getStr(data) {
        __$coverCall('src/javascript/core/utils/Env.js', '1663:1676');
        var str, prop;
        __$coverCall('src/javascript/core/utils/Env.js', '1683:1948');
        for (var i = 0; i < data.length; i++) {
            __$coverCall('src/javascript/core/utils/Env.js', '1726:1742');
            str = data[i].s1;
            __$coverCall('src/javascript/core/utils/Env.js', '1747:1766');
            prop = data[i].prop;
            __$coverCall('src/javascript/core/utils/Env.js', '1771:1805');
            version = data[i].sv || data[i].id;
            __$coverCall('src/javascript/core/utils/Env.js', '1814:1944');
            if (str) {
                __$coverCall('src/javascript/core/utils/Env.js', '1829:1894');
                if (str.indexOf(data[i].s2) != -1) {
                    __$coverCall('src/javascript/core/utils/Env.js', '1871:1888');
                    return data[i].id;
                }
            } else if (prop) {
                __$coverCall('src/javascript/core/utils/Env.js', '1922:1939');
                return data[i].id;
            }
        }
    }
    __$coverCall('src/javascript/core/utils/Env.js', '1958:2120');
    function getVer(str) {
        __$coverCall('src/javascript/core/utils/Env.js', '1983:2015');
        var index = str.indexOf(version);
        __$coverCall('src/javascript/core/utils/Env.js', '2020:2052');
        if (index == -1) {
            __$coverCall('src/javascript/core/utils/Env.js', '2042:2048');
            return;
        }
        __$coverCall('src/javascript/core/utils/Env.js', '2057:2117');
        return parseFloat(str.substring(index + version.length + 1));
    }
    __$coverCall('src/javascript/core/utils/Env.js', '2124:4744');
    var can = function () {
            __$coverCall('src/javascript/core/utils/Env.js', '2150:4539');
            var caps = {
                    define_property: function () {
                        __$coverCall('src/javascript/core/utils/Env.js', '2674:2686');
                        return false;
                    }(),
                    create_canvas: function () {
                        __$coverCall('src/javascript/core/utils/Env.js', '2933:2974');
                        var el = document.createElement('canvas');
                        __$coverCall('src/javascript/core/utils/Env.js', '2981:3028');
                        return !!(el.getContext && el.getContext('2d'));
                    }(),
                    return_response_type: function (responseType) {
                        __$coverCall('src/javascript/core/utils/Env.js', '3097:3683');
                        try {
                            __$coverCall('src/javascript/core/utils/Env.js', '3109:3662');
                            if (Basic.inArray(responseType, [
                                    '',
                                    'text',
                                    'document'
                                ]) !== -1) {
                                __$coverCall('src/javascript/core/utils/Env.js', '3184:3195');
                                return true;
                            } else if (window.XMLHttpRequest) {
                                __$coverCall('src/javascript/core/utils/Env.js', '3246:3276');
                                var xhr = new XMLHttpRequest();
                                __$coverCall('src/javascript/core/utils/Env.js', '3285:3305');
                                xhr.open('get', '/');
                                __$coverCall('src/javascript/core/utils/Env.js', '3353:3654');
                                if ('responseType' in xhr) {
                                    __$coverCall('src/javascript/core/utils/Env.js', '3390:3421');
                                    xhr.responseType = responseType;
                                    __$coverCall('src/javascript/core/utils/Env.js', '3552:3624');
                                    if (xhr.responseType !== responseType) {
                                        __$coverCall('src/javascript/core/utils/Env.js', '3602:3614');
                                        return false;
                                    }
                                    __$coverCall('src/javascript/core/utils/Env.js', '3634:3645');
                                    return true;
                                }
                            }
                        } catch (ex) {
                        }
                        __$coverCall('src/javascript/core/utils/Env.js', '3690:3702');
                        return false;
                    },
                    use_data_uri: function () {
                        __$coverCall('src/javascript/core/utils/Env.js', '3823:3843');
                        var du = new Image();
                        __$coverCall('src/javascript/core/utils/Env.js', '3851:3945');
                        du.onload = function () {
                            __$coverCall('src/javascript/core/utils/Env.js', '3882:3937');
                            caps.use_data_uri = du.width === 1 && du.height === 1;
                        };
                        __$coverCall('src/javascript/core/utils/Env.js', '3958:4093');
                        setTimeout(function () {
                            __$coverCall('src/javascript/core/utils/Env.js', '3988:4081');
                            du.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==';
                        }, 1);
                        __$coverCall('src/javascript/core/utils/Env.js', '4100:4112');
                        return false;
                    }(),
                    use_data_uri_over32kb: function () {
                        __$coverCall('src/javascript/core/utils/Env.js', '4177:4247');
                        return caps.use_data_uri && (Env.browser !== 'IE' || Env.version >= 9);
                    },
                    use_data_uri_of: function (bytes) {
                        __$coverCall('src/javascript/core/utils/Env.js', '4301:4376');
                        return caps.use_data_uri && bytes < 33000 || caps.use_data_uri_over32kb();
                    },
                    use_fileinput: function () {
                        __$coverCall('src/javascript/core/utils/Env.js', '4423:4463');
                        var el = document.createElement('input');
                        __$coverCall('src/javascript/core/utils/Env.js', '4470:4501');
                        el.setAttribute('type', 'file');
                        __$coverCall('src/javascript/core/utils/Env.js', '4508:4527');
                        return !el.disabled;
                    }
                };
            __$coverCall('src/javascript/core/utils/Env.js', '4544:4737');
            return function (cap) {
                __$coverCall('src/javascript/core/utils/Env.js', '4570:4605');
                var args = [].slice.call(arguments);
                __$coverCall('src/javascript/core/utils/Env.js', '4610:4622');
                args.shift();
                __$coverCall('src/javascript/core/utils/Env.js', '4643:4732');
                return Basic.typeOf(caps[cap]) === 'function' ? caps[cap].apply(this, args) : !!caps[cap];
            };
        }();
    __$coverCall('src/javascript/core/utils/Env.js', '4748:5039');
    var Env = {
            can: can,
            browser: getStr(browser),
            version: getVer(navigator.userAgent) || getVer(navigator.appVersion),
            OS: getStr(os),
            swf_url: '../flash/Moxie.swf',
            xap_url: '../silverlight/Moxie.xap',
            global_event_dispatcher: 'moxie.core.EventTarget.instance.dispatchEvent'
        };
    __$coverCall('src/javascript/core/utils/Env.js', '5043:5053');
    return Env;
});

// Included from: src/javascript/core/utils/Dom.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/core/utils/Dom.js", "/**\n * Dom.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Dom', ['moxie/core/utils/Env'], function(Env) {\n\n\t/**\n\tGet DOM Element by it's id.\n\n\t@method get\n\t@for Utils\n\t@param {String} id Identifier of the DOM Element\n\t@return {DOMElement}\n\t*/\n\tvar get = function(id) {\n\t\tif (typeof id !== 'string') {\n\t\t\treturn id;\n\t\t}\n\t\treturn document.getElementById(id);\n\t};\n\n\t/**\n\tChecks if specified DOM element has specified class.\n\n\t@method hasClass\n\t@static\n\t@param {Object} obj DOM element like object to add handler to.\n\t@param {String} name Class name\n\t*/\n\tvar hasClass = function(obj, name) {\n\t\tif (!obj.className) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar regExp = new RegExp(\"(^|\\\\s+)\"+name+\"(\\\\s+|$)\");\n\t\treturn regExp.test(obj.className);\n\t};\n\n\t/**\n\tAdds specified className to specified DOM element.\n\n\t@method addClass\n\t@static\n\t@param {Object} obj DOM element like object to add handler to.\n\t@param {String} name Class name\n\t*/\n\tvar addClass = function(obj, name) {\n\t\tif (!hasClass(obj, name)) {\n\t\t\tobj.className = !obj.className ? name : obj.className.replace(/\\s+$/, '') + ' ' + name;\n\t\t}\n\t};\n\n\t/**\n\tRemoves specified className from specified DOM element.\n\n\t@method removeClass\n\t@static\n\t@param {Object} obj DOM element like object to add handler to.\n\t@param {String} name Class name\n\t*/\n\tvar removeClass = function(obj, name) {\n\t\tif (obj.className) {\n\t\t\tvar regExp = new RegExp(\"(^|\\\\s+)\"+name+\"(\\\\s+|$)\");\n\t\t\tobj.className = obj.className.replace(regExp, function($0, $1, $2) {\n\t\t\t\treturn $1 === ' ' && $2 === ' ' ? ' ' : '';\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\tReturns a given computed style of a DOM element.\n\n\t@method getStyle\n\t@static\n\t@param {Object} obj DOM element like object.\n\t@param {String} name Style you want to get from the DOM element\n\t*/\n\tvar getStyle = function(obj, name) {\n\t\tif (obj.currentStyle) {\n\t\t\treturn obj.currentStyle[name];\n\t\t} else if (window.getComputedStyle) {\n\t\t\treturn window.getComputedStyle(obj, null)[name];\n\t\t}\n\t};\n\n\n\t/**\n\tReturns the absolute x, y position of an Element. The position will be returned in a object with x, y fields.\n\n\t@method getPos\n\t@static\n\t@param {Element} node HTML element or element id to get x, y position from.\n\t@param {Element} root Optional root element to stop calculations at.\n\t@return {object} Absolute position of the specified element object with x, y fields.\n\t*/\n\tvar getPos = function(node, root) {\n\t\tvar x = 0, y = 0, parent, doc = document, nodeRect, rootRect;\n\n\t\tnode = node;\n\t\troot = root || doc.body;\n\n\t\t// Returns the x, y cordinate for an element on IE 6 and IE 7\n\t\tfunction getIEPos(node) {\n\t\t\tvar bodyElm, rect, x = 0, y = 0;\n\n\t\t\tif (node) {\n\t\t\t\trect = node.getBoundingClientRect();\n\t\t\t\tbodyElm = doc.compatMode === \"CSS1Compat\" ? doc.documentElement : doc.body;\n\t\t\t\tx = rect.left + bodyElm.scrollLeft;\n\t\t\t\ty = rect.top + bodyElm.scrollTop;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tx : x,\n\t\t\t\ty : y\n\t\t\t};\n\t\t}\n\n\t\t// Use getBoundingClientRect on IE 6 and IE 7 but not on IE 8 in standards mode\n\t\tif (node && node.getBoundingClientRect && Env.browser === 'IE' && (!doc.documentMode || doc.documentMode < 8)) {\n\t\t\tnodeRect = getIEPos(node);\n\t\t\trootRect = getIEPos(root);\n\n\t\t\treturn {\n\t\t\t\tx : nodeRect.x - rootRect.x,\n\t\t\t\ty : nodeRect.y - rootRect.y\n\t\t\t};\n\t\t}\n\n\t\tparent = node;\n\t\twhile (parent && parent != root && parent.nodeType) {\n\t\t\tx += parent.offsetLeft || 0;\n\t\t\ty += parent.offsetTop || 0;\n\t\t\tparent = parent.offsetParent;\n\t\t}\n\n\t\tparent = node.parentNode;\n\t\twhile (parent && parent != root && parent.nodeType) {\n\t\t\tx -= parent.scrollLeft || 0;\n\t\t\ty -= parent.scrollTop || 0;\n\t\t\tparent = parent.parentNode;\n\t\t}\n\n\t\treturn {\n\t\t\tx : x,\n\t\t\ty : y\n\t\t};\n\t};\n\n\t/**\n\tReturns the size of the specified node in pixels.\n\n\t@method getSize\n\t@static\n\t@param {Node} node Node to get the size of.\n\t@return {Object} Object with a w and h property.\n\t*/\n\tvar getSize = function(node) {\n\t\treturn {\n\t\t\tw : node.offsetWidth || node.clientWidth,\n\t\t\th : node.offsetHeight || node.clientHeight\n\t\t};\n\t};\n\n\treturn {\n\t\tget: get,\n\t\thasClass: hasClass,\n\t\taddClass: addClass,\n\t\tremoveClass: removeClass,\n\t\tgetStyle: getStyle,\n\t\tgetPos: getPos,\n\t\tgetSize: getSize\n\t};\n});\n");
__$coverInitRange("src/javascript/core/utils/Dom.js", "194:4239");
__$coverInitRange("src/javascript/core/utils/Dom.js", "405:520");
__$coverInitRange("src/javascript/core/utils/Dom.js", "712:889");
__$coverInitRange("src/javascript/core/utils/Dom.js", "1079:1243");
__$coverInitRange("src/javascript/core/utils/Dom.js", "1441:1693");
__$coverInitRange("src/javascript/core/utils/Dom.js", "1895:2090");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2474:3751");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3937:4077");
__$coverInitRange("src/javascript/core/utils/Dom.js", "4081:4235");
__$coverInitRange("src/javascript/core/utils/Dom.js", "432:478");
__$coverInitRange("src/javascript/core/utils/Dom.js", "482:516");
__$coverInitRange("src/javascript/core/utils/Dom.js", "465:474");
__$coverInitRange("src/javascript/core/utils/Dom.js", "751:792");
__$coverInitRange("src/javascript/core/utils/Dom.js", "797:848");
__$coverInitRange("src/javascript/core/utils/Dom.js", "852:885");
__$coverInitRange("src/javascript/core/utils/Dom.js", "776:788");
__$coverInitRange("src/javascript/core/utils/Dom.js", "1118:1239");
__$coverInitRange("src/javascript/core/utils/Dom.js", "1149:1235");
__$coverInitRange("src/javascript/core/utils/Dom.js", "1483:1689");
__$coverInitRange("src/javascript/core/utils/Dom.js", "1507:1558");
__$coverInitRange("src/javascript/core/utils/Dom.js", "1563:1685");
__$coverInitRange("src/javascript/core/utils/Dom.js", "1636:1678");
__$coverInitRange("src/javascript/core/utils/Dom.js", "1934:2086");
__$coverInitRange("src/javascript/core/utils/Dom.js", "1961:1990");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2035:2082");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2512:2572");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2577:2588");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2592:2615");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2684:3008");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3095:3354");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3359:3372");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3376:3528");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3533:3557");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3561:3711");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3716:3747");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2713:2744");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2750:2964");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2970:3004");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2766:2801");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2807:2881");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2887:2921");
__$coverInitRange("src/javascript/core/utils/Dom.js", "2927:2959");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3211:3236");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3241:3266");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3272:3350");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3433:3460");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3465:3491");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3496:3524");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3618:3645");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3650:3676");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3681:3707");
__$coverInitRange("src/javascript/core/utils/Dom.js", "3970:4073");
__$coverCall('src/javascript/core/utils/Dom.js', '194:4239');
define('moxie/core/utils/Dom', ['moxie/core/utils/Env'], function (Env) {
    __$coverCall('src/javascript/core/utils/Dom.js', '405:520');
    var get = function (id) {
        __$coverCall('src/javascript/core/utils/Dom.js', '432:478');
        if (typeof id !== 'string') {
            __$coverCall('src/javascript/core/utils/Dom.js', '465:474');
            return id;
        }
        __$coverCall('src/javascript/core/utils/Dom.js', '482:516');
        return document.getElementById(id);
    };
    __$coverCall('src/javascript/core/utils/Dom.js', '712:889');
    var hasClass = function (obj, name) {
        __$coverCall('src/javascript/core/utils/Dom.js', '751:792');
        if (!obj.className) {
            __$coverCall('src/javascript/core/utils/Dom.js', '776:788');
            return false;
        }
        __$coverCall('src/javascript/core/utils/Dom.js', '797:848');
        var regExp = new RegExp('(^|\\s+)' + name + '(\\s+|$)');
        __$coverCall('src/javascript/core/utils/Dom.js', '852:885');
        return regExp.test(obj.className);
    };
    __$coverCall('src/javascript/core/utils/Dom.js', '1079:1243');
    var addClass = function (obj, name) {
        __$coverCall('src/javascript/core/utils/Dom.js', '1118:1239');
        if (!hasClass(obj, name)) {
            __$coverCall('src/javascript/core/utils/Dom.js', '1149:1235');
            obj.className = !obj.className ? name : obj.className.replace(/\s+$/, '') + ' ' + name;
        }
    };
    __$coverCall('src/javascript/core/utils/Dom.js', '1441:1693');
    var removeClass = function (obj, name) {
        __$coverCall('src/javascript/core/utils/Dom.js', '1483:1689');
        if (obj.className) {
            __$coverCall('src/javascript/core/utils/Dom.js', '1507:1558');
            var regExp = new RegExp('(^|\\s+)' + name + '(\\s+|$)');
            __$coverCall('src/javascript/core/utils/Dom.js', '1563:1685');
            obj.className = obj.className.replace(regExp, function ($0, $1, $2) {
                __$coverCall('src/javascript/core/utils/Dom.js', '1636:1678');
                return $1 === ' ' && $2 === ' ' ? ' ' : '';
            });
        }
    };
    __$coverCall('src/javascript/core/utils/Dom.js', '1895:2090');
    var getStyle = function (obj, name) {
        __$coverCall('src/javascript/core/utils/Dom.js', '1934:2086');
        if (obj.currentStyle) {
            __$coverCall('src/javascript/core/utils/Dom.js', '1961:1990');
            return obj.currentStyle[name];
        } else if (window.getComputedStyle) {
            __$coverCall('src/javascript/core/utils/Dom.js', '2035:2082');
            return window.getComputedStyle(obj, null)[name];
        }
    };
    __$coverCall('src/javascript/core/utils/Dom.js', '2474:3751');
    var getPos = function (node, root) {
        __$coverCall('src/javascript/core/utils/Dom.js', '2512:2572');
        var x = 0, y = 0, parent, doc = document, nodeRect, rootRect;
        __$coverCall('src/javascript/core/utils/Dom.js', '2577:2588');
        node = node;
        __$coverCall('src/javascript/core/utils/Dom.js', '2592:2615');
        root = root || doc.body;
        __$coverCall('src/javascript/core/utils/Dom.js', '2684:3008');
        function getIEPos(node) {
            __$coverCall('src/javascript/core/utils/Dom.js', '2713:2744');
            var bodyElm, rect, x = 0, y = 0;
            __$coverCall('src/javascript/core/utils/Dom.js', '2750:2964');
            if (node) {
                __$coverCall('src/javascript/core/utils/Dom.js', '2766:2801');
                rect = node.getBoundingClientRect();
                __$coverCall('src/javascript/core/utils/Dom.js', '2807:2881');
                bodyElm = doc.compatMode === 'CSS1Compat' ? doc.documentElement : doc.body;
                __$coverCall('src/javascript/core/utils/Dom.js', '2887:2921');
                x = rect.left + bodyElm.scrollLeft;
                __$coverCall('src/javascript/core/utils/Dom.js', '2927:2959');
                y = rect.top + bodyElm.scrollTop;
            }
            __$coverCall('src/javascript/core/utils/Dom.js', '2970:3004');
            return {
                x: x,
                y: y
            };
        }
        __$coverCall('src/javascript/core/utils/Dom.js', '3095:3354');
        if (node && node.getBoundingClientRect && Env.browser === 'IE' && (!doc.documentMode || doc.documentMode < 8)) {
            __$coverCall('src/javascript/core/utils/Dom.js', '3211:3236');
            nodeRect = getIEPos(node);
            __$coverCall('src/javascript/core/utils/Dom.js', '3241:3266');
            rootRect = getIEPos(root);
            __$coverCall('src/javascript/core/utils/Dom.js', '3272:3350');
            return {
                x: nodeRect.x - rootRect.x,
                y: nodeRect.y - rootRect.y
            };
        }
        __$coverCall('src/javascript/core/utils/Dom.js', '3359:3372');
        parent = node;
        __$coverCall('src/javascript/core/utils/Dom.js', '3376:3528');
        while (parent && parent != root && parent.nodeType) {
            __$coverCall('src/javascript/core/utils/Dom.js', '3433:3460');
            x += parent.offsetLeft || 0;
            __$coverCall('src/javascript/core/utils/Dom.js', '3465:3491');
            y += parent.offsetTop || 0;
            __$coverCall('src/javascript/core/utils/Dom.js', '3496:3524');
            parent = parent.offsetParent;
        }
        __$coverCall('src/javascript/core/utils/Dom.js', '3533:3557');
        parent = node.parentNode;
        __$coverCall('src/javascript/core/utils/Dom.js', '3561:3711');
        while (parent && parent != root && parent.nodeType) {
            __$coverCall('src/javascript/core/utils/Dom.js', '3618:3645');
            x -= parent.scrollLeft || 0;
            __$coverCall('src/javascript/core/utils/Dom.js', '3650:3676');
            y -= parent.scrollTop || 0;
            __$coverCall('src/javascript/core/utils/Dom.js', '3681:3707');
            parent = parent.parentNode;
        }
        __$coverCall('src/javascript/core/utils/Dom.js', '3716:3747');
        return {
            x: x,
            y: y
        };
    };
    __$coverCall('src/javascript/core/utils/Dom.js', '3937:4077');
    var getSize = function (node) {
        __$coverCall('src/javascript/core/utils/Dom.js', '3970:4073');
        return {
            w: node.offsetWidth || node.clientWidth,
            h: node.offsetHeight || node.clientHeight
        };
    };
    __$coverCall('src/javascript/core/utils/Dom.js', '4081:4235');
    return {
        get: get,
        hasClass: hasClass,
        addClass: addClass,
        removeClass: removeClass,
        getStyle: getStyle,
        getPos: getPos,
        getSize: getSize
    };
});

// Included from: src/javascript/core/Exceptions.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/core/Exceptions.js", "/**\n * Exceptions.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/Exceptions', [\n\t'moxie/core/utils/Basic'\n], function(Basic) {\n\tfunction _findKey(obj, value) {\n\t\tvar key;\n\t\tfor (key in obj) {\n\t\t\tif (obj[key] === value) {\n\t\t\t\treturn key;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tRuntimeError: (function() {\n\t\t\tvar namecodes = {\n\t\t\t\tNOT_INIT_ERR: 1,\n\t\t\t\tNOT_SUPPORTED_ERR: 9,\n\t\t\t\tJS_ERR: 4\n\t\t\t};\n\n\t\t\tfunction RuntimeError(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = _findKey(namecodes, code);\n\t\t\t\tthis.message = this.name + \": RuntimeError \" + this.code;\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(RuntimeError, namecodes);\n\t\t\tRuntimeError.prototype = Error.prototype;\n\t\t\treturn RuntimeError;\n\t\t}()),\n\t\t\n\t\tOperationNotAllowedException: (function() {\n\t\t\t\n\t\t\tfunction OperationNotAllowedException(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = 'OperationNotAllowedException';\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(OperationNotAllowedException, {\n\t\t\t\tNOT_ALLOWED_ERR: 1\n\t\t\t});\n\t\t\t\n\t\t\tOperationNotAllowedException.prototype = Error.prototype;\n\t\t\t\n\t\t\treturn OperationNotAllowedException;\n\t\t}()),\n\n\t\tImageError: (function() {\n\t\t\tvar namecodes = {\n\t\t\t\tWRONG_FORMAT: 1,\n\t\t\t\tMAX_RESOLUTION_ERR: 2\n\t\t\t};\n\n\t\t\tfunction ImageError(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = _findKey(namecodes, code);\n\t\t\t\tthis.message = this.name + \": ImageError \" + this.code;\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(ImageError, namecodes);\n\t\t\tImageError.prototype = Error.prototype;\n\n\t\t\treturn ImageError;\n\t\t}()),\n\n\t\tFileException: (function() {\n\t\t\tvar namecodes = {\n\t\t\t\tNOT_FOUND_ERR: 1,\n\t\t\t\tSECURITY_ERR: 2,\n\t\t\t\tABORT_ERR: 3,\n\t\t\t\tNOT_READABLE_ERR: 4,\n\t\t\t\tENCODING_ERR: 5,\n\t\t\t\tNO_MODIFICATION_ALLOWED_ERR: 6,\n\t\t\t\tINVALID_STATE_ERR: 7,\n\t\t\t\tSYNTAX_ERR: 8\n\t\t\t};\n\n\t\t\tfunction FileException(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = _findKey(namecodes, code);\n\t\t\t\tthis.message = this.name + \": FileException \" + this.code;\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(FileException, namecodes);\n\t\t\tFileException.prototype = Error.prototype;\n\t\t\treturn FileException;\n\t\t}()),\n\t\t\n\t\tDOMException: (function() {\n\t\t\tvar namecodes = {\n\t\t\t\tINDEX_SIZE_ERR: 1,\n\t\t\t\tDOMSTRING_SIZE_ERR: 2,\n\t\t\t\tHIERARCHY_REQUEST_ERR: 3,\n\t\t\t\tWRONG_DOCUMENT_ERR: 4,\n\t\t\t\tINVALID_CHARACTER_ERR: 5,\n\t\t\t\tNO_DATA_ALLOWED_ERR: 6,\n\t\t\t\tNO_MODIFICATION_ALLOWED_ERR: 7,\n\t\t\t\tNOT_FOUND_ERR: 8,\n\t\t\t\tNOT_SUPPORTED_ERR: 9,\n\t\t\t\tINUSE_ATTRIBUTE_ERR: 10,\n\t\t\t\tINVALID_STATE_ERR: 11,\n\t\t\t\tSYNTAX_ERR: 12,\n\t\t\t\tINVALID_MODIFICATION_ERR: 13,\n\t\t\t\tNAMESPACE_ERR: 14,\n\t\t\t\tINVALID_ACCESS_ERR: 15,\n\t\t\t\tVALIDATION_ERR: 16,\n\t\t\t\tTYPE_MISMATCH_ERR: 17,\n\t\t\t\tSECURITY_ERR: 18,\n\t\t\t\tNETWORK_ERR: 19,\n\t\t\t\tABORT_ERR: 20,\n\t\t\t\tURL_MISMATCH_ERR: 21,\n\t\t\t\tQUOTA_EXCEEDED_ERR: 22,\n\t\t\t\tTIMEOUT_ERR: 23,\n\t\t\t\tINVALID_NODE_TYPE_ERR: 24,\n\t\t\t\tDATA_CLONE_ERR: 25\n\t\t\t};\n\n\t\t\tfunction DOMException(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = _findKey(namecodes, code);\n\t\t\t\tthis.message = this.name + \": DOMException \" + this.code;\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(DOMException, namecodes);\n\t\t\tDOMException.prototype = Error.prototype;\n\t\t\treturn DOMException;\n\t\t}()),\n\t\t\n\t\tEventException: (function() {\n\t\t\tfunction EventException(code) {\n\t\t\t\tthis.code = code;\n\t\t\t\tthis.name = 'EventException';\n\t\t\t}\n\t\t\t\n\t\t\tBasic.extend(EventException, {\n\t\t\t\tUNSPECIFIED_EVENT_TYPE_ERR: 0\n\t\t\t});\n\t\t\t\n\t\t\tEventException.prototype = Error.prototype;\n\t\t\t\n\t\t\treturn EventException;\n\t\t}())\n\t};\n});");
__$coverInitRange("src/javascript/core/Exceptions.js", "201:3441");
__$coverInitRange("src/javascript/core/Exceptions.js", "283:417");
__$coverInitRange("src/javascript/core/Exceptions.js", "421:3437");
__$coverInitRange("src/javascript/core/Exceptions.js", "317:324");
__$coverInitRange("src/javascript/core/Exceptions.js", "328:399");
__$coverInitRange("src/javascript/core/Exceptions.js", "403:414");
__$coverInitRange("src/javascript/core/Exceptions.js", "350:395");
__$coverInitRange("src/javascript/core/Exceptions.js", "380:390");
__$coverInitRange("src/javascript/core/Exceptions.js", "463:546");
__$coverInitRange("src/javascript/core/Exceptions.js", "552:712");
__$coverInitRange("src/javascript/core/Exceptions.js", "721:758");
__$coverInitRange("src/javascript/core/Exceptions.js", "763:803");
__$coverInitRange("src/javascript/core/Exceptions.js", "808:827");
__$coverInitRange("src/javascript/core/Exceptions.js", "586:602");
__$coverInitRange("src/javascript/core/Exceptions.js", "608:645");
__$coverInitRange("src/javascript/core/Exceptions.js", "651:707");
__$coverInitRange("src/javascript/core/Exceptions.js", "893:1012");
__$coverInitRange("src/javascript/core/Exceptions.js", "1021:1094");
__$coverInitRange("src/javascript/core/Exceptions.js", "1103:1159");
__$coverInitRange("src/javascript/core/Exceptions.js", "1168:1203");
__$coverInitRange("src/javascript/core/Exceptions.js", "943:959");
__$coverInitRange("src/javascript/core/Exceptions.js", "965:1007");
__$coverInitRange("src/javascript/core/Exceptions.js", "1245:1314");
__$coverInitRange("src/javascript/core/Exceptions.js", "1320:1476");
__$coverInitRange("src/javascript/core/Exceptions.js", "1485:1520");
__$coverInitRange("src/javascript/core/Exceptions.js", "1525:1563");
__$coverInitRange("src/javascript/core/Exceptions.js", "1569:1586");
__$coverInitRange("src/javascript/core/Exceptions.js", "1352:1368");
__$coverInitRange("src/javascript/core/Exceptions.js", "1374:1411");
__$coverInitRange("src/javascript/core/Exceptions.js", "1417:1471");
__$coverInitRange("src/javascript/core/Exceptions.js", "1631:1840");
__$coverInitRange("src/javascript/core/Exceptions.js", "1846:2008");
__$coverInitRange("src/javascript/core/Exceptions.js", "2017:2055");
__$coverInitRange("src/javascript/core/Exceptions.js", "2060:2101");
__$coverInitRange("src/javascript/core/Exceptions.js", "2106:2126");
__$coverInitRange("src/javascript/core/Exceptions.js", "1881:1897");
__$coverInitRange("src/javascript/core/Exceptions.js", "1903:1940");
__$coverInitRange("src/javascript/core/Exceptions.js", "1946:2003");
__$coverInitRange("src/javascript/core/Exceptions.js", "2172:2846");
__$coverInitRange("src/javascript/core/Exceptions.js", "2852:3012");
__$coverInitRange("src/javascript/core/Exceptions.js", "3021:3058");
__$coverInitRange("src/javascript/core/Exceptions.js", "3063:3103");
__$coverInitRange("src/javascript/core/Exceptions.js", "3108:3127");
__$coverInitRange("src/javascript/core/Exceptions.js", "2886:2902");
__$coverInitRange("src/javascript/core/Exceptions.js", "2908:2945");
__$coverInitRange("src/javascript/core/Exceptions.js", "2951:3007");
__$coverInitRange("src/javascript/core/Exceptions.js", "3175:3266");
__$coverInitRange("src/javascript/core/Exceptions.js", "3275:3345");
__$coverInitRange("src/javascript/core/Exceptions.js", "3354:3396");
__$coverInitRange("src/javascript/core/Exceptions.js", "3405:3426");
__$coverInitRange("src/javascript/core/Exceptions.js", "3211:3227");
__$coverInitRange("src/javascript/core/Exceptions.js", "3233:3261");
__$coverCall('src/javascript/core/Exceptions.js', '201:3441');
define('moxie/core/Exceptions', ['moxie/core/utils/Basic'], function (Basic) {
    __$coverCall('src/javascript/core/Exceptions.js', '283:417');
    function _findKey(obj, value) {
        __$coverCall('src/javascript/core/Exceptions.js', '317:324');
        var key;
        __$coverCall('src/javascript/core/Exceptions.js', '328:399');
        for (key in obj) {
            __$coverCall('src/javascript/core/Exceptions.js', '350:395');
            if (obj[key] === value) {
                __$coverCall('src/javascript/core/Exceptions.js', '380:390');
                return key;
            }
        }
        __$coverCall('src/javascript/core/Exceptions.js', '403:414');
        return null;
    }
    __$coverCall('src/javascript/core/Exceptions.js', '421:3437');
    return {
        RuntimeError: function () {
            __$coverCall('src/javascript/core/Exceptions.js', '463:546');
            var namecodes = {
                    NOT_INIT_ERR: 1,
                    NOT_SUPPORTED_ERR: 9,
                    JS_ERR: 4
                };
            __$coverCall('src/javascript/core/Exceptions.js', '552:712');
            function RuntimeError(code) {
                __$coverCall('src/javascript/core/Exceptions.js', '586:602');
                this.code = code;
                __$coverCall('src/javascript/core/Exceptions.js', '608:645');
                this.name = _findKey(namecodes, code);
                __$coverCall('src/javascript/core/Exceptions.js', '651:707');
                this.message = this.name + ': RuntimeError ' + this.code;
            }
            __$coverCall('src/javascript/core/Exceptions.js', '721:758');
            Basic.extend(RuntimeError, namecodes);
            __$coverCall('src/javascript/core/Exceptions.js', '763:803');
            RuntimeError.prototype = Error.prototype;
            __$coverCall('src/javascript/core/Exceptions.js', '808:827');
            return RuntimeError;
        }(),
        OperationNotAllowedException: function () {
            __$coverCall('src/javascript/core/Exceptions.js', '893:1012');
            function OperationNotAllowedException(code) {
                __$coverCall('src/javascript/core/Exceptions.js', '943:959');
                this.code = code;
                __$coverCall('src/javascript/core/Exceptions.js', '965:1007');
                this.name = 'OperationNotAllowedException';
            }
            __$coverCall('src/javascript/core/Exceptions.js', '1021:1094');
            Basic.extend(OperationNotAllowedException, { NOT_ALLOWED_ERR: 1 });
            __$coverCall('src/javascript/core/Exceptions.js', '1103:1159');
            OperationNotAllowedException.prototype = Error.prototype;
            __$coverCall('src/javascript/core/Exceptions.js', '1168:1203');
            return OperationNotAllowedException;
        }(),
        ImageError: function () {
            __$coverCall('src/javascript/core/Exceptions.js', '1245:1314');
            var namecodes = {
                    WRONG_FORMAT: 1,
                    MAX_RESOLUTION_ERR: 2
                };
            __$coverCall('src/javascript/core/Exceptions.js', '1320:1476');
            function ImageError(code) {
                __$coverCall('src/javascript/core/Exceptions.js', '1352:1368');
                this.code = code;
                __$coverCall('src/javascript/core/Exceptions.js', '1374:1411');
                this.name = _findKey(namecodes, code);
                __$coverCall('src/javascript/core/Exceptions.js', '1417:1471');
                this.message = this.name + ': ImageError ' + this.code;
            }
            __$coverCall('src/javascript/core/Exceptions.js', '1485:1520');
            Basic.extend(ImageError, namecodes);
            __$coverCall('src/javascript/core/Exceptions.js', '1525:1563');
            ImageError.prototype = Error.prototype;
            __$coverCall('src/javascript/core/Exceptions.js', '1569:1586');
            return ImageError;
        }(),
        FileException: function () {
            __$coverCall('src/javascript/core/Exceptions.js', '1631:1840');
            var namecodes = {
                    NOT_FOUND_ERR: 1,
                    SECURITY_ERR: 2,
                    ABORT_ERR: 3,
                    NOT_READABLE_ERR: 4,
                    ENCODING_ERR: 5,
                    NO_MODIFICATION_ALLOWED_ERR: 6,
                    INVALID_STATE_ERR: 7,
                    SYNTAX_ERR: 8
                };
            __$coverCall('src/javascript/core/Exceptions.js', '1846:2008');
            function FileException(code) {
                __$coverCall('src/javascript/core/Exceptions.js', '1881:1897');
                this.code = code;
                __$coverCall('src/javascript/core/Exceptions.js', '1903:1940');
                this.name = _findKey(namecodes, code);
                __$coverCall('src/javascript/core/Exceptions.js', '1946:2003');
                this.message = this.name + ': FileException ' + this.code;
            }
            __$coverCall('src/javascript/core/Exceptions.js', '2017:2055');
            Basic.extend(FileException, namecodes);
            __$coverCall('src/javascript/core/Exceptions.js', '2060:2101');
            FileException.prototype = Error.prototype;
            __$coverCall('src/javascript/core/Exceptions.js', '2106:2126');
            return FileException;
        }(),
        DOMException: function () {
            __$coverCall('src/javascript/core/Exceptions.js', '2172:2846');
            var namecodes = {
                    INDEX_SIZE_ERR: 1,
                    DOMSTRING_SIZE_ERR: 2,
                    HIERARCHY_REQUEST_ERR: 3,
                    WRONG_DOCUMENT_ERR: 4,
                    INVALID_CHARACTER_ERR: 5,
                    NO_DATA_ALLOWED_ERR: 6,
                    NO_MODIFICATION_ALLOWED_ERR: 7,
                    NOT_FOUND_ERR: 8,
                    NOT_SUPPORTED_ERR: 9,
                    INUSE_ATTRIBUTE_ERR: 10,
                    INVALID_STATE_ERR: 11,
                    SYNTAX_ERR: 12,
                    INVALID_MODIFICATION_ERR: 13,
                    NAMESPACE_ERR: 14,
                    INVALID_ACCESS_ERR: 15,
                    VALIDATION_ERR: 16,
                    TYPE_MISMATCH_ERR: 17,
                    SECURITY_ERR: 18,
                    NETWORK_ERR: 19,
                    ABORT_ERR: 20,
                    URL_MISMATCH_ERR: 21,
                    QUOTA_EXCEEDED_ERR: 22,
                    TIMEOUT_ERR: 23,
                    INVALID_NODE_TYPE_ERR: 24,
                    DATA_CLONE_ERR: 25
                };
            __$coverCall('src/javascript/core/Exceptions.js', '2852:3012');
            function DOMException(code) {
                __$coverCall('src/javascript/core/Exceptions.js', '2886:2902');
                this.code = code;
                __$coverCall('src/javascript/core/Exceptions.js', '2908:2945');
                this.name = _findKey(namecodes, code);
                __$coverCall('src/javascript/core/Exceptions.js', '2951:3007');
                this.message = this.name + ': DOMException ' + this.code;
            }
            __$coverCall('src/javascript/core/Exceptions.js', '3021:3058');
            Basic.extend(DOMException, namecodes);
            __$coverCall('src/javascript/core/Exceptions.js', '3063:3103');
            DOMException.prototype = Error.prototype;
            __$coverCall('src/javascript/core/Exceptions.js', '3108:3127');
            return DOMException;
        }(),
        EventException: function () {
            __$coverCall('src/javascript/core/Exceptions.js', '3175:3266');
            function EventException(code) {
                __$coverCall('src/javascript/core/Exceptions.js', '3211:3227');
                this.code = code;
                __$coverCall('src/javascript/core/Exceptions.js', '3233:3261');
                this.name = 'EventException';
            }
            __$coverCall('src/javascript/core/Exceptions.js', '3275:3345');
            Basic.extend(EventException, { UNSPECIFIED_EVENT_TYPE_ERR: 0 });
            __$coverCall('src/javascript/core/Exceptions.js', '3354:3396');
            EventException.prototype = Error.prototype;
            __$coverCall('src/javascript/core/Exceptions.js', '3405:3426');
            return EventException;
        }()
    };
});

// Included from: src/javascript/core/EventTarget.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/core/EventTarget.js", "/**\n * EventTarget.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/EventTarget', [\n\t'moxie/core/Exceptions',\n\t'moxie/core/utils/Basic'\n], function(x, Basic) {\n\t/**\n\tParent object for all event dispatching components and objects\n\n\t@class EventTarget\n\t@constructor EventTarget\n\t*/\n\tfunction EventTarget() {\n\t\t// hash of event listeners by object uid\n\t\tvar eventpool = {};\n\t\t\t\t\n\t\tBasic.extend(this, {\n\t\t\t\n\t\t\t/**\n\t\t\tUnique id of the event dispatcher, usually overriden by children\n\n\t\t\t@property uid\n\t\t\t@type String\n\t\t\t*/\n\t\t\tuid: null,\n\t\t\t\n\t\t\t/**\n\t\t\tCan be called from within a child  in order to acquire uniqie id in automated manner\n\n\t\t\t@method init\n\t\t\t*/\n\t\t\tinit: function() {\n\t\t\t\tif (!this.uid) {\n\t\t\t\t\tthis.uid = Basic.guid('uid_');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRegister a handler to a specific event dispatched by the object\n\n\t\t\t@method addEventListener\n\t\t\t@param {String} type Type or basically a name of the event to subscribe to\n\t\t\t@param {Function} fn Callback function that will be called when event happens\n\t\t\t@param {Number} [priority=0] Priority of the event handler - handlers with higher priorities will be called first\n\t\t\t@param {Object} [scope=this] A scope to invoke event handler in\n\t\t\t*/\n\t\t\taddEventListener: function(type, fn, priority, scope) {\n\t\t\t\tvar self = this, list;\n\t\t\t\t\n\t\t\t\ttype = Basic.trim(type);\n\t\t\t\t\n\t\t\t\tif (/\\s/.test(type)) {\n\t\t\t\t\t// multiple event types were passed for one handler\n\t\t\t\t\tBasic.each(type.split(/\\s+/), function(type) {\n\t\t\t\t\t\tself.addEventListener(type, fn, priority, scope);\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttype = type.toLowerCase();\n\t\t\t\tpriority = parseInt(priority, 10) || 0;\n\t\t\t\t\n\t\t\t\tlist = eventpool[this.uid] && eventpool[this.uid][type] || [];\n\t\t\t\tlist.push({fn : fn, priority : priority, scope : scope || this});\n\t\t\t\t\n\t\t\t\tif (!eventpool[this.uid]) {\n\t\t\t\t\teventpool[this.uid] = {};\n\t\t\t\t}\n\t\t\t\teventpool[this.uid][type] = list;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tCheck if any handlers were registered to the specified event\n\n\t\t\t@method hasEventListener\n\t\t\t@param {String} type Type or basically a name of the event to check\n\t\t\t@return {Mixed} Returns a handler if it was found and false, if - not\n\t\t\t*/\n\t\t\thasEventListener: function(type) {\n\t\t\t\treturn type ? !!(eventpool[this.uid] && eventpool[this.uid][type]) : !!eventpool[this.uid];\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tUnregister the handler from the event, or if former was not specified - unregister all handlers\n\n\t\t\t@method removeEventListener\n\t\t\t@param {String} type Type or basically a name of the event\n\t\t\t@param {Function} [fn] Handler to unregister\n\t\t\t*/\n\t\t\tremoveEventListener: function(type, fn) {\n\t\t\t\ttype = type.toLowerCase();\n\t\n\t\t\t\tvar list = eventpool[this.uid] && eventpool[this.uid][type], i;\n\t\n\t\t\t\tif (list) {\n\t\t\t\t\tif (fn) {\n\t\t\t\t\t\tfor (i = list.length - 1; i >= 0; i--) {\n\t\t\t\t\t\t\tif (list[i].fn === fn) {\n\t\t\t\t\t\t\t\tlist.splice(i, 1);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlist = [];\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// delete event list if it has become empty\n\t\t\t\t\tif (!list.length) {\n\t\t\t\t\t\tdelete eventpool[this.uid][type];\n\t\t\t\t\t\t\n\t\t\t\t\t\t// and object specific entry in a hash if it has no more listeners attached\n\t\t\t\t\t\tif (Basic.isEmptyObj(eventpool[this.uid])) {\n\t\t\t\t\t\t\tdelete eventpool[this.uid];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tRemove all event handlers from the object\n\n\t\t\t@method removeAllEventListeners\n\t\t\t*/\n\t\t\tremoveAllEventListeners: function() {\n\t\t\t\tif (eventpool[this.uid]) {\n\t\t\t\t\tdelete eventpool[this.uid];\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tDispatch the event\n\n\t\t\t@method dispatchEvent\n\t\t\t@param {String/Object} Type of event or event object to dispatch\n\t\t\t@param {Mixed} [...] Variable number of arguments to be passed to a handlers\n\t\t\t@return {Boolean} true by default and false if any handler returned false\n\t\t\t*/\n\t\t\tdispatchEvent: function(type) {\n\t\t\t\tvar uid, list, args, tmpEvt, evt = {}, result = true;\n\t\t\t\t\n\t\t\t\tif (Basic.typeOf(type) !== 'string') {\n\t\t\t\t\t// we can't use original object directly (because of Silverlight)\n\t\t\t\t\ttmpEvt = type;\n\n\t\t\t\t\tif (Basic.typeOf(tmpEvt.type) === 'string') {\n\t\t\t\t\t\ttype = tmpEvt.type;\n\n\t\t\t\t\t\tif (tmpEvt.total && tmpEvt.loaded) { // progress event\n\t\t\t\t\t\t\tevt.total = tmpEvt.total;\n\t\t\t\t\t\t\tevt.loaded = tmpEvt.loaded;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevt.async = tmpEvt.async || false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new x.EventException(x.EventException.UNSPECIFIED_EVENT_TYPE_ERR);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// check if event is meant to be dispatched on an object having specific uid\n\t\t\t\tif (type.indexOf('::') !== -1) {\n\t\t\t\t\t(function(arr) {\n\t\t\t\t\t\tuid = arr[0];\n\t\t\t\t\t\ttype = arr[1];\n\t\t\t\t\t}(type.split('::')));\n\t\t\t\t} else {\n\t\t\t\t\tuid = this.uid;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttype = type.toLowerCase();\n\t\t\t\t\t\t\t\t\n\t\t\t\tlist = eventpool[uid] && eventpool[uid][type];\n\n\t\t\t\tif (list) {\n\t\t\t\t\t// sort event list by prority\n\t\t\t\t\tlist.sort(function(a, b) { return b.priority - a.priority; });\n\t\t\t\t\t\n\t\t\t\t\targs = [].slice.call(arguments);\n\t\t\t\t\t\n\t\t\t\t\t// first argument will be pseudo-event object\n\t\t\t\t\targs.shift();\n\t\t\t\t\tevt.type = type;\n\t\t\t\t\targs.unshift(evt);\n\n\t\t\t\t\t// Dispatch event to all listeners\n\t\t\t\t\tvar queue = [];\n\t\t\t\t\tBasic.each(list, function(handler) {\n\t\t\t\t\t\t// explicitly set the target, otherwise events fired from shims do not get it\n\t\t\t\t\t\targs[0].target = handler.scope;\n\t\t\t\t\t\t// if event is marked as async, detach the handler\n\t\t\t\t\t\tif (evt.async) {\n\t\t\t\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tcb(handler.fn.apply(handler.scope, args) === false);\n\t\t\t\t\t\t\t\t}, 1);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tqueue.push(function(cb) {\n\t\t\t\t\t\t\t\tcb(handler.fn.apply(handler.scope, args) === false); // if handler returns false stop propagation\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (queue.length) {\n\t\t\t\t\t\tBasic.inSeries(queue, function(err) {\n\t\t\t\t\t\t\tresult = !err;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAlias for addEventListener\n\n\t\t\t@method bind\n\t\t\t@protected\n\t\t\t*/\n\t\t\tbind: function() {\n\t\t\t\tthis.addEventListener.apply(this, arguments);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAlias for removeEventListener\n\n\t\t\t@method unbind\n\t\t\t@protected\n\t\t\t*/\n\t\t\tunbind: function() {\n\t\t\t\tthis.removeEventListener.apply(this, arguments);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAlias for removeAllEventListeners\n\n\t\t\t@method unbindAll\n\t\t\t@protected\n\t\t\t*/\n\t\t\tunbindAll: function() {\n\t\t\t\tthis.removeAllEventListeners.apply(this, arguments);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAlias for dispatchEvent\n\n\t\t\t@method trigger\n\t\t\t@protected\n\t\t\t*/\n\t\t\ttrigger: function() {\n\t\t\t\treturn this.dispatchEvent.apply(this, arguments);\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t/**\n\t\t\tConverts properties of on[event] type to corresponding event handlers,\n\t\t\tis used to avoid extra hassle around the process of calling them back\n\n\t\t\t@method convertEventPropsToHandlers\n\t\t\t@private\n\t\t\t*/\n\t\t\tconvertEventPropsToHandlers: function(handlers) {\n\t\t\t\tvar h;\n\t\t\t\t\t\t\n\t\t\t\tif (Basic.typeOf(handlers) !== 'array') {\n\t\t\t\t\thandlers = [handlers];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < handlers.length; i++) {\n\t\t\t\t\th = 'on' + handlers[i];\n\t\t\t\t\t\n\t\t\t\t\tif (Basic.typeOf(this[h]) === 'function') {\n\t\t\t\t\t\tthis.addEventListener(handlers[i], this[h]);\n\t\t\t\t\t} else if (Basic.typeOf(this[h]) === 'undefined') {\n\t\t\t\t\t\tthis[h] = null; // object must have defined event properties, even if it doesn't make use of them\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t});\n\t}\n\n\tEventTarget.instance = new EventTarget(); \n\n\treturn EventTarget;\n});");
__$coverInitRange("src/javascript/core/EventTarget.js", "202:7357");
__$coverInitRange("src/javascript/core/EventTarget.js", "434:7286");
__$coverInitRange("src/javascript/core/EventTarget.js", "7290:7330");
__$coverInitRange("src/javascript/core/EventTarget.js", "7335:7353");
__$coverInitRange("src/javascript/core/EventTarget.js", "504:522");
__$coverInitRange("src/javascript/core/EventTarget.js", "531:7283");
__$coverInitRange("src/javascript/core/EventTarget.js", "833:890");
__$coverInitRange("src/javascript/core/EventTarget.js", "855:884");
__$coverInitRange("src/javascript/core/EventTarget.js", "1414:1435");
__$coverInitRange("src/javascript/core/EventTarget.js", "1446:1469");
__$coverInitRange("src/javascript/core/EventTarget.js", "1480:1694");
__$coverInitRange("src/javascript/core/EventTarget.js", "1705:1730");
__$coverInitRange("src/javascript/core/EventTarget.js", "1736:1774");
__$coverInitRange("src/javascript/core/EventTarget.js", "1785:1846");
__$coverInitRange("src/javascript/core/EventTarget.js", "1852:1916");
__$coverInitRange("src/javascript/core/EventTarget.js", "1927:1990");
__$coverInitRange("src/javascript/core/EventTarget.js", "1996:2028");
__$coverInitRange("src/javascript/core/EventTarget.js", "1565:1675");
__$coverInitRange("src/javascript/core/EventTarget.js", "1682:1688");
__$coverInitRange("src/javascript/core/EventTarget.js", "1618:1666");
__$coverInitRange("src/javascript/core/EventTarget.js", "1960:1984");
__$coverInitRange("src/javascript/core/EventTarget.js", "2332:2422");
__$coverInitRange("src/javascript/core/EventTarget.js", "2737:2762");
__$coverInitRange("src/javascript/core/EventTarget.js", "2770:2832");
__$coverInitRange("src/javascript/core/EventTarget.js", "2840:3353");
__$coverInitRange("src/javascript/core/EventTarget.js", "2857:3041");
__$coverInitRange("src/javascript/core/EventTarget.js", "3099:3347");
__$coverInitRange("src/javascript/core/EventTarget.js", "2873:3003");
__$coverInitRange("src/javascript/core/EventTarget.js", "2921:2995");
__$coverInitRange("src/javascript/core/EventTarget.js", "2954:2971");
__$coverInitRange("src/javascript/core/EventTarget.js", "2981:2986");
__$coverInitRange("src/javascript/core/EventTarget.js", "3025:3034");
__$coverInitRange("src/javascript/core/EventTarget.js", "3125:3157");
__$coverInitRange("src/javascript/core/EventTarget.js", "3254:3340");
__$coverInitRange("src/javascript/core/EventTarget.js", "3306:3332");
__$coverInitRange("src/javascript/core/EventTarget.js", "3504:3568");
__$coverInitRange("src/javascript/core/EventTarget.js", "3536:3562");
__$coverInitRange("src/javascript/core/EventTarget.js", "3905:3957");
__$coverInitRange("src/javascript/core/EventTarget.js", "3968:4459");
__$coverInitRange("src/javascript/core/EventTarget.js", "4551:4712");
__$coverInitRange("src/javascript/core/EventTarget.js", "4723:4748");
__$coverInitRange("src/javascript/core/EventTarget.js", "4763:4808");
__$coverInitRange("src/javascript/core/EventTarget.js", "4815:5849");
__$coverInitRange("src/javascript/core/EventTarget.js", "5855:5868");
__$coverInitRange("src/javascript/core/EventTarget.js", "4083:4096");
__$coverInitRange("src/javascript/core/EventTarget.js", "4104:4453");
__$coverInitRange("src/javascript/core/EventTarget.js", "4156:4174");
__$coverInitRange("src/javascript/core/EventTarget.js", "4183:4312");
__$coverInitRange("src/javascript/core/EventTarget.js", "4320:4353");
__$coverInitRange("src/javascript/core/EventTarget.js", "4245:4269");
__$coverInitRange("src/javascript/core/EventTarget.js", "4278:4304");
__$coverInitRange("src/javascript/core/EventTarget.js", "4375:4446");
__$coverInitRange("src/javascript/core/EventTarget.js", "4589:4672");
__$coverInitRange("src/javascript/core/EventTarget.js", "4612:4624");
__$coverInitRange("src/javascript/core/EventTarget.js", "4632:4645");
__$coverInitRange("src/javascript/core/EventTarget.js", "4692:4706");
__$coverInitRange("src/javascript/core/EventTarget.js", "4867:4928");
__$coverInitRange("src/javascript/core/EventTarget.js", "4941:4972");
__$coverInitRange("src/javascript/core/EventTarget.js", "5036:5048");
__$coverInitRange("src/javascript/core/EventTarget.js", "5055:5070");
__$coverInitRange("src/javascript/core/EventTarget.js", "5077:5094");
__$coverInitRange("src/javascript/core/EventTarget.js", "5142:5156");
__$coverInitRange("src/javascript/core/EventTarget.js", "5163:5735");
__$coverInitRange("src/javascript/core/EventTarget.js", "5742:5843");
__$coverInitRange("src/javascript/core/EventTarget.js", "4894:4924");
__$coverInitRange("src/javascript/core/EventTarget.js", "5290:5320");
__$coverInitRange("src/javascript/core/EventTarget.js", "5385:5726");
__$coverInitRange("src/javascript/core/EventTarget.js", "5409:5553");
__$coverInitRange("src/javascript/core/EventTarget.js", "5443:5542");
__$coverInitRange("src/javascript/core/EventTarget.js", "5476:5527");
__$coverInitRange("src/javascript/core/EventTarget.js", "5577:5718");
__$coverInitRange("src/javascript/core/EventTarget.js", "5611:5662");
__$coverInitRange("src/javascript/core/EventTarget.js", "5768:5836");
__$coverInitRange("src/javascript/core/EventTarget.js", "5813:5826");
__$coverInitRange("src/javascript/core/EventTarget.js", "5980:6024");
__$coverInitRange("src/javascript/core/EventTarget.js", "6143:6190");
__$coverInitRange("src/javascript/core/EventTarget.js", "6319:6370");
__$coverInitRange("src/javascript/core/EventTarget.js", "6485:6533");
__$coverInitRange("src/javascript/core/EventTarget.js", "6818:6823");
__$coverInitRange("src/javascript/core/EventTarget.js", "6836:6910");
__$coverInitRange("src/javascript/core/EventTarget.js", "6917:7268");
__$coverInitRange("src/javascript/core/EventTarget.js", "6883:6904");
__$coverInitRange("src/javascript/core/EventTarget.js", "6966:6988");
__$coverInitRange("src/javascript/core/EventTarget.js", "7001:7262");
__$coverInitRange("src/javascript/core/EventTarget.js", "7051:7094");
__$coverInitRange("src/javascript/core/EventTarget.js", "7159:7173");
__$coverCall('src/javascript/core/EventTarget.js', '202:7357');
define('moxie/core/EventTarget', [
    'moxie/core/Exceptions',
    'moxie/core/utils/Basic'
], function (x, Basic) {
    __$coverCall('src/javascript/core/EventTarget.js', '434:7286');
    function EventTarget() {
        __$coverCall('src/javascript/core/EventTarget.js', '504:522');
        var eventpool = {};
        __$coverCall('src/javascript/core/EventTarget.js', '531:7283');
        Basic.extend(this, {
            uid: null,
            init: function () {
                __$coverCall('src/javascript/core/EventTarget.js', '833:890');
                if (!this.uid) {
                    __$coverCall('src/javascript/core/EventTarget.js', '855:884');
                    this.uid = Basic.guid('uid_');
                }
            },
            addEventListener: function (type, fn, priority, scope) {
                __$coverCall('src/javascript/core/EventTarget.js', '1414:1435');
                var self = this, list;
                __$coverCall('src/javascript/core/EventTarget.js', '1446:1469');
                type = Basic.trim(type);
                __$coverCall('src/javascript/core/EventTarget.js', '1480:1694');
                if (/\s/.test(type)) {
                    __$coverCall('src/javascript/core/EventTarget.js', '1565:1675');
                    Basic.each(type.split(/\s+/), function (type) {
                        __$coverCall('src/javascript/core/EventTarget.js', '1618:1666');
                        self.addEventListener(type, fn, priority, scope);
                    });
                    __$coverCall('src/javascript/core/EventTarget.js', '1682:1688');
                    return;
                }
                __$coverCall('src/javascript/core/EventTarget.js', '1705:1730');
                type = type.toLowerCase();
                __$coverCall('src/javascript/core/EventTarget.js', '1736:1774');
                priority = parseInt(priority, 10) || 0;
                __$coverCall('src/javascript/core/EventTarget.js', '1785:1846');
                list = eventpool[this.uid] && eventpool[this.uid][type] || [];
                __$coverCall('src/javascript/core/EventTarget.js', '1852:1916');
                list.push({
                    fn: fn,
                    priority: priority,
                    scope: scope || this
                });
                __$coverCall('src/javascript/core/EventTarget.js', '1927:1990');
                if (!eventpool[this.uid]) {
                    __$coverCall('src/javascript/core/EventTarget.js', '1960:1984');
                    eventpool[this.uid] = {};
                }
                __$coverCall('src/javascript/core/EventTarget.js', '1996:2028');
                eventpool[this.uid][type] = list;
            },
            hasEventListener: function (type) {
                __$coverCall('src/javascript/core/EventTarget.js', '2332:2422');
                return type ? !!(eventpool[this.uid] && eventpool[this.uid][type]) : !!eventpool[this.uid];
            },
            removeEventListener: function (type, fn) {
                __$coverCall('src/javascript/core/EventTarget.js', '2737:2762');
                type = type.toLowerCase();
                __$coverCall('src/javascript/core/EventTarget.js', '2770:2832');
                var list = eventpool[this.uid] && eventpool[this.uid][type], i;
                __$coverCall('src/javascript/core/EventTarget.js', '2840:3353');
                if (list) {
                    __$coverCall('src/javascript/core/EventTarget.js', '2857:3041');
                    if (fn) {
                        __$coverCall('src/javascript/core/EventTarget.js', '2873:3003');
                        for (i = list.length - 1; i >= 0; i--) {
                            __$coverCall('src/javascript/core/EventTarget.js', '2921:2995');
                            if (list[i].fn === fn) {
                                __$coverCall('src/javascript/core/EventTarget.js', '2954:2971');
                                list.splice(i, 1);
                                __$coverCall('src/javascript/core/EventTarget.js', '2981:2986');
                                break;
                            }
                        }
                    } else {
                        __$coverCall('src/javascript/core/EventTarget.js', '3025:3034');
                        list = [];
                    }
                    __$coverCall('src/javascript/core/EventTarget.js', '3099:3347');
                    if (!list.length) {
                        __$coverCall('src/javascript/core/EventTarget.js', '3125:3157');
                        delete eventpool[this.uid][type];
                        __$coverCall('src/javascript/core/EventTarget.js', '3254:3340');
                        if (Basic.isEmptyObj(eventpool[this.uid])) {
                            __$coverCall('src/javascript/core/EventTarget.js', '3306:3332');
                            delete eventpool[this.uid];
                        }
                    }
                }
            },
            removeAllEventListeners: function () {
                __$coverCall('src/javascript/core/EventTarget.js', '3504:3568');
                if (eventpool[this.uid]) {
                    __$coverCall('src/javascript/core/EventTarget.js', '3536:3562');
                    delete eventpool[this.uid];
                }
            },
            dispatchEvent: function (type) {
                __$coverCall('src/javascript/core/EventTarget.js', '3905:3957');
                var uid, list, args, tmpEvt, evt = {}, result = true;
                __$coverCall('src/javascript/core/EventTarget.js', '3968:4459');
                if (Basic.typeOf(type) !== 'string') {
                    __$coverCall('src/javascript/core/EventTarget.js', '4083:4096');
                    tmpEvt = type;
                    __$coverCall('src/javascript/core/EventTarget.js', '4104:4453');
                    if (Basic.typeOf(tmpEvt.type) === 'string') {
                        __$coverCall('src/javascript/core/EventTarget.js', '4156:4174');
                        type = tmpEvt.type;
                        __$coverCall('src/javascript/core/EventTarget.js', '4183:4312');
                        if (tmpEvt.total && tmpEvt.loaded) {
                            __$coverCall('src/javascript/core/EventTarget.js', '4245:4269');
                            evt.total = tmpEvt.total;
                            __$coverCall('src/javascript/core/EventTarget.js', '4278:4304');
                            evt.loaded = tmpEvt.loaded;
                        }
                        __$coverCall('src/javascript/core/EventTarget.js', '4320:4353');
                        evt.async = tmpEvt.async || false;
                    } else {
                        __$coverCall('src/javascript/core/EventTarget.js', '4375:4446');
                        throw new x.EventException(x.EventException.UNSPECIFIED_EVENT_TYPE_ERR);
                    }
                }
                __$coverCall('src/javascript/core/EventTarget.js', '4551:4712');
                if (type.indexOf('::') !== -1) {
                    __$coverCall('src/javascript/core/EventTarget.js', '4589:4672');
                    (function (arr) {
                        __$coverCall('src/javascript/core/EventTarget.js', '4612:4624');
                        uid = arr[0];
                        __$coverCall('src/javascript/core/EventTarget.js', '4632:4645');
                        type = arr[1];
                    }(type.split('::')));
                } else {
                    __$coverCall('src/javascript/core/EventTarget.js', '4692:4706');
                    uid = this.uid;
                }
                __$coverCall('src/javascript/core/EventTarget.js', '4723:4748');
                type = type.toLowerCase();
                __$coverCall('src/javascript/core/EventTarget.js', '4763:4808');
                list = eventpool[uid] && eventpool[uid][type];
                __$coverCall('src/javascript/core/EventTarget.js', '4815:5849');
                if (list) {
                    __$coverCall('src/javascript/core/EventTarget.js', '4867:4928');
                    list.sort(function (a, b) {
                        __$coverCall('src/javascript/core/EventTarget.js', '4894:4924');
                        return b.priority - a.priority;
                    });
                    __$coverCall('src/javascript/core/EventTarget.js', '4941:4972');
                    args = [].slice.call(arguments);
                    __$coverCall('src/javascript/core/EventTarget.js', '5036:5048');
                    args.shift();
                    __$coverCall('src/javascript/core/EventTarget.js', '5055:5070');
                    evt.type = type;
                    __$coverCall('src/javascript/core/EventTarget.js', '5077:5094');
                    args.unshift(evt);
                    __$coverCall('src/javascript/core/EventTarget.js', '5142:5156');
                    var queue = [];
                    __$coverCall('src/javascript/core/EventTarget.js', '5163:5735');
                    Basic.each(list, function (handler) {
                        __$coverCall('src/javascript/core/EventTarget.js', '5290:5320');
                        args[0].target = handler.scope;
                        __$coverCall('src/javascript/core/EventTarget.js', '5385:5726');
                        if (evt.async) {
                            __$coverCall('src/javascript/core/EventTarget.js', '5409:5553');
                            queue.push(function (cb) {
                                __$coverCall('src/javascript/core/EventTarget.js', '5443:5542');
                                setTimeout(function () {
                                    __$coverCall('src/javascript/core/EventTarget.js', '5476:5527');
                                    cb(handler.fn.apply(handler.scope, args) === false);
                                }, 1);
                            });
                        } else {
                            __$coverCall('src/javascript/core/EventTarget.js', '5577:5718');
                            queue.push(function (cb) {
                                __$coverCall('src/javascript/core/EventTarget.js', '5611:5662');
                                cb(handler.fn.apply(handler.scope, args) === false);
                            });
                        }
                    });
                    __$coverCall('src/javascript/core/EventTarget.js', '5742:5843');
                    if (queue.length) {
                        __$coverCall('src/javascript/core/EventTarget.js', '5768:5836');
                        Basic.inSeries(queue, function (err) {
                            __$coverCall('src/javascript/core/EventTarget.js', '5813:5826');
                            result = !err;
                        });
                    }
                }
                __$coverCall('src/javascript/core/EventTarget.js', '5855:5868');
                return result;
            },
            bind: function () {
                __$coverCall('src/javascript/core/EventTarget.js', '5980:6024');
                this.addEventListener.apply(this, arguments);
            },
            unbind: function () {
                __$coverCall('src/javascript/core/EventTarget.js', '6143:6190');
                this.removeEventListener.apply(this, arguments);
            },
            unbindAll: function () {
                __$coverCall('src/javascript/core/EventTarget.js', '6319:6370');
                this.removeAllEventListeners.apply(this, arguments);
            },
            trigger: function () {
                __$coverCall('src/javascript/core/EventTarget.js', '6485:6533');
                return this.dispatchEvent.apply(this, arguments);
            },
            convertEventPropsToHandlers: function (handlers) {
                __$coverCall('src/javascript/core/EventTarget.js', '6818:6823');
                var h;
                __$coverCall('src/javascript/core/EventTarget.js', '6836:6910');
                if (Basic.typeOf(handlers) !== 'array') {
                    __$coverCall('src/javascript/core/EventTarget.js', '6883:6904');
                    handlers = [handlers];
                }
                __$coverCall('src/javascript/core/EventTarget.js', '6917:7268');
                for (var i = 0; i < handlers.length; i++) {
                    __$coverCall('src/javascript/core/EventTarget.js', '6966:6988');
                    h = 'on' + handlers[i];
                    __$coverCall('src/javascript/core/EventTarget.js', '7001:7262');
                    if (Basic.typeOf(this[h]) === 'function') {
                        __$coverCall('src/javascript/core/EventTarget.js', '7051:7094');
                        this.addEventListener(handlers[i], this[h]);
                    } else if (Basic.typeOf(this[h]) === 'undefined') {
                        __$coverCall('src/javascript/core/EventTarget.js', '7159:7173');
                        this[h] = null;
                    }
                }
            }
        });
    }
    __$coverCall('src/javascript/core/EventTarget.js', '7290:7330');
    EventTarget.instance = new EventTarget();
    __$coverCall('src/javascript/core/EventTarget.js', '7335:7353');
    return EventTarget;
});

// Included from: src/javascript/core/utils/Encode.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/core/utils/Encode.js", "/**\n * Encode.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Encode', [], function() {\n\n\t/**\n\tEncode string with UTF-8\n\n\t@method utf8_encode\n\t@for Utils\n\t@static\n\t@param {String} str String to encode\n\t@return {String} UTF-8 encoded string\n\t*/\n\tvar utf8_encode = function(str) {\n\t\treturn unescape(encodeURIComponent(str));\n\t};\n\t\n\t/**\n\tDecode UTF-8 encoded string\n\n\t@method utf8_decode\n\t@static\n\t@param {String} str String to decode\n\t@return {String} Decoded string\n\t*/\n\tvar utf8_decode = function(str_data) {\n\t\treturn decodeURIComponent(escape(str_data));\n\t};\n\t\n\t/**\n\tDecode Base64 encoded string (uses browser's default method if available),\n\tfrom: https://raw.github.com/kvz/phpjs/master/functions/url/base64_decode.js\n\n\t@method atob\n\t@static\n\t@param {String} data String to decode\n\t@return {String} Decoded string\n\t*/\n\tvar atob = function(data, utf8) {\n\t\tif (typeof(window.atob) === 'function') {\n\t\t\treturn utf8 ? utf8_decode(window.atob(data)) : window.atob(data);\n\t\t}\n\n\t\t// http://kevin.vanzonneveld.net\n\t\t// +   original by: Tyler Akins (http://rumkin.com)\n\t\t// +   improved by: Thunder.m\n\t\t// +      input by: Aman Gupta\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// +   bugfixed by: Onno Marsman\n\t\t// +   bugfixed by: Pellentesque Malesuada\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// +      input by: Brett Zamir (http://brett-zamir.me)\n\t\t// +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// *     example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==');\n\t\t// *     returns 1: 'Kevin van Zonneveld'\n\t\t// mozilla has this native\n\t\t// - but breaks in 2.0.0.12!\n\t\t//if (typeof this.window.atob == 'function') {\n\t\t//    return atob(data);\n\t\t//}\n\t\tvar b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\t\tvar o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n\t\t\tac = 0,\n\t\t\tdec = \"\",\n\t\t\ttmp_arr = [];\n\n\t\tif (!data) {\n\t\t\treturn data;\n\t\t}\n\n\t\tdata += '';\n\n\t\tdo { // unpack four hexets into three octets using index points in b64\n\t\t\th1 = b64.indexOf(data.charAt(i++));\n\t\t\th2 = b64.indexOf(data.charAt(i++));\n\t\t\th3 = b64.indexOf(data.charAt(i++));\n\t\t\th4 = b64.indexOf(data.charAt(i++));\n\n\t\t\tbits = h1 << 18 | h2 << 12 | h3 << 6 | h4;\n\n\t\t\to1 = bits >> 16 & 0xff;\n\t\t\to2 = bits >> 8 & 0xff;\n\t\t\to3 = bits & 0xff;\n\n\t\t\tif (h3 == 64) {\n\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1);\n\t\t\t} else if (h4 == 64) {\n\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1, o2);\n\t\t\t} else {\n\t\t\t\ttmp_arr[ac++] = String.fromCharCode(o1, o2, o3);\n\t\t\t}\n\t\t} while (i < data.length);\n\n\t\tdec = tmp_arr.join('');\n\n\t\treturn utf8 ? utf8_decode(dec) : dec;\n\t};\n\t\n\t/**\n\tBase64 encode string (uses browser's default method if available),\n\tfrom: https://raw.github.com/kvz/phpjs/master/functions/url/base64_encode.js\n\n\t@method btoa\n\t@static\n\t@param {String} data String to encode\n\t@return {String} Base64 encoded string\n\t*/\n\tvar btoa = function(data, utf8) {\n\t\tif (utf8) {\n\t\t\tutf8_encode(data);\n\t\t}\n\n\t\tif (typeof(window.btoa) === 'function') {\n\t\t\treturn window.btoa(data);\n\t\t}\n\n\t\t// http://kevin.vanzonneveld.net\n\t\t// +   original by: Tyler Akins (http://rumkin.com)\n\t\t// +   improved by: Bayron Guevara\n\t\t// +   improved by: Thunder.m\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// +   bugfixed by: Pellentesque Malesuada\n\t\t// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n\t\t// +   improved by: Rafał Kukawski (http://kukawski.pl)\n\t\t// *     example 1: base64_encode('Kevin van Zonneveld');\n\t\t// *     returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='\n\t\t// mozilla has this native\n\t\t// - but breaks in 2.0.0.12!\n\t\tvar b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\t\tvar o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n\t\t\tac = 0,\n\t\t\tenc = \"\",\n\t\t\ttmp_arr = [];\n\n\t\tif (!data) {\n\t\t\treturn data;\n\t\t}\n\n\t\tdo { // pack three octets into four hexets\n\t\t\to1 = data.charCodeAt(i++);\n\t\t\to2 = data.charCodeAt(i++);\n\t\t\to3 = data.charCodeAt(i++);\n\n\t\t\tbits = o1 << 16 | o2 << 8 | o3;\n\n\t\t\th1 = bits >> 18 & 0x3f;\n\t\t\th2 = bits >> 12 & 0x3f;\n\t\t\th3 = bits >> 6 & 0x3f;\n\t\t\th4 = bits & 0x3f;\n\n\t\t\t// use hexets to index into b64, and append result to encoded string\n\t\t\ttmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n\t\t} while (i < data.length);\n\n\t\tenc = tmp_arr.join('');\n\n\t\tvar r = data.length % 3;\n\n\t\treturn (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);\n\t};\n\n\n\treturn {\n\t\tutf8_encode: utf8_encode,\n\t\tutf8_decode: utf8_decode,\n\t\tatob: atob,\n\t\tbtoa: btoa\n\t};\n});\n");
__$coverInitRange("src/javascript/core/utils/Encode.js", "197:4674");
__$coverInitRange("src/javascript/core/utils/Encode.js", "405:485");
__$coverInitRange("src/javascript/core/utils/Encode.js", "630:718");
__$coverInitRange("src/javascript/core/utils/Encode.js", "982:2784");
__$coverInitRange("src/javascript/core/utils/Encode.js", "3047:4571");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4576:4670");
__$coverInitRange("src/javascript/core/utils/Encode.js", "441:481");
__$coverInitRange("src/javascript/core/utils/Encode.js", "671:714");
__$coverInitRange("src/javascript/core/utils/Encode.js", "1018:1131");
__$coverInitRange("src/javascript/core/utils/Encode.js", "1905:1982");
__$coverInitRange("src/javascript/core/utils/Encode.js", "1986:2070");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2075:2106");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2111:2121");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2126:2712");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2717:2739");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2744:2780");
__$coverInitRange("src/javascript/core/utils/Encode.js", "1063:1127");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2091:2102");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2200:2234");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2239:2273");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2278:2312");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2317:2351");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2357:2398");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2404:2426");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2431:2452");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2457:2473");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2479:2683");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2499:2538");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2570:2613");
__$coverInitRange("src/javascript/core/utils/Encode.js", "2631:2678");
__$coverInitRange("src/javascript/core/utils/Encode.js", "3083:3119");
__$coverInitRange("src/javascript/core/utils/Encode.js", "3124:3197");
__$coverInitRange("src/javascript/core/utils/Encode.js", "3784:3861");
__$coverInitRange("src/javascript/core/utils/Encode.js", "3865:3949");
__$coverInitRange("src/javascript/core/utils/Encode.js", "3954:3985");
__$coverInitRange("src/javascript/core/utils/Encode.js", "3990:4447");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4452:4474");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4479:4502");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4507:4567");
__$coverInitRange("src/javascript/core/utils/Encode.js", "3098:3115");
__$coverInitRange("src/javascript/core/utils/Encode.js", "3169:3193");
__$coverInitRange("src/javascript/core/utils/Encode.js", "3970:3981");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4036:4061");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4066:4091");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4096:4121");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4127:4157");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4163:4185");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4190:4212");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4217:4238");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4243:4259");
__$coverInitRange("src/javascript/core/utils/Encode.js", "4337:4418");
__$coverCall('src/javascript/core/utils/Encode.js', '197:4674');
define('moxie/core/utils/Encode', [], function () {
    __$coverCall('src/javascript/core/utils/Encode.js', '405:485');
    var utf8_encode = function (str) {
        __$coverCall('src/javascript/core/utils/Encode.js', '441:481');
        return unescape(encodeURIComponent(str));
    };
    __$coverCall('src/javascript/core/utils/Encode.js', '630:718');
    var utf8_decode = function (str_data) {
        __$coverCall('src/javascript/core/utils/Encode.js', '671:714');
        return decodeURIComponent(escape(str_data));
    };
    __$coverCall('src/javascript/core/utils/Encode.js', '982:2784');
    var atob = function (data, utf8) {
        __$coverCall('src/javascript/core/utils/Encode.js', '1018:1131');
        if (typeof window.atob === 'function') {
            __$coverCall('src/javascript/core/utils/Encode.js', '1063:1127');
            return utf8 ? utf8_decode(window.atob(data)) : window.atob(data);
        }
        __$coverCall('src/javascript/core/utils/Encode.js', '1905:1982');
        var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
        __$coverCall('src/javascript/core/utils/Encode.js', '1986:2070');
        var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, dec = '', tmp_arr = [];
        __$coverCall('src/javascript/core/utils/Encode.js', '2075:2106');
        if (!data) {
            __$coverCall('src/javascript/core/utils/Encode.js', '2091:2102');
            return data;
        }
        __$coverCall('src/javascript/core/utils/Encode.js', '2111:2121');
        data += '';
        __$coverCall('src/javascript/core/utils/Encode.js', '2126:2712');
        do {
            __$coverCall('src/javascript/core/utils/Encode.js', '2200:2234');
            h1 = b64.indexOf(data.charAt(i++));
            __$coverCall('src/javascript/core/utils/Encode.js', '2239:2273');
            h2 = b64.indexOf(data.charAt(i++));
            __$coverCall('src/javascript/core/utils/Encode.js', '2278:2312');
            h3 = b64.indexOf(data.charAt(i++));
            __$coverCall('src/javascript/core/utils/Encode.js', '2317:2351');
            h4 = b64.indexOf(data.charAt(i++));
            __$coverCall('src/javascript/core/utils/Encode.js', '2357:2398');
            bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;
            __$coverCall('src/javascript/core/utils/Encode.js', '2404:2426');
            o1 = bits >> 16 & 255;
            __$coverCall('src/javascript/core/utils/Encode.js', '2431:2452');
            o2 = bits >> 8 & 255;
            __$coverCall('src/javascript/core/utils/Encode.js', '2457:2473');
            o3 = bits & 255;
            __$coverCall('src/javascript/core/utils/Encode.js', '2479:2683');
            if (h3 == 64) {
                __$coverCall('src/javascript/core/utils/Encode.js', '2499:2538');
                tmp_arr[ac++] = String.fromCharCode(o1);
            } else if (h4 == 64) {
                __$coverCall('src/javascript/core/utils/Encode.js', '2570:2613');
                tmp_arr[ac++] = String.fromCharCode(o1, o2);
            } else {
                __$coverCall('src/javascript/core/utils/Encode.js', '2631:2678');
                tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);
            }
        } while (i < data.length);
        __$coverCall('src/javascript/core/utils/Encode.js', '2717:2739');
        dec = tmp_arr.join('');
        __$coverCall('src/javascript/core/utils/Encode.js', '2744:2780');
        return utf8 ? utf8_decode(dec) : dec;
    };
    __$coverCall('src/javascript/core/utils/Encode.js', '3047:4571');
    var btoa = function (data, utf8) {
        __$coverCall('src/javascript/core/utils/Encode.js', '3083:3119');
        if (utf8) {
            __$coverCall('src/javascript/core/utils/Encode.js', '3098:3115');
            utf8_encode(data);
        }
        __$coverCall('src/javascript/core/utils/Encode.js', '3124:3197');
        if (typeof window.btoa === 'function') {
            __$coverCall('src/javascript/core/utils/Encode.js', '3169:3193');
            return window.btoa(data);
        }
        __$coverCall('src/javascript/core/utils/Encode.js', '3784:3861');
        var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
        __$coverCall('src/javascript/core/utils/Encode.js', '3865:3949');
        var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, enc = '', tmp_arr = [];
        __$coverCall('src/javascript/core/utils/Encode.js', '3954:3985');
        if (!data) {
            __$coverCall('src/javascript/core/utils/Encode.js', '3970:3981');
            return data;
        }
        __$coverCall('src/javascript/core/utils/Encode.js', '3990:4447');
        do {
            __$coverCall('src/javascript/core/utils/Encode.js', '4036:4061');
            o1 = data.charCodeAt(i++);
            __$coverCall('src/javascript/core/utils/Encode.js', '4066:4091');
            o2 = data.charCodeAt(i++);
            __$coverCall('src/javascript/core/utils/Encode.js', '4096:4121');
            o3 = data.charCodeAt(i++);
            __$coverCall('src/javascript/core/utils/Encode.js', '4127:4157');
            bits = o1 << 16 | o2 << 8 | o3;
            __$coverCall('src/javascript/core/utils/Encode.js', '4163:4185');
            h1 = bits >> 18 & 63;
            __$coverCall('src/javascript/core/utils/Encode.js', '4190:4212');
            h2 = bits >> 12 & 63;
            __$coverCall('src/javascript/core/utils/Encode.js', '4217:4238');
            h3 = bits >> 6 & 63;
            __$coverCall('src/javascript/core/utils/Encode.js', '4243:4259');
            h4 = bits & 63;
            __$coverCall('src/javascript/core/utils/Encode.js', '4337:4418');
            tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);
        } while (i < data.length);
        __$coverCall('src/javascript/core/utils/Encode.js', '4452:4474');
        enc = tmp_arr.join('');
        __$coverCall('src/javascript/core/utils/Encode.js', '4479:4502');
        var r = data.length % 3;
        __$coverCall('src/javascript/core/utils/Encode.js', '4507:4567');
        return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);
    };
    __$coverCall('src/javascript/core/utils/Encode.js', '4576:4670');
    return {
        utf8_encode: utf8_encode,
        utf8_decode: utf8_decode,
        atob: atob,
        btoa: btoa
    };
});

// Included from: src/javascript/runtime/Runtime.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/Runtime.js", "/**\n * Runtime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/runtime/Runtime', [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/EventTarget\"\n], function(Basic, Dom, EventTarget) {\n\tvar runtimeConstructors = {}, runtimes = {};\n\n\t/**\n\tCommon set of methods and properties for every runtime instance\n\n\t@class Runtime\n\n\t@param {Object} options\n\t@param {String} type Sanitized name of the runtime\n\t@param {Object} [caps] Set of capabilities that differentiate specified runtime\n\t@param {Object} [modeCaps] Set of capabilities that do require specific operational mode\n\t@param {String} [preferredMode='browser'] Preferred operational mode to choose if no required capabilities were requested\n\t*/\n\tfunction Runtime(options, type, caps, modeCaps, preferredMode) {\n\t\t/**\n\t\tDispatched when runtime is initialized and ready.\n\t\tResults in RuntimeInit on a connected component.\n\n\t\t@event Init\n\t\t*/\n\n\t\t/**\n\t\tDispatched when runtime fails to initialize.\n\t\tResults in RuntimeError on a connected component.\n\n\t\t@event Error\n\t\t*/\n\n\t\tvar self = this\n\t\t, _shim\n\t\t, _uid = Basic.guid(type + '_')\n\t\t, defaultMode = preferredMode || 'browser'\n\t\t;\n\n\t\toptions = options || {};\n\n\t\t// register runtime in private hash\n\t\truntimes[_uid] = this;\n\n\t\t/**\n\t\tDefault set of capabilities, which can be redifined later by specific runtime\n\n\t\t@private\n\t\t@property caps\n\t\t@type Object\n\t\t*/\n\t\tcaps = Basic.extend({\n\t\t\t// Runtime can: \n\t\t\t// provide access to raw binary data of the file\n\t\t\taccess_binary: false,\n\t\t\t// provide access to raw binary data of the image (image extension is optional) \n\t\t\taccess_image_binary: false,\n\t\t\t// display binary data as thumbs for example\n\t\t\tdisplay_media: false,\n\t\t\t// make cross-domain requests\n\t\t\tdo_cors: false,\n\t\t\t// accept files dragged and dropped from the desktop\n\t\t\tdrag_and_drop: false,\n\t\t\t// filter files in selection dialog by their extensions\n\t\t\tfilter_by_extension: true,\n\t\t\t// resize image (and manipulate it raw data of any file in general)\n\t\t\tresize_image: false,\n\t\t\t// periodically report how many bytes of total in the file were uploaded (loaded)\n\t\t\treport_upload_progress: false,\n\t\t\t// provide access to the headers of http response \n\t\t\treturn_response_headers: false,\n\t\t\t// support response of specific type, which should be passed as an argument\n\t\t\t// e.g. runtime.can('return_response_type', 'blob')\n\t\t\treturn_response_type: false,\n\t\t\t// return http status code of the response\n\t\t\treturn_status_code: true,\n\t\t\t// send custom http header with the request\n\t\t\tsend_custom_headers: false,\n\t\t\t// pick up the files from a dialog\n\t\t\tselect_file: false,\n\t\t\t// select whole folder in file browse dialog\n\t\t\tselect_folder: false,\n\t\t\t// select multiple files at once in file browse dialog\n\t\t\tselect_multiple: true,\n\t\t\t// send raw binary data, that is generated after image resizing or manipulation of other kind\n\t\t\tsend_binary_string: false,\n\t\t\t// send cookies with http request and therefore retain session\n\t\t\tsend_browser_cookies: true,\n\t\t\t// send data formatted as multipart/form-data\n\t\t\tsend_multipart: true,\n\t\t\t// slice the file or blob to smaller parts\n\t\t\tslice_blob: false,\n\t\t\t// upload file without preloading it to memory, stream it out directly from disk\n\t\t\tstream_upload: false,\n\t\t\t// programmatically trigger file browse dialog\n\t\t\tsummon_file_dialog: false,\n\t\t\t// upload file of specific size, size should be passed as argument\n\t\t\t// e.g. runtime.can('upload_filesize', '500mb')\n\t\t\tupload_filesize: true,\n\t\t\t// initiate http request with specific http method, method should be passed as argument\n\t\t\t// e.g. runtime.can('use_http_method', 'put')\n\t\t\tuse_http_method: true\n\t\t}, caps);\n\t\t\t\n\t\n\t\t// default to the mode that is compatible with preferred caps\n\t\tif (options.preferred_caps) {\n\t\t\tdefaultMode = Runtime.getMode(modeCaps, options.preferred_caps, defaultMode);\n\t\t}\n\t\t\n\t\t// small extension factory here (is meant to be extended with actual extensions constructors)\n\t\t_shim = (function() {\n\t\t\tvar objpool = {};\n\t\t\treturn {\n\t\t\t\texec: function(uid, comp, fn, args) {\n\t\t\t\t\tif (_shim[comp]) {\n\t\t\t\t\t\tif (!objpool[uid]) {\n\t\t\t\t\t\t\tobjpool[uid] = {\n\t\t\t\t\t\t\t\tcontext: this,\n\t\t\t\t\t\t\t\tinstance: new _shim[comp]()\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (objpool[uid].instance[fn]) {\n\t\t\t\t\t\t\treturn objpool[uid].instance[fn].apply(this, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tremoveInstance: function(uid) {\n\t\t\t\t\tdelete objpool[uid];\n\t\t\t\t},\n\n\t\t\t\tremoveAllInstances: function() {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tBasic.each(objpool, function(obj, uid) {\n\t\t\t\t\t\tif (Basic.typeOf(obj.instance.destroy) === 'function') {\n\t\t\t\t\t\t\tobj.instance.destroy.call(obj.context);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.removeInstance(uid);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}());\n\n\n\t\t// public methods\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tSpecifies whether runtime instance was initialized or not\n\n\t\t\t@property initialized\n\t\t\t@type {Boolean}\n\t\t\t@default false\n\t\t\t*/\n\t\t\tinitialized: false, // shims require this flag to stop initialization retries\n\n\t\t\t/**\n\t\t\tUnique ID of the runtime\n\n\t\t\t@property uid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tuid: _uid,\n\n\t\t\t/**\n\t\t\tRuntime type (e.g. flash, html5, etc)\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\ttype: type,\n\n\t\t\t/**\n\t\t\tRuntime (not native one) may operate in browser or client mode.\n\n\t\t\t@property mode\n\t\t\t@private\n\t\t\t@type {String|Boolean} current mode or false, if none possible\n\t\t\t*/\n\t\t\tmode: Runtime.getMode(modeCaps, (options.required_caps), defaultMode),\n\n\t\t\t/**\n\t\t\tid of the DOM container for the runtime (if available)\n\n\t\t\t@property shimid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tshimid: _uid + '_container',\n\n\t\t\t/**\n\t\t\tNumber of connected clients. If equal to zero, runtime can be destroyed\n\n\t\t\t@property clients\n\t\t\t@type {Number}\n\t\t\t*/\n\t\t\tclients: 0,\n\n\t\t\t/**\n\t\t\tRuntime initialization options\n\n\t\t\t@property options\n\t\t\t@type {Object}\n\t\t\t*/\n\t\t\toptions: options,\n\n\t\t\t/**\n\t\t\tChecks if the runtime has specific capability\n\n\t\t\t@method can\n\t\t\t@param {String} cap Name of capability to check\n\t\t\t@param {Mixed} [value] If passed, capability should somehow correlate to the value\n\t\t\t@param {Object} [refCaps] Set of capabilities to check the specified cap against (defaults to internal set)\n\t\t\t@return {Boolean} true if runtime has such capability and false, if - not\n\t\t\t*/\n\t\t\tcan: function(cap, value) {\n\t\t\t\tvar refCaps = arguments[2] || caps;\n\n\t\t\t\t// if cap var is a comma-separated list of caps, convert it to object (key/value)\n\t\t\t\tif (Basic.typeOf(cap) === 'string' && Basic.typeOf(value) === 'undefined') {\n\t\t\t\t\tcap = Runtime.parseCaps(cap);\n\t\t\t\t}\n\n\t\t\t\tif (Basic.typeOf(cap) === 'object') {\n\t\t\t\t\tfor (var key in cap) {\n\t\t\t\t\t\tif (!this.can(key, cap[key], refCaps)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// check the individual cap\n\t\t\t\tif (Basic.typeOf(refCaps[cap]) === 'function') {\n\t\t\t\t\treturn refCaps[cap].call(this, value);\n\t\t\t\t} else {\n\t\t\t\t\treturn (value === refCaps[cap]);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns container for the runtime as DOM element\n\n\t\t\t@method getShimContainer\n\t\t\t@return {DOMElement}\n\t\t\t*/\n\t\t\tgetShimContainer: function() {\n\t\t\t\tvar container, shimContainer = Dom.get(this.shimid);\n\n\t\t\t\t// if no container for shim, create one\n\t\t\t\tif (!shimContainer) {\n\t\t\t\t\tcontainer = this.options.container ? Dom.get(this.options.container) : document.body;\n\n\t\t\t\t\t// create shim container and insert it at an absolute position into the outer container\n\t\t\t\t\tshimContainer = document.createElement('div');\n\t\t\t\t\tshimContainer.id = this.shimid;\n\t\t\t\t\tshimContainer.className = 'moxie-shim moxie-shim-' + this.type;\n\n\t\t\t\t\tBasic.extend(shimContainer.style, {\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\ttop: '0px',\n\t\t\t\t\t\tleft: '0px',\n\t\t\t\t\t\twidth: '1px',\n\t\t\t\t\t\theight: '1px',\n\t\t\t\t\t\toverflow: 'hidden'\n\t\t\t\t\t});\n\n\t\t\t\t\tcontainer.appendChild(shimContainer);\n\t\t\t\t\tcontainer = null;\n\t\t\t\t}\n\n\t\t\t\treturn shimContainer;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns runtime as DOM element (if appropriate)\n\n\t\t\t@method getShim\n\t\t\t@return {DOMElement}\n\t\t\t*/\n\t\t\tgetShim: function() {\n\t\t\t\treturn _shim;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tInvokes a method within the runtime itself (might differ across the runtimes)\n\n\t\t\t@method shimExec\n\t\t\t@param {Mixed} []\n\t\t\t@protected\n\t\t\t@return {Mixed} Depends on the action and component\n\t\t\t*/\n\t\t\tshimExec: function(component, action) {\n\t\t\t\tvar args = [].slice.call(arguments, 2);\n\t\t\t\treturn self.getShim().exec.call(this, this.uid, component, action, args);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tOperaional interface that is used by components to invoke specific actions on the runtime\n\t\t\t(is invoked in the scope of component)\n\n\t\t\t@method exec\n\t\t\t@param {Mixed} []*\n\t\t\t@protected\n\t\t\t@return {Mixed} Depends on the action and component\n\t\t\t*/\n\t\t\texec: function(component, action) { // this is called in the context of component, not runtime\n\t\t\t\tvar args = [].slice.call(arguments, 2);\n\n\t\t\t\tif (self[component] && self[component][action]) {\n\t\t\t\t\treturn self[component][action].apply(this, args);\n\t\t\t\t}\n\t\t\t\treturn self.shimExec.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDestroys the runtime (removes all events and deletes DOM structures)\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tif (!self) {\n\t\t\t\t\treturn; // obviously already destroyed\n\t\t\t\t}\n\n\t\t\t\tvar shimContainer = Dom.get(this.shimid);\n\t\t\t\tif (shimContainer) {\n\t\t\t\t\tshimContainer.parentNode.removeChild(shimContainer);\n\t\t\t\t}\n\n\t\t\t\tif (_shim) {\n\t\t\t\t\t_shim.removeAllInstances();\n\t\t\t\t}\n\n\t\t\t\tthis.unbindAll();\n\t\t\t\tdelete runtimes[this.uid];\n\t\t\t\tthis.uid = null; // mark this runtime as destroyed\n\t\t\t\t_uid = self = _shim = shimContainer = null;\n\t\t\t}\n\t\t});\n\n\t\t// once we got the mode, test against all caps\n\t\tif (this.mode && options.required_caps && !this.can(options.required_caps)) {\n\t\t\tthis.mode = false;\n\t\t}\t\n\t}\n\n\n\t/**\n\tDefault order to try different runtime types\n\n\t@property order\n\t@type String\n\t@static\n\t*/\n\tRuntime.order = 'html5,flash,silverlight,html4';\n\n\n\t/**\n\tRetrieves runtime from private hash by it's uid\n\n\t@method getRuntime\n\t@private\n\t@static\n\t@param {String} uid Unique identifier of the runtime\n\t@return {Runtime|Boolean} Returns runtime, if it exists and false, if - not\n\t*/\n\tRuntime.getRuntime = function(uid) {\n\t\treturn runtimes[uid] ? runtimes[uid] : false;\n\t};\n\n\n\t/**\n\tRegister constructor for the Runtime of new (or perhaps modified) type\n\n\t@method addConstructor\n\t@static\n\t@param {String} type Runtime type (e.g. flash, html5, etc)\n\t@param {Function} construct Constructor for the Runtime type\n\t*/\n\tRuntime.addConstructor = function(type, constructor) {\n\t\tconstructor.prototype = EventTarget.instance;\n\t\truntimeConstructors[type] = constructor;\n\t};\n\n\n\t/**\n\tGet the constructor for the specified type.\n\n\tmethod getConstructor\n\t@static\n\t@param {String} type Runtime type (e.g. flash, html5, etc)\n\t@return {Function} Constructor for the Runtime type\n\t*/\n\tRuntime.getConstructor = function(type) {\n\t\treturn runtimeConstructors[type] || null;\n\t};\n\n\n\t/**\n\tGet info about the runtime (uid, type, capabilities)\n\n\t@method getInfo\n\t@static\n\t@param {String} uid Unique identifier of the runtime\n\t@return {Mixed} Info object or null if runtime doesn't exist\n\t*/\n\tRuntime.getInfo = function(uid) {\n\t\tvar runtime = Runtime.getRuntime(uid);\n\n\t\tif (runtime) {\n\t\t\treturn {\n\t\t\t\tuid: runtime.uid,\n\t\t\t\ttype: runtime.type,\n\t\t\t\tcan: function() {\n\t\t\t\t\treturn runtime.can.apply(runtime, arguments);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t};\n\n\n\t/**\n\tConvert caps represented by a comma-separated string to the object representation.\n\n\t@method parseCaps\n\t@static\n\t@param {String} capStr Comma-separated list of capabilities\n\t@return {Object}\n\t*/\n\tRuntime.parseCaps = function(capStr) {\n\t\tvar capObj = {};\n\n\t\tif (Basic.typeOf(capStr) !== 'string') {\n\t\t\treturn capStr || {};\n\t\t}\n\n\t\tBasic.each(capStr.split(','), function(key) {\n\t\t\tcapObj[key] = true; // we assume it to be - true\n\t\t});\n\n\t\treturn capObj;\n\t};\n\n\t/**\n\tTest the specified runtime for specific capabilities.\n\n\t@method can\n\t@static\n\t@param {String} type Runtime type (e.g. flash, html5, etc)\n\t@param {String|Object} caps Set of capabilities to check\n\t@return {Boolean} Result of the test\n\t*/\n\tRuntime.can = function(type, caps) {\n\t\tvar runtime\n\t\t, constructor = Runtime.getConstructor(type)\n\t\t, mode\n\t\t;\n\t\tif (constructor) {\n\t\t\truntime = new constructor({\n\t\t\t\trequired_caps: caps\n\t\t\t});\n\t\t\tmode = runtime.mode;\n\t\t\truntime.destroy();\n\t\t\treturn !!mode;\n\t\t}\n\t\treturn false;\n\t};\n\n\n\t/**\n\tFigure out a runtime that supports specified capabilities.\n\n\t@method thatCan\n\t@static\n\t@param {String|Object} caps Set of capabilities to check\n\t@param {String} [runtimeOrder] Comma-separated list of runtimes to check against\n\t@return {String} Usable runtime identifier or null\n\t*/\n\tRuntime.thatCan = function(caps, runtimeOrder) {\n\t\tvar types = (runtimeOrder || Runtime.order).split(/\\s*,\\s*/);\n\t\tfor (var i in types) {\n\t\t\tif (Runtime.can(types[i], caps)) {\n\t\t\t\treturn types[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\n\n\t/**\n\tFigure out an operational mode for the specified set of capabilities.\n\n\t@method getMode\n\t@static\n\t@param {Object} modeCaps Set of capabilities that depend on particular runtime mode\n\t@param {Object} [requiredCaps] Supplied set of capabilities to find operational mode for\n\t@param {String|Boolean} [defaultMode='browser'] Default mode to use \n\t@return {String|Boolean} Compatible operational mode\n\t*/\n\tRuntime.getMode = function(modeCaps, requiredCaps, defaultMode) {\n\t\tvar mode = null;\n\n\t\tif (Basic.typeOf(defaultMode) === 'undefined') { // only if not specified\n\t\t\tdefaultMode = 'browser';\n\t\t}\n\n\t\tif (requiredCaps && !Basic.isEmptyObj(modeCaps)) {\n\t\t\t// loop over required caps and check if they do require the same mode\n\t\t\tBasic.each(requiredCaps, function(value, cap) {\n\t\t\t\tif (modeCaps.hasOwnProperty(cap)) {\n\t\t\t\t\tvar capMode = modeCaps[cap](value);\n\n\t\t\t\t\t// make sure we always have an array\n\t\t\t\t\tif (typeof(capMode) === 'string') {\n\t\t\t\t\t\tcapMode = [capMode];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (!mode) {\n\t\t\t\t\t\tmode = capMode;\n\t\t\t\t\t} else if (!(mode = Basic.arrayIntersect(mode, capMode))) {\n\t\t\t\t\t\t// if cap requires conflicting mode - runtime cannot fulfill required caps\n\t\t\t\t\t\treturn (mode = false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (mode) {\n\t\t\t\treturn Basic.inArray(defaultMode, mode) !== -1 ? defaultMode : mode[0];\n\t\t\t} else if (mode === false) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn defaultMode; \n\t};\n\n\n\t/**\n\tCapability check that always returns true\n\n\t@private\n\t@static\n\t@return {True}\n\t*/\n\tRuntime.capTrue = function() {\n\t\treturn true;\n\t};\n\n\t/**\n\tCapability check that always returns false\n\n\t@private\n\t@static\n\t@return {False}\n\t*/\n\tRuntime.capFalse = function() {\n\t\treturn false;\n\t};\n\n\t/**\n\tEvaluate the expression to boolean value and create a function that always returns it.\n\n\t@private\n\t@static\n\t@param {Mixed} expr Expression to evaluate\n\t@return {Function} Function returning the result of evaluation\n\t*/\n\tRuntime.capTest = function(expr) {\n\t\treturn function() {\n\t\t\treturn !!expr;\n\t\t};\n\t};\n\n\treturn Runtime;\n});\n");
__$coverInitRange("src/javascript/runtime/Runtime.js", "198:14825");
__$coverInitRange("src/javascript/runtime/Runtime.js", "350:393");
__$coverInitRange("src/javascript/runtime/Runtime.js", "860:9682");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9783:9830");
__$coverInitRange("src/javascript/runtime/Runtime.js", "10064:10151");
__$coverInitRange("src/javascript/runtime/Runtime.js", "10393:10541");
__$coverInitRange("src/javascript/runtime/Runtime.js", "10746:10834");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11045:11302");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11508:11765");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12012:12292");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12585:12808");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13219:14207");
__$coverInitRange("src/javascript/runtime/Runtime.js", "14300:14348");
__$coverInitRange("src/javascript/runtime/Runtime.js", "14442:14492");
__$coverInitRange("src/javascript/runtime/Runtime.js", "14721:14803");
__$coverInitRange("src/javascript/runtime/Runtime.js", "14807:14821");
__$coverInitRange("src/javascript/runtime/Runtime.js", "1184:1290");
__$coverInitRange("src/javascript/runtime/Runtime.js", "1291:1291");
__$coverInitRange("src/javascript/runtime/Runtime.js", "1296:1319");
__$coverInitRange("src/javascript/runtime/Runtime.js", "1362:1383");
__$coverInitRange("src/javascript/runtime/Runtime.js", "1523:3769");
__$coverInitRange("src/javascript/runtime/Runtime.js", "3843:3956");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4059:4781");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4807:9522");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9576:9678");
__$coverInitRange("src/javascript/runtime/Runtime.js", "3876:3952");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4084:4100");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4105:4773");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4161:4419");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4186:4306");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4314:4412");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4214:4298");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4354:4404");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4470:4489");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4541:4556");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4563:4761");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4610:4720");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4728:4752");
__$coverInitRange("src/javascript/runtime/Runtime.js", "4674:4712");
__$coverInitRange("src/javascript/runtime/Runtime.js", "6332:6366");
__$coverInitRange("src/javascript/runtime/Runtime.js", "6459:6575");
__$coverInitRange("src/javascript/runtime/Runtime.js", "6582:6753");
__$coverInitRange("src/javascript/runtime/Runtime.js", "6792:6940");
__$coverInitRange("src/javascript/runtime/Runtime.js", "6541:6569");
__$coverInitRange("src/javascript/runtime/Runtime.js", "6625:6729");
__$coverInitRange("src/javascript/runtime/Runtime.js", "6736:6747");
__$coverInitRange("src/javascript/runtime/Runtime.js", "6654:6722");
__$coverInitRange("src/javascript/runtime/Runtime.js", "6702:6714");
__$coverInitRange("src/javascript/runtime/Runtime.js", "6846:6883");
__$coverInitRange("src/javascript/runtime/Runtime.js", "6903:6934");
__$coverInitRange("src/javascript/runtime/Runtime.js", "7105:7156");
__$coverInitRange("src/javascript/runtime/Runtime.js", "7207:7825");
__$coverInitRange("src/javascript/runtime/Runtime.js", "7832:7852");
__$coverInitRange("src/javascript/runtime/Runtime.js", "7234:7318");
__$coverInitRange("src/javascript/runtime/Runtime.js", "7419:7464");
__$coverInitRange("src/javascript/runtime/Runtime.js", "7471:7501");
__$coverInitRange("src/javascript/runtime/Runtime.js", "7508:7570");
__$coverInitRange("src/javascript/runtime/Runtime.js", "7578:7752");
__$coverInitRange("src/javascript/runtime/Runtime.js", "7760:7796");
__$coverInitRange("src/javascript/runtime/Runtime.js", "7803:7819");
__$coverInitRange("src/javascript/runtime/Runtime.js", "7998:8010");
__$coverInitRange("src/javascript/runtime/Runtime.js", "8271:8309");
__$coverInitRange("src/javascript/runtime/Runtime.js", "8315:8387");
__$coverInitRange("src/javascript/runtime/Runtime.js", "8754:8792");
__$coverInitRange("src/javascript/runtime/Runtime.js", "8799:8908");
__$coverInitRange("src/javascript/runtime/Runtime.js", "8914:8957");
__$coverInitRange("src/javascript/runtime/Runtime.js", "8854:8902");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9100:9161");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9168:9208");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9214:9297");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9304:9354");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9361:9377");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9383:9408");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9414:9429");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9469:9511");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9118:9124");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9240:9291");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9322:9348");
__$coverInitRange("src/javascript/runtime/Runtime.js", "9657:9674");
__$coverInitRange("src/javascript/runtime/Runtime.js", "10103:10147");
__$coverInitRange("src/javascript/runtime/Runtime.js", "10450:10494");
__$coverInitRange("src/javascript/runtime/Runtime.js", "10498:10537");
__$coverInitRange("src/javascript/runtime/Runtime.js", "10790:10830");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11081:11118");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11123:11283");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11287:11298");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11141:11279");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11223:11267");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11549:11564");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11569:11636");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11641:11743");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11748:11761");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11613:11632");
__$coverInitRange("src/javascript/runtime/Runtime.js", "11690:11708");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12051:12120");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12121:12121");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12125:12272");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12276:12288");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12147:12204");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12209:12228");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12233:12250");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12255:12268");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12636:12696");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12700:12789");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12793:12804");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12726:12785");
__$coverInitRange("src/javascript/runtime/Runtime.js", "12765:12780");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13287:13302");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13307:13411");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13416:14180");
__$coverInitRange("src/javascript/runtime/Runtime.js", "14184:14202");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13384:13407");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13543:14029");
__$coverInitRange("src/javascript/runtime/Runtime.js", "14035:14176");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13595:14022");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13636:13670");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13720:13788");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13801:14016");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13762:13781");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13820:13834");
__$coverInitRange("src/javascript/runtime/Runtime.js", "13988:14009");
__$coverInitRange("src/javascript/runtime/Runtime.js", "14051:14121");
__$coverInitRange("src/javascript/runtime/Runtime.js", "14159:14171");
__$coverInitRange("src/javascript/runtime/Runtime.js", "14333:14344");
__$coverInitRange("src/javascript/runtime/Runtime.js", "14476:14488");
__$coverInitRange("src/javascript/runtime/Runtime.js", "14758:14799");
__$coverInitRange("src/javascript/runtime/Runtime.js", "14781:14794");
__$coverCall('src/javascript/runtime/Runtime.js', '198:14825');
define('moxie/runtime/Runtime', [
    'moxie/core/utils/Basic',
    'moxie/core/utils/Dom',
    'moxie/core/EventTarget'
], function (Basic, Dom, EventTarget) {
    __$coverCall('src/javascript/runtime/Runtime.js', '350:393');
    var runtimeConstructors = {}, runtimes = {};
    __$coverCall('src/javascript/runtime/Runtime.js', '860:9682');
    function Runtime(options, type, caps, modeCaps, preferredMode) {
        __$coverCall('src/javascript/runtime/Runtime.js', '1184:1290');
        var self = this, _shim, _uid = Basic.guid(type + '_'), defaultMode = preferredMode || 'browser';
        __$coverCall('src/javascript/runtime/Runtime.js', '1291:1291');
        ;
        __$coverCall('src/javascript/runtime/Runtime.js', '1296:1319');
        options = options || {};
        __$coverCall('src/javascript/runtime/Runtime.js', '1362:1383');
        runtimes[_uid] = this;
        __$coverCall('src/javascript/runtime/Runtime.js', '1523:3769');
        caps = Basic.extend({
            access_binary: false,
            access_image_binary: false,
            display_media: false,
            do_cors: false,
            drag_and_drop: false,
            filter_by_extension: true,
            resize_image: false,
            report_upload_progress: false,
            return_response_headers: false,
            return_response_type: false,
            return_status_code: true,
            send_custom_headers: false,
            select_file: false,
            select_folder: false,
            select_multiple: true,
            send_binary_string: false,
            send_browser_cookies: true,
            send_multipart: true,
            slice_blob: false,
            stream_upload: false,
            summon_file_dialog: false,
            upload_filesize: true,
            use_http_method: true
        }, caps);
        __$coverCall('src/javascript/runtime/Runtime.js', '3843:3956');
        if (options.preferred_caps) {
            __$coverCall('src/javascript/runtime/Runtime.js', '3876:3952');
            defaultMode = Runtime.getMode(modeCaps, options.preferred_caps, defaultMode);
        }
        __$coverCall('src/javascript/runtime/Runtime.js', '4059:4781');
        _shim = function () {
            __$coverCall('src/javascript/runtime/Runtime.js', '4084:4100');
            var objpool = {};
            __$coverCall('src/javascript/runtime/Runtime.js', '4105:4773');
            return {
                exec: function (uid, comp, fn, args) {
                    __$coverCall('src/javascript/runtime/Runtime.js', '4161:4419');
                    if (_shim[comp]) {
                        __$coverCall('src/javascript/runtime/Runtime.js', '4186:4306');
                        if (!objpool[uid]) {
                            __$coverCall('src/javascript/runtime/Runtime.js', '4214:4298');
                            objpool[uid] = {
                                context: this,
                                instance: new _shim[comp]()
                            };
                        }
                        __$coverCall('src/javascript/runtime/Runtime.js', '4314:4412');
                        if (objpool[uid].instance[fn]) {
                            __$coverCall('src/javascript/runtime/Runtime.js', '4354:4404');
                            return objpool[uid].instance[fn].apply(this, args);
                        }
                    }
                },
                removeInstance: function (uid) {
                    __$coverCall('src/javascript/runtime/Runtime.js', '4470:4489');
                    delete objpool[uid];
                },
                removeAllInstances: function () {
                    __$coverCall('src/javascript/runtime/Runtime.js', '4541:4556');
                    var self = this;
                    __$coverCall('src/javascript/runtime/Runtime.js', '4563:4761');
                    Basic.each(objpool, function (obj, uid) {
                        __$coverCall('src/javascript/runtime/Runtime.js', '4610:4720');
                        if (Basic.typeOf(obj.instance.destroy) === 'function') {
                            __$coverCall('src/javascript/runtime/Runtime.js', '4674:4712');
                            obj.instance.destroy.call(obj.context);
                        }
                        __$coverCall('src/javascript/runtime/Runtime.js', '4728:4752');
                        self.removeInstance(uid);
                    });
                }
            };
        }();
        __$coverCall('src/javascript/runtime/Runtime.js', '4807:9522');
        Basic.extend(this, {
            initialized: false,
            uid: _uid,
            type: type,
            mode: Runtime.getMode(modeCaps, options.required_caps, defaultMode),
            shimid: _uid + '_container',
            clients: 0,
            options: options,
            can: function (cap, value) {
                __$coverCall('src/javascript/runtime/Runtime.js', '6332:6366');
                var refCaps = arguments[2] || caps;
                __$coverCall('src/javascript/runtime/Runtime.js', '6459:6575');
                if (Basic.typeOf(cap) === 'string' && Basic.typeOf(value) === 'undefined') {
                    __$coverCall('src/javascript/runtime/Runtime.js', '6541:6569');
                    cap = Runtime.parseCaps(cap);
                }
                __$coverCall('src/javascript/runtime/Runtime.js', '6582:6753');
                if (Basic.typeOf(cap) === 'object') {
                    __$coverCall('src/javascript/runtime/Runtime.js', '6625:6729');
                    for (var key in cap) {
                        __$coverCall('src/javascript/runtime/Runtime.js', '6654:6722');
                        if (!this.can(key, cap[key], refCaps)) {
                            __$coverCall('src/javascript/runtime/Runtime.js', '6702:6714');
                            return false;
                        }
                    }
                    __$coverCall('src/javascript/runtime/Runtime.js', '6736:6747');
                    return true;
                }
                __$coverCall('src/javascript/runtime/Runtime.js', '6792:6940');
                if (Basic.typeOf(refCaps[cap]) === 'function') {
                    __$coverCall('src/javascript/runtime/Runtime.js', '6846:6883');
                    return refCaps[cap].call(this, value);
                } else {
                    __$coverCall('src/javascript/runtime/Runtime.js', '6903:6934');
                    return value === refCaps[cap];
                }
            },
            getShimContainer: function () {
                __$coverCall('src/javascript/runtime/Runtime.js', '7105:7156');
                var container, shimContainer = Dom.get(this.shimid);
                __$coverCall('src/javascript/runtime/Runtime.js', '7207:7825');
                if (!shimContainer) {
                    __$coverCall('src/javascript/runtime/Runtime.js', '7234:7318');
                    container = this.options.container ? Dom.get(this.options.container) : document.body;
                    __$coverCall('src/javascript/runtime/Runtime.js', '7419:7464');
                    shimContainer = document.createElement('div');
                    __$coverCall('src/javascript/runtime/Runtime.js', '7471:7501');
                    shimContainer.id = this.shimid;
                    __$coverCall('src/javascript/runtime/Runtime.js', '7508:7570');
                    shimContainer.className = 'moxie-shim moxie-shim-' + this.type;
                    __$coverCall('src/javascript/runtime/Runtime.js', '7578:7752');
                    Basic.extend(shimContainer.style, {
                        position: 'absolute',
                        top: '0px',
                        left: '0px',
                        width: '1px',
                        height: '1px',
                        overflow: 'hidden'
                    });
                    __$coverCall('src/javascript/runtime/Runtime.js', '7760:7796');
                    container.appendChild(shimContainer);
                    __$coverCall('src/javascript/runtime/Runtime.js', '7803:7819');
                    container = null;
                }
                __$coverCall('src/javascript/runtime/Runtime.js', '7832:7852');
                return shimContainer;
            },
            getShim: function () {
                __$coverCall('src/javascript/runtime/Runtime.js', '7998:8010');
                return _shim;
            },
            shimExec: function (component, action) {
                __$coverCall('src/javascript/runtime/Runtime.js', '8271:8309');
                var args = [].slice.call(arguments, 2);
                __$coverCall('src/javascript/runtime/Runtime.js', '8315:8387');
                return self.getShim().exec.call(this, this.uid, component, action, args);
            },
            exec: function (component, action) {
                __$coverCall('src/javascript/runtime/Runtime.js', '8754:8792');
                var args = [].slice.call(arguments, 2);
                __$coverCall('src/javascript/runtime/Runtime.js', '8799:8908');
                if (self[component] && self[component][action]) {
                    __$coverCall('src/javascript/runtime/Runtime.js', '8854:8902');
                    return self[component][action].apply(this, args);
                }
                __$coverCall('src/javascript/runtime/Runtime.js', '8914:8957');
                return self.shimExec.apply(this, arguments);
            },
            destroy: function () {
                __$coverCall('src/javascript/runtime/Runtime.js', '9100:9161');
                if (!self) {
                    __$coverCall('src/javascript/runtime/Runtime.js', '9118:9124');
                    return;
                }
                __$coverCall('src/javascript/runtime/Runtime.js', '9168:9208');
                var shimContainer = Dom.get(this.shimid);
                __$coverCall('src/javascript/runtime/Runtime.js', '9214:9297');
                if (shimContainer) {
                    __$coverCall('src/javascript/runtime/Runtime.js', '9240:9291');
                    shimContainer.parentNode.removeChild(shimContainer);
                }
                __$coverCall('src/javascript/runtime/Runtime.js', '9304:9354');
                if (_shim) {
                    __$coverCall('src/javascript/runtime/Runtime.js', '9322:9348');
                    _shim.removeAllInstances();
                }
                __$coverCall('src/javascript/runtime/Runtime.js', '9361:9377');
                this.unbindAll();
                __$coverCall('src/javascript/runtime/Runtime.js', '9383:9408');
                delete runtimes[this.uid];
                __$coverCall('src/javascript/runtime/Runtime.js', '9414:9429');
                this.uid = null;
                __$coverCall('src/javascript/runtime/Runtime.js', '9469:9511');
                _uid = self = _shim = shimContainer = null;
            }
        });
        __$coverCall('src/javascript/runtime/Runtime.js', '9576:9678');
        if (this.mode && options.required_caps && !this.can(options.required_caps)) {
            __$coverCall('src/javascript/runtime/Runtime.js', '9657:9674');
            this.mode = false;
        }
    }
    __$coverCall('src/javascript/runtime/Runtime.js', '9783:9830');
    Runtime.order = 'html5,flash,silverlight,html4';
    __$coverCall('src/javascript/runtime/Runtime.js', '10064:10151');
    Runtime.getRuntime = function (uid) {
        __$coverCall('src/javascript/runtime/Runtime.js', '10103:10147');
        return runtimes[uid] ? runtimes[uid] : false;
    };
    __$coverCall('src/javascript/runtime/Runtime.js', '10393:10541');
    Runtime.addConstructor = function (type, constructor) {
        __$coverCall('src/javascript/runtime/Runtime.js', '10450:10494');
        constructor.prototype = EventTarget.instance;
        __$coverCall('src/javascript/runtime/Runtime.js', '10498:10537');
        runtimeConstructors[type] = constructor;
    };
    __$coverCall('src/javascript/runtime/Runtime.js', '10746:10834');
    Runtime.getConstructor = function (type) {
        __$coverCall('src/javascript/runtime/Runtime.js', '10790:10830');
        return runtimeConstructors[type] || null;
    };
    __$coverCall('src/javascript/runtime/Runtime.js', '11045:11302');
    Runtime.getInfo = function (uid) {
        __$coverCall('src/javascript/runtime/Runtime.js', '11081:11118');
        var runtime = Runtime.getRuntime(uid);
        __$coverCall('src/javascript/runtime/Runtime.js', '11123:11283');
        if (runtime) {
            __$coverCall('src/javascript/runtime/Runtime.js', '11141:11279');
            return {
                uid: runtime.uid,
                type: runtime.type,
                can: function () {
                    __$coverCall('src/javascript/runtime/Runtime.js', '11223:11267');
                    return runtime.can.apply(runtime, arguments);
                }
            };
        }
        __$coverCall('src/javascript/runtime/Runtime.js', '11287:11298');
        return null;
    };
    __$coverCall('src/javascript/runtime/Runtime.js', '11508:11765');
    Runtime.parseCaps = function (capStr) {
        __$coverCall('src/javascript/runtime/Runtime.js', '11549:11564');
        var capObj = {};
        __$coverCall('src/javascript/runtime/Runtime.js', '11569:11636');
        if (Basic.typeOf(capStr) !== 'string') {
            __$coverCall('src/javascript/runtime/Runtime.js', '11613:11632');
            return capStr || {};
        }
        __$coverCall('src/javascript/runtime/Runtime.js', '11641:11743');
        Basic.each(capStr.split(','), function (key) {
            __$coverCall('src/javascript/runtime/Runtime.js', '11690:11708');
            capObj[key] = true;
        });
        __$coverCall('src/javascript/runtime/Runtime.js', '11748:11761');
        return capObj;
    };
    __$coverCall('src/javascript/runtime/Runtime.js', '12012:12292');
    Runtime.can = function (type, caps) {
        __$coverCall('src/javascript/runtime/Runtime.js', '12051:12120');
        var runtime, constructor = Runtime.getConstructor(type), mode;
        __$coverCall('src/javascript/runtime/Runtime.js', '12121:12121');
        ;
        __$coverCall('src/javascript/runtime/Runtime.js', '12125:12272');
        if (constructor) {
            __$coverCall('src/javascript/runtime/Runtime.js', '12147:12204');
            runtime = new constructor({ required_caps: caps });
            __$coverCall('src/javascript/runtime/Runtime.js', '12209:12228');
            mode = runtime.mode;
            __$coverCall('src/javascript/runtime/Runtime.js', '12233:12250');
            runtime.destroy();
            __$coverCall('src/javascript/runtime/Runtime.js', '12255:12268');
            return !!mode;
        }
        __$coverCall('src/javascript/runtime/Runtime.js', '12276:12288');
        return false;
    };
    __$coverCall('src/javascript/runtime/Runtime.js', '12585:12808');
    Runtime.thatCan = function (caps, runtimeOrder) {
        __$coverCall('src/javascript/runtime/Runtime.js', '12636:12696');
        var types = (runtimeOrder || Runtime.order).split(/\s*,\s*/);
        __$coverCall('src/javascript/runtime/Runtime.js', '12700:12789');
        for (var i in types) {
            __$coverCall('src/javascript/runtime/Runtime.js', '12726:12785');
            if (Runtime.can(types[i], caps)) {
                __$coverCall('src/javascript/runtime/Runtime.js', '12765:12780');
                return types[i];
            }
        }
        __$coverCall('src/javascript/runtime/Runtime.js', '12793:12804');
        return null;
    };
    __$coverCall('src/javascript/runtime/Runtime.js', '13219:14207');
    Runtime.getMode = function (modeCaps, requiredCaps, defaultMode) {
        __$coverCall('src/javascript/runtime/Runtime.js', '13287:13302');
        var mode = null;
        __$coverCall('src/javascript/runtime/Runtime.js', '13307:13411');
        if (Basic.typeOf(defaultMode) === 'undefined') {
            __$coverCall('src/javascript/runtime/Runtime.js', '13384:13407');
            defaultMode = 'browser';
        }
        __$coverCall('src/javascript/runtime/Runtime.js', '13416:14180');
        if (requiredCaps && !Basic.isEmptyObj(modeCaps)) {
            __$coverCall('src/javascript/runtime/Runtime.js', '13543:14029');
            Basic.each(requiredCaps, function (value, cap) {
                __$coverCall('src/javascript/runtime/Runtime.js', '13595:14022');
                if (modeCaps.hasOwnProperty(cap)) {
                    __$coverCall('src/javascript/runtime/Runtime.js', '13636:13670');
                    var capMode = modeCaps[cap](value);
                    __$coverCall('src/javascript/runtime/Runtime.js', '13720:13788');
                    if (typeof capMode === 'string') {
                        __$coverCall('src/javascript/runtime/Runtime.js', '13762:13781');
                        capMode = [capMode];
                    }
                    __$coverCall('src/javascript/runtime/Runtime.js', '13801:14016');
                    if (!mode) {
                        __$coverCall('src/javascript/runtime/Runtime.js', '13820:13834');
                        mode = capMode;
                    } else if (!(mode = Basic.arrayIntersect(mode, capMode))) {
                        __$coverCall('src/javascript/runtime/Runtime.js', '13988:14009');
                        return mode = false;
                    }
                }
            });
            __$coverCall('src/javascript/runtime/Runtime.js', '14035:14176');
            if (mode) {
                __$coverCall('src/javascript/runtime/Runtime.js', '14051:14121');
                return Basic.inArray(defaultMode, mode) !== -1 ? defaultMode : mode[0];
            } else if (mode === false) {
                __$coverCall('src/javascript/runtime/Runtime.js', '14159:14171');
                return false;
            }
        }
        __$coverCall('src/javascript/runtime/Runtime.js', '14184:14202');
        return defaultMode;
    };
    __$coverCall('src/javascript/runtime/Runtime.js', '14300:14348');
    Runtime.capTrue = function () {
        __$coverCall('src/javascript/runtime/Runtime.js', '14333:14344');
        return true;
    };
    __$coverCall('src/javascript/runtime/Runtime.js', '14442:14492');
    Runtime.capFalse = function () {
        __$coverCall('src/javascript/runtime/Runtime.js', '14476:14488');
        return false;
    };
    __$coverCall('src/javascript/runtime/Runtime.js', '14721:14803');
    Runtime.capTest = function (expr) {
        __$coverCall('src/javascript/runtime/Runtime.js', '14758:14799');
        return function () {
            __$coverCall('src/javascript/runtime/Runtime.js', '14781:14794');
            return !!expr;
        };
    };
    __$coverCall('src/javascript/runtime/Runtime.js', '14807:14821');
    return Runtime;
});

// Included from: src/javascript/runtime/RuntimeClient.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/RuntimeClient.js", "/**\n * RuntimeClient.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/runtime/RuntimeClient', [\n\t'moxie/core/Exceptions',\n\t'moxie/core/utils/Basic',\n\t'moxie/runtime/Runtime'\n], function(x, Basic, Runtime) {\n\t/**\n\tSet of methods and properties, required by a component to acquire ability to connect to a runtime\n\n\t@class RuntimeClient\n\t*/\n\treturn function RuntimeClient() {\n\t\tvar runtime;\n\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tConnects to the runtime specified by the options. Will either connect to existing runtime or create a new one.\n\t\t\tIncrements number of clients connected to the specified runtime.\n\n\t\t\t@method connectRuntime\n\t\t\t@param {Mixed} options Can be a runtme uid or a set of key-value pairs defining requirements and pre-requisites\n\t\t\t*/\n\t\t\tconnectRuntime: function(options) {\n\t\t\t\tvar comp = this, ruid;\n\n\t\t\t\tfunction initialize(items) {\n\t\t\t\t\tvar type, constructor;\n\n\t\t\t\t\t// if we ran out of runtimes\n\t\t\t\t\tif (!items.length) {\n\t\t\t\t\t\tcomp.trigger('RuntimeError', new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));\n\t\t\t\t\t\truntime = null;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\ttype = items.shift();\n\t\t\t\t\tconstructor = Runtime.getConstructor(type);\n\t\t\t\t\tif (!constructor) {\n\t\t\t\t\t\tinitialize(items);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// try initializing the runtime\n\t\t\t\t\truntime = new constructor(options);\n\n\t\t\t\t\truntime.bind('Init', function() {\n\t\t\t\t\t\t// mark runtime as initialized\n\t\t\t\t\t\truntime.initialized = true;\n\n\t\t\t\t\t\t// jailbreak ...\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\truntime.clients++;\n\t\t\t\t\t\t\t// this will be triggered on component\n\t\t\t\t\t\t\tcomp.trigger('RuntimeInit', runtime);\n\t\t\t\t\t\t}, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\truntime.bind('Error', function() {\n\t\t\t\t\t\truntime.destroy(); // runtime cannot destroy itself from inside at a right moment, thus we do it here\n\t\t\t\t\t\tinitialize(items);\n\t\t\t\t\t});\n\n\t\t\t\t\t/*runtime.bind('Exception', function() { });*/\n\n\t\t\t\t\t// check if runtime managed to pick-up operational mode\n\t\t\t\t\tif (!runtime.mode) {\n\t\t\t\t\t\truntime.trigger('Error');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\truntime.init();\n\t\t\t\t}\n\n\t\t\t\t// check if a particular runtime was requested\n\t\t\t\tif (Basic.typeOf(options) === 'string') {\n\t\t\t\t\truid = options;\n\t\t\t\t} else if (Basic.typeOf(options.ruid) === 'string') {\n\t\t\t\t\truid = options.ruid;\n\t\t\t\t}\n\n\t\t\t\tif (ruid) {\n\t\t\t\t\truntime = Runtime.getRuntime(ruid);\n\t\t\t\t\tif (runtime) {\n\t\t\t\t\t\truntime.clients++;\n\t\t\t\t\t\treturn runtime;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// there should be a runtime and there's none - weird case\n\t\t\t\t\t\tthrow new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// initialize a fresh one, that fits runtime list and required features best\n\t\t\t\tinitialize((options.runtime_order || Runtime.order).split(/\\s*,\\s*/));\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns the runtime to which the client is currently connected.\n\n\t\t\t@method getRuntime\n\t\t\t@return {Runtime} Runtime or null if client is not connected\n\t\t\t*/\n\t\t\tgetRuntime: function() {\n\t\t\t\tif (runtime && runtime.uid) {\n\t\t\t\t\treturn runtime;\n\t\t\t\t}\n\t\t\t\truntime = null; // make sure we do not leave zombies rambling around\n\t\t\t\treturn null;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDisconnects from the runtime. Decrements number of clients connected to the specified runtime.\n\n\t\t\t@method disconnectRuntime\n\t\t\t*/\n\t\t\tdisconnectRuntime: function() {\n\t\t\t\tif (runtime && --runtime.clients <= 0) {\n\t\t\t\t\truntime.destroy();\n\t\t\t\t\truntime = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t};\n\n\n});");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "204:3446");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "487:3440");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "523:534");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "539:3436");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "940:961");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "968:2148");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2206:2357");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2364:2635");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2723:2792");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1002:1023");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1065:1212");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1220:1240");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1247:1289");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1296:1360");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1405:1439");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1447:1743");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1751:1926");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2048:2120");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2128:2142");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1092:1169");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1177:1191");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1199:1205");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1322:1339");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1347:1353");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1524:1550");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1582:1734");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1613:1630");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1685:1721");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1792:1809");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "1900:1917");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2075:2099");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2107:2113");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2253:2267");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2332:2351");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2381:2415");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2422:2629");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2443:2460");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2468:2482");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "2569:2622");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "3000:3055");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "3061:3075");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "3134:3145");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "3035:3049");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "3334:3424");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "3380:3397");
__$coverInitRange("src/javascript/runtime/RuntimeClient.js", "3404:3418");
__$coverCall('src/javascript/runtime/RuntimeClient.js', '204:3446');
define('moxie/runtime/RuntimeClient', [
    'moxie/core/Exceptions',
    'moxie/core/utils/Basic',
    'moxie/runtime/Runtime'
], function (x, Basic, Runtime) {
    __$coverCall('src/javascript/runtime/RuntimeClient.js', '487:3440');
    return function RuntimeClient() {
        __$coverCall('src/javascript/runtime/RuntimeClient.js', '523:534');
        var runtime;
        __$coverCall('src/javascript/runtime/RuntimeClient.js', '539:3436');
        Basic.extend(this, {
            connectRuntime: function (options) {
                __$coverCall('src/javascript/runtime/RuntimeClient.js', '940:961');
                var comp = this, ruid;
                __$coverCall('src/javascript/runtime/RuntimeClient.js', '968:2148');
                function initialize(items) {
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '1002:1023');
                    var type, constructor;
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '1065:1212');
                    if (!items.length) {
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '1092:1169');
                        comp.trigger('RuntimeError', new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '1177:1191');
                        runtime = null;
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '1199:1205');
                        return;
                    }
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '1220:1240');
                    type = items.shift();
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '1247:1289');
                    constructor = Runtime.getConstructor(type);
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '1296:1360');
                    if (!constructor) {
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '1322:1339');
                        initialize(items);
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '1347:1353');
                        return;
                    }
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '1405:1439');
                    runtime = new constructor(options);
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '1447:1743');
                    runtime.bind('Init', function () {
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '1524:1550');
                        runtime.initialized = true;
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '1582:1734');
                        setTimeout(function () {
                            __$coverCall('src/javascript/runtime/RuntimeClient.js', '1613:1630');
                            runtime.clients++;
                            __$coverCall('src/javascript/runtime/RuntimeClient.js', '1685:1721');
                            comp.trigger('RuntimeInit', runtime);
                        }, 1);
                    });
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '1751:1926');
                    runtime.bind('Error', function () {
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '1792:1809');
                        runtime.destroy();
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '1900:1917');
                        initialize(items);
                    });
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '2048:2120');
                    if (!runtime.mode) {
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '2075:2099');
                        runtime.trigger('Error');
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '2107:2113');
                        return;
                    }
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '2128:2142');
                    runtime.init();
                }
                __$coverCall('src/javascript/runtime/RuntimeClient.js', '2206:2357');
                if (Basic.typeOf(options) === 'string') {
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '2253:2267');
                    ruid = options;
                } else if (Basic.typeOf(options.ruid) === 'string') {
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '2332:2351');
                    ruid = options.ruid;
                }
                __$coverCall('src/javascript/runtime/RuntimeClient.js', '2364:2635');
                if (ruid) {
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '2381:2415');
                    runtime = Runtime.getRuntime(ruid);
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '2422:2629');
                    if (runtime) {
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '2443:2460');
                        runtime.clients++;
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '2468:2482');
                        return runtime;
                    } else {
                        __$coverCall('src/javascript/runtime/RuntimeClient.js', '2569:2622');
                        throw new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR);
                    }
                }
                __$coverCall('src/javascript/runtime/RuntimeClient.js', '2723:2792');
                initialize((options.runtime_order || Runtime.order).split(/\s*,\s*/));
            },
            getRuntime: function () {
                __$coverCall('src/javascript/runtime/RuntimeClient.js', '3000:3055');
                if (runtime && runtime.uid) {
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '3035:3049');
                    return runtime;
                }
                __$coverCall('src/javascript/runtime/RuntimeClient.js', '3061:3075');
                runtime = null;
                __$coverCall('src/javascript/runtime/RuntimeClient.js', '3134:3145');
                return null;
            },
            disconnectRuntime: function () {
                __$coverCall('src/javascript/runtime/RuntimeClient.js', '3334:3424');
                if (runtime && --runtime.clients <= 0) {
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '3380:3397');
                    runtime.destroy();
                    __$coverCall('src/javascript/runtime/RuntimeClient.js', '3404:3418');
                    runtime = null;
                }
            }
        });
    };
});

// Included from: src/javascript/file/Blob.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/file/Blob.js", "/**\n * Blob.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/Blob', [\n\t'moxie/core/utils/Basic',\n\t'moxie/core/utils/Encode',\n\t'moxie/runtime/RuntimeClient'\n], function(Basic, Encode, RuntimeClient) {\n\t\n\tvar blobpool = {};\n\n\t/**\n\t@class Blob\n\t@constructor\n\t@param {String} ruid Unique id of the runtime, to which this blob belongs to\n\t@param {Object} blob Object \"Native\" blob object, as it is represented in the runtime\n\t*/\n\tfunction Blob(ruid, blob) {\n\n\t\tfunction _sliceDetached(start, end, type) {\n\t\t\tvar blob, data = blobpool[this.uid];\n\n\t\t\tif (Basic.typeOf(data) !== 'string' || !data.length) {\n\t\t\t\treturn null; // or throw exception\n\t\t\t}\n\n\t\t\tblob = new Blob(null, {\n\t\t\t\ttype: type,\n\t\t\t\tsize: end - start\n\t\t\t});\n\t\t\tblob.detach(data.substr(start, blob.size));\n\n\t\t\treturn blob;\n\t\t}\n\n\t\tRuntimeClient.call(this);\n\n\t\tif (ruid) {\t\n\t\t\tthis.connectRuntime(ruid);\n\t\t}\n\n\t\tif (!blob) {\n\t\t\tblob = {};\n\t\t} else if (Basic.typeOf(blob) === 'string') { // dataUrl or binary string\n\t\t\tblob = { data: blob };\n\t\t}\n\n\t\tBasic.extend(this, {\n\t\t\t\n\t\t\t/**\n\t\t\tUnique id of the component\n\n\t\t\t@property uid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tuid: blob.uid || Basic.guid('uid_'),\n\t\t\t\n\t\t\t/**\n\t\t\tUnique id of the connected runtime, if falsy, then runtime will have to be initialized \n\t\t\tbefore this Blob can be used, modified or sent\n\n\t\t\t@property ruid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\truid: ruid,\n\t\n\t\t\t/**\n\t\t\tSize of blob\n\n\t\t\t@property size\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\tsize: blob.size || 0,\n\t\t\t\n\t\t\t/**\n\t\t\tMime type of blob\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t@default ''\n\t\t\t*/\n\t\t\ttype: blob.type || '',\n\t\t\t\n\t\t\t/**\n\t\t\t@method slice\n\t\t\t@param {Number} [start=0]\n\t\t\t*/\n\t\t\tslice: function(start, end, type) {\t\t\n\t\t\t\tif (this.isDetached()) {\n\t\t\t\t\treturn _sliceDetached.apply(this, arguments);\n\t\t\t\t}\n\t\t\t\treturn this.getRuntime().exec.call(this, 'Blob', 'slice', this.getSource(), start, end, type);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns \"native\" blob object (as it is represented in connected runtime) or null if not found\n\n\t\t\t@method getSource\n\t\t\t@return {Blob} Returns \"native\" blob object or null if not found\n\t\t\t*/\n\t\t\tgetSource: function() {\n\t\t\t\tif (!blobpool[this.uid]) {\n\t\t\t\t\treturn null;\t\n\t\t\t\t}\n\t\t\t\treturn blobpool[this.uid];\n\t\t\t},\n\n\t\t\t/** \n\t\t\tDetaches blob from any runtime that it depends on and initialize with standalone value\n\n\t\t\t@method detach\n\t\t\t@protected\n\t\t\t@param {DOMString} [data=''] Standalone value\n\t\t\t*/\n\t\t\tdetach: function(data) {\n\t\t\t\tif (this.ruid) {\n\t\t\t\t\tthis.getRuntime().exec.call(this, 'Blob', 'destroy', blobpool[this.uid]);\n\t\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t\tthis.ruid = null;\n\t\t\t\t}\n\n\t\t\t\tdata = data || '';\n\n\t\t\t\t// if dataUrl, convert to binary string\n\t\t\t\tvar matches = data.match(/^data:([^;]*);base64,/);\n\t\t\t\tif (matches) {\n\t\t\t\t\tthis.type = matches[1];\n\t\t\t\t\tdata = Encode.atob(data.substring(data.indexOf('base64,') + 7));\n\t\t\t\t}\n\n\t\t\t\tthis.size = data.length;\n\n\t\t\t\tblobpool[this.uid] = data;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tChecks if blob is standalone (detached of any runtime)\n\t\t\t\n\t\t\t@method isDetached\n\t\t\t@protected\n\t\t\t@return {Boolean}\n\t\t\t*/\n\t\t\tisDetached: function() {\n\t\t\t\treturn !this.ruid && Basic.typeOf(blobpool[this.uid]) === 'string';\n\t\t\t},\n\t\t\t\n\t\t\t/** \n\t\t\tDestroy Blob and free any resources it was using\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tthis.detach();\n\t\t\t\tdelete blobpool[this.uid];\n\t\t\t}\n\t\t});\n\n\t\t\n\t\tif (blob.data) {\n\t\t\tthis.detach(blob.data); // auto-detach if payload has been passed\n\t\t} else {\n\t\t\tblobpool[this.uid] = blob;\t\n\t\t}\n\t}\n\t\n\treturn Blob;\n});");
__$coverInitRange("src/javascript/file/Blob.js", "195:3613");
__$coverInitRange("src/javascript/file/Blob.js", "356:373");
__$coverInitRange("src/javascript/file/Blob.js", "578:3593");
__$coverInitRange("src/javascript/file/Blob.js", "3598:3609");
__$coverInitRange("src/javascript/file/Blob.js", "609:935");
__$coverInitRange("src/javascript/file/Blob.js", "940:964");
__$coverInitRange("src/javascript/file/Blob.js", "969:1014");
__$coverInitRange("src/javascript/file/Blob.js", "1019:1150");
__$coverInitRange("src/javascript/file/Blob.js", "1155:3452");
__$coverInitRange("src/javascript/file/Blob.js", "3460:3590");
__$coverInitRange("src/javascript/file/Blob.js", "656:691");
__$coverInitRange("src/javascript/file/Blob.js", "697:794");
__$coverInitRange("src/javascript/file/Blob.js", "800:867");
__$coverInitRange("src/javascript/file/Blob.js", "872:914");
__$coverInitRange("src/javascript/file/Blob.js", "920:931");
__$coverInitRange("src/javascript/file/Blob.js", "756:767");
__$coverInitRange("src/javascript/file/Blob.js", "985:1010");
__$coverInitRange("src/javascript/file/Blob.js", "1035:1044");
__$coverInitRange("src/javascript/file/Blob.js", "1125:1146");
__$coverInitRange("src/javascript/file/Blob.js", "1840:1920");
__$coverInitRange("src/javascript/file/Blob.js", "1926:2019");
__$coverInitRange("src/javascript/file/Blob.js", "1870:1914");
__$coverInitRange("src/javascript/file/Blob.js", "2259:2309");
__$coverInitRange("src/javascript/file/Blob.js", "2315:2340");
__$coverInitRange("src/javascript/file/Blob.js", "2291:2302");
__$coverInitRange("src/javascript/file/Blob.js", "2567:2721");
__$coverInitRange("src/javascript/file/Blob.js", "2728:2745");
__$coverInitRange("src/javascript/file/Blob.js", "2796:2845");
__$coverInitRange("src/javascript/file/Blob.js", "2851:2969");
__$coverInitRange("src/javascript/file/Blob.js", "2976:2999");
__$coverInitRange("src/javascript/file/Blob.js", "3006:3031");
__$coverInitRange("src/javascript/file/Blob.js", "2589:2661");
__$coverInitRange("src/javascript/file/Blob.js", "2668:2692");
__$coverInitRange("src/javascript/file/Blob.js", "2699:2715");
__$coverInitRange("src/javascript/file/Blob.js", "2871:2893");
__$coverInitRange("src/javascript/file/Blob.js", "2900:2963");
__$coverInitRange("src/javascript/file/Blob.js", "3204:3270");
__$coverInitRange("src/javascript/file/Blob.js", "3397:3410");
__$coverInitRange("src/javascript/file/Blob.js", "3416:3441");
__$coverInitRange("src/javascript/file/Blob.js", "3480:3502");
__$coverInitRange("src/javascript/file/Blob.js", "3560:3585");
__$coverCall('src/javascript/file/Blob.js', '195:3613');
define('moxie/file/Blob', [
    'moxie/core/utils/Basic',
    'moxie/core/utils/Encode',
    'moxie/runtime/RuntimeClient'
], function (Basic, Encode, RuntimeClient) {
    __$coverCall('src/javascript/file/Blob.js', '356:373');
    var blobpool = {};
    __$coverCall('src/javascript/file/Blob.js', '578:3593');
    function Blob(ruid, blob) {
        __$coverCall('src/javascript/file/Blob.js', '609:935');
        function _sliceDetached(start, end, type) {
            __$coverCall('src/javascript/file/Blob.js', '656:691');
            var blob, data = blobpool[this.uid];
            __$coverCall('src/javascript/file/Blob.js', '697:794');
            if (Basic.typeOf(data) !== 'string' || !data.length) {
                __$coverCall('src/javascript/file/Blob.js', '756:767');
                return null;
            }
            __$coverCall('src/javascript/file/Blob.js', '800:867');
            blob = new Blob(null, {
                type: type,
                size: end - start
            });
            __$coverCall('src/javascript/file/Blob.js', '872:914');
            blob.detach(data.substr(start, blob.size));
            __$coverCall('src/javascript/file/Blob.js', '920:931');
            return blob;
        }
        __$coverCall('src/javascript/file/Blob.js', '940:964');
        RuntimeClient.call(this);
        __$coverCall('src/javascript/file/Blob.js', '969:1014');
        if (ruid) {
            __$coverCall('src/javascript/file/Blob.js', '985:1010');
            this.connectRuntime(ruid);
        }
        __$coverCall('src/javascript/file/Blob.js', '1019:1150');
        if (!blob) {
            __$coverCall('src/javascript/file/Blob.js', '1035:1044');
            blob = {};
        } else if (Basic.typeOf(blob) === 'string') {
            __$coverCall('src/javascript/file/Blob.js', '1125:1146');
            blob = { data: blob };
        }
        __$coverCall('src/javascript/file/Blob.js', '1155:3452');
        Basic.extend(this, {
            uid: blob.uid || Basic.guid('uid_'),
            ruid: ruid,
            size: blob.size || 0,
            type: blob.type || '',
            slice: function (start, end, type) {
                __$coverCall('src/javascript/file/Blob.js', '1840:1920');
                if (this.isDetached()) {
                    __$coverCall('src/javascript/file/Blob.js', '1870:1914');
                    return _sliceDetached.apply(this, arguments);
                }
                __$coverCall('src/javascript/file/Blob.js', '1926:2019');
                return this.getRuntime().exec.call(this, 'Blob', 'slice', this.getSource(), start, end, type);
            },
            getSource: function () {
                __$coverCall('src/javascript/file/Blob.js', '2259:2309');
                if (!blobpool[this.uid]) {
                    __$coverCall('src/javascript/file/Blob.js', '2291:2302');
                    return null;
                }
                __$coverCall('src/javascript/file/Blob.js', '2315:2340');
                return blobpool[this.uid];
            },
            detach: function (data) {
                __$coverCall('src/javascript/file/Blob.js', '2567:2721');
                if (this.ruid) {
                    __$coverCall('src/javascript/file/Blob.js', '2589:2661');
                    this.getRuntime().exec.call(this, 'Blob', 'destroy', blobpool[this.uid]);
                    __$coverCall('src/javascript/file/Blob.js', '2668:2692');
                    this.disconnectRuntime();
                    __$coverCall('src/javascript/file/Blob.js', '2699:2715');
                    this.ruid = null;
                }
                __$coverCall('src/javascript/file/Blob.js', '2728:2745');
                data = data || '';
                __$coverCall('src/javascript/file/Blob.js', '2796:2845');
                var matches = data.match(/^data:([^;]*);base64,/);
                __$coverCall('src/javascript/file/Blob.js', '2851:2969');
                if (matches) {
                    __$coverCall('src/javascript/file/Blob.js', '2871:2893');
                    this.type = matches[1];
                    __$coverCall('src/javascript/file/Blob.js', '2900:2963');
                    data = Encode.atob(data.substring(data.indexOf('base64,') + 7));
                }
                __$coverCall('src/javascript/file/Blob.js', '2976:2999');
                this.size = data.length;
                __$coverCall('src/javascript/file/Blob.js', '3006:3031');
                blobpool[this.uid] = data;
            },
            isDetached: function () {
                __$coverCall('src/javascript/file/Blob.js', '3204:3270');
                return !this.ruid && Basic.typeOf(blobpool[this.uid]) === 'string';
            },
            destroy: function () {
                __$coverCall('src/javascript/file/Blob.js', '3397:3410');
                this.detach();
                __$coverCall('src/javascript/file/Blob.js', '3416:3441');
                delete blobpool[this.uid];
            }
        });
        __$coverCall('src/javascript/file/Blob.js', '3460:3590');
        if (blob.data) {
            __$coverCall('src/javascript/file/Blob.js', '3480:3502');
            this.detach(blob.data);
        } else {
            __$coverCall('src/javascript/file/Blob.js', '3560:3585');
            blobpool[this.uid] = blob;
        }
    }
    __$coverCall('src/javascript/file/Blob.js', '3598:3609');
    return Blob;
});

// Included from: src/javascript/file/File.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/file/File.js", "/**\n * File.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/File', [\n\t'moxie/core/utils/Basic',\n\t'moxie/core/utils/Mime',\n\t'moxie/file/Blob'\n], function(Basic, Mime, Blob) {\n\t/**\n\t@class File\n\t@extends Blob\n\t@constructor\n\t@param {String} ruid Unique id of the runtime, to which this blob belongs to\n\t@param {Object} file Object \"Native\" file object, as it is represented in the runtime\n\t*/\n\tfunction File(ruid, file) {\n\t\tvar name, type;\n\n\t\tif (!file) { // avoid extra errors in case we overlooked something\n\t\t\tfile = {};\n\t\t}\n\n\t\t// figure out the type\n\t\tif (file.type && file.type !== '') {\n\t\t\ttype = file.type;\n\t\t} else {\n\t\t\ttype = Mime.getFileMime(file.name);\n\t\t}\n\n\t\t// sanitize file name or generate new one\n\t\tif (file.name) {\n\t\t\tname = file.name.replace(/\\\\/g, '/');\n\t\t\tname = name.substr(name.lastIndexOf('/') + 1);\n\t\t} else {\n\t\t\tvar prefix = type.split('/')[0];\n\t\t\tname = Basic.guid((prefix !== '' ? prefix : 'file') + '_');\n\t\t\t\n\t\t\tif (Mime.extensions[type]) {\n\t\t\t\tname += '.' + Mime.extensions[type][0]; // append proper extension if possible\n\t\t\t}\n\t\t}\n\n\t\tBlob.apply(this, arguments);\n\t\t\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tFile mime type\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t@default ''\n\t\t\t*/\n\t\t\ttype: type || '',\n\n\t\t\t/**\n\t\t\tFile name\n\n\t\t\t@property name\n\t\t\t@type {String}\n\t\t\t@default UID\n\t\t\t*/\n\t\t\tname: name || Basic.guid('file_'),\n\t\t\t\n\t\t\t/**\n\t\t\tDate of last modification\n\n\t\t\t@property lastModifiedDate\n\t\t\t@type {String}\n\t\t\t@default now\n\t\t\t*/\n\t\t\tlastModifiedDate: file.lastModifiedDate || (new Date()).toLocaleString() // Thu Aug 23 2012 19:40:00 GMT+0400 (GET)\n\t\t});\n\t}\n\n\tFile.prototype = Blob.prototype;\n\n\treturn File;\n});");
__$coverInitRange("src/javascript/file/File.js", "195:1783");
__$coverInitRange("src/javascript/file/File.js", "545:1729");
__$coverInitRange("src/javascript/file/File.js", "1733:1764");
__$coverInitRange("src/javascript/file/File.js", "1768:1779");
__$coverInitRange("src/javascript/file/File.js", "575:589");
__$coverInitRange("src/javascript/file/File.js", "594:677");
__$coverInitRange("src/javascript/file/File.js", "707:817");
__$coverInitRange("src/javascript/file/File.js", "866:1210");
__$coverInitRange("src/javascript/file/File.js", "1215:1242");
__$coverInitRange("src/javascript/file/File.js", "1249:1726");
__$coverInitRange("src/javascript/file/File.js", "664:673");
__$coverInitRange("src/javascript/file/File.js", "747:763");
__$coverInitRange("src/javascript/file/File.js", "779:813");
__$coverInitRange("src/javascript/file/File.js", "886:922");
__$coverInitRange("src/javascript/file/File.js", "927:972");
__$coverInitRange("src/javascript/file/File.js", "988:1019");
__$coverInitRange("src/javascript/file/File.js", "1024:1082");
__$coverInitRange("src/javascript/file/File.js", "1091:1206");
__$coverInitRange("src/javascript/file/File.js", "1124:1162");
__$coverCall('src/javascript/file/File.js', '195:1783');
define('moxie/file/File', [
    'moxie/core/utils/Basic',
    'moxie/core/utils/Mime',
    'moxie/file/Blob'
], function (Basic, Mime, Blob) {
    __$coverCall('src/javascript/file/File.js', '545:1729');
    function File(ruid, file) {
        __$coverCall('src/javascript/file/File.js', '575:589');
        var name, type;
        __$coverCall('src/javascript/file/File.js', '594:677');
        if (!file) {
            __$coverCall('src/javascript/file/File.js', '664:673');
            file = {};
        }
        __$coverCall('src/javascript/file/File.js', '707:817');
        if (file.type && file.type !== '') {
            __$coverCall('src/javascript/file/File.js', '747:763');
            type = file.type;
        } else {
            __$coverCall('src/javascript/file/File.js', '779:813');
            type = Mime.getFileMime(file.name);
        }
        __$coverCall('src/javascript/file/File.js', '866:1210');
        if (file.name) {
            __$coverCall('src/javascript/file/File.js', '886:922');
            name = file.name.replace(/\\/g, '/');
            __$coverCall('src/javascript/file/File.js', '927:972');
            name = name.substr(name.lastIndexOf('/') + 1);
        } else {
            __$coverCall('src/javascript/file/File.js', '988:1019');
            var prefix = type.split('/')[0];
            __$coverCall('src/javascript/file/File.js', '1024:1082');
            name = Basic.guid((prefix !== '' ? prefix : 'file') + '_');
            __$coverCall('src/javascript/file/File.js', '1091:1206');
            if (Mime.extensions[type]) {
                __$coverCall('src/javascript/file/File.js', '1124:1162');
                name += '.' + Mime.extensions[type][0];
            }
        }
        __$coverCall('src/javascript/file/File.js', '1215:1242');
        Blob.apply(this, arguments);
        __$coverCall('src/javascript/file/File.js', '1249:1726');
        Basic.extend(this, {
            type: type || '',
            name: name || Basic.guid('file_'),
            lastModifiedDate: file.lastModifiedDate || new Date().toLocaleString()
        });
    }
    __$coverCall('src/javascript/file/File.js', '1733:1764');
    File.prototype = Blob.prototype;
    __$coverCall('src/javascript/file/File.js', '1768:1779');
    return File;
});

// Included from: src/javascript/file/FileInput.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/file/FileInput.js", "/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/FileInput', [\n\t'moxie/core/utils/Basic',\n\t'moxie/core/utils/Mime',\n\t'moxie/core/utils/Dom',\n\t'moxie/core/Exceptions',\n\t'moxie/core/EventTarget',\n\t'moxie/core/I18n',\n\t'moxie/file/File',\n\t'moxie/runtime/Runtime',\n\t'moxie/runtime/RuntimeClient'\n], function(Basic, Mime, Dom, x, EventTarget, I18n, File, Runtime, RuntimeClient) {\n\t/**\n\tProvides a convenient way to create cross-browser file-picker. Generates file selection dialog on click,\n\tconverts selected files to _File_ objects, to be used in conjunction with _Image_, preloaded in memory\n\twith _FileReader_ or uploaded to a server through _XMLHttpRequest_.\n\n\t@class FileInput\n\t@constructor\n\t@extends EventTarget\n\t@uses RuntimeClient\n\t@param {Object|String|DOMElement} options If options is string or node, argument is considered as _browse\\_button_.\n\t\t@param {String|DOMElement} options.browse_button DOM Element to turn into file picker.\n\t\t@param {Array} [options.accept] Array of mime types to accept. By default accepts all.\n\t\t@param {String} [options.file='file'] Name of the file field (not the filename).\n\t\t@param {Boolean} [options.multiple=false] Enable selection of multiple files.\n\t\t@param {Boolean} [options.directory=false] Turn file input into the folder input (cannot be both at the same time).\n\t\t@param {String|DOMElement} [options.container] DOM Element to use as a container for file-picker. Defaults to parentNode \n\t\tfor _browse\\_button_.\n\t\t@param {Object|String} [options.required_caps] Set of required capabilities, that chosen runtime must support.\n\n\t@example\n\t\t<div id=\"container\">\n\t\t\t<a id=\"file-picker\" href=\"javascript:;\">Browse...</a>\n\t\t</div>\n\n\t\t<script>\n\t\t\tvar fileInput = new mOxie.FileInput({\n\t\t\t\tbrowse_button: 'file-picker', // or document.getElementById('file-picker')\n\t\t\t\tcontainer: 'container',\n\t\t\t\taccept: [\n\t\t\t\t\t{title: \"Image files\", extensions: \"jpg,gif,png\"} // accept only images\n\t\t\t\t],\n\t\t\t\tmultiple: true // allow multiple file selection\n\t\t\t});\n\n\t\t\tfileInput.onchange = function(e) {\n\t\t\t\t// do something to files array\n\t\t\t\tconsole.info(e.target.files); // or this.files or fileInput.files\n\t\t\t};\n\n\t\t\tfileInput.init(); // initialize\n\t\t</script>\n\t*/\n\tvar dispatches = [\n\t\t/**\n\t\tDispatched when runtime is connected and file-picker is ready to be used.\n\n\t\t@event ready\n\t\t@param {Object} event\n\t\t*/\n\t\t'ready',\n\n\t\t/**\n\t\tDispatched right after [ready](#event_ready) event, and whenever [refresh()](#method_refresh) is invoked. \n\t\tCheck [corresponding documentation entry](#method_refresh) for more info.\n\n\t\t@event refresh\n\t\t@param {Object} event\n\t\t*/\n\n\t\t/**\n\t\tDispatched when selection of files in the dialog is complete.\n\n\t\t@event change\n\t\t@param {Object} event\n\t\t*/\n\t\t'change',\n\n\t\t'cancel', // TODO: might be useful\n\n\t\t/**\n\t\tDispatched when mouse cursor enters file-picker area. Can be used to style element\n\t\taccordingly.\n\n\t\t@event mouseenter\n\t\t@param {Object} event\n\t\t*/\n\t\t'mouseenter',\n\n\t\t/**\n\t\tDispatched when mouse cursor leaves file-picker area. Can be used to style element\n\t\taccordingly.\n\n\t\t@event mouseleave\n\t\t@param {Object} event\n\t\t*/\n\t\t'mouseleave',\n\n\t\t/**\n\t\tDispatched when functional mouse button is pressed on top of file-picker area.\n\n\t\t@event mousedown\n\t\t@param {Object} event\n\t\t*/\n\t\t'mousedown',\n\n\t\t/**\n\t\tDispatched when functional mouse button is released on top of file-picker area.\n\n\t\t@event mouseup\n\t\t@param {Object} event\n\t\t*/\n\t\t'mouseup'\n\t];\n\n\tfunction FileInput(options) {\n\t\tvar self = this,\n\t\t\tcontainer, browseButton, defaults;\n\n\t\t// if flat argument passed it should be browse_button id\n\t\tif (Basic.inArray(Basic.typeOf(options), ['string', 'node']) !== -1) {\n\t\t\toptions = { browse_button : options };\n\t\t}\n\n\t\t// this will help us to find proper default container\n\t\tbrowseButton = Dom.get(options.browse_button);\n\t\tif (!browseButton) {\n\t\t\t// browse button is required\n\t\t\tthrow new x.DOMException(x.DOMException.NOT_FOUND_ERR);\n\t\t}\n\n\t\t// figure out the options\n\t\tdefaults = {\n\t\t\taccept: [{\n\t\t\t\ttitle: I18n.translate('All Files'),\n\t\t\t\textensions: '*'\n\t\t\t}],\n\t\t\tname: 'file',\n\t\t\tmultiple: false,\n\t\t\trequired_caps: false,\n\t\t\tcontainer: browseButton.parentNode || document.body\n\t\t};\n\t\t\n\t\toptions = Basic.extend({}, defaults, options);\n\n\t\t// convert to object representation\n\t\tif (typeof(options.required_caps) === 'string') {\n\t\t\toptions.required_caps = Runtime.parseCaps(options.required_caps);\n\t\t}\n\t\t\t\t\t\n\t\t// normalize accept option (could be list of mime types or array of title/extensions pairs)\n\t\tif (typeof(options.accept) === 'string') {\n\t\t\toptions.accept = Mime.mimes2extList(options.accept);\n\t\t}\n\n\t\tcontainer = Dom.get(options.container);\n\t\t// make sure we have container\n\t\tif (!container) {\n\t\t\tcontainer = document.body;\n\t\t}\n\n\t\t// make container relative, if it's not\n\t\tif (Dom.getStyle(container, 'position') === 'static') {\n\t\t\tcontainer.style.position = 'relative';\n\t\t}\n\n\t\tcontainer = browseButton = null; // IE\n\t\t\t\t\t\t\n\t\tRuntimeClient.call(self);\n\t\t\n\t\tBasic.extend(self, {\n\t\t\t/**\n\t\t\tUnique id of the component\n\n\t\t\t@property uid\n\t\t\t@protected\n\t\t\t@readOnly\n\t\t\t@type {String}\n\t\t\t@default UID\n\t\t\t*/\n\t\t\tuid: Basic.guid('uid_'),\n\t\t\t\n\t\t\t/**\n\t\t\tUnique id of the connected runtime, if any.\n\n\t\t\t@property ruid\n\t\t\t@protected\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\truid: null,\n\n\t\t\t/**\n\t\t\tUnique id of the runtime container. Useful to get hold of it for various manipulations.\n\n\t\t\t@property shimid\n\t\t\t@protected\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tshimid: null,\n\t\t\t\n\t\t\t/**\n\t\t\tArray of selected mOxie.File objects\n\n\t\t\t@property files\n\t\t\t@type {Array}\n\t\t\t@default null\n\t\t\t*/\n\t\t\tfiles: null,\n\n\t\t\t/**\n\t\t\tInitializes the file-picker, connects it to runtime and dispatches event ready when done.\n\n\t\t\t@method init\n\t\t\t*/\n\t\t\tinit: function() {\n\t\t\t\tself.convertEventPropsToHandlers(dispatches);\n\n\t\t\t\tself.bind('RuntimeInit', function(e, runtime) {\n\t\t\t\t\tself.ruid = runtime.uid;\n\t\t\t\t\tself.shimid = runtime.shimid;\n\n\t\t\t\t\tself.bind(\"Ready\", function() {\n\t\t\t\t\t\tself.trigger(\"Refresh\");\n\t\t\t\t\t}, 999);\n\n\t\t\t\t\tself.bind(\"Change\", function() {\n\t\t\t\t\t\tvar files = runtime.exec.call(self, 'FileInput', 'getFiles');\n\n\t\t\t\t\t\tself.files = [];\n\n\t\t\t\t\t\tBasic.each(files, function(file) {\n\t\t\t\t\t\t\t// ignore empty files (IE10 for example hangs if you try to send them via XHR)\n\t\t\t\t\t\t\tif (file.size === 0) {\n\t\t\t\t\t\t\t\treturn true; \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself.files.push(new File(self.ruid, file));\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 999);\n\n\t\t\t\t\t// re-position and resize shim container\n\t\t\t\t\tself.bind('Refresh', function() {\n\t\t\t\t\t\tvar pos, size, browseButton, shimContainer;\n\t\t\t\t\t\t\n\t\t\t\t\t\tbrowseButton = Dom.get(options.browse_button);\n\t\t\t\t\t\tshimContainer = Dom.get(runtime.shimid); // do not use runtime.getShimContainer(), since it will create container if it doesn't exist\n\n\t\t\t\t\t\tif (browseButton) {\n\t\t\t\t\t\t\tpos = Dom.getPos(browseButton, Dom.get(options.container));\n\t\t\t\t\t\t\tsize = Dom.getSize(browseButton);\n\n\t\t\t\t\t\t\tif (shimContainer) {\n\t\t\t\t\t\t\t\tBasic.extend(shimContainer.style, {\n\t\t\t\t\t\t\t\t\ttop     : pos.y + 'px',\n\t\t\t\t\t\t\t\t\tleft    : pos.x + 'px',\n\t\t\t\t\t\t\t\t\twidth   : size.w + 'px',\n\t\t\t\t\t\t\t\t\theight  : size.h + 'px'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshimContainer = browseButton = null;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\truntime.exec.call(self, 'FileInput', 'init', options);\n\t\t\t\t});\n\n\t\t\t\t// runtime needs: options.required_features, options.runtime_order and options.container\n\t\t\t\tself.connectRuntime(Basic.extend({}, options, {\n\t\t\t\t\trequired_caps: {\n\t\t\t\t\t\tselect_file: true\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDisables file-picker element, so that it doesn't react to mouse clicks.\n\n\t\t\t@method disable\n\t\t\t@param {Boolean} [state=true] Disable component if - true, enable if - false\n\t\t\t*/\n\t\t\tdisable: function(state) {\n\t\t\t\tvar runtime = this.getRuntime();\n\t\t\t\tif (runtime) {\n\t\t\t\t\truntime.exec.call(this, 'FileInput', 'disable', Basic.typeOf(state) === 'undefined' ? true : state);\n\t\t\t\t}\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\tReposition and resize dialog trigger to match the position and size of browse_button element.\n\n\t\t\t@method refresh\n\t\t\t*/\n\t\t\trefresh: function() {\n\t\t\t\tself.trigger(\"Refresh\");\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\tDestroy component.\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tvar runtime = this.getRuntime();\n\t\t\t\tif (runtime) {\n\t\t\t\t\truntime.exec.call(this, 'FileInput', 'destroy');\n\t\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t}\n\n\t\t\t\tif (Basic.typeOf(this.files) === 'array') {\n\t\t\t\t\t// no sense in leaving associated files behind\n\t\t\t\t\tBasic.each(this.files, function(file) {\n\t\t\t\t\t\tfile.destroy();\n\t\t\t\t\t});\n\t\t\t\t} \n\t\t\t\tthis.files = null;\n\t\t\t}\n\t\t});\n\t}\n\n\tFileInput.prototype = EventTarget.instance;\n\n\treturn FileInput;\n});\n");
__$coverInitRange("src/javascript/file/FileInput.js", "200:8638");
__$coverInitRange("src/javascript/file/FileInput.js", "2362:3573");
__$coverInitRange("src/javascript/file/FileInput.js", "3577:8568");
__$coverInitRange("src/javascript/file/FileInput.js", "8572:8614");
__$coverInitRange("src/javascript/file/FileInput.js", "8618:8634");
__$coverInitRange("src/javascript/file/FileInput.js", "3609:3662");
__$coverInitRange("src/javascript/file/FileInput.js", "3726:3841");
__$coverInitRange("src/javascript/file/FileInput.js", "3902:3947");
__$coverInitRange("src/javascript/file/FileInput.js", "3951:4065");
__$coverInitRange("src/javascript/file/FileInput.js", "4098:4312");
__$coverInitRange("src/javascript/file/FileInput.js", "4319:4364");
__$coverInitRange("src/javascript/file/FileInput.js", "4407:4528");
__$coverInitRange("src/javascript/file/FileInput.js", "4632:4733");
__$coverInitRange("src/javascript/file/FileInput.js", "4738:4776");
__$coverInitRange("src/javascript/file/FileInput.js", "4813:4863");
__$coverInitRange("src/javascript/file/FileInput.js", "4910:5010");
__$coverInitRange("src/javascript/file/FileInput.js", "5015:5046");
__$coverInitRange("src/javascript/file/FileInput.js", "5063:5087");
__$coverInitRange("src/javascript/file/FileInput.js", "5094:8565");
__$coverInitRange("src/javascript/file/FileInput.js", "3800:3837");
__$coverInitRange("src/javascript/file/FileInput.js", "4007:4061");
__$coverInitRange("src/javascript/file/FileInput.js", "4460:4524");
__$coverInitRange("src/javascript/file/FileInput.js", "4678:4729");
__$coverInitRange("src/javascript/file/FileInput.js", "4834:4859");
__$coverInitRange("src/javascript/file/FileInput.js", "4969:5006");
__$coverInitRange("src/javascript/file/FileInput.js", "5847:5891");
__$coverInitRange("src/javascript/file/FileInput.js", "5898:7319");
__$coverInitRange("src/javascript/file/FileInput.js", "7419:7527");
__$coverInitRange("src/javascript/file/FileInput.js", "5951:5974");
__$coverInitRange("src/javascript/file/FileInput.js", "5981:6009");
__$coverInitRange("src/javascript/file/FileInput.js", "6017:6092");
__$coverInitRange("src/javascript/file/FileInput.js", "6100:6487");
__$coverInitRange("src/javascript/file/FileInput.js", "6541:7245");
__$coverInitRange("src/javascript/file/FileInput.js", "7258:7311");
__$coverInitRange("src/javascript/file/FileInput.js", "6055:6078");
__$coverInitRange("src/javascript/file/FileInput.js", "6139:6199");
__$coverInitRange("src/javascript/file/FileInput.js", "6208:6223");
__$coverInitRange("src/javascript/file/FileInput.js", "6232:6473");
__$coverInitRange("src/javascript/file/FileInput.js", "6360:6412");
__$coverInitRange("src/javascript/file/FileInput.js", "6421:6463");
__$coverInitRange("src/javascript/file/FileInput.js", "6391:6402");
__$coverInitRange("src/javascript/file/FileInput.js", "6581:6623");
__$coverInitRange("src/javascript/file/FileInput.js", "6638:6683");
__$coverInitRange("src/javascript/file/FileInput.js", "6691:6730");
__$coverInitRange("src/javascript/file/FileInput.js", "6832:7193");
__$coverInitRange("src/javascript/file/FileInput.js", "7201:7236");
__$coverInitRange("src/javascript/file/FileInput.js", "6859:6917");
__$coverInitRange("src/javascript/file/FileInput.js", "6926:6958");
__$coverInitRange("src/javascript/file/FileInput.js", "6968:7185");
__$coverInitRange("src/javascript/file/FileInput.js", "6997:7176");
__$coverInitRange("src/javascript/file/FileInput.js", "7758:7789");
__$coverInitRange("src/javascript/file/FileInput.js", "7795:7920");
__$coverInitRange("src/javascript/file/FileInput.js", "7815:7914");
__$coverInitRange("src/javascript/file/FileInput.js", "8089:8112");
__$coverInitRange("src/javascript/file/FileInput.js", "8206:8237");
__$coverInitRange("src/javascript/file/FileInput.js", "8243:8347");
__$coverInitRange("src/javascript/file/FileInput.js", "8354:8530");
__$coverInitRange("src/javascript/file/FileInput.js", "8537:8554");
__$coverInitRange("src/javascript/file/FileInput.js", "8263:8310");
__$coverInitRange("src/javascript/file/FileInput.js", "8317:8341");
__$coverInitRange("src/javascript/file/FileInput.js", "8455:8524");
__$coverInitRange("src/javascript/file/FileInput.js", "8501:8515");
__$coverCall('src/javascript/file/FileInput.js', '200:8638');
define('moxie/file/FileInput', [
    'moxie/core/utils/Basic',
    'moxie/core/utils/Mime',
    'moxie/core/utils/Dom',
    'moxie/core/Exceptions',
    'moxie/core/EventTarget',
    'moxie/core/I18n',
    'moxie/file/File',
    'moxie/runtime/Runtime',
    'moxie/runtime/RuntimeClient'
], function (Basic, Mime, Dom, x, EventTarget, I18n, File, Runtime, RuntimeClient) {
    __$coverCall('src/javascript/file/FileInput.js', '2362:3573');
    var dispatches = [
            'ready',
            'change',
            'cancel',
            'mouseenter',
            'mouseleave',
            'mousedown',
            'mouseup'
        ];
    __$coverCall('src/javascript/file/FileInput.js', '3577:8568');
    function FileInput(options) {
        __$coverCall('src/javascript/file/FileInput.js', '3609:3662');
        var self = this, container, browseButton, defaults;
        __$coverCall('src/javascript/file/FileInput.js', '3726:3841');
        if (Basic.inArray(Basic.typeOf(options), [
                'string',
                'node'
            ]) !== -1) {
            __$coverCall('src/javascript/file/FileInput.js', '3800:3837');
            options = { browse_button: options };
        }
        __$coverCall('src/javascript/file/FileInput.js', '3902:3947');
        browseButton = Dom.get(options.browse_button);
        __$coverCall('src/javascript/file/FileInput.js', '3951:4065');
        if (!browseButton) {
            __$coverCall('src/javascript/file/FileInput.js', '4007:4061');
            throw new x.DOMException(x.DOMException.NOT_FOUND_ERR);
        }
        __$coverCall('src/javascript/file/FileInput.js', '4098:4312');
        defaults = {
            accept: [{
                    title: I18n.translate('All Files'),
                    extensions: '*'
                }],
            name: 'file',
            multiple: false,
            required_caps: false,
            container: browseButton.parentNode || document.body
        };
        __$coverCall('src/javascript/file/FileInput.js', '4319:4364');
        options = Basic.extend({}, defaults, options);
        __$coverCall('src/javascript/file/FileInput.js', '4407:4528');
        if (typeof options.required_caps === 'string') {
            __$coverCall('src/javascript/file/FileInput.js', '4460:4524');
            options.required_caps = Runtime.parseCaps(options.required_caps);
        }
        __$coverCall('src/javascript/file/FileInput.js', '4632:4733');
        if (typeof options.accept === 'string') {
            __$coverCall('src/javascript/file/FileInput.js', '4678:4729');
            options.accept = Mime.mimes2extList(options.accept);
        }
        __$coverCall('src/javascript/file/FileInput.js', '4738:4776');
        container = Dom.get(options.container);
        __$coverCall('src/javascript/file/FileInput.js', '4813:4863');
        if (!container) {
            __$coverCall('src/javascript/file/FileInput.js', '4834:4859');
            container = document.body;
        }
        __$coverCall('src/javascript/file/FileInput.js', '4910:5010');
        if (Dom.getStyle(container, 'position') === 'static') {
            __$coverCall('src/javascript/file/FileInput.js', '4969:5006');
            container.style.position = 'relative';
        }
        __$coverCall('src/javascript/file/FileInput.js', '5015:5046');
        container = browseButton = null;
        __$coverCall('src/javascript/file/FileInput.js', '5063:5087');
        RuntimeClient.call(self);
        __$coverCall('src/javascript/file/FileInput.js', '5094:8565');
        Basic.extend(self, {
            uid: Basic.guid('uid_'),
            ruid: null,
            shimid: null,
            files: null,
            init: function () {
                __$coverCall('src/javascript/file/FileInput.js', '5847:5891');
                self.convertEventPropsToHandlers(dispatches);
                __$coverCall('src/javascript/file/FileInput.js', '5898:7319');
                self.bind('RuntimeInit', function (e, runtime) {
                    __$coverCall('src/javascript/file/FileInput.js', '5951:5974');
                    self.ruid = runtime.uid;
                    __$coverCall('src/javascript/file/FileInput.js', '5981:6009');
                    self.shimid = runtime.shimid;
                    __$coverCall('src/javascript/file/FileInput.js', '6017:6092');
                    self.bind('Ready', function () {
                        __$coverCall('src/javascript/file/FileInput.js', '6055:6078');
                        self.trigger('Refresh');
                    }, 999);
                    __$coverCall('src/javascript/file/FileInput.js', '6100:6487');
                    self.bind('Change', function () {
                        __$coverCall('src/javascript/file/FileInput.js', '6139:6199');
                        var files = runtime.exec.call(self, 'FileInput', 'getFiles');
                        __$coverCall('src/javascript/file/FileInput.js', '6208:6223');
                        self.files = [];
                        __$coverCall('src/javascript/file/FileInput.js', '6232:6473');
                        Basic.each(files, function (file) {
                            __$coverCall('src/javascript/file/FileInput.js', '6360:6412');
                            if (file.size === 0) {
                                __$coverCall('src/javascript/file/FileInput.js', '6391:6402');
                                return true;
                            }
                            __$coverCall('src/javascript/file/FileInput.js', '6421:6463');
                            self.files.push(new File(self.ruid, file));
                        });
                    }, 999);
                    __$coverCall('src/javascript/file/FileInput.js', '6541:7245');
                    self.bind('Refresh', function () {
                        __$coverCall('src/javascript/file/FileInput.js', '6581:6623');
                        var pos, size, browseButton, shimContainer;
                        __$coverCall('src/javascript/file/FileInput.js', '6638:6683');
                        browseButton = Dom.get(options.browse_button);
                        __$coverCall('src/javascript/file/FileInput.js', '6691:6730');
                        shimContainer = Dom.get(runtime.shimid);
                        __$coverCall('src/javascript/file/FileInput.js', '6832:7193');
                        if (browseButton) {
                            __$coverCall('src/javascript/file/FileInput.js', '6859:6917');
                            pos = Dom.getPos(browseButton, Dom.get(options.container));
                            __$coverCall('src/javascript/file/FileInput.js', '6926:6958');
                            size = Dom.getSize(browseButton);
                            __$coverCall('src/javascript/file/FileInput.js', '6968:7185');
                            if (shimContainer) {
                                __$coverCall('src/javascript/file/FileInput.js', '6997:7176');
                                Basic.extend(shimContainer.style, {
                                    top: pos.y + 'px',
                                    left: pos.x + 'px',
                                    width: size.w + 'px',
                                    height: size.h + 'px'
                                });
                            }
                        }
                        __$coverCall('src/javascript/file/FileInput.js', '7201:7236');
                        shimContainer = browseButton = null;
                    });
                    __$coverCall('src/javascript/file/FileInput.js', '7258:7311');
                    runtime.exec.call(self, 'FileInput', 'init', options);
                });
                __$coverCall('src/javascript/file/FileInput.js', '7419:7527');
                self.connectRuntime(Basic.extend({}, options, { required_caps: { select_file: true } }));
            },
            disable: function (state) {
                __$coverCall('src/javascript/file/FileInput.js', '7758:7789');
                var runtime = this.getRuntime();
                __$coverCall('src/javascript/file/FileInput.js', '7795:7920');
                if (runtime) {
                    __$coverCall('src/javascript/file/FileInput.js', '7815:7914');
                    runtime.exec.call(this, 'FileInput', 'disable', Basic.typeOf(state) === 'undefined' ? true : state);
                }
            },
            refresh: function () {
                __$coverCall('src/javascript/file/FileInput.js', '8089:8112');
                self.trigger('Refresh');
            },
            destroy: function () {
                __$coverCall('src/javascript/file/FileInput.js', '8206:8237');
                var runtime = this.getRuntime();
                __$coverCall('src/javascript/file/FileInput.js', '8243:8347');
                if (runtime) {
                    __$coverCall('src/javascript/file/FileInput.js', '8263:8310');
                    runtime.exec.call(this, 'FileInput', 'destroy');
                    __$coverCall('src/javascript/file/FileInput.js', '8317:8341');
                    this.disconnectRuntime();
                }
                __$coverCall('src/javascript/file/FileInput.js', '8354:8530');
                if (Basic.typeOf(this.files) === 'array') {
                    __$coverCall('src/javascript/file/FileInput.js', '8455:8524');
                    Basic.each(this.files, function (file) {
                        __$coverCall('src/javascript/file/FileInput.js', '8501:8515');
                        file.destroy();
                    });
                }
                __$coverCall('src/javascript/file/FileInput.js', '8537:8554');
                this.files = null;
            }
        });
    }
    __$coverCall('src/javascript/file/FileInput.js', '8572:8614');
    FileInput.prototype = EventTarget.instance;
    __$coverCall('src/javascript/file/FileInput.js', '8618:8634');
    return FileInput;
});

// Included from: src/javascript/file/FileDrop.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/file/FileDrop.js", "/**\n * FileDrop.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/FileDrop', [\n\t'moxie/core/I18n',\n\t'moxie/core/utils/Dom',\n\t'moxie/core/Exceptions',\n\t'moxie/core/utils/Basic',\n\t'moxie/file/File',\n\t'moxie/runtime/RuntimeClient',\n\t'moxie/core/EventTarget',\n\t'moxie/core/utils/Mime'\n], function(I18n, Dom, x, Basic, File, RuntimeClient, EventTarget, Mime) {\n\t/**\n\tTurn arbitrary DOM element to a drop zone accepting files. Converts selected files to _File_ objects, to be used \n\tin conjunction with _Image_, preloaded in memory with _FileReader_ or uploaded to a server through \n\t_XMLHttpRequest_.\n\n\t@example\n\t\t<div id=\"drop_zone\">\n\t\t\tDrop files here\n\t\t</div>\n\t\t<br />\n\t\t<div id=\"filelist\"></div>\n\n\t\t<script type=\"text/javascript\">\n\t\t\tvar fileDrop = new mOxie.FileDrop('drop_zone'), fileList = mOxie.get('filelist');\n\n\t\t\tfileDrop.ondrop = function() {\n\t\t\t\tmOxie.each(this.files, function(file) {\n\t\t\t\t\tfileList.innerHTML += '<div>' + file.name + '</div>';\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tfileDrop.init();\n\t\t</script>\n\n\t@class FileDrop\n\t@constructor\n\t@extends EventTarget\n\t@uses RuntimeClient\n\t@param {Object|String} options If options has typeof string, argument is considered as options.drop_zone\n\t\t@param {String|DOMElement} options.drop_zone DOM Element to turn into a drop zone\n\t\t@param {Array} [options.accept] Array of mime types to accept. By default accepts all\n\t\t@param {Object|String} [options.required_caps] Set of required capabilities, that chosen runtime must support\n\t*/\n\tvar dispatches = [\n\t\t/**\n\t\tDispatched when runtime is connected and drop zone is ready to accept files.\n\n\t\t@event ready\n\t\t@param {Object} event\n\t\t*/\n\t\t'ready', \n\n\t\t/**\n\t\tDispatched when dragging cursor enters the drop zone.\n\n\t\t@event dragenter\n\t\t@param {Object} event\n\t\t*/\n\t\t'dragenter',\n\n\t\t/**\n\t\tDispatched when dragging cursor leaves the drop zone.\n\n\t\t@event dragleave\n\t\t@param {Object} event\n\t\t*/\n\t\t'dragleave', \n\n\t\t/**\n\t\tDispatched when file is dropped onto the drop zone.\n\n\t\t@event drop\n\t\t@param {Object} event\n\t\t*/\n\t\t'drop', \n\n\t\t/**\n\t\tDispatched if error occurs.\n\n\t\t@event error\n\t\t@param {Object} event\n\t\t*/\n\t\t'error'\n\t];\n\n\tfunction FileDrop(options) {\n\t\tvar self = this, defaults;\n\n\t\t// if flat argument passed it should be drop_zone id\n\t\tif (typeof(options) === 'string') {\n\t\t\toptions = { drop_zone : options };\n\t\t}\n\n\t\t// figure out the options\n\t\tdefaults = {\n\t\t\taccept: [{\n\t\t\t\ttitle: I18n.translate('All Files'),\n\t\t\t\textensions: '*'\n\t\t\t}],\n\t\t\trequired_caps: {\n\t\t\t\tdrag_and_drop: true\n\t\t\t}\n\t\t};\n\t\t\n\t\toptions = typeof(options) === 'object' ? Basic.extend({}, defaults, options) : defaults;\n\n\t\t// this will help us to find proper default container\n\t\toptions.container = Dom.get(options.drop_zone) || document.body;\n\n\t\t// make container relative, if it is not\n\t\tif (Dom.getStyle(options.container, 'position') === 'static') {\n\t\t\toptions.container.style.position = 'relative';\n\t\t}\n\t\t\t\t\t\n\t\t// normalize accept option (could be list of mime types or array of title/extensions pairs)\n\t\tif (typeof(options.accept) === 'string') {\n\t\t\toptions.accept = Mime.mimes2extList(options.accept);\n\t\t}\n\n\t\tRuntimeClient.call(self);\n\n\t\tBasic.extend(self, {\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\truid: null,\n\n\t\t\tfiles: null,\n\n\t\t\tinit: function() {\n\t\n\t\t\t\tself.convertEventPropsToHandlers(dispatches);\n\t\t\n\t\t\t\tself.bind('RuntimeInit', function(e, runtime) {\n\t\t\t\t\tself.ruid = runtime.uid;\n\n\t\t\t\t\tself.bind(\"Drop\", function() {\n\t\t\t\t\t\tvar files = runtime.exec.call(self, 'FileDrop', 'getFiles');\n\n\t\t\t\t\t\tself.files = [];\n\n\t\t\t\t\t\tBasic.each(files, function(file) {\n\t\t\t\t\t\t\tself.files.push(new File(self.ruid, file));\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 999);\n\n\t\t\t\t\truntime.exec.call(self, 'FileDrop', 'init', options);\n\n\t\t\t\t\tself.dispatchEvent('ready');\n\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t// runtime needs: options.required_features, options.runtime_order and options.container\n\t\t\t\tself.connectRuntime(options); // throws RuntimeError\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tvar runtime = this.getRuntime();\n\t\t\t\tif (runtime) {\n\t\t\t\t\truntime.exec.call(this, 'FileDrop', 'destroy');\n\t\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t}\n\t\t\t\tthis.files = null;\n\t\t\t}\n\t\t});\n\t}\n\n\tFileDrop.prototype = EventTarget.instance;\n\n\treturn FileDrop;\n});\n");
__$coverInitRange("src/javascript/file/FileDrop.js", "199:4273");
__$coverInitRange("src/javascript/file/FileDrop.js", "1622:2248");
__$coverInitRange("src/javascript/file/FileDrop.js", "2252:4205");
__$coverInitRange("src/javascript/file/FileDrop.js", "4209:4250");
__$coverInitRange("src/javascript/file/FileDrop.js", "4254:4269");
__$coverInitRange("src/javascript/file/FileDrop.js", "2283:2308");
__$coverInitRange("src/javascript/file/FileDrop.js", "2368:2444");
__$coverInitRange("src/javascript/file/FileDrop.js", "2477:2623");
__$coverInitRange("src/javascript/file/FileDrop.js", "2630:2717");
__$coverInitRange("src/javascript/file/FileDrop.js", "2778:2841");
__$coverInitRange("src/javascript/file/FileDrop.js", "2889:3005");
__$coverInitRange("src/javascript/file/FileDrop.js", "3109:3210");
__$coverInitRange("src/javascript/file/FileDrop.js", "3215:3239");
__$coverInitRange("src/javascript/file/FileDrop.js", "3244:4202");
__$coverInitRange("src/javascript/file/FileDrop.js", "2407:2440");
__$coverInitRange("src/javascript/file/FileDrop.js", "2956:3001");
__$coverInitRange("src/javascript/file/FileDrop.js", "3155:3206");
__$coverInitRange("src/javascript/file/FileDrop.js", "3355:3399");
__$coverInitRange("src/javascript/file/FileDrop.js", "3408:3832");
__$coverInitRange("src/javascript/file/FileDrop.js", "3939:3967");
__$coverInitRange("src/javascript/file/FileDrop.js", "3461:3484");
__$coverInitRange("src/javascript/file/FileDrop.js", "3492:3729");
__$coverInitRange("src/javascript/file/FileDrop.js", "3737:3789");
__$coverInitRange("src/javascript/file/FileDrop.js", "3797:3824");
__$coverInitRange("src/javascript/file/FileDrop.js", "3529:3588");
__$coverInitRange("src/javascript/file/FileDrop.js", "3597:3612");
__$coverInitRange("src/javascript/file/FileDrop.js", "3621:3715");
__$coverInitRange("src/javascript/file/FileDrop.js", "3663:3705");
__$coverInitRange("src/javascript/file/FileDrop.js", "4028:4059");
__$coverInitRange("src/javascript/file/FileDrop.js", "4065:4168");
__$coverInitRange("src/javascript/file/FileDrop.js", "4174:4191");
__$coverInitRange("src/javascript/file/FileDrop.js", "4085:4131");
__$coverInitRange("src/javascript/file/FileDrop.js", "4138:4162");
__$coverCall('src/javascript/file/FileDrop.js', '199:4273');
define('moxie/file/FileDrop', [
    'moxie/core/I18n',
    'moxie/core/utils/Dom',
    'moxie/core/Exceptions',
    'moxie/core/utils/Basic',
    'moxie/file/File',
    'moxie/runtime/RuntimeClient',
    'moxie/core/EventTarget',
    'moxie/core/utils/Mime'
], function (I18n, Dom, x, Basic, File, RuntimeClient, EventTarget, Mime) {
    __$coverCall('src/javascript/file/FileDrop.js', '1622:2248');
    var dispatches = [
            'ready',
            'dragenter',
            'dragleave',
            'drop',
            'error'
        ];
    __$coverCall('src/javascript/file/FileDrop.js', '2252:4205');
    function FileDrop(options) {
        __$coverCall('src/javascript/file/FileDrop.js', '2283:2308');
        var self = this, defaults;
        __$coverCall('src/javascript/file/FileDrop.js', '2368:2444');
        if (typeof options === 'string') {
            __$coverCall('src/javascript/file/FileDrop.js', '2407:2440');
            options = { drop_zone: options };
        }
        __$coverCall('src/javascript/file/FileDrop.js', '2477:2623');
        defaults = {
            accept: [{
                    title: I18n.translate('All Files'),
                    extensions: '*'
                }],
            required_caps: { drag_and_drop: true }
        };
        __$coverCall('src/javascript/file/FileDrop.js', '2630:2717');
        options = typeof options === 'object' ? Basic.extend({}, defaults, options) : defaults;
        __$coverCall('src/javascript/file/FileDrop.js', '2778:2841');
        options.container = Dom.get(options.drop_zone) || document.body;
        __$coverCall('src/javascript/file/FileDrop.js', '2889:3005');
        if (Dom.getStyle(options.container, 'position') === 'static') {
            __$coverCall('src/javascript/file/FileDrop.js', '2956:3001');
            options.container.style.position = 'relative';
        }
        __$coverCall('src/javascript/file/FileDrop.js', '3109:3210');
        if (typeof options.accept === 'string') {
            __$coverCall('src/javascript/file/FileDrop.js', '3155:3206');
            options.accept = Mime.mimes2extList(options.accept);
        }
        __$coverCall('src/javascript/file/FileDrop.js', '3215:3239');
        RuntimeClient.call(self);
        __$coverCall('src/javascript/file/FileDrop.js', '3244:4202');
        Basic.extend(self, {
            uid: Basic.guid('uid_'),
            ruid: null,
            files: null,
            init: function () {
                __$coverCall('src/javascript/file/FileDrop.js', '3355:3399');
                self.convertEventPropsToHandlers(dispatches);
                __$coverCall('src/javascript/file/FileDrop.js', '3408:3832');
                self.bind('RuntimeInit', function (e, runtime) {
                    __$coverCall('src/javascript/file/FileDrop.js', '3461:3484');
                    self.ruid = runtime.uid;
                    __$coverCall('src/javascript/file/FileDrop.js', '3492:3729');
                    self.bind('Drop', function () {
                        __$coverCall('src/javascript/file/FileDrop.js', '3529:3588');
                        var files = runtime.exec.call(self, 'FileDrop', 'getFiles');
                        __$coverCall('src/javascript/file/FileDrop.js', '3597:3612');
                        self.files = [];
                        __$coverCall('src/javascript/file/FileDrop.js', '3621:3715');
                        Basic.each(files, function (file) {
                            __$coverCall('src/javascript/file/FileDrop.js', '3663:3705');
                            self.files.push(new File(self.ruid, file));
                        });
                    }, 999);
                    __$coverCall('src/javascript/file/FileDrop.js', '3737:3789');
                    runtime.exec.call(self, 'FileDrop', 'init', options);
                    __$coverCall('src/javascript/file/FileDrop.js', '3797:3824');
                    self.dispatchEvent('ready');
                });
                __$coverCall('src/javascript/file/FileDrop.js', '3939:3967');
                self.connectRuntime(options);
            },
            destroy: function () {
                __$coverCall('src/javascript/file/FileDrop.js', '4028:4059');
                var runtime = this.getRuntime();
                __$coverCall('src/javascript/file/FileDrop.js', '4065:4168');
                if (runtime) {
                    __$coverCall('src/javascript/file/FileDrop.js', '4085:4131');
                    runtime.exec.call(this, 'FileDrop', 'destroy');
                    __$coverCall('src/javascript/file/FileDrop.js', '4138:4162');
                    this.disconnectRuntime();
                }
                __$coverCall('src/javascript/file/FileDrop.js', '4174:4191');
                this.files = null;
            }
        });
    }
    __$coverCall('src/javascript/file/FileDrop.js', '4209:4250');
    FileDrop.prototype = EventTarget.instance;
    __$coverCall('src/javascript/file/FileDrop.js', '4254:4269');
    return FileDrop;
});

// Included from: src/javascript/runtime/RuntimeTarget.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/RuntimeTarget.js", "/**\n * RuntimeTarget.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/runtime/RuntimeTarget', [\n\t'moxie/core/utils/Basic',\n\t'moxie/runtime/RuntimeClient',\n\t\"moxie/core/EventTarget\"\n], function(Basic, RuntimeClient, EventTarget) {\n\t/**\n\tInstance of this class can be used as a target for the events dispatched by shims,\n\twhen allowing them onto components is for either reason inappropriate\n\n\t@class RuntimeTarget\n\t@constructor\n\t@protected\n\t@extends EventTarget\n\t*/\n\tfunction RuntimeTarget() {\n\t\tthis.uid = Basic.guid('uid_');\n\t\t\n\t\tRuntimeClient.call(this);\n\n\t\tthis.destroy = function() {\n\t\t\tthis.disconnectRuntime();\n\t\t\tthis.unbindAll();\n\t\t};\n\t}\n\n\tRuntimeTarget.prototype = EventTarget.instance;\n\n\treturn RuntimeTarget;\n});");
__$coverInitRange("src/javascript/runtime/RuntimeTarget.js", "204:870");
__$coverInitRange("src/javascript/runtime/RuntimeTarget.js", "614:792");
__$coverInitRange("src/javascript/runtime/RuntimeTarget.js", "796:842");
__$coverInitRange("src/javascript/runtime/RuntimeTarget.js", "846:866");
__$coverInitRange("src/javascript/runtime/RuntimeTarget.js", "643:672");
__$coverInitRange("src/javascript/runtime/RuntimeTarget.js", "679:703");
__$coverInitRange("src/javascript/runtime/RuntimeTarget.js", "708:789");
__$coverInitRange("src/javascript/runtime/RuntimeTarget.js", "739:763");
__$coverInitRange("src/javascript/runtime/RuntimeTarget.js", "768:784");
__$coverCall('src/javascript/runtime/RuntimeTarget.js', '204:870');
define('moxie/runtime/RuntimeTarget', [
    'moxie/core/utils/Basic',
    'moxie/runtime/RuntimeClient',
    'moxie/core/EventTarget'
], function (Basic, RuntimeClient, EventTarget) {
    __$coverCall('src/javascript/runtime/RuntimeTarget.js', '614:792');
    function RuntimeTarget() {
        __$coverCall('src/javascript/runtime/RuntimeTarget.js', '643:672');
        this.uid = Basic.guid('uid_');
        __$coverCall('src/javascript/runtime/RuntimeTarget.js', '679:703');
        RuntimeClient.call(this);
        __$coverCall('src/javascript/runtime/RuntimeTarget.js', '708:789');
        this.destroy = function () {
            __$coverCall('src/javascript/runtime/RuntimeTarget.js', '739:763');
            this.disconnectRuntime();
            __$coverCall('src/javascript/runtime/RuntimeTarget.js', '768:784');
            this.unbindAll();
        };
    }
    __$coverCall('src/javascript/runtime/RuntimeTarget.js', '796:842');
    RuntimeTarget.prototype = EventTarget.instance;
    __$coverCall('src/javascript/runtime/RuntimeTarget.js', '846:866');
    return RuntimeTarget;
});

// Included from: src/javascript/file/FileReader.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/file/FileReader.js", "/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/FileReader', [\n\t'moxie/core/utils/Basic',\n\t'moxie/core/utils/Encode',\n\t'moxie/core/Exceptions',\n\t'moxie/core/EventTarget',\n\t'moxie/file/Blob',\n\t'moxie/file/File',\n\t'moxie/runtime/RuntimeTarget'\n], function(Basic, Encode, x, EventTarget, Blob, File, RuntimeTarget) {\n\t/**\n\tUtility for preloading o.Blob/o.File objects in memory. By design closely follows [W3C FileReader](http://www.w3.org/TR/FileAPI/#dfn-filereader)\n\tinterface. Where possible uses native FileReader, where - not falls back to shims.\n\n\t@class FileReader\n\t@constructor FileReader\n\t@extends EventTarget\n\t@uses RuntimeClient\n\t*/\n\tvar dispatches = [\n\n\t\t/** \n\t\tDispatched when the read starts.\n\n\t\t@event loadstart\n\t\t@param {Object} event\n\t\t*/\n\t\t'loadstart', \n\n\t\t/** \n\t\tDispatched while reading (and decoding) blob, and reporting partial Blob data (progess.loaded/progress.total).\n\n\t\t@event progress\n\t\t@param {Object} event\n\t\t*/\n\t\t'progress', \n\n\t\t/** \n\t\tDispatched when the read has successfully completed.\n\n\t\t@event load\n\t\t@param {Object} event\n\t\t*/\n\t\t'load', \n\n\t\t/** \n\t\tDispatched when the read has been aborted. For instance, by invoking the abort() method.\n\n\t\t@event abort\n\t\t@param {Object} event\n\t\t*/\n\t\t'abort', \n\n\t\t/** \n\t\tDispatched when the read has failed.\n\n\t\t@event error\n\t\t@param {Object} event\n\t\t*/\n\t\t'error', \n\n\t\t/** \n\t\tDispatched when the request has completed (either in success or failure).\n\n\t\t@event loadend\n\t\t@param {Object} event\n\t\t*/\n\t\t'loadend'\n\t];\n\t\n\tfunction FileReader() {\n\t\tvar self = this, _fr;\n\t\t\t\t\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tUID of the component instance.\n\n\t\t\t@property uid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\t/**\n\t\t\tContains current state of FileReader object. Can take values of FileReader.EMPTY, FileReader.LOADING\n\t\t\tand FileReader.DONE.\n\n\t\t\t@property readyState\n\t\t\t@type {Number}\n\t\t\t@default FileReader.EMPTY\n\t\t\t*/\n\t\t\treadyState: FileReader.EMPTY,\n\t\t\t\n\t\t\t/**\n\t\t\tResult of the successful read operation.\n\n\t\t\t@property result\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tresult: null,\n\t\t\t\n\t\t\t/**\n\t\t\tStores the error of failed asynchronous read operation.\n\n\t\t\t@property error\n\t\t\t@type {DOMError}\n\t\t\t*/\n\t\t\terror: null,\n\t\t\t\n\t\t\t/**\n\t\t\tInitiates reading of File/Blob object contents to binary string.\n\n\t\t\t@method readAsBinaryString\n\t\t\t@param {Blob|File} blob Object to preload\n\t\t\t*/\n\t\t\treadAsBinaryString: function(blob) {\n\t\t\t\t_read.call(this, 'readAsBinaryString', blob);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tInitiates reading of File/Blob object contents to dataURL string.\n\n\t\t\t@method readAsDataURL\n\t\t\t@param {Blob|File} blob Object to preload\n\t\t\t*/\n\t\t\treadAsDataURL: function(blob) {\n\t\t\t\t_read.call(this, 'readAsDataURL', blob);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tInitiates reading of File/Blob object contents to string.\n\n\t\t\t@method readAsText\n\t\t\t@param {Blob|File} blob Object to preload\n\t\t\t*/\n\t\t\treadAsText: function(blob) {\n\t\t\t\t_read.call(this, 'readAsText', blob);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAborts preloading process.\n\n\t\t\t@method abort\n\t\t\t*/\n\t\t\tabort: function() {\n\t\t\t\tthis.result = null;\n\t\t\t\t\n\t\t\t\tif (Basic.inArray(this.readyState, [FileReader.EMPTY, FileReader.DONE]) !== -1) {\n\t\t\t\t\treturn;\n\t\t\t\t} else if (this.readyState === FileReader.LOADING) {\n\t\t\t\t\tthis.readyState = FileReader.DONE;\n\t\t\t\t}\n\n\t\t\t\tif (_fr) {\n\t\t\t\t\t_fr.getRuntime().exec.call(this, 'FileReader', 'abort');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.trigger('abort');\n\t\t\t\tthis.trigger('loadend');\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDestroy component and release resources.\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tthis.abort();\n\n\t\t\t\tif (_fr) {\n\t\t\t\t\t_fr.getRuntime().exec.call(this, 'FileReader', 'destroy');\n\t\t\t\t\t_fr.disconnectRuntime();\n\t\t\t\t}\n\n\t\t\t\tself = _fr = null;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\tfunction _read(op, blob) {\n\t\t\t_fr = new RuntimeTarget();\n\n\t\t\tfunction error(err) {\n\t\t\t\tself.readyState = FileReader.DONE;\n\t\t\t\tself.error = err;\n\t\t\t\tself.trigger('error');\n\t\t\t\tloadEnd();\n\t\t\t}\n\n\t\t\tfunction loadEnd() {\n\t\t\t\t_fr.destroy();\n\t\t\t\t_fr = null;\n\t\t\t\tself.trigger('loadend');\n\t\t\t}\n\n\t\t\tfunction exec(runtime) {\n\t\t\t\t_fr.bind('Error', function(e, err) {\n\t\t\t\t\terror(err);\n\t\t\t\t});\n\n\t\t\t\t_fr.bind('Progress', function(e) {\n\t\t\t\t\tself.result = runtime.exec.call(_fr, 'FileReader', 'getResult');\n\t\t\t\t\tself.trigger(e);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_fr.bind('Load', function(e) {\n\t\t\t\t\tself.readyState = FileReader.DONE;\n\t\t\t\t\tself.result = runtime.exec.call(_fr, 'FileReader', 'getResult');\n\t\t\t\t\tself.trigger(e);\n\t\t\t\t\tloadEnd();\n\t\t\t\t});\n\n\t\t\t\truntime.exec.call(_fr, 'FileReader', 'read', op, blob);\n\t\t\t}\n\n\t\t\tthis.convertEventPropsToHandlers(dispatches);\n\n\t\t\tif (this.readyState === FileReader.LOADING) {\n\t\t\t\treturn error(new x.DOMException(x.DOMException.INVALID_STATE_ERR));\n\t\t\t}\n\n\t\t\tthis.readyState = FileReader.LOADING;\n\t\t\tthis.trigger('loadstart');\n\n\t\t\t// if source is o.Blob/o.File\n\t\t\tif (blob instanceof Blob) {\n\t\t\t\tif (blob.isDetached()) {\n\t\t\t\t\tvar src = blob.getSource();\n\t\t\t\t\tswitch (op) {\n\t\t\t\t\t\tcase 'readAsText':\n\t\t\t\t\t\tcase 'readAsBinaryString':\n\t\t\t\t\t\t\tthis.result = src;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'readAsDataURL':\n\t\t\t\t\t\t\tthis.result = 'data:' + blob.type + ';base64,' + Encode.btoa(src);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tthis.readyState = FileReader.DONE;\n\t\t\t\t\tthis.trigger('load');\n\t\t\t\t\tloadEnd();\n\t\t\t\t} else {\n\t\t\t\t\texec(_fr.connectRuntime(blob.ruid));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\terror(new x.DOMException(x.DOMException.NOT_FOUND_ERR));\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\n\tInitial FileReader state\n\n\t@property EMPTY\n\t@type {Number}\n\t@final\n\t@static\n\t@default 0\n\t*/\n\tFileReader.EMPTY = 0;\n\n\t/**\n\tFileReader switches to this state when it is preloading the source\n\n\t@property LOADING\n\t@type {Number}\n\t@final\n\t@static\n\t@default 1\n\t*/\n\tFileReader.LOADING = 1;\n\n\t/**\n\tPreloading is complete, this is a final state\n\n\t@property DONE\n\t@type {Number}\n\t@final\n\t@static\n\t@default 2\n\t*/\n\tFileReader.DONE = 2;\n\n\tFileReader.prototype = EventTarget.instance;\n\n\treturn FileReader;\n});");
__$coverInitRange("src/javascript/file/FileReader.js", "201:5941");
__$coverInitRange("src/javascript/file/FileReader.js", "814:1648");
__$coverInitRange("src/javascript/file/FileReader.js", "1653:5437");
__$coverInitRange("src/javascript/file/FileReader.js", "5540:5560");
__$coverInitRange("src/javascript/file/FileReader.js", "5706:5728");
__$coverInitRange("src/javascript/file/FileReader.js", "5850:5869");
__$coverInitRange("src/javascript/file/FileReader.js", "5873:5916");
__$coverInitRange("src/javascript/file/FileReader.js", "5920:5937");
__$coverInitRange("src/javascript/file/FileReader.js", "1679:1699");
__$coverInitRange("src/javascript/file/FileReader.js", "1708:3802");
__$coverInitRange("src/javascript/file/FileReader.js", "3812:5434");
__$coverInitRange("src/javascript/file/FileReader.js", "2541:2585");
__$coverInitRange("src/javascript/file/FileReader.js", "2789:2828");
__$coverInitRange("src/javascript/file/FileReader.js", "3018:3054");
__$coverInitRange("src/javascript/file/FileReader.js", "3154:3172");
__$coverInitRange("src/javascript/file/FileReader.js", "3183:3379");
__$coverInitRange("src/javascript/file/FileReader.js", "3386:3463");
__$coverInitRange("src/javascript/file/FileReader.js", "3474:3495");
__$coverInitRange("src/javascript/file/FileReader.js", "3501:3524");
__$coverInitRange("src/javascript/file/FileReader.js", "3270:3276");
__$coverInitRange("src/javascript/file/FileReader.js", "3340:3373");
__$coverInitRange("src/javascript/file/FileReader.js", "3402:3457");
__$coverInitRange("src/javascript/file/FileReader.js", "3639:3651");
__$coverInitRange("src/javascript/file/FileReader.js", "3658:3767");
__$coverInitRange("src/javascript/file/FileReader.js", "3774:3791");
__$coverInitRange("src/javascript/file/FileReader.js", "3674:3731");
__$coverInitRange("src/javascript/file/FileReader.js", "3738:3761");
__$coverInitRange("src/javascript/file/FileReader.js", "3842:3867");
__$coverInitRange("src/javascript/file/FileReader.js", "3873:4001");
__$coverInitRange("src/javascript/file/FileReader.js", "4007:4095");
__$coverInitRange("src/javascript/file/FileReader.js", "4101:4592");
__$coverInitRange("src/javascript/file/FileReader.js", "4598:4642");
__$coverInitRange("src/javascript/file/FileReader.js", "4648:4769");
__$coverInitRange("src/javascript/file/FileReader.js", "4775:4811");
__$coverInitRange("src/javascript/file/FileReader.js", "4816:4841");
__$coverInitRange("src/javascript/file/FileReader.js", "4880:5430");
__$coverInitRange("src/javascript/file/FileReader.js", "3899:3932");
__$coverInitRange("src/javascript/file/FileReader.js", "3938:3954");
__$coverInitRange("src/javascript/file/FileReader.js", "3960:3981");
__$coverInitRange("src/javascript/file/FileReader.js", "3987:3996");
__$coverInitRange("src/javascript/file/FileReader.js", "4032:4045");
__$coverInitRange("src/javascript/file/FileReader.js", "4051:4061");
__$coverInitRange("src/javascript/file/FileReader.js", "4067:4090");
__$coverInitRange("src/javascript/file/FileReader.js", "4130:4190");
__$coverInitRange("src/javascript/file/FileReader.js", "4197:4330");
__$coverInitRange("src/javascript/file/FileReader.js", "4341:4526");
__$coverInitRange("src/javascript/file/FileReader.js", "4533:4587");
__$coverInitRange("src/javascript/file/FileReader.js", "4172:4182");
__$coverInitRange("src/javascript/file/FileReader.js", "4237:4300");
__$coverInitRange("src/javascript/file/FileReader.js", "4307:4322");
__$coverInitRange("src/javascript/file/FileReader.js", "4377:4410");
__$coverInitRange("src/javascript/file/FileReader.js", "4417:4480");
__$coverInitRange("src/javascript/file/FileReader.js", "4487:4502");
__$coverInitRange("src/javascript/file/FileReader.js", "4509:4518");
__$coverInitRange("src/javascript/file/FileReader.js", "4698:4764");
__$coverInitRange("src/javascript/file/FileReader.js", "4912:5352");
__$coverInitRange("src/javascript/file/FileReader.js", "4942:4968");
__$coverInitRange("src/javascript/file/FileReader.js", "4975:5208");
__$coverInitRange("src/javascript/file/FileReader.js", "5215:5248");
__$coverInitRange("src/javascript/file/FileReader.js", "5255:5275");
__$coverInitRange("src/javascript/file/FileReader.js", "5282:5291");
__$coverInitRange("src/javascript/file/FileReader.js", "5054:5071");
__$coverInitRange("src/javascript/file/FileReader.js", "5080:5085");
__$coverInitRange("src/javascript/file/FileReader.js", "5122:5187");
__$coverInitRange("src/javascript/file/FileReader.js", "5196:5201");
__$coverInitRange("src/javascript/file/FileReader.js", "5311:5346");
__$coverInitRange("src/javascript/file/FileReader.js", "5370:5425");
__$coverCall('src/javascript/file/FileReader.js', '201:5941');
define('moxie/file/FileReader', [
    'moxie/core/utils/Basic',
    'moxie/core/utils/Encode',
    'moxie/core/Exceptions',
    'moxie/core/EventTarget',
    'moxie/file/Blob',
    'moxie/file/File',
    'moxie/runtime/RuntimeTarget'
], function (Basic, Encode, x, EventTarget, Blob, File, RuntimeTarget) {
    __$coverCall('src/javascript/file/FileReader.js', '814:1648');
    var dispatches = [
            'loadstart',
            'progress',
            'load',
            'abort',
            'error',
            'loadend'
        ];
    __$coverCall('src/javascript/file/FileReader.js', '1653:5437');
    function FileReader() {
        __$coverCall('src/javascript/file/FileReader.js', '1679:1699');
        var self = this, _fr;
        __$coverCall('src/javascript/file/FileReader.js', '1708:3802');
        Basic.extend(this, {
            uid: Basic.guid('uid_'),
            readyState: FileReader.EMPTY,
            result: null,
            error: null,
            readAsBinaryString: function (blob) {
                __$coverCall('src/javascript/file/FileReader.js', '2541:2585');
                _read.call(this, 'readAsBinaryString', blob);
            },
            readAsDataURL: function (blob) {
                __$coverCall('src/javascript/file/FileReader.js', '2789:2828');
                _read.call(this, 'readAsDataURL', blob);
            },
            readAsText: function (blob) {
                __$coverCall('src/javascript/file/FileReader.js', '3018:3054');
                _read.call(this, 'readAsText', blob);
            },
            abort: function () {
                __$coverCall('src/javascript/file/FileReader.js', '3154:3172');
                this.result = null;
                __$coverCall('src/javascript/file/FileReader.js', '3183:3379');
                if (Basic.inArray(this.readyState, [
                        FileReader.EMPTY,
                        FileReader.DONE
                    ]) !== -1) {
                    __$coverCall('src/javascript/file/FileReader.js', '3270:3276');
                    return;
                } else if (this.readyState === FileReader.LOADING) {
                    __$coverCall('src/javascript/file/FileReader.js', '3340:3373');
                    this.readyState = FileReader.DONE;
                }
                __$coverCall('src/javascript/file/FileReader.js', '3386:3463');
                if (_fr) {
                    __$coverCall('src/javascript/file/FileReader.js', '3402:3457');
                    _fr.getRuntime().exec.call(this, 'FileReader', 'abort');
                }
                __$coverCall('src/javascript/file/FileReader.js', '3474:3495');
                this.trigger('abort');
                __$coverCall('src/javascript/file/FileReader.js', '3501:3524');
                this.trigger('loadend');
            },
            destroy: function () {
                __$coverCall('src/javascript/file/FileReader.js', '3639:3651');
                this.abort();
                __$coverCall('src/javascript/file/FileReader.js', '3658:3767');
                if (_fr) {
                    __$coverCall('src/javascript/file/FileReader.js', '3674:3731');
                    _fr.getRuntime().exec.call(this, 'FileReader', 'destroy');
                    __$coverCall('src/javascript/file/FileReader.js', '3738:3761');
                    _fr.disconnectRuntime();
                }
                __$coverCall('src/javascript/file/FileReader.js', '3774:3791');
                self = _fr = null;
            }
        });
        __$coverCall('src/javascript/file/FileReader.js', '3812:5434');
        function _read(op, blob) {
            __$coverCall('src/javascript/file/FileReader.js', '3842:3867');
            _fr = new RuntimeTarget();
            __$coverCall('src/javascript/file/FileReader.js', '3873:4001');
            function error(err) {
                __$coverCall('src/javascript/file/FileReader.js', '3899:3932');
                self.readyState = FileReader.DONE;
                __$coverCall('src/javascript/file/FileReader.js', '3938:3954');
                self.error = err;
                __$coverCall('src/javascript/file/FileReader.js', '3960:3981');
                self.trigger('error');
                __$coverCall('src/javascript/file/FileReader.js', '3987:3996');
                loadEnd();
            }
            __$coverCall('src/javascript/file/FileReader.js', '4007:4095');
            function loadEnd() {
                __$coverCall('src/javascript/file/FileReader.js', '4032:4045');
                _fr.destroy();
                __$coverCall('src/javascript/file/FileReader.js', '4051:4061');
                _fr = null;
                __$coverCall('src/javascript/file/FileReader.js', '4067:4090');
                self.trigger('loadend');
            }
            __$coverCall('src/javascript/file/FileReader.js', '4101:4592');
            function exec(runtime) {
                __$coverCall('src/javascript/file/FileReader.js', '4130:4190');
                _fr.bind('Error', function (e, err) {
                    __$coverCall('src/javascript/file/FileReader.js', '4172:4182');
                    error(err);
                });
                __$coverCall('src/javascript/file/FileReader.js', '4197:4330');
                _fr.bind('Progress', function (e) {
                    __$coverCall('src/javascript/file/FileReader.js', '4237:4300');
                    self.result = runtime.exec.call(_fr, 'FileReader', 'getResult');
                    __$coverCall('src/javascript/file/FileReader.js', '4307:4322');
                    self.trigger(e);
                });
                __$coverCall('src/javascript/file/FileReader.js', '4341:4526');
                _fr.bind('Load', function (e) {
                    __$coverCall('src/javascript/file/FileReader.js', '4377:4410');
                    self.readyState = FileReader.DONE;
                    __$coverCall('src/javascript/file/FileReader.js', '4417:4480');
                    self.result = runtime.exec.call(_fr, 'FileReader', 'getResult');
                    __$coverCall('src/javascript/file/FileReader.js', '4487:4502');
                    self.trigger(e);
                    __$coverCall('src/javascript/file/FileReader.js', '4509:4518');
                    loadEnd();
                });
                __$coverCall('src/javascript/file/FileReader.js', '4533:4587');
                runtime.exec.call(_fr, 'FileReader', 'read', op, blob);
            }
            __$coverCall('src/javascript/file/FileReader.js', '4598:4642');
            this.convertEventPropsToHandlers(dispatches);
            __$coverCall('src/javascript/file/FileReader.js', '4648:4769');
            if (this.readyState === FileReader.LOADING) {
                __$coverCall('src/javascript/file/FileReader.js', '4698:4764');
                return error(new x.DOMException(x.DOMException.INVALID_STATE_ERR));
            }
            __$coverCall('src/javascript/file/FileReader.js', '4775:4811');
            this.readyState = FileReader.LOADING;
            __$coverCall('src/javascript/file/FileReader.js', '4816:4841');
            this.trigger('loadstart');
            __$coverCall('src/javascript/file/FileReader.js', '4880:5430');
            if (blob instanceof Blob) {
                __$coverCall('src/javascript/file/FileReader.js', '4912:5352');
                if (blob.isDetached()) {
                    __$coverCall('src/javascript/file/FileReader.js', '4942:4968');
                    var src = blob.getSource();
                    __$coverCall('src/javascript/file/FileReader.js', '4975:5208');
                    switch (op) {
                    case 'readAsText':
                    case 'readAsBinaryString':
                        __$coverCall('src/javascript/file/FileReader.js', '5054:5071');
                        this.result = src;
                        __$coverCall('src/javascript/file/FileReader.js', '5080:5085');
                        break;
                    case 'readAsDataURL':
                        __$coverCall('src/javascript/file/FileReader.js', '5122:5187');
                        this.result = 'data:' + blob.type + ';base64,' + Encode.btoa(src);
                        __$coverCall('src/javascript/file/FileReader.js', '5196:5201');
                        break;
                    }
                    __$coverCall('src/javascript/file/FileReader.js', '5215:5248');
                    this.readyState = FileReader.DONE;
                    __$coverCall('src/javascript/file/FileReader.js', '5255:5275');
                    this.trigger('load');
                    __$coverCall('src/javascript/file/FileReader.js', '5282:5291');
                    loadEnd();
                } else {
                    __$coverCall('src/javascript/file/FileReader.js', '5311:5346');
                    exec(_fr.connectRuntime(blob.ruid));
                }
            } else {
                __$coverCall('src/javascript/file/FileReader.js', '5370:5425');
                error(new x.DOMException(x.DOMException.NOT_FOUND_ERR));
            }
        }
    }
    __$coverCall('src/javascript/file/FileReader.js', '5540:5560');
    FileReader.EMPTY = 0;
    __$coverCall('src/javascript/file/FileReader.js', '5706:5728');
    FileReader.LOADING = 1;
    __$coverCall('src/javascript/file/FileReader.js', '5850:5869');
    FileReader.DONE = 2;
    __$coverCall('src/javascript/file/FileReader.js', '5873:5916');
    FileReader.prototype = EventTarget.instance;
    __$coverCall('src/javascript/file/FileReader.js', '5920:5937');
    return FileReader;
});

// Included from: src/javascript/core/utils/Url.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/core/utils/Url.js", "/**\n * Url.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Url', [], function() {\n\t/**\n\tParse url into separate components and fill in absent parts with parts from current url,\n\tbased on https://raw.github.com/kvz/phpjs/master/functions/url/parse_url.js\n\n\t@method parseUrl\n\t@for Utils\n\t@static\n\t@param {String} url Url to parse (defaults to empty string if undefined)\n\t@return {Object} Hash containing extracted uri components\n\t*/\n\tvar parseUrl = function(url, currentUrl) {\n\t\tvar key = ['source', 'scheme', 'authority', 'userInfo', 'user', 'pass', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'fragment']\n\t\t, i = key.length\n\t\t, ports = {\n\t\t\thttp: 80,\n\t\t\thttps: 443\n\t\t}\n\t\t, uri = {}\n\t\t, regex = /^(?:([^:\\/?#]+):)?(?:\\/\\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?()(?:(()(?:(?:[^?#\\/]*\\/)*)()(?:[^?#]*))(?:\\\\?([^#]*))?(?:#(.*))?)/\n\t\t, m = regex.exec(url || '')\n\t\t;\n\t\t\t\t\t\n\t\twhile (i--) {\n\t\t\tif (m[i]) {\n\t\t\t\turi[key[i]] = m[i];\n\t\t\t}\n\t\t}\n\n\t\t// when url is relative, we set the origin and the path ourselves\n\t\tif (!uri.scheme) {\n\t\t\t// come up with defaults\n\t\t\tif (!currentUrl || typeof(currentUrl) === 'string') {\n\t\t\t\tcurrentUrl = parseUrl(currentUrl || document.location.href);\n\t\t\t}\n\n\t\t\turi.scheme = currentUrl.scheme;\n\t\t\turi.host = currentUrl.host;\n\t\t\turi.port = currentUrl.port;\n\n\t\t\tvar path = '';\n\t\t\t// for urls without trailing slash we need to figure out the path\n\t\t\tif (/^[^\\/]/.test(uri.path)) {\n\t\t\t\tpath = currentUrl.path;\n\t\t\t\t// if path ends with a filename, strip it\n\t\t\t\tif (!/(\\/|\\/[^\\.]+)$/.test(path)) {\n\t\t\t\t\tpath = path.replace(/\\/[^\\/]+$/, '/');\n\t\t\t\t} else {\n\t\t\t\t\tpath += '/';\n\t\t\t\t}\n\t\t\t}\n\t\t\turi.path = path + (uri.path || ''); // site may reside at domain.com or domain.com/subdir\n\t\t}\n\n\t\tif (!uri.port) {\n\t\t\turi.port = ports[uri.scheme] || 80;\n\t\t} \n\t\t\n\t\turi.port = parseInt(uri.port, 10);\n\n\t\tif (!uri.path) {\n\t\t\turi.path = \"/\";\n\t\t}\n\n\t\tdelete uri.source;\n\n\t\treturn uri;\n\t};\n\n\t/**\n\tResolve url - among other things will turn relative url to absolute\n\n\t@method resolveUrl\n\t@static\n\t@param {String} url Either absolute or relative\n\t@return {String} Resolved, absolute url\n\t*/\n\tvar resolveUrl = function(url) {\n\t\tvar ports = { // we ignore default ports\n\t\t\thttp: 80,\n\t\t\thttps: 443\n\t\t}\n\t\t, urlp = parseUrl(url)\n\t\t;\n\n\t\treturn urlp.scheme + '://' + urlp.host + (urlp.port !== ports[urlp.scheme] ? ':' + urlp.port : '') + urlp.path + (urlp.query ? urlp.query : '');\n\t};\n\n\t/**\n\tCheck if specified url has the same origin as the current document\n\n\t@method hasSameOrigin\n\t@param {String|Object} url\n\t@return {Boolean}\n\t*/\n\tvar hasSameOrigin = function(url) {\n\t\tfunction origin(url) {\n\t\t\treturn [url.scheme, url.host, url.port].join('/');\n\t\t}\n\t\t\t\n\t\tif (typeof url === 'string') {\n\t\t\turl = parseUrl(url);\n\t\t}\t\n\t\t\n\t\treturn origin(parseUrl()) === origin(url);\n\t};\n\n\treturn {\n\t\tparseUrl: parseUrl,\n\t\tresolveUrl: resolveUrl,\n\t\thasSameOrigin: hasSameOrigin\n\t};\n});\n");
__$coverInitRange("src/javascript/core/utils/Url.js", "194:3056");
__$coverInitRange("src/javascript/core/utils/Url.js", "592:2083");
__$coverInitRange("src/javascript/core/utils/Url.js", "2285:2571");
__$coverInitRange("src/javascript/core/utils/Url.js", "2723:2958");
__$coverInitRange("src/javascript/core/utils/Url.js", "2962:3052");
__$coverInitRange("src/javascript/core/utils/Url.js", "637:1062");
__$coverInitRange("src/javascript/core/utils/Url.js", "1063:1063");
__$coverInitRange("src/javascript/core/utils/Url.js", "1073:1133");
__$coverInitRange("src/javascript/core/utils/Url.js", "1206:1895");
__$coverInitRange("src/javascript/core/utils/Url.js", "1900:1958");
__$coverInitRange("src/javascript/core/utils/Url.js", "1966:1999");
__$coverInitRange("src/javascript/core/utils/Url.js", "2004:2042");
__$coverInitRange("src/javascript/core/utils/Url.js", "2047:2064");
__$coverInitRange("src/javascript/core/utils/Url.js", "2069:2079");
__$coverInitRange("src/javascript/core/utils/Url.js", "1090:1129");
__$coverInitRange("src/javascript/core/utils/Url.js", "1106:1124");
__$coverInitRange("src/javascript/core/utils/Url.js", "1256:1378");
__$coverInitRange("src/javascript/core/utils/Url.js", "1384:1414");
__$coverInitRange("src/javascript/core/utils/Url.js", "1419:1445");
__$coverInitRange("src/javascript/core/utils/Url.js", "1450:1476");
__$coverInitRange("src/javascript/core/utils/Url.js", "1482:1495");
__$coverInitRange("src/javascript/core/utils/Url.js", "1569:1798");
__$coverInitRange("src/javascript/core/utils/Url.js", "1803:1837");
__$coverInitRange("src/javascript/core/utils/Url.js", "1314:1373");
__$coverInitRange("src/javascript/core/utils/Url.js", "1604:1626");
__$coverInitRange("src/javascript/core/utils/Url.js", "1678:1793");
__$coverInitRange("src/javascript/core/utils/Url.js", "1719:1756");
__$coverInitRange("src/javascript/core/utils/Url.js", "1776:1787");
__$coverInitRange("src/javascript/core/utils/Url.js", "1920:1954");
__$coverInitRange("src/javascript/core/utils/Url.js", "2024:2038");
__$coverInitRange("src/javascript/core/utils/Url.js", "2320:2418");
__$coverInitRange("src/javascript/core/utils/Url.js", "2419:2419");
__$coverInitRange("src/javascript/core/utils/Url.js", "2424:2567");
__$coverInitRange("src/javascript/core/utils/Url.js", "2761:2840");
__$coverInitRange("src/javascript/core/utils/Url.js", "2848:2905");
__$coverInitRange("src/javascript/core/utils/Url.js", "2913:2954");
__$coverInitRange("src/javascript/core/utils/Url.js", "2787:2836");
__$coverInitRange("src/javascript/core/utils/Url.js", "2882:2901");
__$coverCall('src/javascript/core/utils/Url.js', '194:3056');
define('moxie/core/utils/Url', [], function () {
    __$coverCall('src/javascript/core/utils/Url.js', '592:2083');
    var parseUrl = function (url, currentUrl) {
        __$coverCall('src/javascript/core/utils/Url.js', '637:1062');
        var key = [
                'source',
                'scheme',
                'authority',
                'userInfo',
                'user',
                'pass',
                'host',
                'port',
                'relative',
                'path',
                'directory',
                'file',
                'query',
                'fragment'
            ], i = key.length, ports = {
                http: 80,
                https: 443
            }, uri = {}, regex = /^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/, m = regex.exec(url || '');
        __$coverCall('src/javascript/core/utils/Url.js', '1063:1063');
        ;
        __$coverCall('src/javascript/core/utils/Url.js', '1073:1133');
        while (i--) {
            __$coverCall('src/javascript/core/utils/Url.js', '1090:1129');
            if (m[i]) {
                __$coverCall('src/javascript/core/utils/Url.js', '1106:1124');
                uri[key[i]] = m[i];
            }
        }
        __$coverCall('src/javascript/core/utils/Url.js', '1206:1895');
        if (!uri.scheme) {
            __$coverCall('src/javascript/core/utils/Url.js', '1256:1378');
            if (!currentUrl || typeof currentUrl === 'string') {
                __$coverCall('src/javascript/core/utils/Url.js', '1314:1373');
                currentUrl = parseUrl(currentUrl || document.location.href);
            }
            __$coverCall('src/javascript/core/utils/Url.js', '1384:1414');
            uri.scheme = currentUrl.scheme;
            __$coverCall('src/javascript/core/utils/Url.js', '1419:1445');
            uri.host = currentUrl.host;
            __$coverCall('src/javascript/core/utils/Url.js', '1450:1476');
            uri.port = currentUrl.port;
            __$coverCall('src/javascript/core/utils/Url.js', '1482:1495');
            var path = '';
            __$coverCall('src/javascript/core/utils/Url.js', '1569:1798');
            if (/^[^\/]/.test(uri.path)) {
                __$coverCall('src/javascript/core/utils/Url.js', '1604:1626');
                path = currentUrl.path;
                __$coverCall('src/javascript/core/utils/Url.js', '1678:1793');
                if (!/(\/|\/[^\.]+)$/.test(path)) {
                    __$coverCall('src/javascript/core/utils/Url.js', '1719:1756');
                    path = path.replace(/\/[^\/]+$/, '/');
                } else {
                    __$coverCall('src/javascript/core/utils/Url.js', '1776:1787');
                    path += '/';
                }
            }
            __$coverCall('src/javascript/core/utils/Url.js', '1803:1837');
            uri.path = path + (uri.path || '');
        }
        __$coverCall('src/javascript/core/utils/Url.js', '1900:1958');
        if (!uri.port) {
            __$coverCall('src/javascript/core/utils/Url.js', '1920:1954');
            uri.port = ports[uri.scheme] || 80;
        }
        __$coverCall('src/javascript/core/utils/Url.js', '1966:1999');
        uri.port = parseInt(uri.port, 10);
        __$coverCall('src/javascript/core/utils/Url.js', '2004:2042');
        if (!uri.path) {
            __$coverCall('src/javascript/core/utils/Url.js', '2024:2038');
            uri.path = '/';
        }
        __$coverCall('src/javascript/core/utils/Url.js', '2047:2064');
        delete uri.source;
        __$coverCall('src/javascript/core/utils/Url.js', '2069:2079');
        return uri;
    };
    __$coverCall('src/javascript/core/utils/Url.js', '2285:2571');
    var resolveUrl = function (url) {
        __$coverCall('src/javascript/core/utils/Url.js', '2320:2418');
        var ports = {
                http: 80,
                https: 443
            }, urlp = parseUrl(url);
        __$coverCall('src/javascript/core/utils/Url.js', '2419:2419');
        ;
        __$coverCall('src/javascript/core/utils/Url.js', '2424:2567');
        return urlp.scheme + '://' + urlp.host + (urlp.port !== ports[urlp.scheme] ? ':' + urlp.port : '') + urlp.path + (urlp.query ? urlp.query : '');
    };
    __$coverCall('src/javascript/core/utils/Url.js', '2723:2958');
    var hasSameOrigin = function (url) {
        __$coverCall('src/javascript/core/utils/Url.js', '2761:2840');
        function origin(url) {
            __$coverCall('src/javascript/core/utils/Url.js', '2787:2836');
            return [
                url.scheme,
                url.host,
                url.port
            ].join('/');
        }
        __$coverCall('src/javascript/core/utils/Url.js', '2848:2905');
        if (typeof url === 'string') {
            __$coverCall('src/javascript/core/utils/Url.js', '2882:2901');
            url = parseUrl(url);
        }
        __$coverCall('src/javascript/core/utils/Url.js', '2913:2954');
        return origin(parseUrl()) === origin(url);
    };
    __$coverCall('src/javascript/core/utils/Url.js', '2962:3052');
    return {
        parseUrl: parseUrl,
        resolveUrl: resolveUrl,
        hasSameOrigin: hasSameOrigin
    };
});

// Included from: src/javascript/file/FileReaderSync.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/file/FileReaderSync.js", "/**\n * FileReaderSync.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/file/FileReaderSync', [\n\t'moxie/core/utils/Basic',\n\t'moxie/runtime/RuntimeClient',\n\t'moxie/core/utils/Encode'\n], function(Basic, RuntimeClient, Encode) {\n\t/**\n\tSynchronous FileReader implementation. Something like this is available in WebWorkers environment, here\n\tit can be used to read only preloaded blobs/files and only below certain size (not yet sure what that'd be,\n\tbut probably < 1mb). Not meant to be used directly by user.\n\n\t@class FileReaderSync\n\t@private\n\t@constructor\n\t*/\n\treturn function() {\n\t\tRuntimeClient.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\treadAsBinaryString: function(blob) {\n\t\t\t\treturn _read.call(this, 'readAsBinaryString', blob);\n\t\t\t},\n\t\t\t\n\t\t\treadAsDataURL: function(blob) {\n\t\t\t\treturn _read.call(this, 'readAsDataURL', blob);\n\t\t\t},\n\t\t\t\n\t\t\t/*readAsArrayBuffer: function(blob) {\n\t\t\t\treturn _read.call(this, 'readAsArrayBuffer', blob);\n\t\t\t},*/\n\t\t\t\n\t\t\treadAsText: function(blob) {\n\t\t\t\treturn _read.call(this, 'readAsText', blob);\n\t\t\t}\n\t\t});\n\n\t\tfunction _read(op, blob) {\n\t\t\tif (blob.isDetached()) {\n\t\t\t\tvar src = blob.getSource();\n\t\t\t\tswitch (op) {\n\t\t\t\t\tcase 'readAsBinaryString':\n\t\t\t\t\t\treturn src;\n\t\t\t\t\tcase 'readAsDataURL':\n\t\t\t\t\t\treturn 'data:' + blob.type + ';base64,' + Encode.btoa(src);\n\t\t\t\t\tcase 'readAsText':\n\t\t\t\t\t\tvar txt = '';\n\t\t\t\t\t\tfor (var i = 0, length = src.length; i < length; i++) {\n\t\t\t\t\t\t\ttxt += String.fromCharCode(src[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn txt;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar result = this.connectRuntime(blob.ruid).exec.call(this, 'FileReaderSync', 'read', op, blob);\n\t\t\t\tthis.disconnectRuntime();\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t};\n});");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "205:1821");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "706:1817");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "728:752");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "757:1210");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1215:1813");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "851:902");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "953:999");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1156:1199");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1245:1809");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1274:1300");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1306:1642");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1358:1368");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1403:1461");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1493:1505");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1513:1618");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1626:1636");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1576:1610");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1660:1755");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1761:1785");
__$coverInitRange("src/javascript/file/FileReaderSync.js", "1791:1804");
__$coverCall('src/javascript/file/FileReaderSync.js', '205:1821');
define('moxie/file/FileReaderSync', [
    'moxie/core/utils/Basic',
    'moxie/runtime/RuntimeClient',
    'moxie/core/utils/Encode'
], function (Basic, RuntimeClient, Encode) {
    __$coverCall('src/javascript/file/FileReaderSync.js', '706:1817');
    return function () {
        __$coverCall('src/javascript/file/FileReaderSync.js', '728:752');
        RuntimeClient.call(this);
        __$coverCall('src/javascript/file/FileReaderSync.js', '757:1210');
        Basic.extend(this, {
            uid: Basic.guid('uid_'),
            readAsBinaryString: function (blob) {
                __$coverCall('src/javascript/file/FileReaderSync.js', '851:902');
                return _read.call(this, 'readAsBinaryString', blob);
            },
            readAsDataURL: function (blob) {
                __$coverCall('src/javascript/file/FileReaderSync.js', '953:999');
                return _read.call(this, 'readAsDataURL', blob);
            },
            readAsText: function (blob) {
                __$coverCall('src/javascript/file/FileReaderSync.js', '1156:1199');
                return _read.call(this, 'readAsText', blob);
            }
        });
        __$coverCall('src/javascript/file/FileReaderSync.js', '1215:1813');
        function _read(op, blob) {
            __$coverCall('src/javascript/file/FileReaderSync.js', '1245:1809');
            if (blob.isDetached()) {
                __$coverCall('src/javascript/file/FileReaderSync.js', '1274:1300');
                var src = blob.getSource();
                __$coverCall('src/javascript/file/FileReaderSync.js', '1306:1642');
                switch (op) {
                case 'readAsBinaryString':
                    __$coverCall('src/javascript/file/FileReaderSync.js', '1358:1368');
                    return src;
                case 'readAsDataURL':
                    __$coverCall('src/javascript/file/FileReaderSync.js', '1403:1461');
                    return 'data:' + blob.type + ';base64,' + Encode.btoa(src);
                case 'readAsText':
                    __$coverCall('src/javascript/file/FileReaderSync.js', '1493:1505');
                    var txt = '';
                    __$coverCall('src/javascript/file/FileReaderSync.js', '1513:1618');
                    for (var i = 0, length = src.length; i < length; i++) {
                        __$coverCall('src/javascript/file/FileReaderSync.js', '1576:1610');
                        txt += String.fromCharCode(src[i]);
                    }
                    __$coverCall('src/javascript/file/FileReaderSync.js', '1626:1636');
                    return txt;
                }
            } else {
                __$coverCall('src/javascript/file/FileReaderSync.js', '1660:1755');
                var result = this.connectRuntime(blob.ruid).exec.call(this, 'FileReaderSync', 'read', op, blob);
                __$coverCall('src/javascript/file/FileReaderSync.js', '1761:1785');
                this.disconnectRuntime();
                __$coverCall('src/javascript/file/FileReaderSync.js', '1791:1804');
                return result;
            }
        }
    };
});

// Included from: src/javascript/xhr/FormData.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/xhr/FormData.js", "/**\n * FormData.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/xhr/FormData\", [\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/file/Blob\"\n], function(x, Basic, Blob) {\n\t/**\n\tFormData\n\n\t@class FormData\n\t@constructor\n\t*/\n\tfunction FormData() {\n\t\tvar _blob, _fields = [];\n\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tAppend another key-value pair to the FormData object\n\n\t\t\t@method append\n\t\t\t@param {String} name Name for the new field\n\t\t\t@param {String|Blob|Array|Object} value Value for the field\n\t\t\t*/\n\t\t\tappend: function(name, value) {\n\t\t\t\tvar self = this, valueType = Basic.typeOf(value);\n\n\t\t\t\t// according to specs value might be either Blob or String\n\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t_blob = {\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tvalue: value // unfortunately we can only send single Blob in one FormData\n\t\t\t\t\t};\n\t\t\t\t} else if ('array' === valueType) {\n\t\t\t\t\tname += '[]';\n\n\t\t\t\t\tBasic.each(value, function(value) {\n\t\t\t\t\t\tself.append(name, value);\n\t\t\t\t\t});\n\t\t\t\t} else if ('object' === valueType) {\n\t\t\t\t\tBasic.each(value, function(value, key) {\n\t\t\t\t\t\tself.append(name + '[' + key + ']', value);\n\t\t\t\t\t});\n\t\t\t\t} else if ('null' === valueType || 'undefined' === valueType || 'number' === valueType && isNaN(value)) {\n\t\t\t\t\tself.append(name, \"false\");\n\t\t\t\t} else {\n\t\t\t\t\t_fields.push({\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tvalue: value.toString()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tChecks if FormData contains Blob.\n\n\t\t\t@method hasBlob\n\t\t\t@return {Boolean}\n\t\t\t*/\n\t\t\thasBlob: function() {\n\t\t\t\treturn !!this.getBlob();\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves blob.\n\n\t\t\t@method getBlob\n\t\t\t@return {Object} Either Blob if found or null\n\t\t\t*/\n\t\t\tgetBlob: function() {\n\t\t\t\treturn _blob && _blob.value || null;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves blob field name.\n\n\t\t\t@method getBlobName\n\t\t\t@return {String} Either Blob field name or null\n\t\t\t*/\n\t\t\tgetBlobName: function() {\n\t\t\t\treturn _blob && _blob.name || null;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tLoop over the fields in FormData and invoke the callback for each of them.\n\n\t\t\t@method each\n\t\t\t@param {Function} cb Callback to call for each field\n\t\t\t*/\n\t\t\teach: function(cb) {\n\t\t\t\tBasic.each(_fields, function(field) {\n\t\t\t\t\tcb(field.value, field.name);\n\t\t\t\t});\n\n\t\t\t\tif (_blob) {\n\t\t\t\t\tcb(_blob.value, _blob.name);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\t_blob = null;\n\t\t\t\t_fields = [];\n\t\t\t}\n\t\t});\n\t}\n\n\treturn FormData;\n});\n");
__$coverInitRange("src/javascript/xhr/FormData.js", "199:2450");
__$coverInitRange("src/javascript/xhr/FormData.js", "384:2427");
__$coverInitRange("src/javascript/xhr/FormData.js", "2431:2446");
__$coverInitRange("src/javascript/xhr/FormData.js", "408:431");
__$coverInitRange("src/javascript/xhr/FormData.js", "436:2424");
__$coverInitRange("src/javascript/xhr/FormData.js", "694:742");
__$coverInitRange("src/javascript/xhr/FormData.js", "812:1488");
__$coverInitRange("src/javascript/xhr/FormData.js", "846:961");
__$coverInitRange("src/javascript/xhr/FormData.js", "1008:1020");
__$coverInitRange("src/javascript/xhr/FormData.js", "1028:1103");
__$coverInitRange("src/javascript/xhr/FormData.js", "1070:1094");
__$coverInitRange("src/javascript/xhr/FormData.js", "1151:1249");
__$coverInitRange("src/javascript/xhr/FormData.js", "1198:1240");
__$coverInitRange("src/javascript/xhr/FormData.js", "1366:1392");
__$coverInitRange("src/javascript/xhr/FormData.js", "1412:1482");
__$coverInitRange("src/javascript/xhr/FormData.js", "1617:1640");
__$coverInitRange("src/javascript/xhr/FormData.js", "1779:1814");
__$coverInitRange("src/javascript/xhr/FormData.js", "1974:2008");
__$coverInitRange("src/javascript/xhr/FormData.js", "2209:2287");
__$coverInitRange("src/javascript/xhr/FormData.js", "2294:2345");
__$coverInitRange("src/javascript/xhr/FormData.js", "2252:2279");
__$coverInitRange("src/javascript/xhr/FormData.js", "2312:2339");
__$coverInitRange("src/javascript/xhr/FormData.js", "2383:2395");
__$coverInitRange("src/javascript/xhr/FormData.js", "2401:2413");
__$coverCall('src/javascript/xhr/FormData.js', '199:2450');
define('moxie/xhr/FormData', [
    'moxie/core/Exceptions',
    'moxie/core/utils/Basic',
    'moxie/file/Blob'
], function (x, Basic, Blob) {
    __$coverCall('src/javascript/xhr/FormData.js', '384:2427');
    function FormData() {
        __$coverCall('src/javascript/xhr/FormData.js', '408:431');
        var _blob, _fields = [];
        __$coverCall('src/javascript/xhr/FormData.js', '436:2424');
        Basic.extend(this, {
            append: function (name, value) {
                __$coverCall('src/javascript/xhr/FormData.js', '694:742');
                var self = this, valueType = Basic.typeOf(value);
                __$coverCall('src/javascript/xhr/FormData.js', '812:1488');
                if (value instanceof Blob) {
                    __$coverCall('src/javascript/xhr/FormData.js', '846:961');
                    _blob = {
                        name: name,
                        value: value
                    };
                } else if ('array' === valueType) {
                    __$coverCall('src/javascript/xhr/FormData.js', '1008:1020');
                    name += '[]';
                    __$coverCall('src/javascript/xhr/FormData.js', '1028:1103');
                    Basic.each(value, function (value) {
                        __$coverCall('src/javascript/xhr/FormData.js', '1070:1094');
                        self.append(name, value);
                    });
                } else if ('object' === valueType) {
                    __$coverCall('src/javascript/xhr/FormData.js', '1151:1249');
                    Basic.each(value, function (value, key) {
                        __$coverCall('src/javascript/xhr/FormData.js', '1198:1240');
                        self.append(name + '[' + key + ']', value);
                    });
                } else if ('null' === valueType || 'undefined' === valueType || 'number' === valueType && isNaN(value)) {
                    __$coverCall('src/javascript/xhr/FormData.js', '1366:1392');
                    self.append(name, 'false');
                } else {
                    __$coverCall('src/javascript/xhr/FormData.js', '1412:1482');
                    _fields.push({
                        name: name,
                        value: value.toString()
                    });
                }
            },
            hasBlob: function () {
                __$coverCall('src/javascript/xhr/FormData.js', '1617:1640');
                return !!this.getBlob();
            },
            getBlob: function () {
                __$coverCall('src/javascript/xhr/FormData.js', '1779:1814');
                return _blob && _blob.value || null;
            },
            getBlobName: function () {
                __$coverCall('src/javascript/xhr/FormData.js', '1974:2008');
                return _blob && _blob.name || null;
            },
            each: function (cb) {
                __$coverCall('src/javascript/xhr/FormData.js', '2209:2287');
                Basic.each(_fields, function (field) {
                    __$coverCall('src/javascript/xhr/FormData.js', '2252:2279');
                    cb(field.value, field.name);
                });
                __$coverCall('src/javascript/xhr/FormData.js', '2294:2345');
                if (_blob) {
                    __$coverCall('src/javascript/xhr/FormData.js', '2312:2339');
                    cb(_blob.value, _blob.name);
                }
            },
            destroy: function () {
                __$coverCall('src/javascript/xhr/FormData.js', '2383:2395');
                _blob = null;
                __$coverCall('src/javascript/xhr/FormData.js', '2401:2413');
                _fields = [];
            }
        });
    }
    __$coverCall('src/javascript/xhr/FormData.js', '2431:2446');
    return FormData;
});

// Included from: src/javascript/xhr/XMLHttpRequest.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/xhr/XMLHttpRequest.js", "/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/xhr/XMLHttpRequest\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/EventTarget\",\n\t\"moxie/core/utils/Encode\",\n\t\"moxie/core/utils/Url\",\n\t\"moxie/runtime/Runtime\",\n\t\"moxie/runtime/RuntimeTarget\",\n\t\"moxie/file/Blob\",\n\t\"moxie/file/FileReaderSync\",\n\t\"moxie/xhr/FormData\",\n\t\"moxie/core/utils/Env\",\n\t\"moxie/core/utils/Mime\"\n], function(Basic, x, EventTarget, Encode, Url, Runtime, RuntimeTarget, Blob, FileReaderSync, FormData, Env, Mime) {\n\n\tvar httpCode = {\n\t\t100: 'Continue',\n\t\t101: 'Switching Protocols',\n\t\t102: 'Processing',\n\n\t\t200: 'OK',\n\t\t201: 'Created',\n\t\t202: 'Accepted',\n\t\t203: 'Non-Authoritative Information',\n\t\t204: 'No Content',\n\t\t205: 'Reset Content',\n\t\t206: 'Partial Content',\n\t\t207: 'Multi-Status',\n\t\t226: 'IM Used',\n\n\t\t300: 'Multiple Choices',\n\t\t301: 'Moved Permanently',\n\t\t302: 'Found',\n\t\t303: 'See Other',\n\t\t304: 'Not Modified',\n\t\t305: 'Use Proxy',\n\t\t306: 'Reserved',\n\t\t307: 'Temporary Redirect',\n\n\t\t400: 'Bad Request',\n\t\t401: 'Unauthorized',\n\t\t402: 'Payment Required',\n\t\t403: 'Forbidden',\n\t\t404: 'Not Found',\n\t\t405: 'Method Not Allowed',\n\t\t406: 'Not Acceptable',\n\t\t407: 'Proxy Authentication Required',\n\t\t408: 'Request Timeout',\n\t\t409: 'Conflict',\n\t\t410: 'Gone',\n\t\t411: 'Length Required',\n\t\t412: 'Precondition Failed',\n\t\t413: 'Request Entity Too Large',\n\t\t414: 'Request-URI Too Long',\n\t\t415: 'Unsupported Media Type',\n\t\t416: 'Requested Range Not Satisfiable',\n\t\t417: 'Expectation Failed',\n\t\t422: 'Unprocessable Entity',\n\t\t423: 'Locked',\n\t\t424: 'Failed Dependency',\n\t\t426: 'Upgrade Required',\n\n\t\t500: 'Internal Server Error',\n\t\t501: 'Not Implemented',\n\t\t502: 'Bad Gateway',\n\t\t503: 'Service Unavailable',\n\t\t504: 'Gateway Timeout',\n\t\t505: 'HTTP Version Not Supported',\n\t\t506: 'Variant Also Negotiates',\n\t\t507: 'Insufficient Storage',\n\t\t510: 'Not Extended'\n\t};\n\n\tfunction XMLHttpRequestUpload() {\n\t\tthis.uid = Basic.guid('uid_');\n\t}\n\t\n\tXMLHttpRequestUpload.prototype = EventTarget.instance;\n\n\t/**\n\tImplementation of XMLHttpRequest\n\n\t@class XMLHttpRequest\n\t@constructor\n\t@uses RuntimeClient\n\t@extends EventTarget\n\t*/\n\tvar dispatches = ['loadstart', 'progress', 'abort', 'error', 'load', 'timeout', 'loadend']; // & readystatechange (for historical reasons)\n\t\n\tvar NATIVE = 1, RUNTIME = 2;\n\t\t\t\t\t\n\tfunction XMLHttpRequest() {\n\t\tvar self = this,\n\t\t\t// this (together with _p() @see below) is here to gracefully upgrade to setter/getter syntax where possible\n\t\t\tprops = {\n\t\t\t\t/**\n\t\t\t\tThe amount of milliseconds a request can take before being terminated. Initially zero. Zero means there is no timeout.\n\n\t\t\t\t@property timeout\n\t\t\t\t@type Number\n\t\t\t\t@default 0\n\t\t\t\t*/\n\t\t\t\ttimeout: 0,\n\n\t\t\t\t/**\n\t\t\t\tCurrent state, can take following values:\n\t\t\t\tUNSENT (numeric value 0)\n\t\t\t\tThe object has been constructed.\n\n\t\t\t\tOPENED (numeric value 1)\n\t\t\t\tThe open() method has been successfully invoked. During this state request headers can be set using setRequestHeader() and the request can be made using the send() method.\n\n\t\t\t\tHEADERS_RECEIVED (numeric value 2)\n\t\t\t\tAll redirects (if any) have been followed and all HTTP headers of the final response have been received. Several response members of the object are now available.\n\n\t\t\t\tLOADING (numeric value 3)\n\t\t\t\tThe response entity body is being received.\n\n\t\t\t\tDONE (numeric value 4)\n\n\t\t\t\t@property readyState\n\t\t\t\t@type Number\n\t\t\t\t@default 0 (UNSENT)\n\t\t\t\t*/\n\t\t\t\treadyState: XMLHttpRequest.UNSENT,\n\n\t\t\t\t/**\n\t\t\t\tTrue when user credentials are to be included in a cross-origin request. False when they are to be excluded\n\t\t\t\tin a cross-origin request and when cookies are to be ignored in its response. Initially false.\n\n\t\t\t\t@property withCredentials\n\t\t\t\t@type Boolean\n\t\t\t\t@default false\n\t\t\t\t*/\n\t\t\t\twithCredentials: false,\n\n\t\t\t\t/**\n\t\t\t\tReturns the HTTP status code.\n\n\t\t\t\t@property status\n\t\t\t\t@type Number\n\t\t\t\t@default 0\n\t\t\t\t*/\n\t\t\t\tstatus: 0,\n\n\t\t\t\t/**\n\t\t\t\tReturns the HTTP status text.\n\n\t\t\t\t@property statusText\n\t\t\t\t@type String\n\t\t\t\t*/\n\t\t\t\tstatusText: \"\",\n\n\t\t\t\t/**\n\t\t\t\tReturns the response type. Can be set to change the response type. Values are:\n\t\t\t\tthe empty string (default), \"arraybuffer\", \"blob\", \"document\", \"json\", and \"text\".\n\t\t\t\t\n\t\t\t\t@property responseType\n\t\t\t\t@type String\n\t\t\t\t*/\n\t\t\t\tresponseType: \"\",\n\n\t\t\t\t/**\n\t\t\t\tReturns the document response entity body.\n\t\t\t\t\n\t\t\t\tThrows an \"InvalidStateError\" exception if responseType is not the empty string or \"document\".\n\n\t\t\t\t@property responseXML\n\t\t\t\t@type Document\n\t\t\t\t*/\n\t\t\t\tresponseXML: null,\n\n\t\t\t\t/**\n\t\t\t\tReturns the text response entity body.\n\t\t\t\t\n\t\t\t\tThrows an \"InvalidStateError\" exception if responseType is not the empty string or \"text\".\n\n\t\t\t\t@property responseText\n\t\t\t\t@type String\n\t\t\t\t*/\n\t\t\t\tresponseText: null,\n\n\t\t\t\t/**\n\t\t\t\tReturns the response entity body (http://www.w3.org/TR/XMLHttpRequest/#response-entity-body).\n\t\t\t\tCan become: ArrayBuffer, Blob, Document, JSON, Text\n\t\t\t\t\n\t\t\t\t@property response\n\t\t\t\t@type Mixed\n\t\t\t\t*/\n\t\t\t\tresponse: null\n\t\t\t},\n\n\t\t\t_async = true,\n\t\t\t_url,\n\t\t\t_method,\n\t\t\t_headers = {},\n\t\t\t_user,\n\t\t\t_password,\n\t\t\t_encoding = null,\n\t\t\t_mimeType = null,\n\n\t\t\t// flags\n\t\t\t_sync_flag = false,\n\t\t\t_send_flag = false,\n\t\t\t_upload_events_flag = false,\n\t\t\t_upload_complete_flag = false,\n\t\t\t_error_flag = false,\n\t\t\t_same_origin_flag = false,\n\n\t\t\t// times\n\t\t\t_start_time,\n\t\t\t_timeoutset_time,\n\n\t\t\t_finalMime = null,\n\t\t\t_finalCharset = null,\n\n\t\t\t_options = {},\n\t\t\t_xhr,\n\t\t\t_responseHeaders = '',\n\t\t\t_responseHeadersBag\n\t\t\t;\n\n\t\t\n\t\tBasic.extend(this, props, {\n\t\t\t/**\n\t\t\tUnique id of the component\n\n\t\t\t@property uid\n\t\t\t@type String\n\t\t\t*/\n\t\t\tuid: Basic.guid('uid_'),\n\t\t\t\n\t\t\t/**\n\t\t\tTarget for Upload events\n\n\t\t\t@property upload\n\t\t\t@type XMLHttpRequestUpload\n\t\t\t*/\n\t\t\tupload: new XMLHttpRequestUpload(),\n\t\t\t\n\n\t\t\t/**\n\t\t\tSets the request method, request URL, synchronous flag, request username, and request password.\n\n\t\t\tThrows a \"SyntaxError\" exception if one of the following is true:\n\n\t\t\tmethod is not a valid HTTP method.\n\t\t\turl cannot be resolved.\n\t\t\turl contains the \"user:password\" format in the userinfo production.\n\t\t\tThrows a \"SecurityError\" exception if method is a case-insensitive match for CONNECT, TRACE or TRACK.\n\n\t\t\tThrows an \"InvalidAccessError\" exception if one of the following is true:\n\n\t\t\tEither user or password is passed as argument and the origin of url does not match the XMLHttpRequest origin.\n\t\t\tThere is an associated XMLHttpRequest document and either the timeout attribute is not zero,\n\t\t\tthe withCredentials attribute is true, or the responseType attribute is not the empty string.\n\n\n\t\t\t@method open\n\t\t\t@param {String} method HTTP method to use on request\n\t\t\t@param {String} url URL to request\n\t\t\t@param {Boolean} [async=true] If false request will be done in synchronous manner. Asynchronous by default.\n\t\t\t@param {String} [user] Username to use in HTTP authentication process on server-side\n\t\t\t@param {String} [password] Password to use in HTTP authentication process on server-side\n\t\t\t*/\n\t\t\topen: function(method, url, async, user, password) {\n\t\t\t\tvar urlp;\n\t\t\t\t\n\t\t\t\t// first two arguments are required\n\t\t\t\tif (!method || !url) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 2 - check if any code point in method is higher than U+00FF or after deflating method it does not match the method\n\t\t\t\tif (/[\\u0100-\\uffff]/.test(method) || Encode.utf8_encode(method) !== method) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3\n\t\t\t\tif (!!~Basic.inArray(method.toUpperCase(), ['CONNECT', 'DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT', 'TRACE', 'TRACK'])) {\n\t\t\t\t\t_method = method.toUpperCase();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t// 4 - allowing these methods poses a security risk\n\t\t\t\tif (!!~Basic.inArray(_method, ['CONNECT', 'TRACE', 'TRACK'])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SECURITY_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 5\n\t\t\t\turl = Encode.utf8_encode(url);\n\t\t\t\t\n\t\t\t\t// 6 - Resolve url relative to the XMLHttpRequest base URL. If the algorithm returns an error, throw a \"SyntaxError\".\n\t\t\t\turlp = Url.parseUrl(url);\n\n\t\t\t\t_same_origin_flag = Url.hasSameOrigin(urlp);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t// 7 - manually build up absolute url\n\t\t\t\t_url = Url.resolveUrl(url);\n\t\t\n\t\t\t\t// 9-10, 12-13\n\t\t\t\tif ((user || password) && !_same_origin_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\n\t\t\t\t_user = user || urlp.user;\n\t\t\t\t_password = password || urlp.pass;\n\t\t\t\t\n\t\t\t\t// 11\n\t\t\t\t_async = async || true;\n\t\t\t\t\n\t\t\t\tif (_async === false && (_p('timeout') || _p('withCredentials') || _p('responseType') !== \"\")) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 14 - terminate abort()\n\t\t\t\t\n\t\t\t\t// 15 - terminate send()\n\n\t\t\t\t// 18\n\t\t\t\t_sync_flag = !_async;\n\t\t\t\t_send_flag = false;\n\t\t\t\t_headers = {};\n\t\t\t\t_reset.call(this);\n\n\t\t\t\t// 19\n\t\t\t\t_p('readyState', XMLHttpRequest.OPENED);\n\t\t\t\t\n\t\t\t\t// 20\n\t\t\t\tthis.convertEventPropsToHandlers(['readystatechange']); // unify event handlers\n\t\t\t\tthis.dispatchEvent('readystatechange');\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tAppends an header to the list of author request headers, or if header is already\n\t\t\tin the list of author request headers, combines its value with value.\n\n\t\t\tThrows an \"InvalidStateError\" exception if the state is not OPENED or if the send() flag is set.\n\t\t\tThrows a \"SyntaxError\" exception if header is not a valid HTTP header field name or if value\n\t\t\tis not a valid HTTP header field value.\n\t\t\t\n\t\t\t@method setRequestHeader\n\t\t\t@param {String} header\n\t\t\t@param {String|Number} value\n\t\t\t*/\n\t\t\tsetRequestHeader: function(header, value) {\n\t\t\t\tvar uaHeaders = [ // these headers are controlled by the user agent\n\t\t\t\t\t\t\"accept-charset\",\n\t\t\t\t\t\t\"accept-encoding\",\n\t\t\t\t\t\t\"access-control-request-headers\",\n\t\t\t\t\t\t\"access-control-request-method\",\n\t\t\t\t\t\t\"connection\",\n\t\t\t\t\t\t\"content-length\",\n\t\t\t\t\t\t\"cookie\",\n\t\t\t\t\t\t\"cookie2\",\n\t\t\t\t\t\t\"content-transfer-encoding\",\n\t\t\t\t\t\t\"date\",\n\t\t\t\t\t\t\"expect\",\n\t\t\t\t\t\t\"host\",\n\t\t\t\t\t\t\"keep-alive\",\n\t\t\t\t\t\t\"origin\",\n\t\t\t\t\t\t\"referer\",\n\t\t\t\t\t\t\"te\",\n\t\t\t\t\t\t\"trailer\",\n\t\t\t\t\t\t\"transfer-encoding\",\n\t\t\t\t\t\t\"upgrade\",\n\t\t\t\t\t\t\"user-agent\",\n\t\t\t\t\t\t\"via\"\n\t\t\t\t\t];\n\t\t\t\t\n\t\t\t\t// 1-2\n\t\t\t\tif (_p('readyState') !== XMLHttpRequest.OPENED || _send_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3\n\t\t\t\tif (/[\\u0100-\\uffff]/.test(header) || Encode.utf8_encode(header) !== header) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 4\n\t\t\t\t/* this step is seemingly bypassed in browsers, probably to allow various unicode characters in header values\n\t\t\t\tif (/[\\u0100-\\uffff]/.test(value) || Encode.utf8_encode(value) !== value) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}*/\n\n\t\t\t\theader = Basic.trim(header).toLowerCase();\n\t\t\t\t\n\t\t\t\t// setting of proxy-* and sec-* headers is prohibited by spec\n\t\t\t\tif (!!~Basic.inArray(header, uaHeaders) || /^(proxy\\-|sec\\-)/.test(header)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// camelize\n\t\t\t\t// browsers lowercase header names (at least for custom ones)\n\t\t\t\t// header = header.replace(/\\b\\w/g, function($1) { return $1.toUpperCase(); });\n\t\t\t\t\n\t\t\t\tif (!_headers[header]) {\n\t\t\t\t\t_headers[header] = value;\n\t\t\t\t} else {\n\t\t\t\t\t// http://tools.ietf.org/html/rfc2616#section-4.2 (last paragraph)\n\t\t\t\t\t_headers[header] += ', ' + value;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns all headers from the response, with the exception of those whose field name is Set-Cookie or Set-Cookie2.\n\n\t\t\t@method getAllResponseHeaders\n\t\t\t@return {String} reponse headers or empty string\n\t\t\t*/\n\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\treturn _responseHeaders || '';\n\t\t\t},\n\n\t\t\t/**\n\t\t\tReturns the header field value from the response of which the field name matches header, \n\t\t\tunless the field name is Set-Cookie or Set-Cookie2.\n\n\t\t\t@method getResponseHeader\n\t\t\t@param {String} header\n\t\t\t@return {String} value(s) for the specified header or null\n\t\t\t*/\n\t\t\tgetResponseHeader: function(header) {\n\t\t\t\theader = header.toLowerCase();\n\n\t\t\t\tif (_error_flag || !!~Basic.inArray(header, ['set-cookie', 'set-cookie2'])) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (_responseHeaders && _responseHeaders !== '') {\n\t\t\t\t\t// if we didn't parse response headers until now, do it and keep for later\n\t\t\t\t\tif (!_responseHeadersBag) {\n\t\t\t\t\t\t_responseHeadersBag = {};\n\t\t\t\t\t\tBasic.each(_responseHeaders.split(/\\r\\n/), function(line) {\n\t\t\t\t\t\t\tvar pair = line.split(/:\\s+/);\n\t\t\t\t\t\t\tif (pair.length === 2) { // last line might be empty, omit\n\t\t\t\t\t\t\t\tpair[0] = Basic.trim(pair[0]); // just in case\n\t\t\t\t\t\t\t\t_responseHeadersBag[pair[0].toLowerCase()] = { // simply to retain header name in original form\n\t\t\t\t\t\t\t\t\theader: pair[0],\n\t\t\t\t\t\t\t\t\tvalue: Basic.trim(pair[1])\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (_responseHeadersBag.hasOwnProperty(header)) {\n\t\t\t\t\t\treturn _responseHeadersBag[header].header + ': ' + _responseHeadersBag[header].value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tSets the Content-Type header for the response to mime.\n\t\t\tThrows an \"InvalidStateError\" exception if the state is LOADING or DONE.\n\t\t\tThrows a \"SyntaxError\" exception if mime is not a valid media type.\n\n\t\t\t@method overrideMimeType\n\t\t\t@param String mime Mime type to set\n\t\t\t*/\n\t\t\toverrideMimeType: function(mime) {\n\t\t\t\tvar matches, charset;\n\t\t\t\n\t\t\t\t// 1\n\t\t\t\tif (!!~Basic.inArray(_p('readyState'), [XMLHttpRequest.LOADING, XMLHttpRequest.DONE])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 2\n\t\t\t\tmime = Basic.trim(mime.toLowerCase());\n\n\t\t\t\tif (/;/.test(mime) && (matches = mime.match(/^([^;]+)(?:;\\scharset\\=)?(.*)$/))) {\n\t\t\t\t\tmime = matches[1];\n\t\t\t\t\tif (matches[2]) {\n\t\t\t\t\t\tcharset = matches[2];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!Mime.mimes[mime]) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.SYNTAX_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3-4\n\t\t\t\t_finalMime = mime;\n\t\t\t\t_finalCharset = charset;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tInitiates the request. The optional argument provides the request entity body.\n\t\t\tThe argument is ignored if request method is GET or HEAD.\n\n\t\t\tThrows an \"InvalidStateError\" exception if the state is not OPENED or if the send() flag is set.\n\n\t\t\t@method send\n\t\t\t@param {Blob|Document|String|FormData} [data] Request entity body\n\t\t\t@param {Object} [options] Set of requirements and pre-requisities for runtime initialization\n\t\t\t*/\n\t\t\tsend: function(data, options) {\t\t\t\t\t\n\t\t\t\tif (Basic.typeOf(options) === 'string') {\n\t\t\t\t\t_options = { ruid: options };\n\t\t\t\t} else if (!options) {\n\t\t\t\t\t_options = {};\n\t\t\t\t} else {\n\t\t\t\t\t_options = options;\n\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tthis.convertEventPropsToHandlers(dispatches);\n\t\t\t\tthis.upload.convertEventPropsToHandlers(dispatches);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t// 1-2\n\t\t\t\tif (this.readyState !== XMLHttpRequest.OPENED || _send_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 3\t\t\t\t\t\n\t\t\t\t// sending Blob\n\t\t\t\tif (data instanceof Blob) {\n\t\t\t\t\t_options.ruid = data.ruid;\n\t\t\t\t\t_mimeType = data.type || 'application/octet-stream';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// FormData\n\t\t\t\telse if (data instanceof FormData) {\n\t\t\t\t\tif (data.hasBlob()) {\n\t\t\t\t\t\tvar blob = data.getBlob();\n\t\t\t\t\t\t_options.ruid = blob.ruid;\n\t\t\t\t\t\t_mimeType = blob.type || 'application/octet-stream';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// DOMString\n\t\t\t\telse if (typeof data === 'string') {\n\t\t\t\t\t_encoding = 'UTF-8';\n\t\t\t\t\t_mimeType = 'text/plain;charset=UTF-8';\n\t\t\t\t\t\n\t\t\t\t\t// data should be converted to Unicode and encoded as UTF-8\n\t\t\t\t\tdata = Encode.utf8_encode(data);\n\t\t\t\t}\n\n\t\t\t\t// if withCredentials not set, but requested, set it automatically\n\t\t\t\tif (!this.withCredentials) {\n\t\t\t\t\tthis.withCredentials = (_options.required_caps && _options.required_caps.send_browser_cookies) && !_same_origin_flag;\n\t\t\t\t}\n\n\t\t\t\t// 4 - storage mutex\n\t\t\t\t// 5\n\t\t\t\t_upload_events_flag = (!_sync_flag && this.upload.hasEventListener()); // DSAP\n\t\t\t\t// 6\n\t\t\t\t_error_flag = false;\n\t\t\t\t// 7\n\t\t\t\t_upload_complete_flag = !data;\n\t\t\t\t// 8 - Asynchronous steps\n\t\t\t\tif (!_sync_flag) {\n\t\t\t\t\t// 8.1\n\t\t\t\t\t_send_flag = true;\n\t\t\t\t\t// 8.2\n\t\t\t\t\t// this.dispatchEvent('loadstart'); // will be dispatched either by native or runtime xhr\n\t\t\t\t\t// 8.3\n\t\t\t\t\t//if (!_upload_complete_flag) {\n\t\t\t\t\t\t// this.upload.dispatchEvent('loadstart');\t// will be dispatched either by native or runtime xhr\n\t\t\t\t\t//}\n\t\t\t\t}\n\t\t\t\t// 8.5 - Return the send() method call, but continue running the steps in this algorithm.\n\t\t\t\t_doXHR.call(this, data);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\tCancels any network activity.\n\t\t\t\n\t\t\t@method abort\n\t\t\t*/\n\t\t\tabort: function() {\n\t\t\t\t_error_flag = true;\n\t\t\t\t_sync_flag = false;\n\n\t\t\t\tif (!~Basic.inArray(_p('readyState'), [XMLHttpRequest.UNSENT, XMLHttpRequest.OPENED, XMLHttpRequest.DONE])) {\n\t\t\t\t\t_p('readyState', XMLHttpRequest.DONE);\n\t\t\t\t\t_send_flag = false;\n\n\t\t\t\t\tif (_xhr) {\n\t\t\t\t\t\t_xhr.getRuntime().exec.call(_xhr, 'XMLHttpRequest', 'abort', _upload_complete_flag);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\t_upload_complete_flag = true;\n\t\t\t\t} else {\n\t\t\t\t\t_p('readyState', XMLHttpRequest.UNSENT);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tif (_xhr) {\n\t\t\t\t\tif (Basic.typeOf(_xhr.destroy) === 'function') {\n\t\t\t\t\t\t_xhr.destroy();\n\t\t\t\t\t}\n\t\t\t\t\t_xhr = null;\n\t\t\t\t}\n\n\t\t\t\tthis.unbindAll();\n\n\t\t\t\tif (this.upload) {\n\t\t\t\t\tthis.upload.unbindAll();\n\t\t\t\t\tthis.upload = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t/* this is nice, but maybe too lengthy\n\n\t\t// if supported by JS version, set getters/setters for specific properties\n\t\to.defineProperty(this, 'readyState', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('readyState');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'timeout', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('timeout');\n\t\t\t},\n\n\t\t\tset: function(value) {\n\n\t\t\t\tif (_sync_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\n\t\t\t\t// timeout still should be measured relative to the start time of request\n\t\t\t\t_timeoutset_time = (new Date).getTime();\n\n\t\t\t\t_p('timeout', value);\n\t\t\t}\n\t\t});\n\n\t\t// the withCredentials attribute has no effect when fetching same-origin resources\n\t\to.defineProperty(this, 'withCredentials', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('withCredentials');\n\t\t\t},\n\n\t\t\tset: function(value) {\n\t\t\t\t// 1-2\n\t\t\t\tif (!~o.inArray(_p('readyState'), [XMLHttpRequest.UNSENT, XMLHttpRequest.OPENED]) || _send_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3-4\n\t\t\t\tif (_anonymous_flag || _sync_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 5\n\t\t\t\t_p('withCredentials', value);\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'status', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('status');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'statusText', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('statusText');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'responseType', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\treturn _p('responseType');\n\t\t\t},\n\n\t\t\tset: function(value) {\n\t\t\t\t// 1\n\t\t\t\tif (!!~o.inArray(_p('readyState'), [XMLHttpRequest.LOADING, XMLHttpRequest.DONE])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 2\n\t\t\t\tif (_sync_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 3\n\t\t\t\t_p('responseType', value.toLowerCase());\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'responseText', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\t// 1\n\t\t\t\tif (!~o.inArray(_p('responseType'), ['', 'text'])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 2-3\n\t\t\t\tif (_p('readyState') !== XMLHttpRequest.DONE && _p('readyState') !== XMLHttpRequest.LOADING || _error_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\treturn _p('responseText');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'responseXML', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\t// 1\n\t\t\t\tif (!~o.inArray(_p('responseType'), ['', 'document'])) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\t// 2-3\n\t\t\t\tif (_p('readyState') !== XMLHttpRequest.DONE || _error_flag) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\treturn _p('responseXML');\n\t\t\t}\n\t\t});\n\n\t\to.defineProperty(this, 'response', {\n\t\t\tconfigurable: false,\n\n\t\t\tget: function() {\n\t\t\t\tif (!!~o.inArray(_p('responseType'), ['', 'text'])) {\n\t\t\t\t\tif (_p('readyState') !== XMLHttpRequest.DONE && _p('readyState') !== XMLHttpRequest.LOADING || _error_flag) {\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (_p('readyState') !== XMLHttpRequest.DONE || _error_flag) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn _p('response');\n\t\t\t}\n\t\t});\n\n\t\t*/\n\n\t\tfunction _p(prop, value) {\n\t\t\tif (!props.hasOwnProperty(prop)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (arguments.length === 1) { // get\n\t\t\t\treturn Env.can('define_property') ? props[prop] : self[prop];\n\t\t\t} else { // set\n\t\t\t\tif (Env.can('define_property')) {\n\t\t\t\t\tprops[prop] = value;\n\t\t\t\t} else {\n\t\t\t\t\tself[prop] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t/*\n\t\tfunction _toASCII(str, AllowUnassigned, UseSTD3ASCIIRules) {\n\t\t\t// TODO: http://tools.ietf.org/html/rfc3490#section-4.1\n\t\t\treturn str.toLowerCase();\n\t\t}\n\t\t*/\n\t\t\n\t\t\n\t\tfunction _doXHR(data) {\n\t\t\tvar self = this;\n\t\t\t\n\t\t\t_start_time = new Date().getTime();\n\n\t\t\t_xhr = new RuntimeTarget();\n\n\t\t\tfunction loadEnd() {\n\t\t\t\t_xhr.destroy();\n\t\t\t\t_xhr = null;\n\t\t\t\tself.dispatchEvent('loadend');\n\t\t\t\tself = null;\n\t\t\t}\n\n\t\t\tfunction exec(runtime) {\n\t\t\t\t_xhr.bind('LoadStart', function(e) {\n\t\t\t\t\t_p('readyState', XMLHttpRequest.LOADING);\n\t\t\t\t\tself.dispatchEvent('readystatechange');\n\n\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t\t\n\t\t\t\t\tif (_upload_events_flag) {\n\t\t\t\t\t\tself.upload.dispatchEvent(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_xhr.bind('Progress', function(e) {\n\t\t\t\t\tif (_p('readyState') !== XMLHttpRequest.LOADING) {\n\t\t\t\t\t\t_p('readyState', XMLHttpRequest.LOADING); // LoadStart unreliable (in Flash for example)\n\t\t\t\t\t\tself.dispatchEvent('readystatechange');\n\t\t\t\t\t}\n\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_xhr.bind('UploadProgress', function(e) {\n\t\t\t\t\tif (_upload_events_flag) {\n\t\t\t\t\t\tself.upload.dispatchEvent({\n\t\t\t\t\t\t\ttype: 'progress',\n\t\t\t\t\t\t\tlengthComputable: false,\n\t\t\t\t\t\t\ttotal: e.total,\n\t\t\t\t\t\t\tloaded: e.loaded\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_xhr.bind('Load', function(e) {\n\t\t\t\t\t_p('readyState', XMLHttpRequest.DONE);\n\t\t\t\t\t_p('status', Number(runtime.exec.call(_xhr, 'XMLHttpRequest', 'getStatus') || 0));\n\t\t\t\t\t_p('statusText', httpCode[_p('status')] || \"\");\n\t\t\t\t\t\n\t\t\t\t\t_p('response', runtime.exec.call(_xhr, 'XMLHttpRequest', 'getResponse', _p('responseType')));\n\n\t\t\t\t\tif (!!~Basic.inArray(_p('responseType'), ['text', ''])) {\n\t\t\t\t\t\t_p('responseText', _p('response'));\n\t\t\t\t\t} else if (_p('responseType') === 'document') {\n\t\t\t\t\t\t_p('responseXML', _p('response'));\n\t\t\t\t\t}\n\n\t\t\t\t\t_responseHeaders = runtime.exec.call(_xhr, 'XMLHttpRequest', 'getAllResponseHeaders');\n\n\t\t\t\t\tself.dispatchEvent('readystatechange');\n\t\t\t\t\t\n\t\t\t\t\tif (_p('status') > 0) { // status 0 usually means that server is unreachable\n\t\t\t\t\t\tif (_upload_events_flag) {\n\t\t\t\t\t\t\tself.upload.dispatchEvent(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_error_flag = true;\n\t\t\t\t\t\tself.dispatchEvent('error');\n\t\t\t\t\t}\n\t\t\t\t\tloadEnd();\n\t\t\t\t});\n\n\t\t\t\t_xhr.bind('Abort', function(e) {\n\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t\tloadEnd();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t_xhr.bind('Error', function(e) {\n\t\t\t\t\t_error_flag = true;\n\t\t\t\t\t_p('readyState', XMLHttpRequest.DONE);\n\t\t\t\t\tself.dispatchEvent('readystatechange');\n\t\t\t\t\t_upload_complete_flag = true;\n\t\t\t\t\tself.dispatchEvent(e);\n\t\t\t\t\tloadEnd();\n\t\t\t\t});\n\n\t\t\t\truntime.exec.call(_xhr, 'XMLHttpRequest', 'send', {\n\t\t\t\t\turl: _url,\n\t\t\t\t\tmethod: _method,\n\t\t\t\t\tasync: _async,\n\t\t\t\t\tuser: _user,\n\t\t\t\t\tpassword: _password,\n\t\t\t\t\theaders: _headers,\n\t\t\t\t\tmimeType: _mimeType,\n\t\t\t\t\tencoding: _encoding,\n\t\t\t\t\tresponseType: self.responseType,\n\t\t\t\t\twithCredentials: self.withCredentials,\n\t\t\t\t\toptions: _options\n\t\t\t\t}, data);\n\t\t\t}\n\n\t\t\t// clarify our requirements\n\t\t\tif (typeof(_options.required_caps) === 'string') {\n\t\t\t\t_options.required_caps = Runtime.parseCaps(_options.required_caps);\n\t\t\t}\n\n\t\t\t_options.required_caps = Basic.extend({}, _options.required_caps, {\n\t\t\t\treturn_response_type: self.responseType\n\t\t\t});\n\n\t\t\tif (data instanceof FormData) {\n\t\t\t\t_options.required_caps.send_multipart = true;\n\t\t\t}\n\n\t\t\tif (!_same_origin_flag) {\n\t\t\t\t_options.required_caps.do_cors = true;\n\t\t\t}\n\t\t\t\n\n\t\t\tif (_options.ruid) { // we do not need to wait if we can connect directly\n\t\t\t\texec(_xhr.connectRuntime(_options));\n\t\t\t} else {\n\t\t\t\t_xhr.bind('RuntimeInit', function(e, runtime) {\n\t\t\t\t\texec(runtime);\n\t\t\t\t});\n\t\t\t\t_xhr.bind('RuntimeError', function(e, err) {\n\t\t\t\t\tself.dispatchEvent('RuntimeError', err);\n\t\t\t\t});\n\t\t\t\t_xhr.connectRuntime(_options);\n\t\t\t}\n\t\t}\n\t\n\t\t\n\t\tfunction _reset() {\n\t\t\t_p('responseText', \"\");\n\t\t\t_p('responseXML', null);\n\t\t\t_p('response', null);\n\t\t\t_p('status', 0);\n\t\t\t_p('statusText', \"\");\n\t\t\t_start_time = _timeoutset_time = null;\n\t\t}\n\t}\n\n\tXMLHttpRequest.UNSENT = 0;\n\tXMLHttpRequest.OPENED = 1;\n\tXMLHttpRequest.HEADERS_RECEIVED = 2;\n\tXMLHttpRequest.LOADING = 3;\n\tXMLHttpRequest.DONE = 4;\n\t\n\tXMLHttpRequest.prototype = EventTarget.instance;\n\n\treturn XMLHttpRequest;\n});\n");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "205:25037");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "675:2007");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "2011:2079");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "2084:2137");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "2265:2355");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "2407:2434");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "2443:24806");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24810:24835");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24838:24863");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24866:24901");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24904:24930");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24933:24956");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24961:25008");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "25012:25033");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "2047:2076");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "2473:5573");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "5574:5574");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "5582:17252");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "20571:20893");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21071:24605");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24614:24803");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "7127:7135");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "7186:7271");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "7404:7545");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "7561:7730");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "7802:7930");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "7946:7975");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8108:8132");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8139:8182");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8247:8273");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8301:8419");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8426:8451");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8457:8490");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8511:8533");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8544:8711");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8797:8817");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8823:8841");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8847:8860");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8866:8883");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8900:8939");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8960:9014");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "9044:9082");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "7214:7265");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "7488:7539");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "7694:7724");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "7871:7924");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8354:8413");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "8646:8705");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "9645:10161");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "10183:10316");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "10332:10473");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "10750:10791");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "10868:10969");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "11147:11331");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "11337:11348");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "10252:10310");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "10416:10467");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "10951:10963");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "11177:11201");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "11293:11325");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "11616:11645");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "11978:12007");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12014:12114");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12121:12903");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12909:12920");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12097:12108");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12257:12743");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12750:12897");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12291:12315");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12323:12736");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12390:12419");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12428:12726");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12495:12524");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12550:12717");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "12806:12890");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "13260:13280");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "13299:13457");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "13473:13510");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "13517:13685");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "13692:13779");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "13797:13814");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "13820:13843");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "13393:13451");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "13604:13621");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "13628:13679");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "13652:13672");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "13722:13773");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "14338:14504");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "14524:14568");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "14574:14625");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "14658:14790");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "14835:15433");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15511:15667");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15708:15777");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15800:15819");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15834:15863");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15899:16226");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "16326:16349");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "14385:14413");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "14447:14460");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "14480:14498");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "14726:14784");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "14868:14893");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "14900:14951");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15026:15178");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15054:15079");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15087:15112");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15120:15171");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15254:15273");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15280:15318");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15396:15427");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15545:15661");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "15935:15952");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "16455:16473");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "16479:16497");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "16504:16978");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "16619:16656");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "16663:16681");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "16689:16877");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "16885:16913");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "16707:16790");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "16812:16870");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "16933:16972");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "17016:17133");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "17140:17156");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "17163:17241");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "17033:17109");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "17116:17127");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "17088:17102");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "17187:17210");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "17217:17235");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "20601:20651");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "20656:20889");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "20640:20646");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "20697:20757");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "20782:20884");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "20821:20840");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "20860:20878");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21098:21113");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21122:21156");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21162:21188");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21194:21307");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21313:23788");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23825:23951");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23957:24074");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24080:24165");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24171:24243");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24253:24601");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21219:21233");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21239:21250");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21256:21285");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21291:21302");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21342:21587");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21598:21872");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21883:22118");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22129:23096");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23103:23186");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23197:23429");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23436:23783");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21384:21424");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21431:21469");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21477:21498");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21511:21579");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21544:21572");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21639:21836");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21843:21864");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21696:21736");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21791:21829");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21930:22110");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "21963:22103");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22166:22203");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22210:22291");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22298:22344");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22357:22449");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22457:22656");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22664:22749");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22757:22795");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22808:23072");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23079:23088");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22521:22555");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22616:22649");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22891:22961");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22969:22990");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "22925:22953");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23012:23030");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23038:23065");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23141:23162");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23169:23178");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23235:23253");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23260:23297");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23304:23342");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23349:23377");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23384:23405");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23412:23421");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "23880:23946");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24116:24160");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24201:24238");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24331:24366");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24384:24458");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24464:24561");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24567:24596");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24437:24450");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24514:24553");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24637:24659");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24664:24687");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24692:24712");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24717:24732");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24737:24757");
__$coverInitRange("src/javascript/xhr/XMLHttpRequest.js", "24762:24799");
__$coverCall('src/javascript/xhr/XMLHttpRequest.js', '205:25037');
define('moxie/xhr/XMLHttpRequest', [
    'moxie/core/utils/Basic',
    'moxie/core/Exceptions',
    'moxie/core/EventTarget',
    'moxie/core/utils/Encode',
    'moxie/core/utils/Url',
    'moxie/runtime/Runtime',
    'moxie/runtime/RuntimeTarget',
    'moxie/file/Blob',
    'moxie/file/FileReaderSync',
    'moxie/xhr/FormData',
    'moxie/core/utils/Env',
    'moxie/core/utils/Mime'
], function (Basic, x, EventTarget, Encode, Url, Runtime, RuntimeTarget, Blob, FileReaderSync, FormData, Env, Mime) {
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '675:2007');
    var httpCode = {
            100: 'Continue',
            101: 'Switching Protocols',
            102: 'Processing',
            200: 'OK',
            201: 'Created',
            202: 'Accepted',
            203: 'Non-Authoritative Information',
            204: 'No Content',
            205: 'Reset Content',
            206: 'Partial Content',
            207: 'Multi-Status',
            226: 'IM Used',
            300: 'Multiple Choices',
            301: 'Moved Permanently',
            302: 'Found',
            303: 'See Other',
            304: 'Not Modified',
            305: 'Use Proxy',
            306: 'Reserved',
            307: 'Temporary Redirect',
            400: 'Bad Request',
            401: 'Unauthorized',
            402: 'Payment Required',
            403: 'Forbidden',
            404: 'Not Found',
            405: 'Method Not Allowed',
            406: 'Not Acceptable',
            407: 'Proxy Authentication Required',
            408: 'Request Timeout',
            409: 'Conflict',
            410: 'Gone',
            411: 'Length Required',
            412: 'Precondition Failed',
            413: 'Request Entity Too Large',
            414: 'Request-URI Too Long',
            415: 'Unsupported Media Type',
            416: 'Requested Range Not Satisfiable',
            417: 'Expectation Failed',
            422: 'Unprocessable Entity',
            423: 'Locked',
            424: 'Failed Dependency',
            426: 'Upgrade Required',
            500: 'Internal Server Error',
            501: 'Not Implemented',
            502: 'Bad Gateway',
            503: 'Service Unavailable',
            504: 'Gateway Timeout',
            505: 'HTTP Version Not Supported',
            506: 'Variant Also Negotiates',
            507: 'Insufficient Storage',
            510: 'Not Extended'
        };
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '2011:2079');
    function XMLHttpRequestUpload() {
        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '2047:2076');
        this.uid = Basic.guid('uid_');
    }
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '2084:2137');
    XMLHttpRequestUpload.prototype = EventTarget.instance;
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '2265:2355');
    var dispatches = [
            'loadstart',
            'progress',
            'abort',
            'error',
            'load',
            'timeout',
            'loadend'
        ];
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '2407:2434');
    var NATIVE = 1, RUNTIME = 2;
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '2443:24806');
    function XMLHttpRequest() {
        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '2473:5573');
        var self = this, props = {
                timeout: 0,
                readyState: XMLHttpRequest.UNSENT,
                withCredentials: false,
                status: 0,
                statusText: '',
                responseType: '',
                responseXML: null,
                responseText: null,
                response: null
            }, _async = true, _url, _method, _headers = {}, _user, _password, _encoding = null, _mimeType = null, _sync_flag = false, _send_flag = false, _upload_events_flag = false, _upload_complete_flag = false, _error_flag = false, _same_origin_flag = false, _start_time, _timeoutset_time, _finalMime = null, _finalCharset = null, _options = {}, _xhr, _responseHeaders = '', _responseHeadersBag;
        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '5574:5574');
        ;
        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '5582:17252');
        Basic.extend(this, props, {
            uid: Basic.guid('uid_'),
            upload: new XMLHttpRequestUpload(),
            open: function (method, url, async, user, password) {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '7127:7135');
                var urlp;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '7186:7271');
                if (!method || !url) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '7214:7265');
                    throw new x.DOMException(x.DOMException.SYNTAX_ERR);
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '7404:7545');
                if (/[\u0100-\uffff]/.test(method) || Encode.utf8_encode(method) !== method) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '7488:7539');
                    throw new x.DOMException(x.DOMException.SYNTAX_ERR);
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '7561:7730');
                if (!!~Basic.inArray(method.toUpperCase(), [
                        'CONNECT',
                        'DELETE',
                        'GET',
                        'HEAD',
                        'OPTIONS',
                        'POST',
                        'PUT',
                        'TRACE',
                        'TRACK'
                    ])) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '7694:7724');
                    _method = method.toUpperCase();
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '7802:7930');
                if (!!~Basic.inArray(_method, [
                        'CONNECT',
                        'TRACE',
                        'TRACK'
                    ])) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '7871:7924');
                    throw new x.DOMException(x.DOMException.SECURITY_ERR);
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '7946:7975');
                url = Encode.utf8_encode(url);
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8108:8132');
                urlp = Url.parseUrl(url);
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8139:8182');
                _same_origin_flag = Url.hasSameOrigin(urlp);
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8247:8273');
                _url = Url.resolveUrl(url);
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8301:8419');
                if ((user || password) && !_same_origin_flag) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8354:8413');
                    throw new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8426:8451');
                _user = user || urlp.user;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8457:8490');
                _password = password || urlp.pass;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8511:8533');
                _async = async || true;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8544:8711');
                if (_async === false && (_p('timeout') || _p('withCredentials') || _p('responseType') !== '')) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8646:8705');
                    throw new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8797:8817');
                _sync_flag = !_async;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8823:8841');
                _send_flag = false;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8847:8860');
                _headers = {};
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8866:8883');
                _reset.call(this);
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8900:8939');
                _p('readyState', XMLHttpRequest.OPENED);
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '8960:9014');
                this.convertEventPropsToHandlers(['readystatechange']);
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '9044:9082');
                this.dispatchEvent('readystatechange');
            },
            setRequestHeader: function (header, value) {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '9645:10161');
                var uaHeaders = [
                        'accept-charset',
                        'accept-encoding',
                        'access-control-request-headers',
                        'access-control-request-method',
                        'connection',
                        'content-length',
                        'cookie',
                        'cookie2',
                        'content-transfer-encoding',
                        'date',
                        'expect',
                        'host',
                        'keep-alive',
                        'origin',
                        'referer',
                        'te',
                        'trailer',
                        'transfer-encoding',
                        'upgrade',
                        'user-agent',
                        'via'
                    ];
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '10183:10316');
                if (_p('readyState') !== XMLHttpRequest.OPENED || _send_flag) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '10252:10310');
                    throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '10332:10473');
                if (/[\u0100-\uffff]/.test(header) || Encode.utf8_encode(header) !== header) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '10416:10467');
                    throw new x.DOMException(x.DOMException.SYNTAX_ERR);
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '10750:10791');
                header = Basic.trim(header).toLowerCase();
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '10868:10969');
                if (!!~Basic.inArray(header, uaHeaders) || /^(proxy\-|sec\-)/.test(header)) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '10951:10963');
                    return false;
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '11147:11331');
                if (!_headers[header]) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '11177:11201');
                    _headers[header] = value;
                } else {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '11293:11325');
                    _headers[header] += ', ' + value;
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '11337:11348');
                return true;
            },
            getAllResponseHeaders: function () {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '11616:11645');
                return _responseHeaders || '';
            },
            getResponseHeader: function (header) {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '11978:12007');
                header = header.toLowerCase();
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12014:12114');
                if (_error_flag || !!~Basic.inArray(header, [
                        'set-cookie',
                        'set-cookie2'
                    ])) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12097:12108');
                    return null;
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12121:12903');
                if (_responseHeaders && _responseHeaders !== '') {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12257:12743');
                    if (!_responseHeadersBag) {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12291:12315');
                        _responseHeadersBag = {};
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12323:12736');
                        Basic.each(_responseHeaders.split(/\r\n/), function (line) {
                            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12390:12419');
                            var pair = line.split(/:\s+/);
                            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12428:12726');
                            if (pair.length === 2) {
                                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12495:12524');
                                pair[0] = Basic.trim(pair[0]);
                                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12550:12717');
                                _responseHeadersBag[pair[0].toLowerCase()] = {
                                    header: pair[0],
                                    value: Basic.trim(pair[1])
                                };
                            }
                        });
                    }
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12750:12897');
                    if (_responseHeadersBag.hasOwnProperty(header)) {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12806:12890');
                        return _responseHeadersBag[header].header + ': ' + _responseHeadersBag[header].value;
                    }
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '12909:12920');
                return null;
            },
            overrideMimeType: function (mime) {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '13260:13280');
                var matches, charset;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '13299:13457');
                if (!!~Basic.inArray(_p('readyState'), [
                        XMLHttpRequest.LOADING,
                        XMLHttpRequest.DONE
                    ])) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '13393:13451');
                    throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '13473:13510');
                mime = Basic.trim(mime.toLowerCase());
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '13517:13685');
                if (/;/.test(mime) && (matches = mime.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '13604:13621');
                    mime = matches[1];
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '13628:13679');
                    if (matches[2]) {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '13652:13672');
                        charset = matches[2];
                    }
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '13692:13779');
                if (!Mime.mimes[mime]) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '13722:13773');
                    throw new x.DOMException(x.DOMException.SYNTAX_ERR);
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '13797:13814');
                _finalMime = mime;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '13820:13843');
                _finalCharset = charset;
            },
            send: function (data, options) {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '14338:14504');
                if (Basic.typeOf(options) === 'string') {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '14385:14413');
                    _options = { ruid: options };
                } else if (!options) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '14447:14460');
                    _options = {};
                } else {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '14480:14498');
                    _options = options;
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '14524:14568');
                this.convertEventPropsToHandlers(dispatches);
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '14574:14625');
                this.upload.convertEventPropsToHandlers(dispatches);
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '14658:14790');
                if (this.readyState !== XMLHttpRequest.OPENED || _send_flag) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '14726:14784');
                    throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '14835:15433');
                if (data instanceof Blob) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '14868:14893');
                    _options.ruid = data.ruid;
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '14900:14951');
                    _mimeType = data.type || 'application/octet-stream';
                } else if (data instanceof FormData) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15026:15178');
                    if (data.hasBlob()) {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15054:15079');
                        var blob = data.getBlob();
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15087:15112');
                        _options.ruid = blob.ruid;
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15120:15171');
                        _mimeType = blob.type || 'application/octet-stream';
                    }
                } else if (typeof data === 'string') {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15254:15273');
                    _encoding = 'UTF-8';
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15280:15318');
                    _mimeType = 'text/plain;charset=UTF-8';
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15396:15427');
                    data = Encode.utf8_encode(data);
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15511:15667');
                if (!this.withCredentials) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15545:15661');
                    this.withCredentials = _options.required_caps && _options.required_caps.send_browser_cookies && !_same_origin_flag;
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15708:15777');
                _upload_events_flag = !_sync_flag && this.upload.hasEventListener();
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15800:15819');
                _error_flag = false;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15834:15863');
                _upload_complete_flag = !data;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15899:16226');
                if (!_sync_flag) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '15935:15952');
                    _send_flag = true;
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '16326:16349');
                _doXHR.call(this, data);
            },
            abort: function () {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '16455:16473');
                _error_flag = true;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '16479:16497');
                _sync_flag = false;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '16504:16978');
                if (!~Basic.inArray(_p('readyState'), [
                        XMLHttpRequest.UNSENT,
                        XMLHttpRequest.OPENED,
                        XMLHttpRequest.DONE
                    ])) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '16619:16656');
                    _p('readyState', XMLHttpRequest.DONE);
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '16663:16681');
                    _send_flag = false;
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '16689:16877');
                    if (_xhr) {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '16707:16790');
                        _xhr.getRuntime().exec.call(_xhr, 'XMLHttpRequest', 'abort', _upload_complete_flag);
                    } else {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '16812:16870');
                        throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);
                    }
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '16885:16913');
                    _upload_complete_flag = true;
                } else {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '16933:16972');
                    _p('readyState', XMLHttpRequest.UNSENT);
                }
            },
            destroy: function () {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '17016:17133');
                if (_xhr) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '17033:17109');
                    if (Basic.typeOf(_xhr.destroy) === 'function') {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '17088:17102');
                        _xhr.destroy();
                    }
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '17116:17127');
                    _xhr = null;
                }
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '17140:17156');
                this.unbindAll();
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '17163:17241');
                if (this.upload) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '17187:17210');
                    this.upload.unbindAll();
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '17217:17235');
                    this.upload = null;
                }
            }
        });
        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '20571:20893');
        function _p(prop, value) {
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '20601:20651');
            if (!props.hasOwnProperty(prop)) {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '20640:20646');
                return;
            }
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '20656:20889');
            if (arguments.length === 1) {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '20697:20757');
                return Env.can('define_property') ? props[prop] : self[prop];
            } else {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '20782:20884');
                if (Env.can('define_property')) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '20821:20840');
                    props[prop] = value;
                } else {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '20860:20878');
                    self[prop] = value;
                }
            }
        }
        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21071:24605');
        function _doXHR(data) {
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21098:21113');
            var self = this;
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21122:21156');
            _start_time = new Date().getTime();
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21162:21188');
            _xhr = new RuntimeTarget();
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21194:21307');
            function loadEnd() {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21219:21233');
                _xhr.destroy();
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21239:21250');
                _xhr = null;
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21256:21285');
                self.dispatchEvent('loadend');
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21291:21302');
                self = null;
            }
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21313:23788');
            function exec(runtime) {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21342:21587');
                _xhr.bind('LoadStart', function (e) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21384:21424');
                    _p('readyState', XMLHttpRequest.LOADING);
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21431:21469');
                    self.dispatchEvent('readystatechange');
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21477:21498');
                    self.dispatchEvent(e);
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21511:21579');
                    if (_upload_events_flag) {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21544:21572');
                        self.upload.dispatchEvent(e);
                    }
                });
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21598:21872');
                _xhr.bind('Progress', function (e) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21639:21836');
                    if (_p('readyState') !== XMLHttpRequest.LOADING) {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21696:21736');
                        _p('readyState', XMLHttpRequest.LOADING);
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21791:21829');
                        self.dispatchEvent('readystatechange');
                    }
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21843:21864');
                    self.dispatchEvent(e);
                });
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21883:22118');
                _xhr.bind('UploadProgress', function (e) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21930:22110');
                    if (_upload_events_flag) {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '21963:22103');
                        self.upload.dispatchEvent({
                            type: 'progress',
                            lengthComputable: false,
                            total: e.total,
                            loaded: e.loaded
                        });
                    }
                });
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22129:23096');
                _xhr.bind('Load', function (e) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22166:22203');
                    _p('readyState', XMLHttpRequest.DONE);
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22210:22291');
                    _p('status', Number(runtime.exec.call(_xhr, 'XMLHttpRequest', 'getStatus') || 0));
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22298:22344');
                    _p('statusText', httpCode[_p('status')] || '');
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22357:22449');
                    _p('response', runtime.exec.call(_xhr, 'XMLHttpRequest', 'getResponse', _p('responseType')));
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22457:22656');
                    if (!!~Basic.inArray(_p('responseType'), [
                            'text',
                            ''
                        ])) {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22521:22555');
                        _p('responseText', _p('response'));
                    } else if (_p('responseType') === 'document') {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22616:22649');
                        _p('responseXML', _p('response'));
                    }
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22664:22749');
                    _responseHeaders = runtime.exec.call(_xhr, 'XMLHttpRequest', 'getAllResponseHeaders');
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22757:22795');
                    self.dispatchEvent('readystatechange');
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22808:23072');
                    if (_p('status') > 0) {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22891:22961');
                        if (_upload_events_flag) {
                            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22925:22953');
                            self.upload.dispatchEvent(e);
                        }
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '22969:22990');
                        self.dispatchEvent(e);
                    } else {
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23012:23030');
                        _error_flag = true;
                        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23038:23065');
                        self.dispatchEvent('error');
                    }
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23079:23088');
                    loadEnd();
                });
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23103:23186');
                _xhr.bind('Abort', function (e) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23141:23162');
                    self.dispatchEvent(e);
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23169:23178');
                    loadEnd();
                });
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23197:23429');
                _xhr.bind('Error', function (e) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23235:23253');
                    _error_flag = true;
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23260:23297');
                    _p('readyState', XMLHttpRequest.DONE);
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23304:23342');
                    self.dispatchEvent('readystatechange');
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23349:23377');
                    _upload_complete_flag = true;
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23384:23405');
                    self.dispatchEvent(e);
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23412:23421');
                    loadEnd();
                });
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23436:23783');
                runtime.exec.call(_xhr, 'XMLHttpRequest', 'send', {
                    url: _url,
                    method: _method,
                    async: _async,
                    user: _user,
                    password: _password,
                    headers: _headers,
                    mimeType: _mimeType,
                    encoding: _encoding,
                    responseType: self.responseType,
                    withCredentials: self.withCredentials,
                    options: _options
                }, data);
            }
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23825:23951');
            if (typeof _options.required_caps === 'string') {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23880:23946');
                _options.required_caps = Runtime.parseCaps(_options.required_caps);
            }
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '23957:24074');
            _options.required_caps = Basic.extend({}, _options.required_caps, { return_response_type: self.responseType });
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24080:24165');
            if (data instanceof FormData) {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24116:24160');
                _options.required_caps.send_multipart = true;
            }
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24171:24243');
            if (!_same_origin_flag) {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24201:24238');
                _options.required_caps.do_cors = true;
            }
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24253:24601');
            if (_options.ruid) {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24331:24366');
                exec(_xhr.connectRuntime(_options));
            } else {
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24384:24458');
                _xhr.bind('RuntimeInit', function (e, runtime) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24437:24450');
                    exec(runtime);
                });
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24464:24561');
                _xhr.bind('RuntimeError', function (e, err) {
                    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24514:24553');
                    self.dispatchEvent('RuntimeError', err);
                });
                __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24567:24596');
                _xhr.connectRuntime(_options);
            }
        }
        __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24614:24803');
        function _reset() {
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24637:24659');
            _p('responseText', '');
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24664:24687');
            _p('responseXML', null);
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24692:24712');
            _p('response', null);
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24717:24732');
            _p('status', 0);
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24737:24757');
            _p('statusText', '');
            __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24762:24799');
            _start_time = _timeoutset_time = null;
        }
    }
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24810:24835');
    XMLHttpRequest.UNSENT = 0;
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24838:24863');
    XMLHttpRequest.OPENED = 1;
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24866:24901');
    XMLHttpRequest.HEADERS_RECEIVED = 2;
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24904:24930');
    XMLHttpRequest.LOADING = 3;
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24933:24956');
    XMLHttpRequest.DONE = 4;
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '24961:25008');
    XMLHttpRequest.prototype = EventTarget.instance;
    __$coverCall('src/javascript/xhr/XMLHttpRequest.js', '25012:25033');
    return XMLHttpRequest;
});

// Included from: src/javascript/runtime/Transporter.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/Transporter.js", "/**\n * Transporter.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/runtime/Transporter\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Encode\",\n\t\"moxie/runtime/RuntimeClient\",\n\t\"moxie/core/EventTarget\"\n], function(Basic, Encode, RuntimeClient, EventTarget) {\n\tfunction Transporter() {\n\t\tvar mod, _runtime, _data, _size, _pos, _chunk_size;\n\n\t\tRuntimeClient.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\tstate: Transporter.IDLE,\n\n\t\t\tresult: null,\n\n\t\t\ttransport: function(data, type, options) {\n\t\t\t\tvar self = this;\n\n\t\t\t\toptions = Basic.extend({\n\t\t\t\t\tchunk_size: 204798\n\t\t\t\t}, options);\n\n\t\t\t\t// should divide by three, base64 requires this\n\t\t\t\tif ((mod = options.chunk_size % 3)) {\n\t\t\t\t\toptions.chunk_size += 3 - mod;\n\t\t\t\t}\n\n\t\t\t\t_chunk_size = options.chunk_size;\n\n\t\t\t\t_reset.call(this);\n\t\t\t\t_data = data;\n\t\t\t\t_size = data.length;\n\n\t\t\t\tif (Basic.typeOf(options) === 'string' || options.ruid) {\n\t\t\t\t\t_run.call(self, type, this.connectRuntime(options));\n\t\t\t\t} else {\n\t\t\t\t\t// we require this to run only once\n\t\t\t\t\tvar cb = function(e, runtime) {\n\t\t\t\t\t\tself.unbind(\"RuntimeInit\", cb);\n\t\t\t\t\t\t_run.call(self, type, runtime);\n\t\t\t\t\t};\n\t\t\t\t\tthis.bind(\"RuntimeInit\", cb);\n\t\t\t\t\tthis.connectRuntime(options);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tvar self = this;\n\n\t\t\t\tself.state = Transporter.IDLE;\n\t\t\t\tif (_runtime) {\n\t\t\t\t\t_runtime.exec.call(self, 'Transporter', 'clear');\n\t\t\t\t\tself.trigger(\"TransportingAborted\");\n\t\t\t\t}\n\n\t\t\t\t_reset.call(self);\n\t\t\t},\n\n\n\t\t\tdestroy: function() {\n\t\t\t\tthis.unbindAll();\n\t\t\t\t_runtime = null;\n\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t_reset.call(this);\n\t\t\t}\n\t\t});\n\n\t\tfunction _reset() {\n\t\t\t_size = _pos = 0;\n\t\t\t_data = this.result = null;\n\t\t}\n\n\t\tfunction _run(type, runtime) {\n\t\t\tvar self = this;\n\n\t\t\t_runtime = runtime;\n\n\t\t\t//self.unbind(\"RuntimeInit\");\n\n\t\t\tself.bind(\"TransportingProgress\", function(e) {\n\t\t\t\t_pos = e.loaded;\n\n\t\t\t\tif (_pos < _size && Basic.inArray(self.state, [Transporter.IDLE, Transporter.DONE]) === -1) {\n\t\t\t\t\t_transport.call(self);\n\t\t\t\t}\n\t\t\t}, 999);\n\n\t\t\tself.bind(\"TransportingComplete\", function() {\n\t\t\t\t_pos = _size;\n\t\t\t\tself.state = Transporter.DONE;\n\t\t\t\t_data = null; // clean a bit\n\t\t\t\tself.result = _runtime.exec.call(self, 'Transporter', 'getAsBlob', type || '');\n\t\t\t}, 999);\n\n\t\t\tself.state = Transporter.BUSY;\n\t\t\tself.trigger(\"TransportingStarted\");\n\t\t\t_transport.call(self);\n\t\t}\n\n\t\tfunction _transport() {\n\t\t\tvar self = this,\n\t\t\t\tchunk,\n\t\t\t\tbytesLeft = _size - _pos;\n\n\t\t\tif (_chunk_size > bytesLeft) {\n\t\t\t\t_chunk_size = bytesLeft;\n\t\t\t}\n\n\t\t\tchunk = Encode.btoa(_data.substr(_pos, _chunk_size));\n\t\t\t_runtime.exec.call(self, 'Transporter', 'receive', chunk, _size);\n\t\t}\n\t}\n\n\tTransporter.IDLE = 0;\n\tTransporter.BUSY = 1;\n\tTransporter.DONE = 2;\n\n\tTransporter.prototype = EventTarget.instance;\n\n\treturn Transporter;\n});");
__$coverInitRange("src/javascript/runtime/Transporter.js", "202:2926");
__$coverInitRange("src/javascript/runtime/Transporter.js", "411:2782");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2786:2806");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2809:2829");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2832:2852");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2856:2900");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2904:2922");
__$coverInitRange("src/javascript/runtime/Transporter.js", "438:488");
__$coverInitRange("src/javascript/runtime/Transporter.js", "493:517");
__$coverInitRange("src/javascript/runtime/Transporter.js", "522:1744");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1749:1823");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1828:2491");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2496:2779");
__$coverInitRange("src/javascript/runtime/Transporter.js", "669:684");
__$coverInitRange("src/javascript/runtime/Transporter.js", "691:755");
__$coverInitRange("src/javascript/runtime/Transporter.js", "814:892");
__$coverInitRange("src/javascript/runtime/Transporter.js", "899:931");
__$coverInitRange("src/javascript/runtime/Transporter.js", "938:955");
__$coverInitRange("src/javascript/runtime/Transporter.js", "961:973");
__$coverInitRange("src/javascript/runtime/Transporter.js", "979:998");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1005:1370");
__$coverInitRange("src/javascript/runtime/Transporter.js", "857:886");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1068:1119");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1180:1294");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1301:1329");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1336:1364");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1218:1248");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1256:1286");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1406:1421");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1428:1457");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1463:1580");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1587:1604");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1484:1532");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1539:1574");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1643:1659");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1665:1680");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1686:1710");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1716:1733");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1772:1788");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1793:1819");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1862:1877");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1883:1901");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1941:2153");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2159:2386");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2392:2421");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2426:2461");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2466:2487");
__$coverInitRange("src/javascript/runtime/Transporter.js", "1993:2008");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2015:2141");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2114:2135");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2210:2222");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2228:2257");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2263:2275");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2296:2374");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2523:2579");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2585:2648");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2654:2706");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2711:2775");
__$coverInitRange("src/javascript/runtime/Transporter.js", "2620:2643");
__$coverCall('src/javascript/runtime/Transporter.js', '202:2926');
define('moxie/runtime/Transporter', [
    'moxie/core/utils/Basic',
    'moxie/core/utils/Encode',
    'moxie/runtime/RuntimeClient',
    'moxie/core/EventTarget'
], function (Basic, Encode, RuntimeClient, EventTarget) {
    __$coverCall('src/javascript/runtime/Transporter.js', '411:2782');
    function Transporter() {
        __$coverCall('src/javascript/runtime/Transporter.js', '438:488');
        var mod, _runtime, _data, _size, _pos, _chunk_size;
        __$coverCall('src/javascript/runtime/Transporter.js', '493:517');
        RuntimeClient.call(this);
        __$coverCall('src/javascript/runtime/Transporter.js', '522:1744');
        Basic.extend(this, {
            uid: Basic.guid('uid_'),
            state: Transporter.IDLE,
            result: null,
            transport: function (data, type, options) {
                __$coverCall('src/javascript/runtime/Transporter.js', '669:684');
                var self = this;
                __$coverCall('src/javascript/runtime/Transporter.js', '691:755');
                options = Basic.extend({ chunk_size: 204798 }, options);
                __$coverCall('src/javascript/runtime/Transporter.js', '814:892');
                if (mod = options.chunk_size % 3) {
                    __$coverCall('src/javascript/runtime/Transporter.js', '857:886');
                    options.chunk_size += 3 - mod;
                }
                __$coverCall('src/javascript/runtime/Transporter.js', '899:931');
                _chunk_size = options.chunk_size;
                __$coverCall('src/javascript/runtime/Transporter.js', '938:955');
                _reset.call(this);
                __$coverCall('src/javascript/runtime/Transporter.js', '961:973');
                _data = data;
                __$coverCall('src/javascript/runtime/Transporter.js', '979:998');
                _size = data.length;
                __$coverCall('src/javascript/runtime/Transporter.js', '1005:1370');
                if (Basic.typeOf(options) === 'string' || options.ruid) {
                    __$coverCall('src/javascript/runtime/Transporter.js', '1068:1119');
                    _run.call(self, type, this.connectRuntime(options));
                } else {
                    __$coverCall('src/javascript/runtime/Transporter.js', '1180:1294');
                    var cb = function (e, runtime) {
                        __$coverCall('src/javascript/runtime/Transporter.js', '1218:1248');
                        self.unbind('RuntimeInit', cb);
                        __$coverCall('src/javascript/runtime/Transporter.js', '1256:1286');
                        _run.call(self, type, runtime);
                    };
                    __$coverCall('src/javascript/runtime/Transporter.js', '1301:1329');
                    this.bind('RuntimeInit', cb);
                    __$coverCall('src/javascript/runtime/Transporter.js', '1336:1364');
                    this.connectRuntime(options);
                }
            },
            abort: function () {
                __$coverCall('src/javascript/runtime/Transporter.js', '1406:1421');
                var self = this;
                __$coverCall('src/javascript/runtime/Transporter.js', '1428:1457');
                self.state = Transporter.IDLE;
                __$coverCall('src/javascript/runtime/Transporter.js', '1463:1580');
                if (_runtime) {
                    __$coverCall('src/javascript/runtime/Transporter.js', '1484:1532');
                    _runtime.exec.call(self, 'Transporter', 'clear');
                    __$coverCall('src/javascript/runtime/Transporter.js', '1539:1574');
                    self.trigger('TransportingAborted');
                }
                __$coverCall('src/javascript/runtime/Transporter.js', '1587:1604');
                _reset.call(self);
            },
            destroy: function () {
                __$coverCall('src/javascript/runtime/Transporter.js', '1643:1659');
                this.unbindAll();
                __$coverCall('src/javascript/runtime/Transporter.js', '1665:1680');
                _runtime = null;
                __$coverCall('src/javascript/runtime/Transporter.js', '1686:1710');
                this.disconnectRuntime();
                __$coverCall('src/javascript/runtime/Transporter.js', '1716:1733');
                _reset.call(this);
            }
        });
        __$coverCall('src/javascript/runtime/Transporter.js', '1749:1823');
        function _reset() {
            __$coverCall('src/javascript/runtime/Transporter.js', '1772:1788');
            _size = _pos = 0;
            __$coverCall('src/javascript/runtime/Transporter.js', '1793:1819');
            _data = this.result = null;
        }
        __$coverCall('src/javascript/runtime/Transporter.js', '1828:2491');
        function _run(type, runtime) {
            __$coverCall('src/javascript/runtime/Transporter.js', '1862:1877');
            var self = this;
            __$coverCall('src/javascript/runtime/Transporter.js', '1883:1901');
            _runtime = runtime;
            __$coverCall('src/javascript/runtime/Transporter.js', '1941:2153');
            self.bind('TransportingProgress', function (e) {
                __$coverCall('src/javascript/runtime/Transporter.js', '1993:2008');
                _pos = e.loaded;
                __$coverCall('src/javascript/runtime/Transporter.js', '2015:2141');
                if (_pos < _size && Basic.inArray(self.state, [
                        Transporter.IDLE,
                        Transporter.DONE
                    ]) === -1) {
                    __$coverCall('src/javascript/runtime/Transporter.js', '2114:2135');
                    _transport.call(self);
                }
            }, 999);
            __$coverCall('src/javascript/runtime/Transporter.js', '2159:2386');
            self.bind('TransportingComplete', function () {
                __$coverCall('src/javascript/runtime/Transporter.js', '2210:2222');
                _pos = _size;
                __$coverCall('src/javascript/runtime/Transporter.js', '2228:2257');
                self.state = Transporter.DONE;
                __$coverCall('src/javascript/runtime/Transporter.js', '2263:2275');
                _data = null;
                __$coverCall('src/javascript/runtime/Transporter.js', '2296:2374');
                self.result = _runtime.exec.call(self, 'Transporter', 'getAsBlob', type || '');
            }, 999);
            __$coverCall('src/javascript/runtime/Transporter.js', '2392:2421');
            self.state = Transporter.BUSY;
            __$coverCall('src/javascript/runtime/Transporter.js', '2426:2461');
            self.trigger('TransportingStarted');
            __$coverCall('src/javascript/runtime/Transporter.js', '2466:2487');
            _transport.call(self);
        }
        __$coverCall('src/javascript/runtime/Transporter.js', '2496:2779');
        function _transport() {
            __$coverCall('src/javascript/runtime/Transporter.js', '2523:2579');
            var self = this, chunk, bytesLeft = _size - _pos;
            __$coverCall('src/javascript/runtime/Transporter.js', '2585:2648');
            if (_chunk_size > bytesLeft) {
                __$coverCall('src/javascript/runtime/Transporter.js', '2620:2643');
                _chunk_size = bytesLeft;
            }
            __$coverCall('src/javascript/runtime/Transporter.js', '2654:2706');
            chunk = Encode.btoa(_data.substr(_pos, _chunk_size));
            __$coverCall('src/javascript/runtime/Transporter.js', '2711:2775');
            _runtime.exec.call(self, 'Transporter', 'receive', chunk, _size);
        }
    }
    __$coverCall('src/javascript/runtime/Transporter.js', '2786:2806');
    Transporter.IDLE = 0;
    __$coverCall('src/javascript/runtime/Transporter.js', '2809:2829');
    Transporter.BUSY = 1;
    __$coverCall('src/javascript/runtime/Transporter.js', '2832:2852');
    Transporter.DONE = 2;
    __$coverCall('src/javascript/runtime/Transporter.js', '2856:2900');
    Transporter.prototype = EventTarget.instance;
    __$coverCall('src/javascript/runtime/Transporter.js', '2904:2922');
    return Transporter;
});

// Included from: src/javascript/image/Image.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/image/Image.js", "/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine(\"moxie/image/Image\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/file/FileReaderSync\",\n\t\"moxie/xhr/XMLHttpRequest\",\n\t\"moxie/runtime/Runtime\",\n\t\"moxie/runtime/RuntimeClient\",\n\t\"moxie/runtime/Transporter\",\n\t\"moxie/core/utils/Env\",\n\t\"moxie/core/EventTarget\",\n\t\"moxie/file/Blob\",\n\t\"moxie/file/File\",\n\t\"moxie/core/utils/Encode\"\n], function(Basic, Dom, x, FileReaderSync, XMLHttpRequest, Runtime, RuntimeClient, Transporter, Env, EventTarget, Blob, File, Encode) {\n\t/**\n\tImage preloading and manipulation utility. Additionally it provides access to image meta info (Exif, GPS) and raw binary data.\n\n\t@class Image\n\t@constructor\n\t@extends EventTarget\n\t*/\n\tvar dispatches = [\n\t\t'progress',\n\n\t\t/**\n\t\tDispatched when loading is complete.\n\n\t\t@event load\n\t\t@param {Object} event\n\t\t*/\n\t\t'load',\n\n\t\t'error',\n\n\t\t/**\n\t\tDispatched when resize operation is complete.\n\t\t\n\t\t@event resize\n\t\t@param {Object} event\n\t\t*/\n\t\t'resize',\n\n\t\t/**\n\t\tDispatched when visual representation of the image is successfully embedded\n\t\tinto the corresponsing container.\n\n\t\t@event embedded\n\t\t@param {Object} event\n\t\t*/\n\t\t'embedded'\n\t];\n\n\tfunction Image() {\n\t\tRuntimeClient.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tUnique id of the component\n\n\t\t\t@property uid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\tuid: Basic.guid('uid_'),\n\n\t\t\t/**\n\t\t\tUnique id of the connected runtime, if any.\n\n\t\t\t@property ruid\n\t\t\t@type {String}\n\t\t\t*/\n\t\t\truid: null,\n\n\t\t\t/**\n\t\t\tName of the file, that was used to create an image, if available. If not equals to empty string.\n\n\t\t\t@property name\n\t\t\t@type {String}\n\t\t\t@default \"\"\n\t\t\t*/\n\t\t\tname: \"\",\n\n\t\t\t/**\n\t\t\tSize of the image in bytes. Actual value is set only after image is preloaded.\n\n\t\t\t@property size\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\tsize: 0,\n\n\t\t\t/**\n\t\t\tWidth of the image. Actual value is set only after image is preloaded.\n\n\t\t\t@property width\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\twidth: 0,\n\n\t\t\t/**\n\t\t\tHeight of the image. Actual value is set only after image is preloaded.\n\n\t\t\t@property height\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\theight: 0,\n\n\t\t\t/**\n\t\t\tMime type of the image. Currently only image/jpeg and image/png are supported. Actual value is set only after image is preloaded.\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t@default \"\"\n\t\t\t*/\n\t\t\ttype: \"\",\n\n\t\t\t/**\n\t\t\tHolds meta info (Exif, GPS). Is populated only for image/jpeg. Actual value is set only after image is preloaded.\n\n\t\t\t@property meta\n\t\t\t@type {Object}\n\t\t\t@default {}\n\t\t\t*/\n\t\t\tmeta: {},\n\n\t\t\t/**\n\t\t\tAlias for load method, that takes another mOxie.Image object as a source (see load).\n\n\t\t\t@method clone\n\t\t\t@param {Image} src Source for the image\n\t\t\t@param {Boolean} [exact=false] Whether to activate in-depth clone mode\n\t\t\t*/\n\t\t\tclone: function() {\n\t\t\t\tthis.load.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tLoads image from various sources. Currently the source for new image can be: mOxie.Image, mOxie.Blob/mOxie.File, \n\t\t\tnative Blob/File, dataUrl or URL. Depending on the type of the source, arguments - differ. When source is URL, \n\t\t\tImage will be downloaded from remote destination and loaded in memory.\n\n\t\t\t@example\n\t\t\t\tvar img = new mOxie.Image();\n\t\t\t\timg.onload = function() {\n\t\t\t\t\tvar blob = img.getAsBlob();\n\t\t\t\t\t\n\t\t\t\t\tvar formData = new mOxie.FormData();\n\t\t\t\t\tformData.append('file', blob);\n\n\t\t\t\t\tvar xhr = new mOxie.XMLHttpRequest();\n\t\t\t\t\txhr.onload = function() {\n\t\t\t\t\t\t// upload complete\n\t\t\t\t\t};\n\t\t\t\t\txhr.open('post', 'upload.php');\n\t\t\t\t\txhr.send(formData);\n\t\t\t\t};\n\t\t\t\timg.load(\"http://www.moxiecode.com/images/mox-logo.jpg\"); // notice file extension (.jpg)\n\t\t\t\n\n\t\t\t@method load\n\t\t\t@param {Image|Blob|File|String} src Source for the image\n\t\t\t@param {Boolean|Object} [mixed]\n\t\t\t*/\n\t\t\tload: function() {\n\t\t\t\t// this is here because to bind properly we need an uid first, which is created above\n\t\t\t\tthis.bind('Load Resize', function() {\n\t\t\t\t\t_updateInfo.call(this);\n\t\t\t\t}, 999);\n\n\t\t\t\tthis.convertEventPropsToHandlers(dispatches);\n\n\t\t\t\t_load.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDownsizes the image to fit the specified width/height. If crop is supplied, image will be cropped to exact dimensions.\n\n\t\t\t@method downsize\n\t\t\t@param {Number} width Resulting width\n\t\t\t@param {Number} [height=width] Resulting height (optional, if not supplied will default to width)\n\t\t\t@param {Boolean} [crop=false] Whether to crop the image to exact dimensions\n\t\t\t@param {Boolean} [preserveHeaders=true] Whether to preserve meta headers (on JPEGs after resize)\n\t\t\t*/\n\t\t\tdownsize: function(width, height, crop, preserveHeaders) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!this.size) { // only preloaded image objects can be used as source\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\t// no way to reliably intercept the crash due to high resolution, so we simply avoid it\n\t\t\t\t\tif (this.width > Image.MAX_RESIZE_WIDTH || this.height > Image.MAX_RESIZE_HEIGHT) {\n\t\t\t\t\t\tthrow new x.ImageError(x.ImageError.MAX_RESOLUTION_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!width && !height || Basic.typeOf(crop) === 'undefined') {\n\t\t\t\t\t\tcrop = false;\n\t\t\t\t\t}\n\n\t\t\t\t\twidth = width || this.width;\n\t\t\t\t\theight = height || this.height;\n\n\t\t\t\t\tpreserveHeaders = (Basic.typeOf(preserveHeaders) === 'undefined' ? true : !!preserveHeaders);\n\n\t\t\t\t\tthis.getRuntime().exec.call(this, 'Image', 'downsize', width, height, crop, preserveHeaders);\n\t\t\t\t} catch(ex) {\n\t\t\t\t\t// for now simply trigger error event\n\t\t\t\t\tthis.trigger('error', ex);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tAlias for downsize(width, height, true). (see downsize)\n\t\t\t\n\t\t\t@method crop\n\t\t\t@param {Number} width Resulting width\n\t\t\t@param {Number} [height=width] Resulting height (optional, if not supplied will default to width)\n\t\t\t@param {Boolean} [preserveHeaders=true] Whether to preserve meta headers (on JPEGs after resize)\n\t\t\t*/\n\t\t\tcrop: function(width, height, preserveHeaders) {\n\t\t\t\tthis.downsize(width, height, true, preserveHeaders);\n\t\t\t},\n\n\t\t\tgetAsCanvas: function() {\n\t\t\t\tif (!Env.can('create_canvas')) {\n\t\t\t\t\tthrow new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);\n\t\t\t\t}\n\n\t\t\t\tvar runtime = this.connectRuntime(this.ruid);\n\t\t\t\treturn runtime.exec.call(this, 'Image', 'getAsCanvas');\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves image in it's current state as mOxie.Blob object. Cannot be run on empty or image in progress (throws\n\t\t\tDOMException.INVALID_STATE_ERR).\n\n\t\t\t@method getAsBlob\n\t\t\t@param {String} [type=\"image/jpeg\"] Mime type of resulting blob. Can either be image/jpeg or image/png\n\t\t\t@param {Number} [quality=90] Applicable only together with mime type image/jpeg\n\t\t\t@return {Blob} Image as Blob\n\t\t\t*/\n\t\t\tgetAsBlob: function(type, quality) {\n\t\t\t\tif (!this.size) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\n\t\t\t\tif (!type) {\n\t\t\t\t\ttype = 'image/jpeg';\n\t\t\t\t}\n\n\t\t\t\tif (type === 'image/jpeg' && !quality) {\n\t\t\t\t\tquality = 90;\n\t\t\t\t}\n\n\t\t\t\treturn this.getRuntime().exec.call(this, 'Image', 'getAsBlob', type, quality);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves image in it's current state as dataURL string. Cannot be run on empty or image in progress (throws\n\t\t\tDOMException.INVALID_STATE_ERR).\n\n\t\t\t@method getAsDataURL\n\t\t\t@param {String} [type=\"image/jpeg\"] Mime type of resulting blob. Can either be image/jpeg or image/png\n\t\t\t@param {Number} [quality=90] Applicable only together with mime type image/jpeg\n\t\t\t@return {String} Image as dataURL string\n\t\t\t*/\n\t\t\tgetAsDataURL: function(type, quality) {\n\t\t\t\tif (!this.size) {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t}\n\t\t\t\treturn this.getRuntime().exec.call(this, 'Image', 'getAsDataURL', type, quality);\n\t\t\t},\n\n\t\t\t/**\n\t\t\tRetrieves image in it's current state as binary string. Cannot be run on empty or image in progress (throws\n\t\t\tDOMException.INVALID_STATE_ERR).\n\n\t\t\t@method getAsBinaryString\n\t\t\t@param {String} [type=\"image/jpeg\"] Mime type of resulting blob. Can either be image/jpeg or image/png\n\t\t\t@param {Number} [quality=90] Applicable only together with mime type image/jpeg\n\t\t\t@return {String} Image as binary string\n\t\t\t*/\n\t\t\tgetAsBinaryString: function(type, quality) {\n\t\t\t\tvar dataUrl = this.getAsDataURL(type, quality);\n\t\t\t\treturn Encode.atob(dataUrl.substring(dataUrl.indexOf('base64,') + 7));\n\t\t\t},\n\n\t\t\t/**\n\t\t\tEmbeds the image, or better to say, it's visual representation into the specified node. Depending on the runtime\n\t\t\tin use, might be a canvas, or image (actual ) element or shim object (Flash or SilverLight - very rare, used for\n\t\t\tlegacy browsers that do not have canvas or proper dataURI support).\n\n\t\t\t@method embed\n\t\t\t@param {DOMElement} el DOM element to insert the image object into\n\t\t\t@param {Object} options Set of key/value pairs controlling the mime type, dimensions and cropping factor of resulting\n\t\t\trepresentation\n\t\t\t*/\n\t\t\tembed: function(el) {\n\t\t\t\tvar self = this\n\t\t\t\t, imgCopy\n\t\t\t\t, type, quality, crop\n\t\t\t\t, options = arguments[1] || {}\n\t\t\t\t, width = this.width\n\t\t\t\t, height = this.height\n\t\t\t\t, runtime // this has to be outside of all the closures to contain proper runtime\n\t\t\t\t;\n\n\t\t\t\tfunction onResize() {\n\t\t\t\t\t// if possible, embed a canvas element directly\n\t\t\t\t\tif (Env.can('create_canvas')) {\n\t\t\t\t\t\tvar canvas = imgCopy.getAsCanvas();\n\t\t\t\t\t\tif (canvas) {\n\t\t\t\t\t\t\tel.appendChild(canvas);\n\t\t\t\t\t\t\tcanvas = null;\n\t\t\t\t\t\t\timgCopy.destroy();\n\t\t\t\t\t\t\tself.trigger('embedded');\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar dataUrl = imgCopy.getAsDataURL(type, quality);\n\t\t\t\t\tif (!dataUrl) {\n\t\t\t\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Env.can('use_data_uri_of', dataUrl.length)) {\n\t\t\t\t\t\tel.innerHTML = '<img src=\"' + dataUrl + '\" width=\"' + imgCopy.width + '\" height=\"' + imgCopy.height + '\" />';\n\t\t\t\t\t\timgCopy.destroy();\n\t\t\t\t\t\tself.trigger('embedded');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar tr = new Transporter();\n\n\t\t\t\t\t\ttr.bind(\"TransportingComplete\", function() {\n\t\t\t\t\t\t\truntime = self.connectRuntime(this.result.ruid);\n\n\t\t\t\t\t\t\tself.bind(\"Embedded\", function() {\n\t\t\t\t\t\t\t\t// position and size properly\n\t\t\t\t\t\t\t\tBasic.extend(runtime.getShimContainer().style, {\n\t\t\t\t\t\t\t\t\t//position: 'relative',\n\t\t\t\t\t\t\t\t\ttop: '0px',\n\t\t\t\t\t\t\t\t\tleft: '0px',\n\t\t\t\t\t\t\t\t\twidth: imgCopy.width + 'px',\n\t\t\t\t\t\t\t\t\theight: imgCopy.height + 'px'\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t// some shims (Flash/SilverLight) reinitialize, if parent element is hidden, reordered or it's\n\t\t\t\t\t\t\t\t// position type changes (in Gecko), but since we basically need this only in IEs 6/7 and\n\t\t\t\t\t\t\t\t// sometimes 8 and they do not have this problem, we can comment this for now\n\t\t\t\t\t\t\t\t/*tr.bind(\"RuntimeInit\", function(e, runtime) {\n\t\t\t\t\t\t\t\t\ttr.destroy();\n\t\t\t\t\t\t\t\t\truntime.destroy();\n\t\t\t\t\t\t\t\t\tonResize.call(self); // re-feed our image data\n\t\t\t\t\t\t\t\t});*/\n\n\t\t\t\t\t\t\t\truntime = null;\n\t\t\t\t\t\t\t}, 999);\n\n\t\t\t\t\t\t\truntime.exec.call(self, \"ImageView\", \"display\", this.result.uid, width, height);\n\t\t\t\t\t\t\timgCopy.destroy();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\ttr.transport(Encode.atob(dataUrl.substring(dataUrl.indexOf('base64,') + 7)), type, Basic.extend({}, options, {\n\t\t\t\t\t\t\trequired_caps: {\n\t\t\t\t\t\t\t\tdisplay_media: true\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\truntime_order: 'flash,silverlight',\n\t\t\t\t\t\t\tcontainer: el\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tif (!(el = Dom.get(el))) {\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_NODE_TYPE_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.size) { // only preloaded image objects can be used as source\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.width > Image.MAX_RESIZE_WIDTH || this.height > Image.MAX_RESIZE_HEIGHT) {\n\t\t\t\t\t\tthrow new x.ImageError(x.ImageError.MAX_RESOLUTION_ERR);\n\t\t\t\t\t}\n\n\t\t\t\t\ttype = options.type || this.type || 'image/jpeg';\n\t\t\t\t\tquality = options.quality || 90;\n\t\t\t\t\tcrop = Basic.typeOf(options.crop) !== 'undefined' ? options.crop : false;\n\n\t\t\t\t\t// figure out dimensions for the thumb\n\t\t\t\t\tif (options.width) {\n\t\t\t\t\t\twidth = options.width;\n\t\t\t\t\t\theight = options.height || width;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// if container element has > 0 dimensions, take them\n\t\t\t\t\t\tvar dimensions = Dom.getSize(el);\n\t\t\t\t\t\tif (dimensions.w && dimensions.h) { // both should be > 0\n\t\t\t\t\t\t\twidth = dimensions.w;\n\t\t\t\t\t\t\theight = dimensions.h;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\timgCopy = new Image();\n\n\t\t\t\t\timgCopy.bind(\"Resize\", function() {\n\t\t\t\t\t\tonResize.call(self);\n\t\t\t\t\t});\n\n\t\t\t\t\timgCopy.bind(\"Load\", function() {\n\t\t\t\t\t\timgCopy.downsize(width, height, crop, false);\n\t\t\t\t\t});\n\n\t\t\t\t\timgCopy.clone(this, false);\n\n\t\t\t\t\treturn imgCopy;\n\t\t\t\t} catch(ex) {\n\t\t\t\t\t// for now simply trigger error event\n\t\t\t\t\tthis.trigger('error', ex);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\tProperly destroys the image and frees resources in use. If any. Recommended way to dispose mOxie.Image object.\n\n\t\t\t@method destroy\n\t\t\t*/\n\t\t\tdestroy: function() {\n\t\t\t\tif (this.ruid) {\n\t\t\t\t\tthis.getRuntime().exec.call(this, 'Image', 'destroy');\n\t\t\t\t\tthis.disconnectRuntime();\n\t\t\t\t}\n\t\t\t\tthis.unbindAll();\n\t\t\t}\n\t\t});\n\n\n\t\tfunction _updateInfo(info) {\n\t\t\tif (!info) {\n\t\t\t\tinfo = this.getRuntime().exec.call(this, 'Image', 'getInfo');\n\t\t\t}\n\n\t\t\tthis.size = info.size;\n\t\t\tthis.width = info.width;\n\t\t\tthis.height = info.height;\n\t\t\tthis.type = info.type;\n\t\t\tthis.meta = info.meta;\n\n\t\t\t// update file name, only if empty\n\t\t\tif (this.name === '') {\n\t\t\t\tthis.name = info.name;\n\t\t\t}\n\t\t}\n\t\t\n\n\t\tfunction _load(src) {\n\t\t\tvar srcType = Basic.typeOf(src);\n\n\t\t\ttry {\n\t\t\t\t// if source is Image\n\t\t\t\tif (src instanceof Image) {\n\t\t\t\t\tif (!src.size) { // only preloaded image objects can be used as source\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.INVALID_STATE_ERR);\n\t\t\t\t\t}\n\t\t\t\t\t_loadFromImage.apply(this, arguments);\n\t\t\t\t}\n\t\t\t\t// if source is o.Blob/o.File\n\t\t\t\telse if (src instanceof Blob) {\n\t\t\t\t\tif (!~Basic.inArray(src.type, ['image/jpeg', 'image/png'])) {\n\t\t\t\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t\t\t\t}\n\t\t\t\t\t_loadFromBlob.apply(this, arguments);\n\t\t\t\t}\n\t\t\t\t// if native blob/file\n\t\t\t\telse if (Basic.inArray(srcType, ['blob', 'file']) !== -1) {\n\t\t\t\t\t_load.call(this, new File(null, src), arguments[1]);\n\t\t\t\t}\n\t\t\t\t// if String\n\t\t\t\telse if (srcType === 'string') {\n\t\t\t\t\t// if dataUrl String\n\t\t\t\t\tif (/^data:[^;]*;base64,/.test(src)) {\n\t\t\t\t\t\t_load.call(this, new Blob(null, { data: src }), arguments[1]);\n\t\t\t\t\t}\n\t\t\t\t\t// else assume Url, either relative or absolute\n\t\t\t\t\telse {\n\t\t\t\t\t\t_loadFromUrl.apply(this, arguments);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// if source seems to be an img node\n\t\t\t\telse if (srcType === 'node' && src.nodeName.toLowerCase() === 'img') {\n\t\t\t\t\t_load.call(this, src.src, arguments[1]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new x.DOMException(x.DOMException.TYPE_MISMATCH_ERR);\n\t\t\t\t}\n\t\t\t} catch(ex) {\n\t\t\t\t// for now simply trigger error event\n\t\t\t\tthis.trigger('error', ex);\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _loadFromImage(img, exact) {\n\t\t\tvar runtime = this.connectRuntime(img.ruid);\n\t\t\tthis.ruid = runtime.uid;\n\t\t\truntime.exec.call(this, 'Image', 'loadFromImage', img, (Basic.typeOf(exact) === 'undefined' ? true : exact));\n\t\t}\n\n\n\t\tfunction _loadFromBlob(blob, options) {\n\t\t\tvar self = this;\n\n\t\t\tself.name = blob.name || '';\n\n\t\t\tfunction exec(runtime) {\n\t\t\t\tself.ruid = runtime.uid;\n\t\t\t\truntime.exec.call(self, 'Image', 'loadFromBlob', blob);\n\t\t\t}\n\n\t\t\tif (blob.isDetached()) {\n\t\t\t\tthis.bind('RuntimeInit', function(e, runtime) {\n\t\t\t\t\texec(runtime);\n\t\t\t\t});\n\n\t\t\t\t// convert to object representation\n\t\t\t\tif (options && typeof(options.required_caps) === 'string') {\n\t\t\t\t\toptions.required_caps = Runtime.parseCaps(options.required_caps);\n\t\t\t\t}\n\n\t\t\t\tthis.connectRuntime(Basic.extend({\n\t\t\t\t\trequired_caps: {\n\t\t\t\t\t\taccess_image_binary: true,\n\t\t\t\t\t\tresize_image: true\n\t\t\t\t\t}\n\t\t\t\t}, options));\n\t\t\t} else {\n\t\t\t\texec(this.connectRuntime(blob.ruid));\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _loadFromUrl(url, options) {\n\t\t\tvar self = this, xhr;\n\n\t\t\txhr = new XMLHttpRequest();\n\n\t\t\txhr.open('get', url);\n\t\t\txhr.responseType = 'blob';\n\n\t\t\txhr.onprogress = function(e) {\n\t\t\t\tself.trigger(e);\n\t\t\t};\n\n\t\t\txhr.onload = function() {\n\t\t\t\t_loadFromBlob.call(self, xhr.response, true);\n\t\t\t};\n\n\t\t\txhr.onerror = function(e) {\n\t\t\t\tself.trigger(e);\n\t\t\t};\n\n\t\t\txhr.onloadend = function() {\n\t\t\t\txhr.destroy();\n\t\t\t};\n\n\t\t\txhr.bind('RuntimeError', function(e, err) {\n\t\t\t\tself.trigger('RuntimeError', err);\n\t\t\t});\n\n\t\t\txhr.send(null, options);\n\t\t}\n\t}\n\n\t// virtual world will crash on you if image has a resolution higher than this:\n\tImage.MAX_RESIZE_WIDTH = 6500;\n\tImage.MAX_RESIZE_HEIGHT = 6500; \n\n\tImage.prototype = EventTarget.instance;\n\n\treturn Image;\n});\n");
__$coverInitRange("src/javascript/image/Image.js", "196:16340");
__$coverInitRange("src/javascript/image/Image.js", "895:1339");
__$coverInitRange("src/javascript/image/Image.js", "1343:16131");
__$coverInitRange("src/javascript/image/Image.js", "16215:16244");
__$coverInitRange("src/javascript/image/Image.js", "16247:16277");
__$coverInitRange("src/javascript/image/Image.js", "16282:16320");
__$coverInitRange("src/javascript/image/Image.js", "16324:16336");
__$coverInitRange("src/javascript/image/Image.js", "1364:1388");
__$coverInitRange("src/javascript/image/Image.js", "1393:12861");
__$coverInitRange("src/javascript/image/Image.js", "12867:13220");
__$coverInitRange("src/javascript/image/Image.js", "13228:14626");
__$coverInitRange("src/javascript/image/Image.js", "14632:14861");
__$coverInitRange("src/javascript/image/Image.js", "14867:15581");
__$coverInitRange("src/javascript/image/Image.js", "15587:16128");
__$coverInitRange("src/javascript/image/Image.js", "2953:2985");
__$coverInitRange("src/javascript/image/Image.js", "4009:4087");
__$coverInitRange("src/javascript/image/Image.js", "4094:4138");
__$coverInitRange("src/javascript/image/Image.js", "4145:4173");
__$coverInitRange("src/javascript/image/Image.js", "4052:4074");
__$coverInitRange("src/javascript/image/Image.js", "4725:5599");
__$coverInitRange("src/javascript/image/Image.js", "4736:4879");
__$coverInitRange("src/javascript/image/Image.js", "4980:5132");
__$coverInitRange("src/javascript/image/Image.js", "5140:5228");
__$coverInitRange("src/javascript/image/Image.js", "5236:5263");
__$coverInitRange("src/javascript/image/Image.js", "5270:5300");
__$coverInitRange("src/javascript/image/Image.js", "5308:5400");
__$coverInitRange("src/javascript/image/Image.js", "5408:5500");
__$coverInitRange("src/javascript/image/Image.js", "4814:4872");
__$coverInitRange("src/javascript/image/Image.js", "5070:5125");
__$coverInitRange("src/javascript/image/Image.js", "5209:5221");
__$coverInitRange("src/javascript/image/Image.js", "5568:5593");
__$coverInitRange("src/javascript/image/Image.js", "5998:6049");
__$coverInitRange("src/javascript/image/Image.js", "6091:6193");
__$coverInitRange("src/javascript/image/Image.js", "6200:6244");
__$coverInitRange("src/javascript/image/Image.js", "6250:6304");
__$coverInitRange("src/javascript/image/Image.js", "6129:6187");
__$coverInitRange("src/javascript/image/Image.js", "6764:6851");
__$coverInitRange("src/javascript/image/Image.js", "6858:6901");
__$coverInitRange("src/javascript/image/Image.js", "6908:6972");
__$coverInitRange("src/javascript/image/Image.js", "6979:7056");
__$coverInitRange("src/javascript/image/Image.js", "6787:6845");
__$coverInitRange("src/javascript/image/Image.js", "6876:6895");
__$coverInitRange("src/javascript/image/Image.js", "6954:6966");
__$coverInitRange("src/javascript/image/Image.js", "7531:7618");
__$coverInitRange("src/javascript/image/Image.js", "7624:7704");
__$coverInitRange("src/javascript/image/Image.js", "7554:7612");
__$coverInitRange("src/javascript/image/Image.js", "8187:8233");
__$coverInitRange("src/javascript/image/Image.js", "8239:8308");
__$coverInitRange("src/javascript/image/Image.js", "8889:9121");
__$coverInitRange("src/javascript/image/Image.js", "9122:9122");
__$coverInitRange("src/javascript/image/Image.js", "9129:11172");
__$coverInitRange("src/javascript/image/Image.js", "11179:12531");
__$coverInitRange("src/javascript/image/Image.js", "9209:9443");
__$coverInitRange("src/javascript/image/Image.js", "9451:9500");
__$coverInitRange("src/javascript/image/Image.js", "9507:9585");
__$coverInitRange("src/javascript/image/Image.js", "9593:11166");
__$coverInitRange("src/javascript/image/Image.js", "9247:9281");
__$coverInitRange("src/javascript/image/Image.js", "9289:9436");
__$coverInitRange("src/javascript/image/Image.js", "9310:9332");
__$coverInitRange("src/javascript/image/Image.js", "9341:9354");
__$coverInitRange("src/javascript/image/Image.js", "9363:9380");
__$coverInitRange("src/javascript/image/Image.js", "9389:9413");
__$coverInitRange("src/javascript/image/Image.js", "9422:9428");
__$coverInitRange("src/javascript/image/Image.js", "9529:9578");
__$coverInitRange("src/javascript/image/Image.js", "9649:9757");
__$coverInitRange("src/javascript/image/Image.js", "9765:9782");
__$coverInitRange("src/javascript/image/Image.js", "9790:9814");
__$coverInitRange("src/javascript/image/Image.js", "9836:9862");
__$coverInitRange("src/javascript/image/Image.js", "9871:10904");
__$coverInitRange("src/javascript/image/Image.js", "10913:11159");
__$coverInitRange("src/javascript/image/Image.js", "9923:9970");
__$coverInitRange("src/javascript/image/Image.js", "9980:10779");
__$coverInitRange("src/javascript/image/Image.js", "10789:10868");
__$coverInitRange("src/javascript/image/Image.js", "10877:10894");
__$coverInitRange("src/javascript/image/Image.js", "10061:10273");
__$coverInitRange("src/javascript/image/Image.js", "10749:10763");
__$coverInitRange("src/javascript/image/Image.js", "11190:11292");
__$coverInitRange("src/javascript/image/Image.js", "11300:11443");
__$coverInitRange("src/javascript/image/Image.js", "11451:11603");
__$coverInitRange("src/javascript/image/Image.js", "11611:11659");
__$coverInitRange("src/javascript/image/Image.js", "11666:11697");
__$coverInitRange("src/javascript/image/Image.js", "11704:11776");
__$coverInitRange("src/javascript/image/Image.js", "11828:12168");
__$coverInitRange("src/javascript/image/Image.js", "12176:12197");
__$coverInitRange("src/javascript/image/Image.js", "12205:12275");
__$coverInitRange("src/javascript/image/Image.js", "12283:12376");
__$coverInitRange("src/javascript/image/Image.js", "12384:12410");
__$coverInitRange("src/javascript/image/Image.js", "12418:12432");
__$coverInitRange("src/javascript/image/Image.js", "11223:11285");
__$coverInitRange("src/javascript/image/Image.js", "11378:11436");
__$coverInitRange("src/javascript/image/Image.js", "11541:11596");
__$coverInitRange("src/javascript/image/Image.js", "11855:11876");
__$coverInitRange("src/javascript/image/Image.js", "11884:11916");
__$coverInitRange("src/javascript/image/Image.js", "11998:12030");
__$coverInitRange("src/javascript/image/Image.js", "12038:12161");
__$coverInitRange("src/javascript/image/Image.js", "12103:12123");
__$coverInitRange("src/javascript/image/Image.js", "12132:12153");
__$coverInitRange("src/javascript/image/Image.js", "12247:12266");
__$coverInitRange("src/javascript/image/Image.js", "12323:12367");
__$coverInitRange("src/javascript/image/Image.js", "12500:12525");
__$coverInitRange("src/javascript/image/Image.js", "12716:12828");
__$coverInitRange("src/javascript/image/Image.js", "12834:12850");
__$coverInitRange("src/javascript/image/Image.js", "12738:12791");
__$coverInitRange("src/javascript/image/Image.js", "12798:12822");
__$coverInitRange("src/javascript/image/Image.js", "12899:12981");
__$coverInitRange("src/javascript/image/Image.js", "12987:13008");
__$coverInitRange("src/javascript/image/Image.js", "13013:13036");
__$coverInitRange("src/javascript/image/Image.js", "13041:13066");
__$coverInitRange("src/javascript/image/Image.js", "13071:13092");
__$coverInitRange("src/javascript/image/Image.js", "13097:13118");
__$coverInitRange("src/javascript/image/Image.js", "13162:13216");
__$coverInitRange("src/javascript/image/Image.js", "12916:12976");
__$coverInitRange("src/javascript/image/Image.js", "13190:13211");
__$coverInitRange("src/javascript/image/Image.js", "13253:13284");
__$coverInitRange("src/javascript/image/Image.js", "13290:14622");
__$coverInitRange("src/javascript/image/Image.js", "13326:14527");
__$coverInitRange("src/javascript/image/Image.js", "13359:13501");
__$coverInitRange("src/javascript/image/Image.js", "13508:13545");
__$coverInitRange("src/javascript/image/Image.js", "13436:13494");
__$coverInitRange("src/javascript/image/Image.js", "13628:13752");
__$coverInitRange("src/javascript/image/Image.js", "13759:13795");
__$coverInitRange("src/javascript/image/Image.js", "13696:13745");
__$coverInitRange("src/javascript/image/Image.js", "13899:13950");
__$coverInitRange("src/javascript/image/Image.js", "14043:14271");
__$coverInitRange("src/javascript/image/Image.js", "14088:14149");
__$coverInitRange("src/javascript/image/Image.js", "14229:14264");
__$coverInitRange("src/javascript/image/Image.js", "14400:14439");
__$coverInitRange("src/javascript/image/Image.js", "14463:14521");
__$coverInitRange("src/javascript/image/Image.js", "14592:14617");
__$coverInitRange("src/javascript/image/Image.js", "14673:14716");
__$coverInitRange("src/javascript/image/Image.js", "14721:14744");
__$coverInitRange("src/javascript/image/Image.js", "14749:14857");
__$coverInitRange("src/javascript/image/Image.js", "14910:14925");
__$coverInitRange("src/javascript/image/Image.js", "14931:14958");
__$coverInitRange("src/javascript/image/Image.js", "14964:15081");
__$coverInitRange("src/javascript/image/Image.js", "15087:15577");
__$coverInitRange("src/javascript/image/Image.js", "14993:15016");
__$coverInitRange("src/javascript/image/Image.js", "15022:15076");
__$coverInitRange("src/javascript/image/Image.js", "15116:15190");
__$coverInitRange("src/javascript/image/Image.js", "15237:15373");
__$coverInitRange("src/javascript/image/Image.js", "15380:15518");
__$coverInitRange("src/javascript/image/Image.js", "15169:15182");
__$coverInitRange("src/javascript/image/Image.js", "15303:15367");
__$coverInitRange("src/javascript/image/Image.js", "15536:15572");
__$coverInitRange("src/javascript/image/Image.js", "15628:15648");
__$coverInitRange("src/javascript/image/Image.js", "15654:15680");
__$coverInitRange("src/javascript/image/Image.js", "15686:15706");
__$coverInitRange("src/javascript/image/Image.js", "15711:15736");
__$coverInitRange("src/javascript/image/Image.js", "15742:15798");
__$coverInitRange("src/javascript/image/Image.js", "15804:15884");
__$coverInitRange("src/javascript/image/Image.js", "15890:15943");
__$coverInitRange("src/javascript/image/Image.js", "15949:16001");
__$coverInitRange("src/javascript/image/Image.js", "16007:16095");
__$coverInitRange("src/javascript/image/Image.js", "16101:16124");
__$coverInitRange("src/javascript/image/Image.js", "15777:15792");
__$coverInitRange("src/javascript/image/Image.js", "15834:15878");
__$coverInitRange("src/javascript/image/Image.js", "15922:15937");
__$coverInitRange("src/javascript/image/Image.js", "15982:15995");
__$coverInitRange("src/javascript/image/Image.js", "16055:16088");
__$coverCall('src/javascript/image/Image.js', '196:16340');
define('moxie/image/Image', [
    'moxie/core/utils/Basic',
    'moxie/core/utils/Dom',
    'moxie/core/Exceptions',
    'moxie/file/FileReaderSync',
    'moxie/xhr/XMLHttpRequest',
    'moxie/runtime/Runtime',
    'moxie/runtime/RuntimeClient',
    'moxie/runtime/Transporter',
    'moxie/core/utils/Env',
    'moxie/core/EventTarget',
    'moxie/file/Blob',
    'moxie/file/File',
    'moxie/core/utils/Encode'
], function (Basic, Dom, x, FileReaderSync, XMLHttpRequest, Runtime, RuntimeClient, Transporter, Env, EventTarget, Blob, File, Encode) {
    __$coverCall('src/javascript/image/Image.js', '895:1339');
    var dispatches = [
            'progress',
            'load',
            'error',
            'resize',
            'embedded'
        ];
    __$coverCall('src/javascript/image/Image.js', '1343:16131');
    function Image() {
        __$coverCall('src/javascript/image/Image.js', '1364:1388');
        RuntimeClient.call(this);
        __$coverCall('src/javascript/image/Image.js', '1393:12861');
        Basic.extend(this, {
            uid: Basic.guid('uid_'),
            ruid: null,
            name: '',
            size: 0,
            width: 0,
            height: 0,
            type: '',
            meta: {},
            clone: function () {
                __$coverCall('src/javascript/image/Image.js', '2953:2985');
                this.load.apply(this, arguments);
            },
            load: function () {
                __$coverCall('src/javascript/image/Image.js', '4009:4087');
                this.bind('Load Resize', function () {
                    __$coverCall('src/javascript/image/Image.js', '4052:4074');
                    _updateInfo.call(this);
                }, 999);
                __$coverCall('src/javascript/image/Image.js', '4094:4138');
                this.convertEventPropsToHandlers(dispatches);
                __$coverCall('src/javascript/image/Image.js', '4145:4173');
                _load.apply(this, arguments);
            },
            downsize: function (width, height, crop, preserveHeaders) {
                __$coverCall('src/javascript/image/Image.js', '4725:5599');
                try {
                    __$coverCall('src/javascript/image/Image.js', '4736:4879');
                    if (!this.size) {
                        __$coverCall('src/javascript/image/Image.js', '4814:4872');
                        throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);
                    }
                    __$coverCall('src/javascript/image/Image.js', '4980:5132');
                    if (this.width > Image.MAX_RESIZE_WIDTH || this.height > Image.MAX_RESIZE_HEIGHT) {
                        __$coverCall('src/javascript/image/Image.js', '5070:5125');
                        throw new x.ImageError(x.ImageError.MAX_RESOLUTION_ERR);
                    }
                    __$coverCall('src/javascript/image/Image.js', '5140:5228');
                    if (!width && !height || Basic.typeOf(crop) === 'undefined') {
                        __$coverCall('src/javascript/image/Image.js', '5209:5221');
                        crop = false;
                    }
                    __$coverCall('src/javascript/image/Image.js', '5236:5263');
                    width = width || this.width;
                    __$coverCall('src/javascript/image/Image.js', '5270:5300');
                    height = height || this.height;
                    __$coverCall('src/javascript/image/Image.js', '5308:5400');
                    preserveHeaders = Basic.typeOf(preserveHeaders) === 'undefined' ? true : !!preserveHeaders;
                    __$coverCall('src/javascript/image/Image.js', '5408:5500');
                    this.getRuntime().exec.call(this, 'Image', 'downsize', width, height, crop, preserveHeaders);
                } catch (ex) {
                    __$coverCall('src/javascript/image/Image.js', '5568:5593');
                    this.trigger('error', ex);
                }
            },
            crop: function (width, height, preserveHeaders) {
                __$coverCall('src/javascript/image/Image.js', '5998:6049');
                this.downsize(width, height, true, preserveHeaders);
            },
            getAsCanvas: function () {
                __$coverCall('src/javascript/image/Image.js', '6091:6193');
                if (!Env.can('create_canvas')) {
                    __$coverCall('src/javascript/image/Image.js', '6129:6187');
                    throw new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);
                }
                __$coverCall('src/javascript/image/Image.js', '6200:6244');
                var runtime = this.connectRuntime(this.ruid);
                __$coverCall('src/javascript/image/Image.js', '6250:6304');
                return runtime.exec.call(this, 'Image', 'getAsCanvas');
            },
            getAsBlob: function (type, quality) {
                __$coverCall('src/javascript/image/Image.js', '6764:6851');
                if (!this.size) {
                    __$coverCall('src/javascript/image/Image.js', '6787:6845');
                    throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);
                }
                __$coverCall('src/javascript/image/Image.js', '6858:6901');
                if (!type) {
                    __$coverCall('src/javascript/image/Image.js', '6876:6895');
                    type = 'image/jpeg';
                }
                __$coverCall('src/javascript/image/Image.js', '6908:6972');
                if (type === 'image/jpeg' && !quality) {
                    __$coverCall('src/javascript/image/Image.js', '6954:6966');
                    quality = 90;
                }
                __$coverCall('src/javascript/image/Image.js', '6979:7056');
                return this.getRuntime().exec.call(this, 'Image', 'getAsBlob', type, quality);
            },
            getAsDataURL: function (type, quality) {
                __$coverCall('src/javascript/image/Image.js', '7531:7618');
                if (!this.size) {
                    __$coverCall('src/javascript/image/Image.js', '7554:7612');
                    throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);
                }
                __$coverCall('src/javascript/image/Image.js', '7624:7704');
                return this.getRuntime().exec.call(this, 'Image', 'getAsDataURL', type, quality);
            },
            getAsBinaryString: function (type, quality) {
                __$coverCall('src/javascript/image/Image.js', '8187:8233');
                var dataUrl = this.getAsDataURL(type, quality);
                __$coverCall('src/javascript/image/Image.js', '8239:8308');
                return Encode.atob(dataUrl.substring(dataUrl.indexOf('base64,') + 7));
            },
            embed: function (el) {
                __$coverCall('src/javascript/image/Image.js', '8889:9121');
                var self = this, imgCopy, type, quality, crop, options = arguments[1] || {}, width = this.width, height = this.height, runtime;
                __$coverCall('src/javascript/image/Image.js', '9122:9122');
                ;
                __$coverCall('src/javascript/image/Image.js', '9129:11172');
                function onResize() {
                    __$coverCall('src/javascript/image/Image.js', '9209:9443');
                    if (Env.can('create_canvas')) {
                        __$coverCall('src/javascript/image/Image.js', '9247:9281');
                        var canvas = imgCopy.getAsCanvas();
                        __$coverCall('src/javascript/image/Image.js', '9289:9436');
                        if (canvas) {
                            __$coverCall('src/javascript/image/Image.js', '9310:9332');
                            el.appendChild(canvas);
                            __$coverCall('src/javascript/image/Image.js', '9341:9354');
                            canvas = null;
                            __$coverCall('src/javascript/image/Image.js', '9363:9380');
                            imgCopy.destroy();
                            __$coverCall('src/javascript/image/Image.js', '9389:9413');
                            self.trigger('embedded');
                            __$coverCall('src/javascript/image/Image.js', '9422:9428');
                            return;
                        }
                    }
                    __$coverCall('src/javascript/image/Image.js', '9451:9500');
                    var dataUrl = imgCopy.getAsDataURL(type, quality);
                    __$coverCall('src/javascript/image/Image.js', '9507:9585');
                    if (!dataUrl) {
                        __$coverCall('src/javascript/image/Image.js', '9529:9578');
                        throw new x.ImageError(x.ImageError.WRONG_FORMAT);
                    }
                    __$coverCall('src/javascript/image/Image.js', '9593:11166');
                    if (Env.can('use_data_uri_of', dataUrl.length)) {
                        __$coverCall('src/javascript/image/Image.js', '9649:9757');
                        el.innerHTML = '<img src="' + dataUrl + '" width="' + imgCopy.width + '" height="' + imgCopy.height + '" />';
                        __$coverCall('src/javascript/image/Image.js', '9765:9782');
                        imgCopy.destroy();
                        __$coverCall('src/javascript/image/Image.js', '9790:9814');
                        self.trigger('embedded');
                    } else {
                        __$coverCall('src/javascript/image/Image.js', '9836:9862');
                        var tr = new Transporter();
                        __$coverCall('src/javascript/image/Image.js', '9871:10904');
                        tr.bind('TransportingComplete', function () {
                            __$coverCall('src/javascript/image/Image.js', '9923:9970');
                            runtime = self.connectRuntime(this.result.ruid);
                            __$coverCall('src/javascript/image/Image.js', '9980:10779');
                            self.bind('Embedded', function () {
                                __$coverCall('src/javascript/image/Image.js', '10061:10273');
                                Basic.extend(runtime.getShimContainer().style, {
                                    top: '0px',
                                    left: '0px',
                                    width: imgCopy.width + 'px',
                                    height: imgCopy.height + 'px'
                                });
                                __$coverCall('src/javascript/image/Image.js', '10749:10763');
                                runtime = null;
                            }, 999);
                            __$coverCall('src/javascript/image/Image.js', '10789:10868');
                            runtime.exec.call(self, 'ImageView', 'display', this.result.uid, width, height);
                            __$coverCall('src/javascript/image/Image.js', '10877:10894');
                            imgCopy.destroy();
                        });
                        __$coverCall('src/javascript/image/Image.js', '10913:11159');
                        tr.transport(Encode.atob(dataUrl.substring(dataUrl.indexOf('base64,') + 7)), type, Basic.extend({}, options, {
                            required_caps: { display_media: true },
                            runtime_order: 'flash,silverlight',
                            container: el
                        }));
                    }
                }
                __$coverCall('src/javascript/image/Image.js', '11179:12531');
                try {
                    __$coverCall('src/javascript/image/Image.js', '11190:11292');
                    if (!(el = Dom.get(el))) {
                        __$coverCall('src/javascript/image/Image.js', '11223:11285');
                        throw new x.DOMException(x.DOMException.INVALID_NODE_TYPE_ERR);
                    }
                    __$coverCall('src/javascript/image/Image.js', '11300:11443');
                    if (!this.size) {
                        __$coverCall('src/javascript/image/Image.js', '11378:11436');
                        throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);
                    }
                    __$coverCall('src/javascript/image/Image.js', '11451:11603');
                    if (this.width > Image.MAX_RESIZE_WIDTH || this.height > Image.MAX_RESIZE_HEIGHT) {
                        __$coverCall('src/javascript/image/Image.js', '11541:11596');
                        throw new x.ImageError(x.ImageError.MAX_RESOLUTION_ERR);
                    }
                    __$coverCall('src/javascript/image/Image.js', '11611:11659');
                    type = options.type || this.type || 'image/jpeg';
                    __$coverCall('src/javascript/image/Image.js', '11666:11697');
                    quality = options.quality || 90;
                    __$coverCall('src/javascript/image/Image.js', '11704:11776');
                    crop = Basic.typeOf(options.crop) !== 'undefined' ? options.crop : false;
                    __$coverCall('src/javascript/image/Image.js', '11828:12168');
                    if (options.width) {
                        __$coverCall('src/javascript/image/Image.js', '11855:11876');
                        width = options.width;
                        __$coverCall('src/javascript/image/Image.js', '11884:11916');
                        height = options.height || width;
                    } else {
                        __$coverCall('src/javascript/image/Image.js', '11998:12030');
                        var dimensions = Dom.getSize(el);
                        __$coverCall('src/javascript/image/Image.js', '12038:12161');
                        if (dimensions.w && dimensions.h) {
                            __$coverCall('src/javascript/image/Image.js', '12103:12123');
                            width = dimensions.w;
                            __$coverCall('src/javascript/image/Image.js', '12132:12153');
                            height = dimensions.h;
                        }
                    }
                    __$coverCall('src/javascript/image/Image.js', '12176:12197');
                    imgCopy = new Image();
                    __$coverCall('src/javascript/image/Image.js', '12205:12275');
                    imgCopy.bind('Resize', function () {
                        __$coverCall('src/javascript/image/Image.js', '12247:12266');
                        onResize.call(self);
                    });
                    __$coverCall('src/javascript/image/Image.js', '12283:12376');
                    imgCopy.bind('Load', function () {
                        __$coverCall('src/javascript/image/Image.js', '12323:12367');
                        imgCopy.downsize(width, height, crop, false);
                    });
                    __$coverCall('src/javascript/image/Image.js', '12384:12410');
                    imgCopy.clone(this, false);
                    __$coverCall('src/javascript/image/Image.js', '12418:12432');
                    return imgCopy;
                } catch (ex) {
                    __$coverCall('src/javascript/image/Image.js', '12500:12525');
                    this.trigger('error', ex);
                }
            },
            destroy: function () {
                __$coverCall('src/javascript/image/Image.js', '12716:12828');
                if (this.ruid) {
                    __$coverCall('src/javascript/image/Image.js', '12738:12791');
                    this.getRuntime().exec.call(this, 'Image', 'destroy');
                    __$coverCall('src/javascript/image/Image.js', '12798:12822');
                    this.disconnectRuntime();
                }
                __$coverCall('src/javascript/image/Image.js', '12834:12850');
                this.unbindAll();
            }
        });
        __$coverCall('src/javascript/image/Image.js', '12867:13220');
        function _updateInfo(info) {
            __$coverCall('src/javascript/image/Image.js', '12899:12981');
            if (!info) {
                __$coverCall('src/javascript/image/Image.js', '12916:12976');
                info = this.getRuntime().exec.call(this, 'Image', 'getInfo');
            }
            __$coverCall('src/javascript/image/Image.js', '12987:13008');
            this.size = info.size;
            __$coverCall('src/javascript/image/Image.js', '13013:13036');
            this.width = info.width;
            __$coverCall('src/javascript/image/Image.js', '13041:13066');
            this.height = info.height;
            __$coverCall('src/javascript/image/Image.js', '13071:13092');
            this.type = info.type;
            __$coverCall('src/javascript/image/Image.js', '13097:13118');
            this.meta = info.meta;
            __$coverCall('src/javascript/image/Image.js', '13162:13216');
            if (this.name === '') {
                __$coverCall('src/javascript/image/Image.js', '13190:13211');
                this.name = info.name;
            }
        }
        __$coverCall('src/javascript/image/Image.js', '13228:14626');
        function _load(src) {
            __$coverCall('src/javascript/image/Image.js', '13253:13284');
            var srcType = Basic.typeOf(src);
            __$coverCall('src/javascript/image/Image.js', '13290:14622');
            try {
                __$coverCall('src/javascript/image/Image.js', '13326:14527');
                if (src instanceof Image) {
                    __$coverCall('src/javascript/image/Image.js', '13359:13501');
                    if (!src.size) {
                        __$coverCall('src/javascript/image/Image.js', '13436:13494');
                        throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);
                    }
                    __$coverCall('src/javascript/image/Image.js', '13508:13545');
                    _loadFromImage.apply(this, arguments);
                } else if (src instanceof Blob) {
                    __$coverCall('src/javascript/image/Image.js', '13628:13752');
                    if (!~Basic.inArray(src.type, [
                            'image/jpeg',
                            'image/png'
                        ])) {
                        __$coverCall('src/javascript/image/Image.js', '13696:13745');
                        throw new x.ImageError(x.ImageError.WRONG_FORMAT);
                    }
                    __$coverCall('src/javascript/image/Image.js', '13759:13795');
                    _loadFromBlob.apply(this, arguments);
                } else if (Basic.inArray(srcType, [
                        'blob',
                        'file'
                    ]) !== -1) {
                    __$coverCall('src/javascript/image/Image.js', '13899:13950');
                    _load.call(this, new File(null, src), arguments[1]);
                } else if (srcType === 'string') {
                    __$coverCall('src/javascript/image/Image.js', '14043:14271');
                    if (/^data:[^;]*;base64,/.test(src)) {
                        __$coverCall('src/javascript/image/Image.js', '14088:14149');
                        _load.call(this, new Blob(null, { data: src }), arguments[1]);
                    } else {
                        __$coverCall('src/javascript/image/Image.js', '14229:14264');
                        _loadFromUrl.apply(this, arguments);
                    }
                } else if (srcType === 'node' && src.nodeName.toLowerCase() === 'img') {
                    __$coverCall('src/javascript/image/Image.js', '14400:14439');
                    _load.call(this, src.src, arguments[1]);
                } else {
                    __$coverCall('src/javascript/image/Image.js', '14463:14521');
                    throw new x.DOMException(x.DOMException.TYPE_MISMATCH_ERR);
                }
            } catch (ex) {
                __$coverCall('src/javascript/image/Image.js', '14592:14617');
                this.trigger('error', ex);
            }
        }
        __$coverCall('src/javascript/image/Image.js', '14632:14861');
        function _loadFromImage(img, exact) {
            __$coverCall('src/javascript/image/Image.js', '14673:14716');
            var runtime = this.connectRuntime(img.ruid);
            __$coverCall('src/javascript/image/Image.js', '14721:14744');
            this.ruid = runtime.uid;
            __$coverCall('src/javascript/image/Image.js', '14749:14857');
            runtime.exec.call(this, 'Image', 'loadFromImage', img, Basic.typeOf(exact) === 'undefined' ? true : exact);
        }
        __$coverCall('src/javascript/image/Image.js', '14867:15581');
        function _loadFromBlob(blob, options) {
            __$coverCall('src/javascript/image/Image.js', '14910:14925');
            var self = this;
            __$coverCall('src/javascript/image/Image.js', '14931:14958');
            self.name = blob.name || '';
            __$coverCall('src/javascript/image/Image.js', '14964:15081');
            function exec(runtime) {
                __$coverCall('src/javascript/image/Image.js', '14993:15016');
                self.ruid = runtime.uid;
                __$coverCall('src/javascript/image/Image.js', '15022:15076');
                runtime.exec.call(self, 'Image', 'loadFromBlob', blob);
            }
            __$coverCall('src/javascript/image/Image.js', '15087:15577');
            if (blob.isDetached()) {
                __$coverCall('src/javascript/image/Image.js', '15116:15190');
                this.bind('RuntimeInit', function (e, runtime) {
                    __$coverCall('src/javascript/image/Image.js', '15169:15182');
                    exec(runtime);
                });
                __$coverCall('src/javascript/image/Image.js', '15237:15373');
                if (options && typeof options.required_caps === 'string') {
                    __$coverCall('src/javascript/image/Image.js', '15303:15367');
                    options.required_caps = Runtime.parseCaps(options.required_caps);
                }
                __$coverCall('src/javascript/image/Image.js', '15380:15518');
                this.connectRuntime(Basic.extend({
                    required_caps: {
                        access_image_binary: true,
                        resize_image: true
                    }
                }, options));
            } else {
                __$coverCall('src/javascript/image/Image.js', '15536:15572');
                exec(this.connectRuntime(blob.ruid));
            }
        }
        __$coverCall('src/javascript/image/Image.js', '15587:16128');
        function _loadFromUrl(url, options) {
            __$coverCall('src/javascript/image/Image.js', '15628:15648');
            var self = this, xhr;
            __$coverCall('src/javascript/image/Image.js', '15654:15680');
            xhr = new XMLHttpRequest();
            __$coverCall('src/javascript/image/Image.js', '15686:15706');
            xhr.open('get', url);
            __$coverCall('src/javascript/image/Image.js', '15711:15736');
            xhr.responseType = 'blob';
            __$coverCall('src/javascript/image/Image.js', '15742:15798');
            xhr.onprogress = function (e) {
                __$coverCall('src/javascript/image/Image.js', '15777:15792');
                self.trigger(e);
            };
            __$coverCall('src/javascript/image/Image.js', '15804:15884');
            xhr.onload = function () {
                __$coverCall('src/javascript/image/Image.js', '15834:15878');
                _loadFromBlob.call(self, xhr.response, true);
            };
            __$coverCall('src/javascript/image/Image.js', '15890:15943');
            xhr.onerror = function (e) {
                __$coverCall('src/javascript/image/Image.js', '15922:15937');
                self.trigger(e);
            };
            __$coverCall('src/javascript/image/Image.js', '15949:16001');
            xhr.onloadend = function () {
                __$coverCall('src/javascript/image/Image.js', '15982:15995');
                xhr.destroy();
            };
            __$coverCall('src/javascript/image/Image.js', '16007:16095');
            xhr.bind('RuntimeError', function (e, err) {
                __$coverCall('src/javascript/image/Image.js', '16055:16088');
                self.trigger('RuntimeError', err);
            });
            __$coverCall('src/javascript/image/Image.js', '16101:16124');
            xhr.send(null, options);
        }
    }
    __$coverCall('src/javascript/image/Image.js', '16215:16244');
    Image.MAX_RESIZE_WIDTH = 6500;
    __$coverCall('src/javascript/image/Image.js', '16247:16277');
    Image.MAX_RESIZE_HEIGHT = 6500;
    __$coverCall('src/javascript/image/Image.js', '16282:16320');
    Image.prototype = EventTarget.instance;
    __$coverCall('src/javascript/image/Image.js', '16324:16336');
    return Image;
});

// Included from: src/javascript/runtime/html5/Runtime.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/Runtime.js", "/**\n * Runtime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global File:true */\n\n/**\nDefines constructor for HTML5 runtime.\n\n@class moxie/runtime/html5/Runtime\n@private\n*/\ndefine(\"moxie/runtime/html5/Runtime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/Runtime\",\n\t\"moxie/core/utils/Env\"\n], function(Basic, x, Runtime, Env) {\n\t\n\tvar type = \"html5\", extensions = {};\n\t\n\tfunction Html5Runtime(options) {\n\t\tvar I = this\n\t\t, Test = Runtime.capTest\n\t\t, True = Runtime.capTrue\n\t\t;\n\n\t\tvar caps = Basic.extend({\n\t\t\t\taccess_binary: Test(window.FileReader || window.File && window.File.getAsDataURL),\n\t\t\t\taccess_image_binary: function() {\n\t\t\t\t\treturn I.can('access_binary') && !!extensions.Image;\n\t\t\t\t},\n\t\t\t\tdisplay_media: Test(Env.can('create_canvas') || Env.can('use_data_uri_over32kb')),\n\t\t\t\tdo_cors: Test(window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()),\n\t\t\t\tdrag_and_drop: Test(function() {\n\t\t\t\t\t// this comes directly from Modernizr: http://www.modernizr.com/\n\t\t\t\t\tvar div = document.createElement('div');\n\t\t\t\t\t// IE has support for drag and drop since version 5, but doesn't support dropping files from desktop\n\t\t\t\t\treturn (('draggable' in div) || ('ondragstart' in div && 'ondrop' in div)) && (Env.browser !== 'IE' || Env.version > 9);\n\t\t\t\t}()),\n\t\t\t\tfilter_by_extension: Test(function() { // if you know how to feature-detect this, please suggest\n\t\t\t\t\treturn (Env.browser === 'Chrome' && Env.version >= 28) || (Env.browser === 'IE' && Env.version >= 10);\n\t\t\t\t}()),\n\t\t\t\treturn_response_headers: True,\n\t\t\t\treturn_response_type: function(responseType) {\n\t\t\t\t\tif (responseType === 'json' && !!window.JSON) { // we can fake this one even if it's not supported\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} \n\t\t\t\t\treturn Env.can('return_response_type', responseType);\n\t\t\t\t},\n\t\t\t\treturn_status_code: True,\n\t\t\t\treport_upload_progress: Test(window.XMLHttpRequest && new XMLHttpRequest().upload),\n\t\t\t\tresize_image: function() {\n\t\t\t\t\treturn I.can('access_binary') && Env.can('create_canvas');\n\t\t\t\t},\n\t\t\t\tselect_file: function() {\n\t\t\t\t\treturn Env.can('use_fileinput') && window.File;\n\t\t\t\t},\n\t\t\t\tselect_folder: function() {\n\t\t\t\t\treturn I.can('select_file') && Env.browser === 'Chrome' && Env.version >= 21;\n\t\t\t\t},\n\t\t\t\tselect_multiple: function() {\n\t\t\t\t\t// it is buggy on Safari Windows and iOS\n\t\t\t\t\treturn I.can('select_file') && !(Env.browser === 'Safari' && Env.OS === 'Windows') && Env.OS !== 'iOS';\n\t\t\t\t},\n\t\t\t\tsend_binary_string: Test(window.XMLHttpRequest && (new XMLHttpRequest().sendAsBinary || (window.Uint8Array && window.ArrayBuffer))),\n\t\t\t\tsend_custom_headers: Test(window.XMLHttpRequest),\n\t\t\t\tsend_multipart: function() {\n\t\t\t\t\treturn !!(window.XMLHttpRequest && new XMLHttpRequest().upload && window.FormData) || I.can('send_binary_string');\n\t\t\t\t},\n\t\t\t\tslice_blob: Test(window.File && (File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice)),\n\t\t\t\tstream_upload: function(){\n\t\t\t\t\treturn I.can('slice_blob') && I.can('send_multipart');\n\t\t\t\t},\n\t\t\t\tsummon_file_dialog: Test(function() { // yeah... some dirty sniffing here...\n\t\t\t\t\treturn (Env.browser === 'Firefox' && Env.version >= 4) ||\n\t\t\t\t\t\t(Env.browser === 'Opera' && Env.version >= 12) ||\n\t\t\t\t\t\t(Env.browser === 'IE' && Env.version >= 10) ||\n\t\t\t\t\t\t!!~Basic.inArray(Env.browser, ['Chrome', 'Safari']);\n\t\t\t\t}()),\n\t\t\t\tupload_filesize: True\n\t\t\t}, \n\t\t\targuments[2]\n\t\t);\n\n\t\tRuntime.call(this, options, (arguments[1] || type), caps);\n\n\n\t\tBasic.extend(this, {\n\n\t\t\tinit : function() {\n\t\t\t\tthis.trigger(\"Init\");\n\t\t\t},\n\n\t\t\tdestroy: (function(destroy) { // extend default destroy method\n\t\t\t\treturn function() {\n\t\t\t\t\tdestroy.call(I);\n\t\t\t\t\tdestroy = I = null;\n\t\t\t\t};\n\t\t\t}(this.destroy))\n\t\t});\n\n\t\tBasic.extend(this.getShim(), extensions);\n\t}\n\n\tRuntime.addConstructor(type, Html5Runtime);\n\n\treturn extensions;\n});\n");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "312:3934");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "496:531");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "536:3863");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "3867:3909");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "3913:3930");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "571:639");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "640:640");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "645:3501");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "3506:3563");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "3569:3815");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "3820:3860");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "801:852");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "1147:1186");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "1299:1418");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "1536:1637");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "1740:1863");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "1871:1923");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "1845:1856");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "2086:2143");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "2187:2233");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "2279:2355");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "2449:2551");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "2789:2902");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "3065:3118");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "3213:3437");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "3618:3638");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "3717:3789");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "3742:3757");
__$coverInitRange("src/javascript/runtime/html5/Runtime.js", "3764:3782");
__$coverCall('src/javascript/runtime/html5/Runtime.js', '312:3934');
define('moxie/runtime/html5/Runtime', [
    'moxie/core/utils/Basic',
    'moxie/core/Exceptions',
    'moxie/runtime/Runtime',
    'moxie/core/utils/Env'
], function (Basic, x, Runtime, Env) {
    __$coverCall('src/javascript/runtime/html5/Runtime.js', '496:531');
    var type = 'html5', extensions = {};
    __$coverCall('src/javascript/runtime/html5/Runtime.js', '536:3863');
    function Html5Runtime(options) {
        __$coverCall('src/javascript/runtime/html5/Runtime.js', '571:639');
        var I = this, Test = Runtime.capTest, True = Runtime.capTrue;
        __$coverCall('src/javascript/runtime/html5/Runtime.js', '640:640');
        ;
        __$coverCall('src/javascript/runtime/html5/Runtime.js', '645:3501');
        var caps = Basic.extend({
                access_binary: Test(window.FileReader || window.File && window.File.getAsDataURL),
                access_image_binary: function () {
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '801:852');
                    return I.can('access_binary') && !!extensions.Image;
                },
                display_media: Test(Env.can('create_canvas') || Env.can('use_data_uri_over32kb')),
                do_cors: Test(window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()),
                drag_and_drop: Test(function () {
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '1147:1186');
                    var div = document.createElement('div');
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '1299:1418');
                    return ('draggable' in div || 'ondragstart' in div && 'ondrop' in div) && (Env.browser !== 'IE' || Env.version > 9);
                }()),
                filter_by_extension: Test(function () {
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '1536:1637');
                    return Env.browser === 'Chrome' && Env.version >= 28 || Env.browser === 'IE' && Env.version >= 10;
                }()),
                return_response_headers: True,
                return_response_type: function (responseType) {
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '1740:1863');
                    if (responseType === 'json' && !!window.JSON) {
                        __$coverCall('src/javascript/runtime/html5/Runtime.js', '1845:1856');
                        return true;
                    }
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '1871:1923');
                    return Env.can('return_response_type', responseType);
                },
                return_status_code: True,
                report_upload_progress: Test(window.XMLHttpRequest && new XMLHttpRequest().upload),
                resize_image: function () {
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '2086:2143');
                    return I.can('access_binary') && Env.can('create_canvas');
                },
                select_file: function () {
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '2187:2233');
                    return Env.can('use_fileinput') && window.File;
                },
                select_folder: function () {
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '2279:2355');
                    return I.can('select_file') && Env.browser === 'Chrome' && Env.version >= 21;
                },
                select_multiple: function () {
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '2449:2551');
                    return I.can('select_file') && !(Env.browser === 'Safari' && Env.OS === 'Windows') && Env.OS !== 'iOS';
                },
                send_binary_string: Test(window.XMLHttpRequest && (new XMLHttpRequest().sendAsBinary || window.Uint8Array && window.ArrayBuffer)),
                send_custom_headers: Test(window.XMLHttpRequest),
                send_multipart: function () {
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '2789:2902');
                    return !!(window.XMLHttpRequest && new XMLHttpRequest().upload && window.FormData) || I.can('send_binary_string');
                },
                slice_blob: Test(window.File && (File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice)),
                stream_upload: function () {
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '3065:3118');
                    return I.can('slice_blob') && I.can('send_multipart');
                },
                summon_file_dialog: Test(function () {
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '3213:3437');
                    return Env.browser === 'Firefox' && Env.version >= 4 || Env.browser === 'Opera' && Env.version >= 12 || Env.browser === 'IE' && Env.version >= 10 || !!~Basic.inArray(Env.browser, [
                        'Chrome',
                        'Safari'
                    ]);
                }()),
                upload_filesize: True
            }, arguments[2]);
        __$coverCall('src/javascript/runtime/html5/Runtime.js', '3506:3563');
        Runtime.call(this, options, arguments[1] || type, caps);
        __$coverCall('src/javascript/runtime/html5/Runtime.js', '3569:3815');
        Basic.extend(this, {
            init: function () {
                __$coverCall('src/javascript/runtime/html5/Runtime.js', '3618:3638');
                this.trigger('Init');
            },
            destroy: function (destroy) {
                __$coverCall('src/javascript/runtime/html5/Runtime.js', '3717:3789');
                return function () {
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '3742:3757');
                    destroy.call(I);
                    __$coverCall('src/javascript/runtime/html5/Runtime.js', '3764:3782');
                    destroy = I = null;
                };
            }(this.destroy)
        });
        __$coverCall('src/javascript/runtime/html5/Runtime.js', '3820:3860');
        Basic.extend(this.getShim(), extensions);
    }
    __$coverCall('src/javascript/runtime/html5/Runtime.js', '3867:3909');
    Runtime.addConstructor(type, Html5Runtime);
    __$coverCall('src/javascript/runtime/html5/Runtime.js', '3913:3930');
    return extensions;
});

// Included from: src/javascript/runtime/html5/file/Blob.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/file/Blob.js", "/**\n * Blob.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/file/Blob\n@private\n*/\ndefine(\"moxie/runtime/html5/file/Blob\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/file/Blob\"\n], function(extensions, Blob) {\n\n\tfunction HTML5Blob() {\n\t\tfunction w3cBlobSlice(blob, start, end) {\n\t\t\tvar blobSlice;\n\n\t\t\tif (window.File.prototype.slice) {\n\t\t\t\ttry {\n\t\t\t\t\tblob.slice();\t// depricated version will throw WRONG_ARGUMENTS_ERR exception\n\t\t\t\t\treturn blob.slice(start, end);\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// depricated slice method\n\t\t\t\t\treturn blob.slice(start, end - start);\n\t\t\t\t}\n\t\t\t// slice method got prefixed: https://bugzilla.mozilla.org/show_bug.cgi?id=649672\n\t\t\t} else if ((blobSlice = window.File.prototype.webkitSlice || window.File.prototype.mozSlice)) {\n\t\t\t\treturn blobSlice.call(blob, start, end);\n\t\t\t} else {\n\t\t\t\treturn null; // or throw some exception\n\t\t\t}\n\t\t}\n\n\t\tthis.slice = function() {\n\t\t\treturn new Blob(this.getRuntime().uid, w3cBlobSlice.apply(this, arguments));\n\t\t};\n\t}\n\n\treturn (extensions.Blob = HTML5Blob);\n});\n");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "248:1180");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "375:1136");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "1140:1176");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "400:1019");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "1024:1133");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "445:458");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "464:1015");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "503:725");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "514:526");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "596:625");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "682:719");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "915:954");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "972:983");
__$coverInitRange("src/javascript/runtime/html5/file/Blob.js", "1053:1128");
__$coverCall('src/javascript/runtime/html5/file/Blob.js', '248:1180');
define('moxie/runtime/html5/file/Blob', [
    'moxie/runtime/html5/Runtime',
    'moxie/file/Blob'
], function (extensions, Blob) {
    __$coverCall('src/javascript/runtime/html5/file/Blob.js', '375:1136');
    function HTML5Blob() {
        __$coverCall('src/javascript/runtime/html5/file/Blob.js', '400:1019');
        function w3cBlobSlice(blob, start, end) {
            __$coverCall('src/javascript/runtime/html5/file/Blob.js', '445:458');
            var blobSlice;
            __$coverCall('src/javascript/runtime/html5/file/Blob.js', '464:1015');
            if (window.File.prototype.slice) {
                __$coverCall('src/javascript/runtime/html5/file/Blob.js', '503:725');
                try {
                    __$coverCall('src/javascript/runtime/html5/file/Blob.js', '514:526');
                    blob.slice();
                    __$coverCall('src/javascript/runtime/html5/file/Blob.js', '596:625');
                    return blob.slice(start, end);
                } catch (e) {
                    __$coverCall('src/javascript/runtime/html5/file/Blob.js', '682:719');
                    return blob.slice(start, end - start);
                }
            } else if (blobSlice = window.File.prototype.webkitSlice || window.File.prototype.mozSlice) {
                __$coverCall('src/javascript/runtime/html5/file/Blob.js', '915:954');
                return blobSlice.call(blob, start, end);
            } else {
                __$coverCall('src/javascript/runtime/html5/file/Blob.js', '972:983');
                return null;
            }
        }
        __$coverCall('src/javascript/runtime/html5/file/Blob.js', '1024:1133');
        this.slice = function () {
            __$coverCall('src/javascript/runtime/html5/file/Blob.js', '1053:1128');
            return new Blob(this.getRuntime().uid, w3cBlobSlice.apply(this, arguments));
        };
    }
    __$coverCall('src/javascript/runtime/html5/file/Blob.js', '1140:1176');
    return extensions.Blob = HTML5Blob;
});

// Included from: src/javascript/core/utils/Events.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/core/utils/Events.js", "/**\n * Events.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\ndefine('moxie/core/utils/Events', [\n\t'moxie/core/utils/Basic'\n], function(Basic) {\n\tvar eventhash = {}, uid = 'moxie_' + Basic.guid();\n\t\n\t// IE W3C like event funcs\n\tfunction preventDefault() {\n\t\tthis.returnValue = false;\n\t}\n\n\tfunction stopPropagation() {\n\t\tthis.cancelBubble = true;\n\t}\n\n\t/**\n\tAdds an event handler to the specified object and store reference to the handler\n\tin objects internal Plupload registry (@see removeEvent).\n\t\n\t@method addEvent\n\t@for Utils\n\t@static\n\t@param {Object} obj DOM element like object to add handler to.\n\t@param {String} name Name to add event listener to.\n\t@param {Function} callback Function to call when event occurs.\n\t@param {String} [key] that might be used to add specifity to the event record.\n\t*/\n\tvar addEvent = function(obj, name, callback, key) {\n\t\tvar func, events;\n\t\t\t\t\t\n\t\tname = name.toLowerCase();\n\n\t\t// Add event listener\n\t\tif (obj.addEventListener) {\n\t\t\tfunc = callback;\n\t\t\t\n\t\t\tobj.addEventListener(name, func, false);\n\t\t} else if (obj.attachEvent) {\n\t\t\tfunc = function() {\n\t\t\t\tvar evt = window.event;\n\n\t\t\t\tif (!evt.target) {\n\t\t\t\t\tevt.target = evt.srcElement;\n\t\t\t\t}\n\n\t\t\t\tevt.preventDefault = preventDefault;\n\t\t\t\tevt.stopPropagation = stopPropagation;\n\n\t\t\t\tcallback(evt);\n\t\t\t};\n\n\t\t\tobj.attachEvent('on' + name, func);\n\t\t}\n\t\t\n\t\t// Log event handler to objects internal mOxie registry\n\t\tif (!obj[uid]) {\n\t\t\tobj[uid] = Basic.guid();\n\t\t}\n\t\t\n\t\tif (!eventhash.hasOwnProperty(obj[uid])) {\n\t\t\teventhash[obj[uid]] = {};\n\t\t}\n\t\t\n\t\tevents = eventhash[obj[uid]];\n\t\t\n\t\tif (!events.hasOwnProperty(name)) {\n\t\t\tevents[name] = [];\n\t\t}\n\t\t\t\t\n\t\tevents[name].push({\n\t\t\tfunc: func,\n\t\t\torig: callback, // store original callback for IE\n\t\t\tkey: key\n\t\t});\n\t};\n\t\n\t\n\t/**\n\tRemove event handler from the specified object. If third argument (callback)\n\tis not specified remove all events with the specified name.\n\t\n\t@method removeEvent\n\t@static\n\t@param {Object} obj DOM element to remove event listener(s) from.\n\t@param {String} name Name of event listener to remove.\n\t@param {Function|String} [callback] might be a callback or unique key to match.\n\t*/\n\tvar removeEvent = function(obj, name, callback) {\n\t\tvar type, undef;\n\t\t\n\t\tname = name.toLowerCase();\n\t\t\n\t\tif (obj[uid] && eventhash[obj[uid]] && eventhash[obj[uid]][name]) {\n\t\t\ttype = eventhash[obj[uid]][name];\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\t\t\n\t\tfor (var i = type.length - 1; i >= 0; i--) {\n\t\t\t// undefined or not, key should match\n\t\t\tif (type[i].orig === callback || type[i].key === callback) {\n\t\t\t\tif (obj.removeEventListener) {\n\t\t\t\t\tobj.removeEventListener(name, type[i].func, false);\n\t\t\t\t} else if (obj.detachEvent) {\n\t\t\t\t\tobj.detachEvent('on'+name, type[i].func);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttype[i].orig = null;\n\t\t\t\ttype[i].func = null;\n\t\t\t\ttype.splice(i, 1);\n\t\t\t\t\n\t\t\t\t// If callback was passed we are done here, otherwise proceed\n\t\t\t\tif (callback !== undef) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// If event array got empty, remove it\n\t\tif (!type.length) {\n\t\t\tdelete eventhash[obj[uid]][name];\n\t\t}\n\t\t\n\t\t// If mOxie registry has become empty, remove it\n\t\tif (Basic.isEmptyObj(eventhash[obj[uid]])) {\n\t\t\tdelete eventhash[obj[uid]];\n\t\t\t\n\t\t\t// IE doesn't let you remove DOM object property with - delete\n\t\t\ttry {\n\t\t\t\tdelete obj[uid];\n\t\t\t} catch(e) {\n\t\t\t\tobj[uid] = undef;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t\n\t/**\n\tRemove all kind of events from the specified object\n\t\n\t@method removeAllEvents\n\t@static\n\t@param {Object} obj DOM element to remove event listeners from.\n\t@param {String} [key] unique key to match, when removing events.\n\t*/\n\tvar removeAllEvents = function(obj, key) {\t\t\n\t\tif (!obj || !obj[uid]) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tBasic.each(eventhash[obj[uid]], function(events, name) {\n\t\t\tremoveEvent(obj, name, key);\n\t\t});\n\t};\n\n\treturn {\n\t\taddEvent: addEvent,\n\t\tremoveEvent: removeEvent,\n\t\tremoveAllEvents: removeAllEvents\n\t};\n});\n");
__$coverInitRange("src/javascript/core/utils/Events.js", "197:3966");
__$coverInitRange("src/javascript/core/utils/Events.js", "281:330");
__$coverInitRange("src/javascript/core/utils/Events.js", "363:420");
__$coverInitRange("src/javascript/core/utils/Events.js", "424:482");
__$coverInitRange("src/javascript/core/utils/Events.js", "938:1880");
__$coverInitRange("src/javascript/core/utils/Events.js", "2271:3437");
__$coverInitRange("src/javascript/core/utils/Events.js", "3673:3862");
__$coverInitRange("src/javascript/core/utils/Events.js", "3866:3962");
__$coverInitRange("src/javascript/core/utils/Events.js", "393:417");
__$coverInitRange("src/javascript/core/utils/Events.js", "455:479");
__$coverInitRange("src/javascript/core/utils/Events.js", "992:1008");
__$coverInitRange("src/javascript/core/utils/Events.js", "1018:1043");
__$coverInitRange("src/javascript/core/utils/Events.js", "1072:1468");
__$coverInitRange("src/javascript/core/utils/Events.js", "1533:1580");
__$coverInitRange("src/javascript/core/utils/Events.js", "1587:1661");
__$coverInitRange("src/javascript/core/utils/Events.js", "1668:1696");
__$coverInitRange("src/javascript/core/utils/Events.js", "1703:1763");
__$coverInitRange("src/javascript/core/utils/Events.js", "1772:1876");
__$coverInitRange("src/javascript/core/utils/Events.js", "1103:1118");
__$coverInitRange("src/javascript/core/utils/Events.js", "1127:1166");
__$coverInitRange("src/javascript/core/utils/Events.js", "1203:1424");
__$coverInitRange("src/javascript/core/utils/Events.js", "1430:1464");
__$coverInitRange("src/javascript/core/utils/Events.js", "1227:1249");
__$coverInitRange("src/javascript/core/utils/Events.js", "1256:1313");
__$coverInitRange("src/javascript/core/utils/Events.js", "1320:1355");
__$coverInitRange("src/javascript/core/utils/Events.js", "1361:1398");
__$coverInitRange("src/javascript/core/utils/Events.js", "1405:1418");
__$coverInitRange("src/javascript/core/utils/Events.js", "1280:1307");
__$coverInitRange("src/javascript/core/utils/Events.js", "1553:1576");
__$coverInitRange("src/javascript/core/utils/Events.js", "1633:1657");
__$coverInitRange("src/javascript/core/utils/Events.js", "1742:1759");
__$coverInitRange("src/javascript/core/utils/Events.js", "2323:2338");
__$coverInitRange("src/javascript/core/utils/Events.js", "2345:2370");
__$coverInitRange("src/javascript/core/utils/Events.js", "2377:2506");
__$coverInitRange("src/javascript/core/utils/Events.js", "2514:3047");
__$coverInitRange("src/javascript/core/utils/Events.js", "3095:3154");
__$coverInitRange("src/javascript/core/utils/Events.js", "3212:3433");
__$coverInitRange("src/javascript/core/utils/Events.js", "2448:2480");
__$coverInitRange("src/javascript/core/utils/Events.js", "2496:2502");
__$coverInitRange("src/javascript/core/utils/Events.js", "2603:3043");
__$coverInitRange("src/javascript/core/utils/Events.js", "2668:2841");
__$coverInitRange("src/javascript/core/utils/Events.js", "2852:2871");
__$coverInitRange("src/javascript/core/utils/Events.js", "2877:2896");
__$coverInitRange("src/javascript/core/utils/Events.js", "2902:2919");
__$coverInitRange("src/javascript/core/utils/Events.js", "2996:3038");
__$coverInitRange("src/javascript/core/utils/Events.js", "2704:2754");
__$coverInitRange("src/javascript/core/utils/Events.js", "2795:2835");
__$coverInitRange("src/javascript/core/utils/Events.js", "3027:3032");
__$coverInitRange("src/javascript/core/utils/Events.js", "3118:3150");
__$coverInitRange("src/javascript/core/utils/Events.js", "3260:3286");
__$coverInitRange("src/javascript/core/utils/Events.js", "3361:3429");
__$coverInitRange("src/javascript/core/utils/Events.js", "3371:3386");
__$coverInitRange("src/javascript/core/utils/Events.js", "3408:3424");
__$coverInitRange("src/javascript/core/utils/Events.js", "3720:3758");
__$coverInitRange("src/javascript/core/utils/Events.js", "3765:3858");
__$coverInitRange("src/javascript/core/utils/Events.js", "3748:3754");
__$coverInitRange("src/javascript/core/utils/Events.js", "3825:3852");
__$coverCall('src/javascript/core/utils/Events.js', '197:3966');
define('moxie/core/utils/Events', ['moxie/core/utils/Basic'], function (Basic) {
    __$coverCall('src/javascript/core/utils/Events.js', '281:330');
    var eventhash = {}, uid = 'moxie_' + Basic.guid();
    __$coverCall('src/javascript/core/utils/Events.js', '363:420');
    function preventDefault() {
        __$coverCall('src/javascript/core/utils/Events.js', '393:417');
        this.returnValue = false;
    }
    __$coverCall('src/javascript/core/utils/Events.js', '424:482');
    function stopPropagation() {
        __$coverCall('src/javascript/core/utils/Events.js', '455:479');
        this.cancelBubble = true;
    }
    __$coverCall('src/javascript/core/utils/Events.js', '938:1880');
    var addEvent = function (obj, name, callback, key) {
        __$coverCall('src/javascript/core/utils/Events.js', '992:1008');
        var func, events;
        __$coverCall('src/javascript/core/utils/Events.js', '1018:1043');
        name = name.toLowerCase();
        __$coverCall('src/javascript/core/utils/Events.js', '1072:1468');
        if (obj.addEventListener) {
            __$coverCall('src/javascript/core/utils/Events.js', '1103:1118');
            func = callback;
            __$coverCall('src/javascript/core/utils/Events.js', '1127:1166');
            obj.addEventListener(name, func, false);
        } else if (obj.attachEvent) {
            __$coverCall('src/javascript/core/utils/Events.js', '1203:1424');
            func = function () {
                __$coverCall('src/javascript/core/utils/Events.js', '1227:1249');
                var evt = window.event;
                __$coverCall('src/javascript/core/utils/Events.js', '1256:1313');
                if (!evt.target) {
                    __$coverCall('src/javascript/core/utils/Events.js', '1280:1307');
                    evt.target = evt.srcElement;
                }
                __$coverCall('src/javascript/core/utils/Events.js', '1320:1355');
                evt.preventDefault = preventDefault;
                __$coverCall('src/javascript/core/utils/Events.js', '1361:1398');
                evt.stopPropagation = stopPropagation;
                __$coverCall('src/javascript/core/utils/Events.js', '1405:1418');
                callback(evt);
            };
            __$coverCall('src/javascript/core/utils/Events.js', '1430:1464');
            obj.attachEvent('on' + name, func);
        }
        __$coverCall('src/javascript/core/utils/Events.js', '1533:1580');
        if (!obj[uid]) {
            __$coverCall('src/javascript/core/utils/Events.js', '1553:1576');
            obj[uid] = Basic.guid();
        }
        __$coverCall('src/javascript/core/utils/Events.js', '1587:1661');
        if (!eventhash.hasOwnProperty(obj[uid])) {
            __$coverCall('src/javascript/core/utils/Events.js', '1633:1657');
            eventhash[obj[uid]] = {};
        }
        __$coverCall('src/javascript/core/utils/Events.js', '1668:1696');
        events = eventhash[obj[uid]];
        __$coverCall('src/javascript/core/utils/Events.js', '1703:1763');
        if (!events.hasOwnProperty(name)) {
            __$coverCall('src/javascript/core/utils/Events.js', '1742:1759');
            events[name] = [];
        }
        __$coverCall('src/javascript/core/utils/Events.js', '1772:1876');
        events[name].push({
            func: func,
            orig: callback,
            key: key
        });
    };
    __$coverCall('src/javascript/core/utils/Events.js', '2271:3437');
    var removeEvent = function (obj, name, callback) {
        __$coverCall('src/javascript/core/utils/Events.js', '2323:2338');
        var type, undef;
        __$coverCall('src/javascript/core/utils/Events.js', '2345:2370');
        name = name.toLowerCase();
        __$coverCall('src/javascript/core/utils/Events.js', '2377:2506');
        if (obj[uid] && eventhash[obj[uid]] && eventhash[obj[uid]][name]) {
            __$coverCall('src/javascript/core/utils/Events.js', '2448:2480');
            type = eventhash[obj[uid]][name];
        } else {
            __$coverCall('src/javascript/core/utils/Events.js', '2496:2502');
            return;
        }
        __$coverCall('src/javascript/core/utils/Events.js', '2514:3047');
        for (var i = type.length - 1; i >= 0; i--) {
            __$coverCall('src/javascript/core/utils/Events.js', '2603:3043');
            if (type[i].orig === callback || type[i].key === callback) {
                __$coverCall('src/javascript/core/utils/Events.js', '2668:2841');
                if (obj.removeEventListener) {
                    __$coverCall('src/javascript/core/utils/Events.js', '2704:2754');
                    obj.removeEventListener(name, type[i].func, false);
                } else if (obj.detachEvent) {
                    __$coverCall('src/javascript/core/utils/Events.js', '2795:2835');
                    obj.detachEvent('on' + name, type[i].func);
                }
                __$coverCall('src/javascript/core/utils/Events.js', '2852:2871');
                type[i].orig = null;
                __$coverCall('src/javascript/core/utils/Events.js', '2877:2896');
                type[i].func = null;
                __$coverCall('src/javascript/core/utils/Events.js', '2902:2919');
                type.splice(i, 1);
                __$coverCall('src/javascript/core/utils/Events.js', '2996:3038');
                if (callback !== undef) {
                    __$coverCall('src/javascript/core/utils/Events.js', '3027:3032');
                    break;
                }
            }
        }
        __$coverCall('src/javascript/core/utils/Events.js', '3095:3154');
        if (!type.length) {
            __$coverCall('src/javascript/core/utils/Events.js', '3118:3150');
            delete eventhash[obj[uid]][name];
        }
        __$coverCall('src/javascript/core/utils/Events.js', '3212:3433');
        if (Basic.isEmptyObj(eventhash[obj[uid]])) {
            __$coverCall('src/javascript/core/utils/Events.js', '3260:3286');
            delete eventhash[obj[uid]];
            __$coverCall('src/javascript/core/utils/Events.js', '3361:3429');
            try {
                __$coverCall('src/javascript/core/utils/Events.js', '3371:3386');
                delete obj[uid];
            } catch (e) {
                __$coverCall('src/javascript/core/utils/Events.js', '3408:3424');
                obj[uid] = undef;
            }
        }
    };
    __$coverCall('src/javascript/core/utils/Events.js', '3673:3862');
    var removeAllEvents = function (obj, key) {
        __$coverCall('src/javascript/core/utils/Events.js', '3720:3758');
        if (!obj || !obj[uid]) {
            __$coverCall('src/javascript/core/utils/Events.js', '3748:3754');
            return;
        }
        __$coverCall('src/javascript/core/utils/Events.js', '3765:3858');
        Basic.each(eventhash[obj[uid]], function (events, name) {
            __$coverCall('src/javascript/core/utils/Events.js', '3825:3852');
            removeEvent(obj, name, key);
        });
    };
    __$coverCall('src/javascript/core/utils/Events.js', '3866:3962');
    return {
        addEvent: addEvent,
        removeEvent: removeEvent,
        removeAllEvents: removeAllEvents
    };
});

// Included from: src/javascript/runtime/html5/file/FileInput.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/file/FileInput.js", "/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/file/FileInput\n@private\n*/\ndefine(\"moxie/runtime/html5/file/FileInput\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/utils/Events\",\n\t\"moxie/core/utils/Mime\",\n\t\"moxie/core/utils/Env\"\n], function(extensions, Basic, Dom, Events, Mime, Env) {\n\t\n\tfunction FileInput() {\n\t\tvar _files = [], _options;\n\n\t\tBasic.extend(this, {\n\t\t\tinit: function(options) {\n\t\t\t\tvar comp = this, I = comp.getRuntime(), input, shimContainer, mimes, browseButton, zIndex, top;\n\n\t\t\t\t_options = options;\n\t\t\t\t_files = [];\n\n\t\t\t\t// figure out accept string\n\t\t\t\tmimes = _options.accept.mimes || Mime.extList2mimes(_options.accept, I.can('filter_by_extension'));\n\n\t\t\t\tshimContainer = I.getShimContainer();\n\n\t\t\t\tshimContainer.innerHTML = '<input id=\"' + I.uid +'\" type=\"file\" style=\"font-size:999px;opacity:0;\"' +\n\t\t\t\t\t(_options.multiple && I.can('select_multiple') ? 'multiple' : '') + \n\t\t\t\t\t(_options.directory && I.can('select_folder') ? 'webkitdirectory directory' : '') + // Chrome 11+\n\t\t\t\t\t(mimes ? ' accept=\"' + mimes.join(',') + '\"' : '') + ' />';\n\n\t\t\t\tinput = Dom.get(I.uid);\n\n\t\t\t\t// prepare file input to be placed underneath the browse_button element\n\t\t\t\tBasic.extend(input.style, {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '100%'\n\t\t\t\t});\n\n\n\t\t\t\tbrowseButton = Dom.get(_options.browse_button);\n\n\t\t\t\t// Route click event to the input[type=file] element for browsers that support such behavior\n\t\t\t\tif (I.can('summon_file_dialog')) {\n\t\t\t\t\tif (Dom.getStyle(browseButton, 'position') === 'static') {\n\t\t\t\t\t\tbrowseButton.style.position = 'relative';\n\t\t\t\t\t}\n\n\t\t\t\t\tzIndex = parseInt(Dom.getStyle(browseButton, 'z-index'), 10) || 1;\n\n\t\t\t\t\tbrowseButton.style.zIndex = zIndex;\n\t\t\t\t\tshimContainer.style.zIndex = zIndex - 1;\n\n\t\t\t\t\tEvents.addEvent(browseButton, 'click', function(e) {\n\t\t\t\t\t\tvar input = Dom.get(I.uid);\n\t\t\t\t\t\tif (input && !input.disabled) { // for some reason FF (up to 8.0.1 so far) lets to click disabled input[type=file]\n\t\t\t\t\t\t\tinput.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}, comp.uid);\n\t\t\t\t}\n\n\t\t\t\t/* Since we have to place input[type=file] on top of the browse_button for some browsers,\n\t\t\t\tbrowse_button loses interactivity, so we restore it here */\n\t\t\t\ttop = I.can('summon_file_dialog') ? browseButton : shimContainer;\n\n\t\t\t\tEvents.addEvent(top, 'mouseover', function() {\n\t\t\t\t\tcomp.trigger('mouseenter');\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(top, 'mouseout', function() {\n\t\t\t\t\tcomp.trigger('mouseleave');\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(top, 'mousedown', function() {\n\t\t\t\t\tcomp.trigger('mousedown');\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(Dom.get(_options.container), 'mouseup', function() {\n\t\t\t\t\tcomp.trigger('mouseup');\n\t\t\t\t}, comp.uid);\n\n\n\t\t\t\tinput.onchange = function onChange() { // there should be only one handler for this\n\t\t\t\t\t_files = [];\n\n\t\t\t\t\tif (_options.directory) {\n\t\t\t\t\t\t// folders are represented by dots, filter them out (Chrome 11+)\n\t\t\t\t\t\tBasic.each(this.files, function(file) {\n\t\t\t\t\t\t\tif (file.name !== \".\") { // if it doesn't looks like a folder\n\t\t\t\t\t\t\t\t_files.push(file);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_files = [].slice.call(this.files);\n\t\t\t\t\t}\n\n\t\t\t\t\t// clearing the value enables the user to select the same file again if they want to\n\t\t\t\t\tif (Env.browser !== 'IE') {\n\t\t\t\t\t\tthis.value = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// in IE input[type=\"file\"] is read-only so the only way to reset it is to re-insert it\n\t\t\t\t\t\tvar clone = this.cloneNode(true);\n\t\t\t\t\t\tthis.parentNode.replaceChild(clone, this);\n\t\t\t\t\t\tclone.onchange = onChange;\n\t\t\t\t\t}\n\t\t\t\t\tcomp.trigger('change');\n\t\t\t\t};\n\n\t\t\t\t// ready event is perfectly asynchronous\n\t\t\t\tcomp.trigger({\n\t\t\t\t\ttype: 'ready',\n\t\t\t\t\tasync: true\n\t\t\t\t});\n\n\t\t\t\tshimContainer = null;\n\t\t\t},\n\n\t\t\tgetFiles: function() {\n\t\t\t\treturn _files;\n\t\t\t},\n\n\t\t\tdisable: function(state) {\n\t\t\t\tvar I = this.getRuntime(), input;\n\n\t\t\t\tif ((input = Dom.get(I.uid))) {\n\t\t\t\t\tinput.disabled = !!state;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tvar I = this.getRuntime()\n\t\t\t\t, shim = I.getShim()\n\t\t\t\t, shimContainer = I.getShimContainer()\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\tEvents.removeAllEvents(shimContainer, this.uid);\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.container), this.uid);\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.browse_button), this.uid);\n\t\t\t\t\n\t\t\t\tif (shimContainer) {\n\t\t\t\t\tshimContainer.innerHTML = '';\n\t\t\t\t}\n\n\t\t\t\tshim.removeInstance(this.uid);\n\n\t\t\t\t_files = _options = shimContainer = shim = null;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn (extensions.FileInput = FileInput);\n});");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "258:4738");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "527:4689");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4693:4734");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "552:577");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "582:4686");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "636:730");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "737:755");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "761:772");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "811:909");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "916:952");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "959:1301");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "1308:1330");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "1413:1541");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "1549:1595");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "1699:2307");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2472:2536");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2543:2639");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2646:2741");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2748:2843");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2850:2965");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2973:3820");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3872:3930");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3937:3957");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "1739:1851");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "1859:1924");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "1932:1966");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "1973:2012");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2020:2301");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "1804:1844");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2079:2105");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2113:2256");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2264:2282");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2235:2248");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2595:2621");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2697:2723");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2800:2825");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "2924:2947");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3062:3073");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3081:3400");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3498:3784");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3791:3813");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3184:3337");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3231:3327");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3301:3318");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3359:3393");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3532:3547");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3663:3695");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3703:3744");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3752:3777");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "3996:4009");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4052:4084");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4091:4158");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4128:4152");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4196:4293");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4294:4294");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4305:4352");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4358:4431");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4437:4514");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4525:4585");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4592:4621");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4628:4675");
__$coverInitRange("src/javascript/runtime/html5/file/FileInput.js", "4551:4579");
__$coverCall('src/javascript/runtime/html5/file/FileInput.js', '258:4738');
define('moxie/runtime/html5/file/FileInput', [
    'moxie/runtime/html5/Runtime',
    'moxie/core/utils/Basic',
    'moxie/core/utils/Dom',
    'moxie/core/utils/Events',
    'moxie/core/utils/Mime',
    'moxie/core/utils/Env'
], function (extensions, Basic, Dom, Events, Mime, Env) {
    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '527:4689');
    function FileInput() {
        __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '552:577');
        var _files = [], _options;
        __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '582:4686');
        Basic.extend(this, {
            init: function (options) {
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '636:730');
                var comp = this, I = comp.getRuntime(), input, shimContainer, mimes, browseButton, zIndex, top;
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '737:755');
                _options = options;
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '761:772');
                _files = [];
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '811:909');
                mimes = _options.accept.mimes || Mime.extList2mimes(_options.accept, I.can('filter_by_extension'));
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '916:952');
                shimContainer = I.getShimContainer();
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '959:1301');
                shimContainer.innerHTML = '<input id="' + I.uid + '" type="file" style="font-size:999px;opacity:0;"' + (_options.multiple && I.can('select_multiple') ? 'multiple' : '') + (_options.directory && I.can('select_folder') ? 'webkitdirectory directory' : '') + (mimes ? ' accept="' + mimes.join(',') + '"' : '') + ' />';
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '1308:1330');
                input = Dom.get(I.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '1413:1541');
                Basic.extend(input.style, {
                    position: 'absolute',
                    top: 0,
                    left: 0,
                    width: '100%',
                    height: '100%'
                });
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '1549:1595');
                browseButton = Dom.get(_options.browse_button);
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '1699:2307');
                if (I.can('summon_file_dialog')) {
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '1739:1851');
                    if (Dom.getStyle(browseButton, 'position') === 'static') {
                        __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '1804:1844');
                        browseButton.style.position = 'relative';
                    }
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '1859:1924');
                    zIndex = parseInt(Dom.getStyle(browseButton, 'z-index'), 10) || 1;
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '1932:1966');
                    browseButton.style.zIndex = zIndex;
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '1973:2012');
                    shimContainer.style.zIndex = zIndex - 1;
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2020:2301');
                    Events.addEvent(browseButton, 'click', function (e) {
                        __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2079:2105');
                        var input = Dom.get(I.uid);
                        __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2113:2256');
                        if (input && !input.disabled) {
                            __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2235:2248');
                            input.click();
                        }
                        __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2264:2282');
                        e.preventDefault();
                    }, comp.uid);
                }
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2472:2536');
                top = I.can('summon_file_dialog') ? browseButton : shimContainer;
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2543:2639');
                Events.addEvent(top, 'mouseover', function () {
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2595:2621');
                    comp.trigger('mouseenter');
                }, comp.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2646:2741');
                Events.addEvent(top, 'mouseout', function () {
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2697:2723');
                    comp.trigger('mouseleave');
                }, comp.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2748:2843');
                Events.addEvent(top, 'mousedown', function () {
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2800:2825');
                    comp.trigger('mousedown');
                }, comp.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2850:2965');
                Events.addEvent(Dom.get(_options.container), 'mouseup', function () {
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2924:2947');
                    comp.trigger('mouseup');
                }, comp.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '2973:3820');
                input.onchange = function onChange() {
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3062:3073');
                    _files = [];
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3081:3400');
                    if (_options.directory) {
                        __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3184:3337');
                        Basic.each(this.files, function (file) {
                            __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3231:3327');
                            if (file.name !== '.') {
                                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3301:3318');
                                _files.push(file);
                            }
                        });
                    } else {
                        __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3359:3393');
                        _files = [].slice.call(this.files);
                    }
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3498:3784');
                    if (Env.browser !== 'IE') {
                        __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3532:3547');
                        this.value = '';
                    } else {
                        __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3663:3695');
                        var clone = this.cloneNode(true);
                        __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3703:3744');
                        this.parentNode.replaceChild(clone, this);
                        __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3752:3777');
                        clone.onchange = onChange;
                    }
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3791:3813');
                    comp.trigger('change');
                };
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3872:3930');
                comp.trigger({
                    type: 'ready',
                    async: true
                });
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3937:3957');
                shimContainer = null;
            },
            getFiles: function () {
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '3996:4009');
                return _files;
            },
            disable: function (state) {
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4052:4084');
                var I = this.getRuntime(), input;
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4091:4158');
                if (input = Dom.get(I.uid)) {
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4128:4152');
                    input.disabled = !!state;
                }
            },
            destroy: function () {
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4196:4293');
                var I = this.getRuntime(), shim = I.getShim(), shimContainer = I.getShimContainer();
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4294:4294');
                ;
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4305:4352');
                Events.removeAllEvents(shimContainer, this.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4358:4431');
                Events.removeAllEvents(_options && Dom.get(_options.container), this.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4437:4514');
                Events.removeAllEvents(_options && Dom.get(_options.browse_button), this.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4525:4585');
                if (shimContainer) {
                    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4551:4579');
                    shimContainer.innerHTML = '';
                }
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4592:4621');
                shim.removeInstance(this.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4628:4675');
                _files = _options = shimContainer = shim = null;
            }
        });
    }
    __$coverCall('src/javascript/runtime/html5/file/FileInput.js', '4693:4734');
    return extensions.FileInput = FileInput;
});

// Included from: src/javascript/runtime/html5/file/FileDrop.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/file/FileDrop.js", "/**\n * FileDrop.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/file/FileDrop\n@private\n*/\ndefine(\"moxie/runtime/html5/file/FileDrop\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/utils/Events\",\n\t\"moxie/core/utils/Mime\"\n], function(extensions, Basic, Dom, Events, Mime) {\n\t\n\tfunction FileDrop() {\n\t\tvar _files = [], _allowedExts = [], _options;\n\n\t\tBasic.extend(this, {\n\t\t\tinit: function(options) {\n\t\t\t\tvar comp = this, dropZone;\n\n\t\t\t\t_options = options;\n\t\t\t\t_allowedExts = _extractExts(_options.accept);\n\t\t\t\tdropZone = _options.container;\n\n\t\t\t\tEvents.addEvent(dropZone, 'dragover', function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(dropZone, 'drop', function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t_files = [];\n\n\t\t\t\t\t// Chrome 21+ accepts folders via Drag'n'Drop\n\t\t\t\t\tif (e.dataTransfer.items && e.dataTransfer.items[0].webkitGetAsEntry) {\n\t\t\t\t\t\tvar entries = [];\n\t\t\t\t\t\tBasic.each(e.dataTransfer.items, function(item) {\n\t\t\t\t\t\t\tentries.push(item.webkitGetAsEntry());\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_readEntries(entries, function() {\n\t\t\t\t\t\t\tcomp.trigger(\"drop\");\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tBasic.each(e.dataTransfer.files, function(file) {\n\t\t\t\t\t\t\tif (_isAcceptable(file)) {\n\t\t\t\t\t\t\t\t_files.push(file);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcomp.trigger(\"drop\");\n\t\t\t\t\t}\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(dropZone, 'dragenter', function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tcomp.trigger(\"dragenter\");\n\t\t\t\t}, comp.uid);\n\n\t\t\t\tEvents.addEvent(dropZone, 'dragleave', function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tcomp.trigger(\"dragleave\");\n\t\t\t\t}, comp.uid);\n\t\t\t},\n\n\t\t\tgetFiles: function() {\n\t\t\t\treturn _files;\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.container), this.uid);\n\t\t\t\t_files = _allowedExts = _options = null;\n\t\t\t}\n\t\t});\n\n\t\t\n\t\tfunction _extractExts(accept) {\n\t\t\tvar exts = [];\n\t\t\tfor (var i = 0; i < accept.length; i++) {\n\t\t\t\t[].push.apply(exts, accept[i].extensions.split(/\\s*,\\s*/));\n\t\t\t}\n\t\t\treturn Basic.inArray('*', exts) === -1 ? exts : [];\n\t\t}\n\n\n\t\tfunction _isAcceptable(file) {\n\t\t\tvar ext = Mime.getFileExtension(file.name);\n\t\t\treturn !ext || !_allowedExts.length || Basic.inArray(ext, _allowedExts) !== -1;\n\t\t}\n\n\n\t\tfunction _readEntries(entries, cb) {\n\t\t\tvar queue = [];\n\t\t\tBasic.each(entries, function(entry) {\n\t\t\t\tqueue.push(function(cbcb) {\n\t\t\t\t\t_readEntry(entry, cbcb);\n\t\t\t\t});\n\t\t\t});\n\t\t\tBasic.inSeries(queue, function() {\n\t\t\t\tcb();\n\t\t\t});\n\t\t}\n\n\t\tfunction _readEntry(entry, cb) {\n\t\t\tif (entry.isFile) {\n\t\t\t\tentry.file(function(file) {\n\t\t\t\t\tif (_isAcceptable(file)) {\n\t\t\t\t\t\t_files.push(file);\n\t\t\t\t\t}\n\t\t\t\t\tcb();\n\t\t\t\t}, function() {\n\t\t\t\t\t// fire an error event maybe\n\t\t\t\t\tcb();\n\t\t\t\t});\n\t\t\t} else if (entry.isDirectory) {\n\t\t\t\t_readDirEntry(entry, cb);\n\t\t\t} else {\n\t\t\t\tcb(); // not file, not directory? what then?..\n\t\t\t}\n\t\t}\n\n\t\tfunction _readDirEntry(dirEntry, cb) {\n\t\t\tvar entries = [], dirReader = dirEntry.createReader();\n\n\t\t\t// keep quering recursively till no more entries\n\t\t\tfunction getEntries(cbcb) {\n\t\t\t\tdirReader.readEntries(function(moreEntries) {\n\t\t\t\t\tif (moreEntries.length) {\n\t\t\t\t\t\t[].push.apply(entries, moreEntries);\n\t\t\t\t\t\tgetEntries(cbcb);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcbcb();\n\t\t\t\t\t}\n\t\t\t\t}, cbcb);\n\t\t\t}\n\n\t\t\t// ...and you thought FileReader was crazy...\n\t\t\tgetEntries(function() {\n\t\t\t\t_readEntries(entries, cb);\n\t\t\t}); \n\t\t}\n\t}\n\n\treturn (extensions.FileDrop = FileDrop);\n});");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "256:3698");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "494:3651");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3655:3694");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "518:562");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "567:2131");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2139:2360");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2366:2529");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2535:2766");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2771:3142");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3147:3648");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "621:646");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "653:671");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "677:721");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "727:756");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "763:923");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "930:1594");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1601:1753");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1760:1912");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "820:838");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "845:864");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "871:905");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "983:1001");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1008:1027");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1035:1046");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1105:1576");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1183:1199");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1207:1311");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1319:1391");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1264:1301");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1361:1381");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1413:1541");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1549:1569");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1470:1531");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1505:1522");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1659:1677");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1684:1703");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1710:1735");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1818:1836");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1843:1862");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1869:1894");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "1951:1964");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2002:2075");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2081:2120");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2174:2187");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2192:2301");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2306:2356");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2238:2296");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2400:2442");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2447:2525");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2575:2589");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2594:2707");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2712:2762");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2636:2700");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2669:2692");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2751:2755");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2807:3138");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2831:3005");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2864:2921");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2928:2932");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2897:2914");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "2993:2997");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3046:3070");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3088:3092");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3189:3242");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3300:3528");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3583:3643");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3332:3523");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3383:3509");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3415:3450");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3458:3474");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3496:3502");
__$coverInitRange("src/javascript/runtime/html5/file/FileDrop.js", "3611:3636");
__$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '256:3698');
define('moxie/runtime/html5/file/FileDrop', [
    'moxie/runtime/html5/Runtime',
    'moxie/core/utils/Basic',
    'moxie/core/utils/Dom',
    'moxie/core/utils/Events',
    'moxie/core/utils/Mime'
], function (extensions, Basic, Dom, Events, Mime) {
    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '494:3651');
    function FileDrop() {
        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '518:562');
        var _files = [], _allowedExts = [], _options;
        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '567:2131');
        Basic.extend(this, {
            init: function (options) {
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '621:646');
                var comp = this, dropZone;
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '653:671');
                _options = options;
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '677:721');
                _allowedExts = _extractExts(_options.accept);
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '727:756');
                dropZone = _options.container;
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '763:923');
                Events.addEvent(dropZone, 'dragover', function (e) {
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '820:838');
                    e.preventDefault();
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '845:864');
                    e.stopPropagation();
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '871:905');
                    e.dataTransfer.dropEffect = 'copy';
                }, comp.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '930:1594');
                Events.addEvent(dropZone, 'drop', function (e) {
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '983:1001');
                    e.preventDefault();
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1008:1027');
                    e.stopPropagation();
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1035:1046');
                    _files = [];
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1105:1576');
                    if (e.dataTransfer.items && e.dataTransfer.items[0].webkitGetAsEntry) {
                        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1183:1199');
                        var entries = [];
                        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1207:1311');
                        Basic.each(e.dataTransfer.items, function (item) {
                            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1264:1301');
                            entries.push(item.webkitGetAsEntry());
                        });
                        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1319:1391');
                        _readEntries(entries, function () {
                            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1361:1381');
                            comp.trigger('drop');
                        });
                    } else {
                        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1413:1541');
                        Basic.each(e.dataTransfer.files, function (file) {
                            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1470:1531');
                            if (_isAcceptable(file)) {
                                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1505:1522');
                                _files.push(file);
                            }
                        });
                        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1549:1569');
                        comp.trigger('drop');
                    }
                }, comp.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1601:1753');
                Events.addEvent(dropZone, 'dragenter', function (e) {
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1659:1677');
                    e.preventDefault();
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1684:1703');
                    e.stopPropagation();
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1710:1735');
                    comp.trigger('dragenter');
                }, comp.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1760:1912');
                Events.addEvent(dropZone, 'dragleave', function (e) {
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1818:1836');
                    e.preventDefault();
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1843:1862');
                    e.stopPropagation();
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1869:1894');
                    comp.trigger('dragleave');
                }, comp.uid);
            },
            getFiles: function () {
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '1951:1964');
                return _files;
            },
            destroy: function () {
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2002:2075');
                Events.removeAllEvents(_options && Dom.get(_options.container), this.uid);
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2081:2120');
                _files = _allowedExts = _options = null;
            }
        });
        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2139:2360');
        function _extractExts(accept) {
            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2174:2187');
            var exts = [];
            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2192:2301');
            for (var i = 0; i < accept.length; i++) {
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2238:2296');
                [].push.apply(exts, accept[i].extensions.split(/\s*,\s*/));
            }
            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2306:2356');
            return Basic.inArray('*', exts) === -1 ? exts : [];
        }
        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2366:2529');
        function _isAcceptable(file) {
            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2400:2442');
            var ext = Mime.getFileExtension(file.name);
            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2447:2525');
            return !ext || !_allowedExts.length || Basic.inArray(ext, _allowedExts) !== -1;
        }
        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2535:2766');
        function _readEntries(entries, cb) {
            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2575:2589');
            var queue = [];
            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2594:2707');
            Basic.each(entries, function (entry) {
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2636:2700');
                queue.push(function (cbcb) {
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2669:2692');
                    _readEntry(entry, cbcb);
                });
            });
            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2712:2762');
            Basic.inSeries(queue, function () {
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2751:2755');
                cb();
            });
        }
        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2771:3142');
        function _readEntry(entry, cb) {
            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2807:3138');
            if (entry.isFile) {
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2831:3005');
                entry.file(function (file) {
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2864:2921');
                    if (_isAcceptable(file)) {
                        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2897:2914');
                        _files.push(file);
                    }
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2928:2932');
                    cb();
                }, function () {
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '2993:2997');
                    cb();
                });
            } else if (entry.isDirectory) {
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3046:3070');
                _readDirEntry(entry, cb);
            } else {
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3088:3092');
                cb();
            }
        }
        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3147:3648');
        function _readDirEntry(dirEntry, cb) {
            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3189:3242');
            var entries = [], dirReader = dirEntry.createReader();
            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3300:3528');
            function getEntries(cbcb) {
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3332:3523');
                dirReader.readEntries(function (moreEntries) {
                    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3383:3509');
                    if (moreEntries.length) {
                        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3415:3450');
                        [].push.apply(entries, moreEntries);
                        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3458:3474');
                        getEntries(cbcb);
                    } else {
                        __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3496:3502');
                        cbcb();
                    }
                }, cbcb);
            }
            __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3583:3643');
            getEntries(function () {
                __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3611:3636');
                _readEntries(entries, cb);
            });
        }
    }
    __$coverCall('src/javascript/runtime/html5/file/FileDrop.js', '3655:3694');
    return extensions.FileDrop = FileDrop;
});

// Included from: src/javascript/runtime/html5/file/FileReader.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/file/FileReader.js", "/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/file/FileReader\n@private\n*/\ndefine(\"moxie/runtime/html5/file/FileReader\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Encode\",\n\t\"moxie/core/utils/Basic\"\n], function(extensions, Encode, Basic) {\n\t\n\tfunction FileReader() {\n\t\tvar _fr, _convertToBinary = false;\n\n\t\tBasic.extend(this, {\n\n\t\t\tread: function(op, blob) {\n\t\t\t\tvar target = this;\n\n\t\t\t\t_fr = new window.FileReader();\n\n\t\t\t\t_fr.addEventListener('progress', function(e) {\n\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t});\n\n\t\t\t\t_fr.addEventListener('load', function(e) {\n\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t});\n\n\t\t\t\t_fr.addEventListener('error', function(e) {\n\t\t\t\t\ttarget.trigger(e, _fr.error);\n\t\t\t\t});\n\n\t\t\t\t_fr.addEventListener('loadend', function() {\n\t\t\t\t\t_fr = null;\n\t\t\t\t});\n\n\t\t\t\tif (Basic.typeOf(_fr[op]) === 'function') {\n\t\t\t\t\t_convertToBinary = false;\n\t\t\t\t\t_fr[op](blob.getSource());\n\t\t\t\t} else if (op === 'readAsBinaryString') { // readAsBinaryString is depricated in general and never existed in IE10+\n\t\t\t\t\t_convertToBinary = true;\n\t\t\t\t\t_fr.readAsDataURL(blob.getSource());\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tgetResult: function() {\n\t\t\t\treturn _fr && _fr.result ? (_convertToBinary ? _toBinary(_fr.result) : _fr.result) : null;\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif (_fr) {\n\t\t\t\t\t_fr.abort();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\t_fr = null;\n\t\t\t}\n\t\t});\n\n\t\tfunction _toBinary(str) {\n\t\t\treturn Encode.atob(str.substring(str.indexOf('base64,') + 7));\n\t\t}\n\t}\n\n\treturn (extensions.FileReader = FileReader);\n});\n");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "260:1662");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "438:1611");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "1615:1658");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "464:497");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "502:1509");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "1514:1608");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "558:575");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "582:611");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "618:695");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "702:775");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "782:867");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "874:942");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "949:1252");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "670:687");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "750:767");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "831:859");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "924:934");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "998:1022");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "1029:1054");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "1181:1204");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "1211:1246");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "1292:1381");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "1417:1450");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "1433:1444");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "1488:1498");
__$coverInitRange("src/javascript/runtime/html5/file/FileReader.js", "1543:1604");
__$coverCall('src/javascript/runtime/html5/file/FileReader.js', '260:1662');
define('moxie/runtime/html5/file/FileReader', [
    'moxie/runtime/html5/Runtime',
    'moxie/core/utils/Encode',
    'moxie/core/utils/Basic'
], function (extensions, Encode, Basic) {
    __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '438:1611');
    function FileReader() {
        __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '464:497');
        var _fr, _convertToBinary = false;
        __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '502:1509');
        Basic.extend(this, {
            read: function (op, blob) {
                __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '558:575');
                var target = this;
                __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '582:611');
                _fr = new window.FileReader();
                __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '618:695');
                _fr.addEventListener('progress', function (e) {
                    __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '670:687');
                    target.trigger(e);
                });
                __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '702:775');
                _fr.addEventListener('load', function (e) {
                    __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '750:767');
                    target.trigger(e);
                });
                __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '782:867');
                _fr.addEventListener('error', function (e) {
                    __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '831:859');
                    target.trigger(e, _fr.error);
                });
                __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '874:942');
                _fr.addEventListener('loadend', function () {
                    __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '924:934');
                    _fr = null;
                });
                __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '949:1252');
                if (Basic.typeOf(_fr[op]) === 'function') {
                    __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '998:1022');
                    _convertToBinary = false;
                    __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '1029:1054');
                    _fr[op](blob.getSource());
                } else if (op === 'readAsBinaryString') {
                    __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '1181:1204');
                    _convertToBinary = true;
                    __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '1211:1246');
                    _fr.readAsDataURL(blob.getSource());
                }
            },
            getResult: function () {
                __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '1292:1381');
                return _fr && _fr.result ? _convertToBinary ? _toBinary(_fr.result) : _fr.result : null;
            },
            abort: function () {
                __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '1417:1450');
                if (_fr) {
                    __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '1433:1444');
                    _fr.abort();
                }
            },
            destroy: function () {
                __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '1488:1498');
                _fr = null;
            }
        });
        __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '1514:1608');
        function _toBinary(str) {
            __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '1543:1604');
            return Encode.atob(str.substring(str.indexOf('base64,') + 7));
        }
    }
    __$coverCall('src/javascript/runtime/html5/file/FileReader.js', '1615:1658');
    return extensions.FileReader = FileReader;
});

// Included from: src/javascript/runtime/html5/xhr/XMLHttpRequest.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global ActiveXObject:true */\n\n/**\n@class moxie/runtime/html5/xhr/XMLHttpRequest\n@private\n*/\ndefine(\"moxie/runtime/html5/xhr/XMLHttpRequest\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Mime\",\n\t\"moxie/core/utils/Url\",\n\t\"moxie/file/File\",\n\t\"moxie/file/Blob\",\n\t\"moxie/xhr/FormData\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Env\"\n], function(extensions, Basic, Mime, Url, File, Blob, FormData, x, Env) {\n\t\n\tfunction XMLHttpRequest() {\n\t\tvar self = this\n\t\t, _xhr\n\t\t, _filename\n\t\t;\n\n\t\tBasic.extend(this, {\n\t\t\tsend: function(meta, data) {\n\t\t\t\tvar target = this\n\t\t\t\t, isGecko2_5_6 = (Env.browser === 'Mozilla' && Env.version >= 4 && Env.version < 7)\n\t\t\t\t, isAndroidBrowser = Env.browser === 'Android Browser'\n\t\t\t\t, mustSendAsBinary = false\n\t\t\t\t;\n\n\t\t\t\t// extract file name\n\t\t\t\t_filename = meta.url.replace(/^.+?\\/([\\w\\-\\.]+)$/, '$1').toLowerCase();\n\n\t\t\t\t_xhr = _getNativeXHR();\n\t\t\t\t_xhr.open(meta.method, meta.url, meta.async, meta.user, meta.password);\n\n\n\t\t\t\t// prepare data to be sent\n\t\t\t\tif (data instanceof Blob) {\n\t\t\t\t\tif (data.isDetached()) {\n\t\t\t\t\t\tmustSendAsBinary = true;\n\t\t\t\t\t}\n\t\t\t\t\tdata = data.getSource();\n\t\t\t\t} else if (data instanceof FormData) {\n\n\t\t\t\t\tif (data.hasBlob()) {\n\t\t\t\t\t\tif (data.getBlob().isDetached()) {\n\t\t\t\t\t\t\tdata = _prepareMultipart.call(target, data); // _xhr must be instantiated and be in OPENED state\n\t\t\t\t\t\t\tmustSendAsBinary = true;\n\t\t\t\t\t\t} else if ((isGecko2_5_6 || isAndroidBrowser) && Basic.typeOf(data.getBlob().getSource()) === 'blob' && window.FileReader) {\n\t\t\t\t\t\t\t// Gecko 2/5/6 can't send blob in FormData: https://bugzilla.mozilla.org/show_bug.cgi?id=649150\n\t\t\t\t\t\t\t// Android browsers (default one and Dolphin) seem to have the same issue, see: #613\n\t\t\t\t\t\t\t_preloadAndSend.call(target, meta, data);\n\t\t\t\t\t\t\treturn; // _preloadAndSend will reinvoke send() with transmutated FormData =%D\n\t\t\t\t\t\t}\t\n\t\t\t\t\t}\n\n\t\t\t\t\t// transfer fields to real FormData\n\t\t\t\t\tif (data instanceof FormData) { // if still a FormData, e.g. not mangled by _prepareMultipart()\n\t\t\t\t\t\tvar fd = new window.FormData();\n\t\t\t\t\t\tdata.each(function(value, name) {\n\t\t\t\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t\t\t\tfd.append(name, value.getSource());\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfd.append(name, value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdata = fd;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\t// if XHR L2\n\t\t\t\tif (_xhr.upload) {\n\t\t\t\t\tif (meta.withCredentials) {\n\t\t\t\t\t\t_xhr.withCredentials = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t_xhr.addEventListener('load', function(e) {\n\t\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t\t});\n\n\t\t\t\t\t_xhr.addEventListener('error', function(e) {\n\t\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t\t});\n\n\t\t\t\t\t// additionally listen to progress events\n\t\t\t\t\t_xhr.addEventListener('progress', function(e) {\n\t\t\t\t\t\ttarget.trigger(e);\n\t\t\t\t\t});\n\n\t\t\t\t\t_xhr.upload.addEventListener('progress', function(e) {\n\t\t\t\t\t\ttarget.trigger({\n\t\t\t\t\t\t\ttype: 'UploadProgress',\n\t\t\t\t\t\t\tloaded: e.loaded,\n\t\t\t\t\t\t\ttotal: e.total\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t// ... otherwise simulate XHR L2\n\t\t\t\t} else {\n\t\t\t\t\t_xhr.onreadystatechange = function onReadyStateChange() {\n\t\t\t\t\t\t\n\t\t\t\t\t\t// fake Level 2 events\n\t\t\t\t\t\tswitch (_xhr.readyState) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcase 1: // XMLHttpRequest.OPENED\n\t\t\t\t\t\t\t\t// readystatechanged is fired twice for OPENED state (in IE and Mozilla) - neu\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// looks like HEADERS_RECEIVED (state 2) is not reported in Opera (or it's old versions) - neu\n\t\t\t\t\t\t\tcase 2: // XMLHttpRequest.HEADERS_RECEIVED\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcase 3: // XMLHttpRequest.LOADING \n\t\t\t\t\t\t\t\t// try to fire progress event for not XHR L2\n\t\t\t\t\t\t\t\tvar total, loaded;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tif (Url.hasSameOrigin(meta.url)) { // Content-Length not accessible for cross-domain on some browsers\n\t\t\t\t\t\t\t\t\t\ttotal = _xhr.getResponseHeader('Content-Length') || 0; // old Safari throws an exception here\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (_xhr.responseText) { // responseText was introduced in IE7\n\t\t\t\t\t\t\t\t\t\tloaded = _xhr.responseText.length;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch(ex) {\n\t\t\t\t\t\t\t\t\ttotal = loaded = 0;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\ttarget.trigger({\n\t\t\t\t\t\t\t\t\ttype: 'progress',\n\t\t\t\t\t\t\t\t\tlengthComputable: !!total,\n\t\t\t\t\t\t\t\t\ttotal: parseInt(total, 10),\n\t\t\t\t\t\t\t\t\tloaded: loaded\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcase 4: // XMLHttpRequest.DONE\n\t\t\t\t\t\t\t\t// release readystatechange handler (mostly for IE)\n\t\t\t\t\t\t\t\t_xhr.onreadystatechange = function() {};\n\n\t\t\t\t\t\t\t\t// usually status 0 is returned when server is unreachable, but FF also fails to status 0 for 408 timeout\n\t\t\t\t\t\t\t\tif (_xhr.status === 0) {\n\t\t\t\t\t\t\t\t\ttarget.trigger('error');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttarget.trigger('load');\n\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\n\t\t\t\t// set request headers\n\t\t\t\tif (!Basic.isEmptyObj(meta.headers)) {\n\t\t\t\t\tBasic.each(meta.headers, function(value, header) {\n\t\t\t\t\t\t_xhr.setRequestHeader(header, value);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// request response type\n\t\t\t\tif (\"\" !== meta.responseType && 'responseType' in _xhr) {\n\t\t\t\t\tif ('json' === meta.responseType && !Env.can('return_response_type', 'json')) { // we can fake this one\n\t\t\t\t\t\t_xhr.responseType = 'text';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_xhr.responseType = meta.responseType;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// send ...\n\t\t\t\tif (!mustSendAsBinary) {\n\t\t\t\t\t_xhr.send(data);\n\t\t\t\t} else {\n\t\t\t\t\tif (_xhr.sendAsBinary) { // Gecko\n\t\t\t\t\t\t_xhr.sendAsBinary(data);\n\t\t\t\t\t} else { // other browsers having support for typed arrays\n\t\t\t\t\t\t(function() {\n\t\t\t\t\t\t\t// mimic Gecko's sendAsBinary\n\t\t\t\t\t\t\tvar ui8a = new Uint8Array(data.length);\n\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\t\t\tui8a[i] = (data.charCodeAt(i) & 0xff);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_xhr.send(ui8a.buffer);\n\t\t\t\t\t\t}());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttarget.trigger('loadstart');\n\t\t\t},\n\n\t\t\tgetStatus: function() {\n\t\t\t\t// according to W3C spec it should return 0 for readyState < 3, but instead it throws an exception\n\t\t\t\ttry {\n\t\t\t\t\tif (_xhr) {\n\t\t\t\t\t\treturn _xhr.status;\n\t\t\t\t\t}\n\t\t\t\t} catch(ex) {}\n\t\t\t\treturn 0;\n\t\t\t},\n\n\t\t\tgetResponse: function(responseType) {\n\t\t\t\tvar I = this.getRuntime();\n\n\t\t\t\ttry {\n\t\t\t\t\tswitch (responseType) {\n\t\t\t\t\t\tcase 'blob':\n\t\t\t\t\t\t\tvar file = new File(I.uid, _xhr.response);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// try to extract file name from content-disposition if possible (might be - not, if CORS for example)\t\n\t\t\t\t\t\t\tvar disposition = _xhr.getResponseHeader('Content-Disposition');\n\t\t\t\t\t\t\tif (disposition) {\n\t\t\t\t\t\t\t\t// extract filename from response header if available\n\t\t\t\t\t\t\t\tvar match = disposition.match(/filename=([\\'\\\"'])([^\\1]+)\\1/);\n\t\t\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\t\t\t_filename = match[2];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfile.name = _filename;\n\n\t\t\t\t\t\t\t// pre-webkit Opera doesn't set type property on the blob response\n\t\t\t\t\t\t\tif (!file.type) {\n\t\t\t\t\t\t\t\tfile.type = Mime.getFileMime(_filename);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn file;\n\n\t\t\t\t\t\tcase 'json':\n\t\t\t\t\t\t\tif (!Env.can('return_response_type', 'json')) {\n\t\t\t\t\t\t\t\treturn _xhr.status === 200 && !!window.JSON ? JSON.parse(_xhr.responseText) : null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn _xhr.response;\n\n\t\t\t\t\t\tcase 'document':\n\t\t\t\t\t\t\treturn _getDocument(_xhr);\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn _xhr.responseText !== '' ? _xhr.responseText : null; // against the specs, but for consistency across the runtimes\n\t\t\t\t\t}\n\t\t\t\t} catch(ex) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\t\t\t\t\n\t\t\t},\n\n\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\ttry {\n\t\t\t\t\treturn _xhr.getAllResponseHeaders();\n\t\t\t\t} catch(ex) {}\n\t\t\t\treturn '';\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif (_xhr) {\n\t\t\t\t\t_xhr.abort();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tself = _filename = null;\n\t\t\t}\n\t\t});\n\n\n\t\t// here we go... ugly fix for ugly bug\n\t\tfunction _preloadAndSend(meta, data) {\n\t\t\tvar target = this, blob, fr;\n\t\t\t\t\n\t\t\t// get original blob\n\t\t\tblob = data.getBlob().getSource();\n\t\t\t\n\t\t\t// preload blob in memory to be sent as binary string\n\t\t\tfr = new window.FileReader();\n\t\t\tfr.onload = function() {\n\t\t\t\t// overwrite original blob\n\t\t\t\tdata.append(data.getBlobName(), new Blob(null, {\n\t\t\t\t\ttype: blob.type,\n\t\t\t\t\tdata: fr.result\n\t\t\t\t}));\n\t\t\t\t// invoke send operation again\n\t\t\t\tself.send.call(target, meta, data);\n\t\t\t};\n\t\t\tfr.readAsBinaryString(blob);\n\t\t}\n\n\t\t\n\t\tfunction _getNativeXHR() {\n\t\t\tif (window.XMLHttpRequest && !(Env.browser === 'IE' && Env.version < 8)) { // IE7 has native XHR but it's buggy\n\t\t\t\treturn new window.XMLHttpRequest();\n\t\t\t} else {\n\t\t\t\treturn (function() {\n\t\t\t\t\tvar progIDs = ['Msxml2.XMLHTTP.6.0', 'Microsoft.XMLHTTP']; // if 6.0 available, use it, otherwise failback to default 3.0\n\t\t\t\t\tfor (var i = 0; i < progIDs.length; i++) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn new ActiveXObject(progIDs[i]);\n\t\t\t\t\t\t} catch (ex) {}\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t}\n\t\t}\n\t\t\n\t\t// @credits Sergey Ilinsky\t(http://www.ilinsky.com/)\n\t\tfunction _getDocument(xhr) {\n\t\t\tvar rXML = xhr.responseXML;\n\t\t\tvar rText = xhr.responseText;\n\t\t\t\n\t\t\t// Try parsing responseText (@see: http://www.ilinsky.com/articles/XMLHttpRequest/#bugs-ie-responseXML-content-type)\n\t\t\tif (Env.browser === 'IE' && rText && rXML && !rXML.documentElement && /[^\\/]+\\/[^\\+]+\\+xml/.test(xhr.getResponseHeader(\"Content-Type\"))) {\n\t\t\t\trXML = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\t\trXML.async = false;\n\t\t\t\trXML.validateOnParse = false;\n\t\t\t\trXML.loadXML(rText);\n\t\t\t}\n\t\n\t\t\t// Check if there is no error in document\n\t\t\tif (rXML) {\n\t\t\t\tif ((Env.browser === 'IE' && rXML.parseError !== 0) || !rXML.documentElement || rXML.documentElement.tagName === \"parsererror\") {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn rXML;\n\t\t}\n\n\n\t\tfunction _prepareMultipart(fd) {\n\t\t\tvar boundary = '----moxieboundary' + new Date().getTime()\n\t\t\t, dashdash = '--'\n\t\t\t, crlf = '\\r\\n'\n\t\t\t, multipart = ''\n\t\t\t, I = this.getRuntime()\n\t\t\t;\n\n\t\t\tif (!I.can('send_binary_string')) {\n\t\t\t\tthrow new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);\n\t\t\t}\n\n\t\t\t_xhr.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + boundary);\n\n\t\t\t// append multipart parameters\n\t\t\tfd.each(function(value, name) {\n\t\t\t\t// Firefox 3.6 failed to convert multibyte characters to UTF-8 in sendAsBinary(), \n\t\t\t\t// so we try it here ourselves with: unescape(encodeURIComponent(value))\n\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t// Build RFC2388 blob\n\t\t\t\t\tmultipart += dashdash + boundary + crlf +\n\t\t\t\t\t\t'Content-Disposition: form-data; name=\"' + name + '\"; filename=\"' + unescape(encodeURIComponent(value.name || 'blob')) + '\"' + crlf +\n\t\t\t\t\t\t'Content-Type: ' + value.type + crlf + crlf +\n\t\t\t\t\t\tvalue.getSource() + crlf;\n\t\t\t\t} else {\n\t\t\t\t\tmultipart += dashdash + boundary + crlf +\n\t\t\t\t\t\t'Content-Disposition: form-data; name=\"' + name + '\"' + crlf + crlf +\n\t\t\t\t\t\tunescape(encodeURIComponent(value)) + crlf;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tmultipart += dashdash + boundary + dashdash + crlf;\n\n\t\t\treturn multipart;\n\t\t}\n\t}\n\n\treturn (extensions.XMLHttpRequest = XMLHttpRequest);\n});\n");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "299:10734");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "650:10675");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "10679:10730");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "680:720");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "721:721");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "726:7567");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7614:8125");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8133:8630");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8692:9439");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9445:10672");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "783:982");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "983:983");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1015:1085");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1092:1114");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1120:1190");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1229:2476");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2501:4774");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "4813:4965");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5001:5272");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5295:5750");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5757:5784");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1262:1323");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1330:1353");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1293:1316");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1404:2078");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2127:2470");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1432:2070");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1474:1517");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1578:1601");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1936:1976");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "1985:1991");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2229:2259");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2267:2446");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2454:2463");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2308:2436");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2345:2379");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2405:2427");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2525:2593");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2601:2677");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2685:2762");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2817:2897");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2905:3078");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2559:2586");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2651:2668");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2736:2753");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2871:2888");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "2966:3069");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "3135:4768");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "3235:4760");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "3405:3410");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "3580:3585");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "3699:3716");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "3735:4155");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "4166:4317");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "4327:4332");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "3750:3965");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "3977:4094");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "3862:3915");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "4050:4083");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "4127:4145");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "4449:4488");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "4613:4730");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "4747:4752");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "4647:4670");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "4698:4720");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "4857:4959");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "4914:4950");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5064:5266");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5174:5200");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5222:5259");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5325:5340");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5360:5744");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5400:5423");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5495:5737");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5553:5591");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5600:5694");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5703:5725");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5648:5685");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5927:6000");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6006:6014");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5938:5981");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "5956:5974");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6068:6093");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6100:7288");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6111:7246");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6161:6202");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6330:6393");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6402:6623");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6632:6653");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6737:6811");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6820:6831");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6491:6552");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6562:6614");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6584:6604");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6763:6802");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6860:7007");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7016:7036");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "6916:6998");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7069:7094");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7119:7177");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7271:7282");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7344:7409");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7415:7424");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7355:7390");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7460:7495");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7477:7489");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7533:7556");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7656:7683");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7717:7750");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7816:7844");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7849:8089");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8094:8121");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "7909:8008");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8049:8083");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8163:8626");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8279:8313");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8331:8621");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8357:8414");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8484:8611");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8533:8604");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8546:8582");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8724:8750");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8755:8783");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "8912:9194");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9246:9419");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9424:9435");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9055:9106");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9112:9130");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9136:9164");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9170:9189");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9262:9414");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9397:9408");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9481:9628");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9629:9629");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9635:9738");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9744:9826");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9866:10590");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "10596:10646");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "10652:10668");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "9675:9733");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "10066:10583");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "10127:10391");
__$coverInitRange("src/javascript/runtime/html5/xhr/XMLHttpRequest.js", "10411:10577");
__$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '299:10734');
define('moxie/runtime/html5/xhr/XMLHttpRequest', [
    'moxie/runtime/html5/Runtime',
    'moxie/core/utils/Basic',
    'moxie/core/utils/Mime',
    'moxie/core/utils/Url',
    'moxie/file/File',
    'moxie/file/Blob',
    'moxie/xhr/FormData',
    'moxie/core/Exceptions',
    'moxie/core/utils/Env'
], function (extensions, Basic, Mime, Url, File, Blob, FormData, x, Env) {
    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '650:10675');
    function XMLHttpRequest() {
        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '680:720');
        var self = this, _xhr, _filename;
        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '721:721');
        ;
        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '726:7567');
        Basic.extend(this, {
            send: function (meta, data) {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '783:982');
                var target = this, isGecko2_5_6 = Env.browser === 'Mozilla' && Env.version >= 4 && Env.version < 7, isAndroidBrowser = Env.browser === 'Android Browser', mustSendAsBinary = false;
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '983:983');
                ;
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1015:1085');
                _filename = meta.url.replace(/^.+?\/([\w\-\.]+)$/, '$1').toLowerCase();
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1092:1114');
                _xhr = _getNativeXHR();
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1120:1190');
                _xhr.open(meta.method, meta.url, meta.async, meta.user, meta.password);
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1229:2476');
                if (data instanceof Blob) {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1262:1323');
                    if (data.isDetached()) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1293:1316');
                        mustSendAsBinary = true;
                    }
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1330:1353');
                    data = data.getSource();
                } else if (data instanceof FormData) {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1404:2078');
                    if (data.hasBlob()) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1432:2070');
                        if (data.getBlob().isDetached()) {
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1474:1517');
                            data = _prepareMultipart.call(target, data);
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1578:1601');
                            mustSendAsBinary = true;
                        } else if ((isGecko2_5_6 || isAndroidBrowser) && Basic.typeOf(data.getBlob().getSource()) === 'blob' && window.FileReader) {
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1936:1976');
                            _preloadAndSend.call(target, meta, data);
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '1985:1991');
                            return;
                        }
                    }
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2127:2470');
                    if (data instanceof FormData) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2229:2259');
                        var fd = new window.FormData();
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2267:2446');
                        data.each(function (value, name) {
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2308:2436');
                            if (value instanceof Blob) {
                                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2345:2379');
                                fd.append(name, value.getSource());
                            } else {
                                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2405:2427');
                                fd.append(name, value);
                            }
                        });
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2454:2463');
                        data = fd;
                    }
                }
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2501:4774');
                if (_xhr.upload) {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2525:2593');
                    if (meta.withCredentials) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2559:2586');
                        _xhr.withCredentials = true;
                    }
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2601:2677');
                    _xhr.addEventListener('load', function (e) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2651:2668');
                        target.trigger(e);
                    });
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2685:2762');
                    _xhr.addEventListener('error', function (e) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2736:2753');
                        target.trigger(e);
                    });
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2817:2897');
                    _xhr.addEventListener('progress', function (e) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2871:2888');
                        target.trigger(e);
                    });
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2905:3078');
                    _xhr.upload.addEventListener('progress', function (e) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '2966:3069');
                        target.trigger({
                            type: 'UploadProgress',
                            loaded: e.loaded,
                            total: e.total
                        });
                    });
                } else {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '3135:4768');
                    _xhr.onreadystatechange = function onReadyStateChange() {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '3235:4760');
                        switch (_xhr.readyState) {
                        case 1:
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '3405:3410');
                            break;
                        case 2:
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '3580:3585');
                            break;
                        case 3:
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '3699:3716');
                            var total, loaded;
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '3735:4155');
                            try {
                                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '3750:3965');
                                if (Url.hasSameOrigin(meta.url)) {
                                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '3862:3915');
                                    total = _xhr.getResponseHeader('Content-Length') || 0;
                                }
                                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '3977:4094');
                                if (_xhr.responseText) {
                                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '4050:4083');
                                    loaded = _xhr.responseText.length;
                                }
                            } catch (ex) {
                                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '4127:4145');
                                total = loaded = 0;
                            }
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '4166:4317');
                            target.trigger({
                                type: 'progress',
                                lengthComputable: !!total,
                                total: parseInt(total, 10),
                                loaded: loaded
                            });
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '4327:4332');
                            break;
                        case 4:
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '4449:4488');
                            _xhr.onreadystatechange = function () {
                            };
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '4613:4730');
                            if (_xhr.status === 0) {
                                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '4647:4670');
                                target.trigger('error');
                            } else {
                                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '4698:4720');
                                target.trigger('load');
                            }
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '4747:4752');
                            break;
                        }
                    };
                }
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '4813:4965');
                if (!Basic.isEmptyObj(meta.headers)) {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '4857:4959');
                    Basic.each(meta.headers, function (value, header) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '4914:4950');
                        _xhr.setRequestHeader(header, value);
                    });
                }
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5001:5272');
                if ('' !== meta.responseType && 'responseType' in _xhr) {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5064:5266');
                    if ('json' === meta.responseType && !Env.can('return_response_type', 'json')) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5174:5200');
                        _xhr.responseType = 'text';
                    } else {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5222:5259');
                        _xhr.responseType = meta.responseType;
                    }
                }
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5295:5750');
                if (!mustSendAsBinary) {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5325:5340');
                    _xhr.send(data);
                } else {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5360:5744');
                    if (_xhr.sendAsBinary) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5400:5423');
                        _xhr.sendAsBinary(data);
                    } else {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5495:5737');
                        (function () {
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5553:5591');
                            var ui8a = new Uint8Array(data.length);
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5600:5694');
                            for (var i = 0; i < data.length; i++) {
                                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5648:5685');
                                ui8a[i] = data.charCodeAt(i) & 255;
                            }
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5703:5725');
                            _xhr.send(ui8a.buffer);
                        }());
                    }
                }
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5757:5784');
                target.trigger('loadstart');
            },
            getStatus: function () {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5927:6000');
                try {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5938:5981');
                    if (_xhr) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '5956:5974');
                        return _xhr.status;
                    }
                } catch (ex) {
                }
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6006:6014');
                return 0;
            },
            getResponse: function (responseType) {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6068:6093');
                var I = this.getRuntime();
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6100:7288');
                try {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6111:7246');
                    switch (responseType) {
                    case 'blob':
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6161:6202');
                        var file = new File(I.uid, _xhr.response);
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6330:6393');
                        var disposition = _xhr.getResponseHeader('Content-Disposition');
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6402:6623');
                        if (disposition) {
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6491:6552');
                            var match = disposition.match(/filename=([\'\"'])([^\1]+)\1/);
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6562:6614');
                            if (match) {
                                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6584:6604');
                                _filename = match[2];
                            }
                        }
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6632:6653');
                        file.name = _filename;
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6737:6811');
                        if (!file.type) {
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6763:6802');
                            file.type = Mime.getFileMime(_filename);
                        }
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6820:6831');
                        return file;
                    case 'json':
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6860:7007');
                        if (!Env.can('return_response_type', 'json')) {
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '6916:6998');
                            return _xhr.status === 200 && !!window.JSON ? JSON.parse(_xhr.responseText) : null;
                        }
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7016:7036');
                        return _xhr.response;
                    case 'document':
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7069:7094');
                        return _getDocument(_xhr);
                    default:
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7119:7177');
                        return _xhr.responseText !== '' ? _xhr.responseText : null;
                    }
                } catch (ex) {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7271:7282');
                    return null;
                }
            },
            getAllResponseHeaders: function () {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7344:7409');
                try {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7355:7390');
                    return _xhr.getAllResponseHeaders();
                } catch (ex) {
                }
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7415:7424');
                return '';
            },
            abort: function () {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7460:7495');
                if (_xhr) {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7477:7489');
                    _xhr.abort();
                }
            },
            destroy: function () {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7533:7556');
                self = _filename = null;
            }
        });
        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7614:8125');
        function _preloadAndSend(meta, data) {
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7656:7683');
            var target = this, blob, fr;
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7717:7750');
            blob = data.getBlob().getSource();
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7816:7844');
            fr = new window.FileReader();
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7849:8089');
            fr.onload = function () {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '7909:8008');
                data.append(data.getBlobName(), new Blob(null, {
                    type: blob.type,
                    data: fr.result
                }));
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8049:8083');
                self.send.call(target, meta, data);
            };
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8094:8121');
            fr.readAsBinaryString(blob);
        }
        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8133:8630');
        function _getNativeXHR() {
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8163:8626');
            if (window.XMLHttpRequest && !(Env.browser === 'IE' && Env.version < 8)) {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8279:8313');
                return new window.XMLHttpRequest();
            } else {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8331:8621');
                return function () {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8357:8414');
                    var progIDs = [
                            'Msxml2.XMLHTTP.6.0',
                            'Microsoft.XMLHTTP'
                        ];
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8484:8611');
                    for (var i = 0; i < progIDs.length; i++) {
                        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8533:8604');
                        try {
                            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8546:8582');
                            return new ActiveXObject(progIDs[i]);
                        } catch (ex) {
                        }
                    }
                }();
            }
        }
        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8692:9439');
        function _getDocument(xhr) {
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8724:8750');
            var rXML = xhr.responseXML;
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8755:8783');
            var rText = xhr.responseText;
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '8912:9194');
            if (Env.browser === 'IE' && rText && rXML && !rXML.documentElement && /[^\/]+\/[^\+]+\+xml/.test(xhr.getResponseHeader('Content-Type'))) {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9055:9106');
                rXML = new window.ActiveXObject('Microsoft.XMLDOM');
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9112:9130');
                rXML.async = false;
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9136:9164');
                rXML.validateOnParse = false;
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9170:9189');
                rXML.loadXML(rText);
            }
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9246:9419');
            if (rXML) {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9262:9414');
                if (Env.browser === 'IE' && rXML.parseError !== 0 || !rXML.documentElement || rXML.documentElement.tagName === 'parsererror') {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9397:9408');
                    return null;
                }
            }
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9424:9435');
            return rXML;
        }
        __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9445:10672');
        function _prepareMultipart(fd) {
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9481:9628');
            var boundary = '----moxieboundary' + new Date().getTime(), dashdash = '--', crlf = '\r\n', multipart = '', I = this.getRuntime();
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9629:9629');
            ;
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9635:9738');
            if (!I.can('send_binary_string')) {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9675:9733');
                throw new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);
            }
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9744:9826');
            _xhr.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + boundary);
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '9866:10590');
            fd.each(function (value, name) {
                __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '10066:10583');
                if (value instanceof Blob) {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '10127:10391');
                    multipart += dashdash + boundary + crlf + 'Content-Disposition: form-data; name="' + name + '"; filename="' + unescape(encodeURIComponent(value.name || 'blob')) + '"' + crlf + 'Content-Type: ' + value.type + crlf + crlf + value.getSource() + crlf;
                } else {
                    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '10411:10577');
                    multipart += dashdash + boundary + crlf + 'Content-Disposition: form-data; name="' + name + '"' + crlf + crlf + unescape(encodeURIComponent(value)) + crlf;
                }
            });
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '10596:10646');
            multipart += dashdash + boundary + dashdash + crlf;
            __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '10652:10668');
            return multipart;
        }
    }
    __$coverCall('src/javascript/runtime/html5/xhr/XMLHttpRequest.js', '10679:10730');
    return extensions.XMLHttpRequest = XMLHttpRequest;
});

// Included from: src/javascript/runtime/html5/utils/BinaryReader.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/utils/BinaryReader.js", "/**\n * BinaryReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/utils/BinaryReader\n@private\n*/\ndefine(\"moxie/runtime/html5/utils/BinaryReader\", [], function() {\n\treturn function() {\n\t\tvar II = false, bin;\n\n\t\t// Private functions\n\t\tfunction read(idx, size) {\n\t\t\tvar mv = II ? 0 : -8 * (size - 1), sum = 0, i;\n\n\t\t\tfor (i = 0; i < size; i++) {\n\t\t\t\tsum |= (bin.charCodeAt(idx + i) << Math.abs(mv + i*8));\n\t\t\t}\n\n\t\t\treturn sum;\n\t\t}\n\n\t\tfunction putstr(segment, idx, length) {\n\t\t\tlength = arguments.length === 3 ? length : bin.length - idx - 1;\n\t\t\tbin = bin.substr(0, idx) + segment + bin.substr(length + idx);\n\t\t}\n\n\t\tfunction write(idx, num, size) {\n\t\t\tvar str = '', mv = II ? 0 : -8 * (size - 1), i;\n\n\t\t\tfor (i = 0; i < size; i++) {\n\t\t\t\tstr += String.fromCharCode((num >> Math.abs(mv + i*8)) & 255);\n\t\t\t}\n\n\t\t\tputstr(str, idx, size);\n\t\t}\n\n\t\t// Public functions\n\t\treturn {\n\t\t\tII: function(order) {\n\t\t\t\tif (order === undefined) {\n\t\t\t\t\treturn II;\n\t\t\t\t} else {\n\t\t\t\t\tII = order;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tinit: function(binData) {\n\t\t\t\tII = false;\n\t\t\t\tbin = binData;\n\t\t\t},\n\n\t\t\tSEGMENT: function(idx, length, segment) {\n\t\t\t\tswitch (arguments.length) {\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturn bin.substr(idx, bin.length - idx - 1);\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturn bin.substr(idx, length);\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tputstr(segment, idx, length);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault: return bin;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tBYTE: function(idx) {\n\t\t\t\treturn read(idx, 1);\n\t\t\t},\n\n\t\t\tSHORT: function(idx) {\n\t\t\t\treturn read(idx, 2);\n\t\t\t},\n\n\t\t\tLONG: function(idx, num) {\n\t\t\t\tif (num === undefined) {\n\t\t\t\t\treturn read(idx, 4);\n\t\t\t\t} else {\n\t\t\t\t\twrite(idx, num, 4);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tSLONG: function(idx) { // 2's complement notation\n\t\t\t\tvar num = read(idx, 4);\n\n\t\t\t\treturn (num > 2147483647 ? num - 4294967296 : num);\n\t\t\t},\n\n\t\t\tSTRING: function(idx, size) {\n\t\t\t\tvar str = '';\n\n\t\t\t\tfor (size += idx; idx < size; idx++) {\n\t\t\t\t\tstr += String.fromCharCode(read(idx, 1));\n\t\t\t\t}\n\n\t\t\t\treturn str;\n\t\t\t}\n\t\t};\n\t};\n});\n");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "265:2092");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "332:2088");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "354:373");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "401:594");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "599:775");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "780:999");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1026:2084");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "431:476");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "482:574");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "580:590");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "515:569");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "642:705");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "710:771");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "816:862");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "868:967");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "973:995");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "901:962");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1064:1141");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1096:1105");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1125:1135");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1183:1193");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1199:1212");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1270:1506");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1317:1361");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1382:1412");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1433:1461");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1469:1474");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1490:1500");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1544:1563");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1602:1621");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1664:1757");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1694:1713");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1733:1751");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1823:1845");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1852:1902");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1948:1960");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "1967:2057");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "2064:2074");
__$coverInitRange("src/javascript/runtime/html5/utils/BinaryReader.js", "2011:2051");
__$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '265:2092');
define('moxie/runtime/html5/utils/BinaryReader', [], function () {
    __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '332:2088');
    return function () {
        __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '354:373');
        var II = false, bin;
        __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '401:594');
        function read(idx, size) {
            __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '431:476');
            var mv = II ? 0 : -8 * (size - 1), sum = 0, i;
            __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '482:574');
            for (i = 0; i < size; i++) {
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '515:569');
                sum |= bin.charCodeAt(idx + i) << Math.abs(mv + i * 8);
            }
            __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '580:590');
            return sum;
        }
        __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '599:775');
        function putstr(segment, idx, length) {
            __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '642:705');
            length = arguments.length === 3 ? length : bin.length - idx - 1;
            __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '710:771');
            bin = bin.substr(0, idx) + segment + bin.substr(length + idx);
        }
        __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '780:999');
        function write(idx, num, size) {
            __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '816:862');
            var str = '', mv = II ? 0 : -8 * (size - 1), i;
            __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '868:967');
            for (i = 0; i < size; i++) {
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '901:962');
                str += String.fromCharCode(num >> Math.abs(mv + i * 8) & 255);
            }
            __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '973:995');
            putstr(str, idx, size);
        }
        __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1026:2084');
        return {
            II: function (order) {
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1064:1141');
                if (order === undefined) {
                    __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1096:1105');
                    return II;
                } else {
                    __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1125:1135');
                    II = order;
                }
            },
            init: function (binData) {
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1183:1193');
                II = false;
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1199:1212');
                bin = binData;
            },
            SEGMENT: function (idx, length, segment) {
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1270:1506');
                switch (arguments.length) {
                case 1:
                    __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1317:1361');
                    return bin.substr(idx, bin.length - idx - 1);
                case 2:
                    __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1382:1412');
                    return bin.substr(idx, length);
                case 3:
                    __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1433:1461');
                    putstr(segment, idx, length);
                    __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1469:1474');
                    break;
                default:
                    __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1490:1500');
                    return bin;
                }
            },
            BYTE: function (idx) {
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1544:1563');
                return read(idx, 1);
            },
            SHORT: function (idx) {
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1602:1621');
                return read(idx, 2);
            },
            LONG: function (idx, num) {
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1664:1757');
                if (num === undefined) {
                    __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1694:1713');
                    return read(idx, 4);
                } else {
                    __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1733:1751');
                    write(idx, num, 4);
                }
            },
            SLONG: function (idx) {
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1823:1845');
                var num = read(idx, 4);
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1852:1902');
                return num > 2147483647 ? num - 4294967296 : num;
            },
            STRING: function (idx, size) {
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1948:1960');
                var str = '';
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '1967:2057');
                for (size += idx; idx < size; idx++) {
                    __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '2011:2051');
                    str += String.fromCharCode(read(idx, 1));
                }
                __$coverCall('src/javascript/runtime/html5/utils/BinaryReader.js', '2064:2074');
                return str;
            }
        };
    };
});

// Included from: src/javascript/runtime/html5/image/JPEGHeaders.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/image/JPEGHeaders.js", "/**\n * JPEGHeaders.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n \n/**\n@class moxie/runtime/html5/image/JPEGHeaders\n@private\n*/\ndefine(\"moxie/runtime/html5/image/JPEGHeaders\", [\n\t\"moxie/runtime/html5/utils/BinaryReader\"\n], function(BinaryReader) {\n\t\n\treturn function JPEGHeaders(data) {\n\t\tvar headers = [], read, idx, marker, length = 0;\n\n\t\tread = new BinaryReader();\n\t\tread.init(data);\n\n\t\t// Check if data is jpeg\n\t\tif (read.SHORT(0) !== 0xFFD8) {\n\t\t\treturn;\n\t\t}\n\n\t\tidx = 2;\n\n\t\twhile (idx <= data.length) {\n\t\t\tmarker = read.SHORT(idx);\n\n\t\t\t// omit RST (restart) markers\n\t\t\tif (marker >= 0xFFD0 && marker <= 0xFFD7) {\n\t\t\t\tidx += 2;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// no headers allowed after SOS marker\n\t\t\tif (marker === 0xFFDA || marker === 0xFFD9) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlength = read.SHORT(idx + 2) + 2;\n\n\t\t\t// APPn marker detected\n\t\t\tif (marker >= 0xFFE1 && marker <= 0xFFEF) {\n\t\t\t\theaders.push({\n\t\t\t\t\thex: marker,\n\t\t\t\t\tname: 'APP' + (marker & 0x000F),\n\t\t\t\t\tstart: idx,\n\t\t\t\t\tlength: length,\n\t\t\t\t\tsegment: read.SEGMENT(idx, length)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tidx += length;\n\t\t}\n\n\t\tread.init(null); // free memory\n\n\t\treturn {\n\t\t\theaders: headers,\n\n\t\t\trestore: function(data) {\n\t\t\t\tvar max, i;\n\n\t\t\t\tread.init(data);\n\n\t\t\t\tidx = read.SHORT(2) == 0xFFE0 ? 4 + read.SHORT(4) : 2;\n\n\t\t\t\tfor (i = 0, max = headers.length; i < max; i++) {\n\t\t\t\t\tread.SEGMENT(idx, 0, headers[i].segment);\n\t\t\t\t\tidx += headers[i].length;\n\t\t\t\t}\n\n\t\t\t\tdata = read.SEGMENT();\n\t\t\t\tread.init(null);\n\t\t\t\treturn data;\n\t\t\t},\n\n\t\t\tstrip: function(data) {\n\t\t\t\tvar headers, jpegHeaders, i;\n\n\t\t\t\tjpegHeaders = new JPEGHeaders(data);\n\t\t\t\theaders = jpegHeaders.headers;\n\t\t\t\tjpegHeaders.purge();\n\n\t\t\t\tread.init(data);\n\n\t\t\t\ti = headers.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tread.SEGMENT(headers[i].start, headers[i].length, '');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdata = read.SEGMENT();\n\t\t\t\tread.init(null);\n\t\t\t\treturn data;\n\t\t\t},\n\n\t\t\tget: function(name) {\n\t\t\t\tvar array = [];\n\n\t\t\t\tfor (var i = 0, max = headers.length; i < max; i++) {\n\t\t\t\t\tif (headers[i].name === name.toUpperCase()) {\n\t\t\t\t\t\tarray.push(headers[i].segment);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn array;\n\t\t\t},\n\n\t\t\tset: function(name, segment) {\n\t\t\t\tvar array = [], i, ii, max;\n\n\t\t\t\tif (typeof(segment) === 'string') {\n\t\t\t\t\tarray.push(segment);\n\t\t\t\t} else {\n\t\t\t\t\tarray = segment;\n\t\t\t\t}\n\n\t\t\t\tfor (i = ii = 0, max = headers.length; i < max; i++) {\n\t\t\t\t\tif (headers[i].name === name.toUpperCase()) {\n\t\t\t\t\t\theaders[i].segment = array[ii];\n\t\t\t\t\t\theaders[i].length = array[ii].length;\n\t\t\t\t\t\tii++;\n\t\t\t\t\t}\n\t\t\t\t\tif (ii >= array.length) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpurge: function() {\n\t\t\t\theaders = [];\n\t\t\t\tread.init(null);\n\t\t\t\tread = null;\n\t\t\t}\n\t\t};\n\t};\n});\n");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "264:2751");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "387:2747");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "425:472");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "477:502");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "506:521");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "553:598");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "603:610");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "615:1195");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1200:1215");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1235:2743");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "588:594");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "647:671");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "710:785");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "833:893");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "899:931");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "964:1172");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1178:1191");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "758:766");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "772:780");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "883:888");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1012:1167");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1299:1309");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1316:1331");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1338:1391");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1398:1530");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1537:1558");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1564:1579");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1585:1596");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1453:1493");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1500:1524");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1636:1663");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1670:1705");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1711:1740");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1746:1765");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1772:1787");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1794:1812");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1818:1896");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1907:1928");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1934:1949");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1955:1966");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "1837:1890");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2004:2018");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2025:2179");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2185:2197");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2084:2173");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2136:2166");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2244:2270");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2277:2378");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2385:2647");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2318:2337");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2357:2372");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2445:2590");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2597:2641");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2497:2527");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2535:2571");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2579:2583");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2629:2634");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2683:2695");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2701:2716");
__$coverInitRange("src/javascript/runtime/html5/image/JPEGHeaders.js", "2722:2733");
__$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '264:2751');
define('moxie/runtime/html5/image/JPEGHeaders', ['moxie/runtime/html5/utils/BinaryReader'], function (BinaryReader) {
    __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '387:2747');
    return function JPEGHeaders(data) {
        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '425:472');
        var headers = [], read, idx, marker, length = 0;
        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '477:502');
        read = new BinaryReader();
        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '506:521');
        read.init(data);
        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '553:598');
        if (read.SHORT(0) !== 65496) {
            __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '588:594');
            return;
        }
        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '603:610');
        idx = 2;
        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '615:1195');
        while (idx <= data.length) {
            __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '647:671');
            marker = read.SHORT(idx);
            __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '710:785');
            if (marker >= 65488 && marker <= 65495) {
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '758:766');
                idx += 2;
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '772:780');
                continue;
            }
            __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '833:893');
            if (marker === 65498 || marker === 65497) {
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '883:888');
                break;
            }
            __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '899:931');
            length = read.SHORT(idx + 2) + 2;
            __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '964:1172');
            if (marker >= 65505 && marker <= 65519) {
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1012:1167');
                headers.push({
                    hex: marker,
                    name: 'APP' + (marker & 15),
                    start: idx,
                    length: length,
                    segment: read.SEGMENT(idx, length)
                });
            }
            __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1178:1191');
            idx += length;
        }
        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1200:1215');
        read.init(null);
        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1235:2743');
        return {
            headers: headers,
            restore: function (data) {
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1299:1309');
                var max, i;
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1316:1331');
                read.init(data);
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1338:1391');
                idx = read.SHORT(2) == 65504 ? 4 + read.SHORT(4) : 2;
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1398:1530');
                for (i = 0, max = headers.length; i < max; i++) {
                    __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1453:1493');
                    read.SEGMENT(idx, 0, headers[i].segment);
                    __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1500:1524');
                    idx += headers[i].length;
                }
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1537:1558');
                data = read.SEGMENT();
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1564:1579');
                read.init(null);
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1585:1596');
                return data;
            },
            strip: function (data) {
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1636:1663');
                var headers, jpegHeaders, i;
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1670:1705');
                jpegHeaders = new JPEGHeaders(data);
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1711:1740');
                headers = jpegHeaders.headers;
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1746:1765');
                jpegHeaders.purge();
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1772:1787');
                read.init(data);
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1794:1812');
                i = headers.length;
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1818:1896');
                while (i--) {
                    __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1837:1890');
                    read.SEGMENT(headers[i].start, headers[i].length, '');
                }
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1907:1928');
                data = read.SEGMENT();
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1934:1949');
                read.init(null);
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '1955:1966');
                return data;
            },
            get: function (name) {
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2004:2018');
                var array = [];
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2025:2179');
                for (var i = 0, max = headers.length; i < max; i++) {
                    __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2084:2173');
                    if (headers[i].name === name.toUpperCase()) {
                        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2136:2166');
                        array.push(headers[i].segment);
                    }
                }
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2185:2197');
                return array;
            },
            set: function (name, segment) {
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2244:2270');
                var array = [], i, ii, max;
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2277:2378');
                if (typeof segment === 'string') {
                    __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2318:2337');
                    array.push(segment);
                } else {
                    __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2357:2372');
                    array = segment;
                }
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2385:2647');
                for (i = ii = 0, max = headers.length; i < max; i++) {
                    __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2445:2590');
                    if (headers[i].name === name.toUpperCase()) {
                        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2497:2527');
                        headers[i].segment = array[ii];
                        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2535:2571');
                        headers[i].length = array[ii].length;
                        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2579:2583');
                        ii++;
                    }
                    __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2597:2641');
                    if (ii >= array.length) {
                        __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2629:2634');
                        break;
                    }
                }
            },
            purge: function () {
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2683:2695');
                headers = [];
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2701:2716');
                read.init(null);
                __$coverCall('src/javascript/runtime/html5/image/JPEGHeaders.js', '2722:2733');
                read = null;
            }
        };
    };
});

// Included from: src/javascript/runtime/html5/image/ExifParser.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/image/ExifParser.js", "/**\n * ExifParser.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/ExifParser\n@private\n*/\ndefine(\"moxie/runtime/html5/image/ExifParser\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/html5/utils/BinaryReader\"\n], function(Basic, BinaryReader) {\n\t\n\treturn function ExifParser() {\n\t\t// Private ExifParser fields\n\t\tvar data, tags, Tiff, offsets = {}, tagDescs;\n\n\t\tdata = new BinaryReader();\n\n\t\ttags = {\n\t\t\ttiff : {\n\t\t\t\t/*\n\t\t\t\tThe image orientation viewed in terms of rows and columns.\n\n\t\t\t\t1 = The 0th row is at the visual top of the image, and the 0th column is the visual left-hand side.\n\t\t\t\t2 = The 0th row is at the visual top of the image, and the 0th column is the visual right-hand side.\n\t\t\t\t3 = The 0th row is at the visual bottom of the image, and the 0th column is the visual right-hand side.\n\t\t\t\t4 = The 0th row is at the visual bottom of the image, and the 0th column is the visual left-hand side.\n\t\t\t\t5 = The 0th row is the visual left-hand side of the image, and the 0th column is the visual top.\n\t\t\t\t6 = The 0th row is the visual right-hand side of the image, and the 0th column is the visual top.\n\t\t\t\t7 = The 0th row is the visual right-hand side of the image, and the 0th column is the visual bottom.\n\t\t\t\t8 = The 0th row is the visual left-hand side of the image, and the 0th column is the visual bottom.\n\t\t\t\t*/\n\t\t\t\t0x0112: 'Orientation',\n\t\t\t\t0x010E: 'ImageDescription',\n\t\t\t\t0x010F: 'Make',\n\t\t\t\t0x0110: 'Model',\n\t\t\t\t0x0131: 'Software',\n\t\t\t\t0x8769: 'ExifIFDPointer',\n\t\t\t\t0x8825:\t'GPSInfoIFDPointer'\n\t\t\t},\n\t\t\texif : {\n\t\t\t\t0x9000: 'ExifVersion',\n\t\t\t\t0xA001: 'ColorSpace',\n\t\t\t\t0xA002: 'PixelXDimension',\n\t\t\t\t0xA003: 'PixelYDimension',\n\t\t\t\t0x9003: 'DateTimeOriginal',\n\t\t\t\t0x829A: 'ExposureTime',\n\t\t\t\t0x829D: 'FNumber',\n\t\t\t\t0x8827: 'ISOSpeedRatings',\n\t\t\t\t0x9201: 'ShutterSpeedValue',\n\t\t\t\t0x9202: 'ApertureValue'\t,\n\t\t\t\t0x9207: 'MeteringMode',\n\t\t\t\t0x9208: 'LightSource',\n\t\t\t\t0x9209: 'Flash',\n\t\t\t\t0x920A: 'FocalLength',\n\t\t\t\t0xA402: 'ExposureMode',\n\t\t\t\t0xA403: 'WhiteBalance',\n\t\t\t\t0xA406: 'SceneCaptureType',\n\t\t\t\t0xA404: 'DigitalZoomRatio',\n\t\t\t\t0xA408: 'Contrast',\n\t\t\t\t0xA409: 'Saturation',\n\t\t\t\t0xA40A: 'Sharpness'\n\t\t\t},\n\t\t\tgps : {\n\t\t\t\t0x0000: 'GPSVersionID',\n\t\t\t\t0x0001: 'GPSLatitudeRef',\n\t\t\t\t0x0002: 'GPSLatitude',\n\t\t\t\t0x0003: 'GPSLongitudeRef',\n\t\t\t\t0x0004: 'GPSLongitude'\n\t\t\t}\n\t\t};\n\n\t\ttagDescs = {\n\t\t\t'ColorSpace': {\n\t\t\t\t1: 'sRGB',\n\t\t\t\t0: 'Uncalibrated'\n\t\t\t},\n\n\t\t\t'MeteringMode': {\n\t\t\t\t0: 'Unknown',\n\t\t\t\t1: 'Average',\n\t\t\t\t2: 'CenterWeightedAverage',\n\t\t\t\t3: 'Spot',\n\t\t\t\t4: 'MultiSpot',\n\t\t\t\t5: 'Pattern',\n\t\t\t\t6: 'Partial',\n\t\t\t\t255: 'Other'\n\t\t\t},\n\n\t\t\t'LightSource': {\n\t\t\t\t1: 'Daylight',\n\t\t\t\t2: 'Fliorescent',\n\t\t\t\t3: 'Tungsten',\n\t\t\t\t4: 'Flash',\n\t\t\t\t9: 'Fine weather',\n\t\t\t\t10: 'Cloudy weather',\n\t\t\t\t11: 'Shade',\n\t\t\t\t12: 'Daylight fluorescent (D 5700 - 7100K)',\n\t\t\t\t13: 'Day white fluorescent (N 4600 -5400K)',\n\t\t\t\t14: 'Cool white fluorescent (W 3900 - 4500K)',\n\t\t\t\t15: 'White fluorescent (WW 3200 - 3700K)',\n\t\t\t\t17: 'Standard light A',\n\t\t\t\t18: 'Standard light B',\n\t\t\t\t19: 'Standard light C',\n\t\t\t\t20: 'D55',\n\t\t\t\t21: 'D65',\n\t\t\t\t22: 'D75',\n\t\t\t\t23: 'D50',\n\t\t\t\t24: 'ISO studio tungsten',\n\t\t\t\t255: 'Other'\n\t\t\t},\n\n\t\t\t'Flash': {\n\t\t\t\t0x0000: 'Flash did not fire.',\n\t\t\t\t0x0001: 'Flash fired.',\n\t\t\t\t0x0005: 'Strobe return light not detected.',\n\t\t\t\t0x0007: 'Strobe return light detected.',\n\t\t\t\t0x0009: 'Flash fired, compulsory flash mode',\n\t\t\t\t0x000D: 'Flash fired, compulsory flash mode, return light not detected',\n\t\t\t\t0x000F: 'Flash fired, compulsory flash mode, return light detected',\n\t\t\t\t0x0010: 'Flash did not fire, compulsory flash mode',\n\t\t\t\t0x0018: 'Flash did not fire, auto mode',\n\t\t\t\t0x0019: 'Flash fired, auto mode',\n\t\t\t\t0x001D: 'Flash fired, auto mode, return light not detected',\n\t\t\t\t0x001F: 'Flash fired, auto mode, return light detected',\n\t\t\t\t0x0020: 'No flash function',\n\t\t\t\t0x0041: 'Flash fired, red-eye reduction mode',\n\t\t\t\t0x0045: 'Flash fired, red-eye reduction mode, return light not detected',\n\t\t\t\t0x0047: 'Flash fired, red-eye reduction mode, return light detected',\n\t\t\t\t0x0049: 'Flash fired, compulsory flash mode, red-eye reduction mode',\n\t\t\t\t0x004D: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',\n\t\t\t\t0x004F: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',\n\t\t\t\t0x0059: 'Flash fired, auto mode, red-eye reduction mode',\n\t\t\t\t0x005D: 'Flash fired, auto mode, return light not detected, red-eye reduction mode',\n\t\t\t\t0x005F: 'Flash fired, auto mode, return light detected, red-eye reduction mode'\n\t\t\t},\n\n\t\t\t'ExposureMode': {\n\t\t\t\t0: 'Auto exposure',\n\t\t\t\t1: 'Manual exposure',\n\t\t\t\t2: 'Auto bracket'\n\t\t\t},\n\n\t\t\t'WhiteBalance': {\n\t\t\t\t0: 'Auto white balance',\n\t\t\t\t1: 'Manual white balance'\n\t\t\t},\n\n\t\t\t'SceneCaptureType': {\n\t\t\t\t0: 'Standard',\n\t\t\t\t1: 'Landscape',\n\t\t\t\t2: 'Portrait',\n\t\t\t\t3: 'Night scene'\n\t\t\t},\n\n\t\t\t'Contrast': {\n\t\t\t\t0: 'Normal',\n\t\t\t\t1: 'Soft',\n\t\t\t\t2: 'Hard'\n\t\t\t},\n\n\t\t\t'Saturation': {\n\t\t\t\t0: 'Normal',\n\t\t\t\t1: 'Low saturation',\n\t\t\t\t2: 'High saturation'\n\t\t\t},\n\n\t\t\t'Sharpness': {\n\t\t\t\t0: 'Normal',\n\t\t\t\t1: 'Soft',\n\t\t\t\t2: 'Hard'\n\t\t\t},\n\n\t\t\t// GPS related\n\t\t\t'GPSLatitudeRef': {\n\t\t\t\tN: 'North latitude',\n\t\t\t\tS: 'South latitude'\n\t\t\t},\n\n\t\t\t'GPSLongitudeRef': {\n\t\t\t\tE: 'East longitude',\n\t\t\t\tW: 'West longitude'\n\t\t\t}\n\t\t};\n\n\t\tfunction extractTags(IFD_offset, tags2extract) {\n\t\t\tvar length = data.SHORT(IFD_offset), i, ii,\n\t\t\t\ttag, type, count, tagOffset, offset, value, values = [], hash = {};\n\n\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\t// Set binary reader pointer to beginning of the next tag\n\t\t\t\toffset = tagOffset = IFD_offset + 12 * i + 2;\n\n\t\t\t\ttag = tags2extract[data.SHORT(offset)];\n\n\t\t\t\tif (tag === undefined) {\n\t\t\t\t\tcontinue; // Not the tag we requested\n\t\t\t\t}\n\n\t\t\t\ttype = data.SHORT(offset+=2);\n\t\t\t\tcount = data.LONG(offset+=2);\n\n\t\t\t\toffset += 4;\n\t\t\t\tvalues = [];\n\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase 1: // BYTE\n\t\t\t\t\tcase 7: // UNDEFINED\n\t\t\t\t\t\tif (count > 4) {\n\t\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.BYTE(offset + ii);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2: // STRING\n\t\t\t\t\t\tif (count > 4) {\n\t\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\thash[tag] = data.STRING(offset, count - 1);\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tcase 3: // SHORT\n\t\t\t\t\t\tif (count > 2) {\n\t\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.SHORT(offset + ii*2);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 4: // LONG\n\t\t\t\t\t\tif (count > 1) {\n\t\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.LONG(offset + ii*4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 5: // RATIONAL\n\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.LONG(offset + ii*4) / data.LONG(offset + ii*4 + 4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 9: // SLONG\n\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.SLONG(offset + ii*4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 10: // SRATIONAL\n\t\t\t\t\t\toffset = data.LONG(offset) + offsets.tiffHeader;\n\n\t\t\t\t\t\tfor (ii = 0; ii < count; ii++) {\n\t\t\t\t\t\t\tvalues[ii] = data.SLONG(offset + ii*4) / data.SLONG(offset + ii*4 + 4);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvalue = (count == 1 ? values[0] : values);\n\n\t\t\t\tif (tagDescs.hasOwnProperty(tag) && typeof value != 'object') {\n\t\t\t\t\thash[tag] = tagDescs[tag][value];\n\t\t\t\t} else {\n\t\t\t\t\thash[tag] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn hash;\n\t\t}\n\n\t\tfunction getIFDOffsets() {\n\t\t\tvar idx = offsets.tiffHeader;\n\n\t\t\t// Set read order of multi-byte data\n\t\t\tdata.II(data.SHORT(idx) == 0x4949);\n\n\t\t\t// Check if always present bytes are indeed present\n\t\t\tif (data.SHORT(idx+=2) !== 0x002A) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\toffsets.IFD0 = offsets.tiffHeader + data.LONG(idx += 2);\n\t\t\tTiff = extractTags(offsets.IFD0, tags.tiff);\n\n\t\t\tif ('ExifIFDPointer' in Tiff) {\n\t\t\t\toffsets.exifIFD = offsets.tiffHeader + Tiff.ExifIFDPointer;\n\t\t\t\tdelete Tiff.ExifIFDPointer;\n\t\t\t}\n\n\t\t\tif ('GPSInfoIFDPointer' in Tiff) {\n\t\t\t\toffsets.gpsIFD = offsets.tiffHeader + Tiff.GPSInfoIFDPointer;\n\t\t\t\tdelete Tiff.GPSInfoIFDPointer;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\t// At the moment only setting of simple (LONG) values, that do not require offset recalculation, is supported\n\t\tfunction setTag(ifd, tag, value) {\n\t\t\tvar offset, length, tagOffset, valueOffset = 0;\n\n\t\t\t// If tag name passed translate into hex key\n\t\t\tif (typeof(tag) === 'string') {\n\t\t\t\tvar tmpTags = tags[ifd.toLowerCase()];\n\t\t\t\tfor (var hex in tmpTags) {\n\t\t\t\t\tif (tmpTags[hex] === tag) {\n\t\t\t\t\t\ttag = hex;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\toffset = offsets[ifd.toLowerCase() + 'IFD'];\n\t\t\tlength = data.SHORT(offset);\n\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\ttagOffset = offset + 12 * i + 2;\n\n\t\t\t\tif (data.SHORT(tagOffset) == tag) {\n\t\t\t\t\tvalueOffset = tagOffset + 8;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!valueOffset) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tdata.LONG(valueOffset, value);\n\t\t\treturn true;\n\t\t}\n\n\n\t\t// Public functions\n\t\treturn {\n\t\t\tinit: function(segment) {\n\t\t\t\t// Reset internal data\n\t\t\t\toffsets = {\n\t\t\t\t\ttiffHeader: 10\n\t\t\t\t};\n\n\t\t\t\tif (segment === undefined || !segment.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tdata.init(segment);\n\n\t\t\t\t// Check if that's APP1 and that it has EXIF\n\t\t\t\tif (data.SHORT(0) === 0xFFE1 && data.STRING(4, 5).toUpperCase() === \"EXIF\\0\") {\n\t\t\t\t\treturn getIFDOffsets();\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tTIFF: function() {\n\t\t\t\treturn Tiff;\n\t\t\t},\n\n\t\t\tEXIF: function() {\n\t\t\t\tvar Exif;\n\n\t\t\t\t// Populate EXIF hash\n\t\t\t\tExif = extractTags(offsets.exifIFD, tags.exif);\n\n\t\t\t\t// Fix formatting of some tags\n\t\t\t\tif (Exif.ExifVersion && Basic.typeOf(Exif.ExifVersion) === 'array') {\n\t\t\t\t\tfor (var i = 0, exifVersion = ''; i < Exif.ExifVersion.length; i++) {\n\t\t\t\t\t\texifVersion += String.fromCharCode(Exif.ExifVersion[i]);\n\t\t\t\t\t}\n\t\t\t\t\tExif.ExifVersion = exifVersion;\n\t\t\t\t}\n\n\t\t\t\treturn Exif;\n\t\t\t},\n\n\t\t\tGPS: function() {\n\t\t\t\tvar GPS;\n\n\t\t\t\tGPS = extractTags(offsets.gpsIFD, tags.gps);\n\n\t\t\t\t// iOS devices (and probably some others) do not put in GPSVersionID tag (why?..)\n\t\t\t\tif (GPS.GPSVersionID && Basic.typeOf(GPS.GPSVersionID) === 'array') {\n\t\t\t\t\tGPS.GPSVersionID = GPS.GPSVersionID.join('.');\n\t\t\t\t}\n\n\t\t\t\treturn GPS;\n\t\t\t},\n\n\t\t\tsetExif: function(tag, value) {\n\t\t\t\t// Right now only setting of width/height is possible\n\t\t\t\tif (tag !== 'PixelXDimension' && tag !== 'PixelYDimension') {return false;}\n\n\t\t\t\treturn setTag('exif', tag, value);\n\t\t\t},\n\n\n\t\t\tgetBinary: function() {\n\t\t\t\treturn data.SEGMENT();\n\t\t\t},\n\n\t\t\tpurge: function() {\n\t\t\t\tdata.init(null);\n\t\t\t\tdata = Tiff = null;\n\t\t\t\toffsets = {};\n\t\t\t}\n\t\t};\n\t};\n});");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "261:10787");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "417:10783");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "481:525");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "530:555");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "560:2456");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "2461:5375");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5380:7690");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7695:8363");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8480:9159");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9187:10779");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5432:5546");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5552:7669");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7675:7686");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5649:5693");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5700:5738");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5745:5817");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5824:5852");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5858:5886");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5893:5904");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5910:5921");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5928:7465");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7472:7513");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7520:7664");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5775:5783");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "5997:6076");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6085:6168");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6177:6182");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6021:6068");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6125:6160");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6214:6293");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6302:6344");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6353:6361");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6238:6285");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6392:6471");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6480:6566");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6575:6580");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6416:6463");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6520:6558");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6610:6689");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6698:6783");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6792:6797");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6634:6681");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6738:6775");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6831:6878");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6887:7003");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7012:7017");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "6927:6995");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7048:7095");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7104:7190");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7199:7204");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7144:7182");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7240:7287");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7296:7414");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7423:7428");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7336:7406");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7451:7459");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7589:7621");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7641:7658");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7725:7753");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7799:7833");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7894:7952");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7958:8013");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8018:8061");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8067:8198");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8204:8343");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8348:8359");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "7935:7947");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8103:8161");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8167:8193");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8243:8303");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8309:8338");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8518:8564");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8618:8803");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8808:8851");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8856:8883");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8889:9057");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9063:9104");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9110:9139");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9144:9155");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8654:8691");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8697:8798");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8729:8792");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8763:8772");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8780:8785");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8928:8959");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "8966:9052");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9007:9034");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9041:9046");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9087:9099");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9256:9293");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9300:9371");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9378:9396");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9452:9565");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9571:9583");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9353:9365");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9537:9559");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9618:9629");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9664:9672");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9705:9751");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9793:10049");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10056:10067");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9868:10006");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10013:10043");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "9944:9999");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10101:10108");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10115:10158");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10251:10377");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10384:10394");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10326:10371");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10500:10574");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10581:10614");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10561:10573");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10655:10676");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10712:10727");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10733:10751");
__$coverInitRange("src/javascript/runtime/html5/image/ExifParser.js", "10757:10769");
__$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '261:10787');
define('moxie/runtime/html5/image/ExifParser', [
    'moxie/core/utils/Basic',
    'moxie/runtime/html5/utils/BinaryReader'
], function (Basic, BinaryReader) {
    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '417:10783');
    return function ExifParser() {
        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '481:525');
        var data, tags, Tiff, offsets = {}, tagDescs;
        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '530:555');
        data = new BinaryReader();
        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '560:2456');
        tags = {
            tiff: {
                274: 'Orientation',
                270: 'ImageDescription',
                271: 'Make',
                272: 'Model',
                305: 'Software',
                34665: 'ExifIFDPointer',
                34853: 'GPSInfoIFDPointer'
            },
            exif: {
                36864: 'ExifVersion',
                40961: 'ColorSpace',
                40962: 'PixelXDimension',
                40963: 'PixelYDimension',
                36867: 'DateTimeOriginal',
                33434: 'ExposureTime',
                33437: 'FNumber',
                34855: 'ISOSpeedRatings',
                37377: 'ShutterSpeedValue',
                37378: 'ApertureValue',
                37383: 'MeteringMode',
                37384: 'LightSource',
                37385: 'Flash',
                37386: 'FocalLength',
                41986: 'ExposureMode',
                41987: 'WhiteBalance',
                41990: 'SceneCaptureType',
                41988: 'DigitalZoomRatio',
                41992: 'Contrast',
                41993: 'Saturation',
                41994: 'Sharpness'
            },
            gps: {
                0: 'GPSVersionID',
                1: 'GPSLatitudeRef',
                2: 'GPSLatitude',
                3: 'GPSLongitudeRef',
                4: 'GPSLongitude'
            }
        };
        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '2461:5375');
        tagDescs = {
            'ColorSpace': {
                1: 'sRGB',
                0: 'Uncalibrated'
            },
            'MeteringMode': {
                0: 'Unknown',
                1: 'Average',
                2: 'CenterWeightedAverage',
                3: 'Spot',
                4: 'MultiSpot',
                5: 'Pattern',
                6: 'Partial',
                255: 'Other'
            },
            'LightSource': {
                1: 'Daylight',
                2: 'Fliorescent',
                3: 'Tungsten',
                4: 'Flash',
                9: 'Fine weather',
                10: 'Cloudy weather',
                11: 'Shade',
                12: 'Daylight fluorescent (D 5700 - 7100K)',
                13: 'Day white fluorescent (N 4600 -5400K)',
                14: 'Cool white fluorescent (W 3900 - 4500K)',
                15: 'White fluorescent (WW 3200 - 3700K)',
                17: 'Standard light A',
                18: 'Standard light B',
                19: 'Standard light C',
                20: 'D55',
                21: 'D65',
                22: 'D75',
                23: 'D50',
                24: 'ISO studio tungsten',
                255: 'Other'
            },
            'Flash': {
                0: 'Flash did not fire.',
                1: 'Flash fired.',
                5: 'Strobe return light not detected.',
                7: 'Strobe return light detected.',
                9: 'Flash fired, compulsory flash mode',
                13: 'Flash fired, compulsory flash mode, return light not detected',
                15: 'Flash fired, compulsory flash mode, return light detected',
                16: 'Flash did not fire, compulsory flash mode',
                24: 'Flash did not fire, auto mode',
                25: 'Flash fired, auto mode',
                29: 'Flash fired, auto mode, return light not detected',
                31: 'Flash fired, auto mode, return light detected',
                32: 'No flash function',
                65: 'Flash fired, red-eye reduction mode',
                69: 'Flash fired, red-eye reduction mode, return light not detected',
                71: 'Flash fired, red-eye reduction mode, return light detected',
                73: 'Flash fired, compulsory flash mode, red-eye reduction mode',
                77: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',
                79: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',
                89: 'Flash fired, auto mode, red-eye reduction mode',
                93: 'Flash fired, auto mode, return light not detected, red-eye reduction mode',
                95: 'Flash fired, auto mode, return light detected, red-eye reduction mode'
            },
            'ExposureMode': {
                0: 'Auto exposure',
                1: 'Manual exposure',
                2: 'Auto bracket'
            },
            'WhiteBalance': {
                0: 'Auto white balance',
                1: 'Manual white balance'
            },
            'SceneCaptureType': {
                0: 'Standard',
                1: 'Landscape',
                2: 'Portrait',
                3: 'Night scene'
            },
            'Contrast': {
                0: 'Normal',
                1: 'Soft',
                2: 'Hard'
            },
            'Saturation': {
                0: 'Normal',
                1: 'Low saturation',
                2: 'High saturation'
            },
            'Sharpness': {
                0: 'Normal',
                1: 'Soft',
                2: 'Hard'
            },
            'GPSLatitudeRef': {
                N: 'North latitude',
                S: 'South latitude'
            },
            'GPSLongitudeRef': {
                E: 'East longitude',
                W: 'West longitude'
            }
        };
        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5380:7690');
        function extractTags(IFD_offset, tags2extract) {
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5432:5546');
            var length = data.SHORT(IFD_offset), i, ii, tag, type, count, tagOffset, offset, value, values = [], hash = {};
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5552:7669');
            for (i = 0; i < length; i++) {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5649:5693');
                offset = tagOffset = IFD_offset + 12 * i + 2;
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5700:5738');
                tag = tags2extract[data.SHORT(offset)];
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5745:5817');
                if (tag === undefined) {
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5775:5783');
                    continue;
                }
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5824:5852');
                type = data.SHORT(offset += 2);
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5858:5886');
                count = data.LONG(offset += 2);
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5893:5904');
                offset += 4;
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5910:5921');
                values = [];
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5928:7465');
                switch (type) {
                case 1:
                case 7:
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '5997:6076');
                    if (count > 4) {
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6021:6068');
                        offset = data.LONG(offset) + offsets.tiffHeader;
                    }
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6085:6168');
                    for (ii = 0; ii < count; ii++) {
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6125:6160');
                        values[ii] = data.BYTE(offset + ii);
                    }
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6177:6182');
                    break;
                case 2:
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6214:6293');
                    if (count > 4) {
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6238:6285');
                        offset = data.LONG(offset) + offsets.tiffHeader;
                    }
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6302:6344');
                    hash[tag] = data.STRING(offset, count - 1);
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6353:6361');
                    continue;
                case 3:
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6392:6471');
                    if (count > 2) {
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6416:6463');
                        offset = data.LONG(offset) + offsets.tiffHeader;
                    }
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6480:6566');
                    for (ii = 0; ii < count; ii++) {
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6520:6558');
                        values[ii] = data.SHORT(offset + ii * 2);
                    }
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6575:6580');
                    break;
                case 4:
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6610:6689');
                    if (count > 1) {
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6634:6681');
                        offset = data.LONG(offset) + offsets.tiffHeader;
                    }
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6698:6783');
                    for (ii = 0; ii < count; ii++) {
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6738:6775');
                        values[ii] = data.LONG(offset + ii * 4);
                    }
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6792:6797');
                    break;
                case 5:
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6831:6878');
                    offset = data.LONG(offset) + offsets.tiffHeader;
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6887:7003');
                    for (ii = 0; ii < count; ii++) {
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '6927:6995');
                        values[ii] = data.LONG(offset + ii * 4) / data.LONG(offset + ii * 4 + 4);
                    }
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7012:7017');
                    break;
                case 9:
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7048:7095');
                    offset = data.LONG(offset) + offsets.tiffHeader;
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7104:7190');
                    for (ii = 0; ii < count; ii++) {
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7144:7182');
                        values[ii] = data.SLONG(offset + ii * 4);
                    }
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7199:7204');
                    break;
                case 10:
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7240:7287');
                    offset = data.LONG(offset) + offsets.tiffHeader;
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7296:7414');
                    for (ii = 0; ii < count; ii++) {
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7336:7406');
                        values[ii] = data.SLONG(offset + ii * 4) / data.SLONG(offset + ii * 4 + 4);
                    }
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7423:7428');
                    break;
                default:
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7451:7459');
                    continue;
                }
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7472:7513');
                value = count == 1 ? values[0] : values;
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7520:7664');
                if (tagDescs.hasOwnProperty(tag) && typeof value != 'object') {
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7589:7621');
                    hash[tag] = tagDescs[tag][value];
                } else {
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7641:7658');
                    hash[tag] = value;
                }
            }
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7675:7686');
            return hash;
        }
        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7695:8363');
        function getIFDOffsets() {
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7725:7753');
            var idx = offsets.tiffHeader;
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7799:7833');
            data.II(data.SHORT(idx) == 18761);
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7894:7952');
            if (data.SHORT(idx += 2) !== 42) {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7935:7947');
                return false;
            }
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '7958:8013');
            offsets.IFD0 = offsets.tiffHeader + data.LONG(idx += 2);
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8018:8061');
            Tiff = extractTags(offsets.IFD0, tags.tiff);
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8067:8198');
            if ('ExifIFDPointer' in Tiff) {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8103:8161');
                offsets.exifIFD = offsets.tiffHeader + Tiff.ExifIFDPointer;
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8167:8193');
                delete Tiff.ExifIFDPointer;
            }
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8204:8343');
            if ('GPSInfoIFDPointer' in Tiff) {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8243:8303');
                offsets.gpsIFD = offsets.tiffHeader + Tiff.GPSInfoIFDPointer;
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8309:8338');
                delete Tiff.GPSInfoIFDPointer;
            }
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8348:8359');
            return true;
        }
        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8480:9159');
        function setTag(ifd, tag, value) {
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8518:8564');
            var offset, length, tagOffset, valueOffset = 0;
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8618:8803');
            if (typeof tag === 'string') {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8654:8691');
                var tmpTags = tags[ifd.toLowerCase()];
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8697:8798');
                for (var hex in tmpTags) {
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8729:8792');
                    if (tmpTags[hex] === tag) {
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8763:8772');
                        tag = hex;
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8780:8785');
                        break;
                    }
                }
            }
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8808:8851');
            offset = offsets[ifd.toLowerCase() + 'IFD'];
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8856:8883');
            length = data.SHORT(offset);
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8889:9057');
            for (var i = 0; i < length; i++) {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8928:8959');
                tagOffset = offset + 12 * i + 2;
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '8966:9052');
                if (data.SHORT(tagOffset) == tag) {
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9007:9034');
                    valueOffset = tagOffset + 8;
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9041:9046');
                    break;
                }
            }
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9063:9104');
            if (!valueOffset) {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9087:9099');
                return false;
            }
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9110:9139');
            data.LONG(valueOffset, value);
            __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9144:9155');
            return true;
        }
        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9187:10779');
        return {
            init: function (segment) {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9256:9293');
                offsets = { tiffHeader: 10 };
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9300:9371');
                if (segment === undefined || !segment.length) {
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9353:9365');
                    return false;
                }
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9378:9396');
                data.init(segment);
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9452:9565');
                if (data.SHORT(0) === 65505 && data.STRING(4, 5).toUpperCase() === 'EXIF\0') {
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9537:9559');
                    return getIFDOffsets();
                }
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9571:9583');
                return false;
            },
            TIFF: function () {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9618:9629');
                return Tiff;
            },
            EXIF: function () {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9664:9672');
                var Exif;
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9705:9751');
                Exif = extractTags(offsets.exifIFD, tags.exif);
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9793:10049');
                if (Exif.ExifVersion && Basic.typeOf(Exif.ExifVersion) === 'array') {
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9868:10006');
                    for (var i = 0, exifVersion = ''; i < Exif.ExifVersion.length; i++) {
                        __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '9944:9999');
                        exifVersion += String.fromCharCode(Exif.ExifVersion[i]);
                    }
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10013:10043');
                    Exif.ExifVersion = exifVersion;
                }
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10056:10067');
                return Exif;
            },
            GPS: function () {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10101:10108');
                var GPS;
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10115:10158');
                GPS = extractTags(offsets.gpsIFD, tags.gps);
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10251:10377');
                if (GPS.GPSVersionID && Basic.typeOf(GPS.GPSVersionID) === 'array') {
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10326:10371');
                    GPS.GPSVersionID = GPS.GPSVersionID.join('.');
                }
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10384:10394');
                return GPS;
            },
            setExif: function (tag, value) {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10500:10574');
                if (tag !== 'PixelXDimension' && tag !== 'PixelYDimension') {
                    __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10561:10573');
                    return false;
                }
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10581:10614');
                return setTag('exif', tag, value);
            },
            getBinary: function () {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10655:10676');
                return data.SEGMENT();
            },
            purge: function () {
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10712:10727');
                data.init(null);
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10733:10751');
                data = Tiff = null;
                __$coverCall('src/javascript/runtime/html5/image/ExifParser.js', '10757:10769');
                offsets = {};
            }
        };
    };
});

// Included from: src/javascript/runtime/html5/image/JPEG.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/image/JPEG.js", "/**\n * JPEG.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/JPEG\n@private\n*/\ndefine(\"moxie/runtime/html5/image/JPEG\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/html5/image/JPEGHeaders\",\n\t\"moxie/runtime/html5/utils/BinaryReader\",\n\t\"moxie/runtime/html5/image/ExifParser\"\n], function(Basic, x, JPEGHeaders, BinaryReader, ExifParser) {\n\t\n\tfunction JPEG(binstr) {\n\t\tvar _binstr, _br, _hm, _ep, _info, hasExif;\n\n\t\tfunction _getDimensions() {\n\t\t\tvar idx = 0, marker, length;\n\n\t\t\t// examine all through the end, since some images might have very large APP segments\n\t\t\twhile (idx <= _binstr.length) {\n\t\t\t\tmarker = _br.SHORT(idx += 2);\n\n\t\t\t\tif (marker >= 0xFFC0 && marker <= 0xFFC3) { // SOFn\n\t\t\t\t\tidx += 5; // marker (2 bytes) + length (2 bytes) + Sample precision (1 byte)\n\t\t\t\t\treturn {\n\t\t\t\t\t\theight: _br.SHORT(idx),\n\t\t\t\t\t\twidth: _br.SHORT(idx += 2)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tlength = _br.SHORT(idx += 2);\n\t\t\t\tidx += length - 2;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t_binstr = binstr;\n\n\t\t_br = new BinaryReader();\n\t\t_br.init(_binstr);\n\n\t\t// check if it is jpeg\n\t\tif (_br.SHORT(0) !== 0xFFD8) {\n\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t}\n\n\t\t// backup headers\n\t\t_hm = new JPEGHeaders(binstr);\n\n\t\t// extract exif info\n\t\t_ep = new ExifParser();\n\t\thasExif = !!_ep.init(_hm.get('app1')[0]);\n\n\t\t// get dimensions\n\t\t_info = _getDimensions.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\ttype: 'image/jpeg',\n\n\t\t\tsize: _binstr.length,\n\n\t\t\twidth: _info && _info.width || 0,\n\n\t\t\theight: _info && _info.height || 0,\n\n\t\t\tsetExif: function(tag, value) {\n\t\t\t\tif (!hasExif) {\n\t\t\t\t\treturn false; // or throw an exception\n\t\t\t\t}\n\n\t\t\t\tif (Basic.typeOf(tag) === 'object') {\n\t\t\t\t\tBasic.each(tag, function(value, tag) {\n\t\t\t\t\t\t_ep.setExif(tag, value);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t_ep.setExif(tag, value);\n\t\t\t\t}\n\n\t\t\t\t// update internal headers\n\t\t\t\t_hm.set('app1', _ep.getBinary());\n\t\t\t},\n\n\t\t\twriteHeaders: function() {\n\t\t\t\tif (!arguments.length) {\n\t\t\t\t\t// if no arguments passed, update headers internally\n\t\t\t\t\treturn (_binstr = _hm.restore(_binstr));\n\t\t\t\t}\n\t\t\t\treturn _hm.restore(arguments[0]);\n\t\t\t},\n\n\t\t\tstripHeaders: function(binstr) {\n\t\t\t\treturn _hm.strip(binstr);\n\t\t\t},\n\n\t\t\tpurge: function() {\n\t\t\t\t_purge.call(this);\n\t\t\t}\n\t\t});\n\n\t\tif (hasExif) {\n\t\t\tthis.meta = {\n\t\t\t\ttiff: _ep.TIFF(),\n\t\t\t\texif: _ep.EXIF(),\n\t\t\t\tgps: _ep.GPS()\n\t\t\t};\n\t\t}\n\n\t\tfunction _purge() {\n\t\t\tif (!_ep || !_hm || !_br) { \n\t\t\t\treturn; // ignore any repeating purge requests\n\t\t\t}\n\t\t\t_ep.purge();\n\t\t\t_hm.purge();\n\t\t\t_br.init(null);\n\t\t\t_binstr = _info = _hm = _ep = _br = null;\n\t\t}\n\t}\n\n\treturn JPEG;\n});\n");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "249:2726");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "536:2707");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2711:2722");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "562:604");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "609:1137");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1142:1158");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1163:1187");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1191:1208");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1238:1325");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1350:1379");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1407:1429");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1433:1473");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1498:1531");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1536:2385");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2390:2493");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2498:2704");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "640:667");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "761:1117");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1122:1133");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "797:825");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "832:1055");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1061:1089");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1095:1112");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "889:897");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "971:1049");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1272:1321");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1724:1788");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1795:1964");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2002:2034");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1745:1757");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1838:1915");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1883:1906");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "1935:1958");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2077:2210");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2216:2248");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2165:2204");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2297:2321");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2357:2374");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2408:2489");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2521:2604");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2609:2620");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2625:2636");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2641:2655");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2660:2700");
__$coverInitRange("src/javascript/runtime/html5/image/JPEG.js", "2554:2560");
__$coverCall('src/javascript/runtime/html5/image/JPEG.js', '249:2726');
define('moxie/runtime/html5/image/JPEG', [
    'moxie/core/utils/Basic',
    'moxie/core/Exceptions',
    'moxie/runtime/html5/image/JPEGHeaders',
    'moxie/runtime/html5/utils/BinaryReader',
    'moxie/runtime/html5/image/ExifParser'
], function (Basic, x, JPEGHeaders, BinaryReader, ExifParser) {
    __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '536:2707');
    function JPEG(binstr) {
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '562:604');
        var _binstr, _br, _hm, _ep, _info, hasExif;
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '609:1137');
        function _getDimensions() {
            __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '640:667');
            var idx = 0, marker, length;
            __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '761:1117');
            while (idx <= _binstr.length) {
                __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '797:825');
                marker = _br.SHORT(idx += 2);
                __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '832:1055');
                if (marker >= 65472 && marker <= 65475) {
                    __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '889:897');
                    idx += 5;
                    __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '971:1049');
                    return {
                        height: _br.SHORT(idx),
                        width: _br.SHORT(idx += 2)
                    };
                }
                __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1061:1089');
                length = _br.SHORT(idx += 2);
                __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1095:1112');
                idx += length - 2;
            }
            __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1122:1133');
            return null;
        }
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1142:1158');
        _binstr = binstr;
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1163:1187');
        _br = new BinaryReader();
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1191:1208');
        _br.init(_binstr);
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1238:1325');
        if (_br.SHORT(0) !== 65496) {
            __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1272:1321');
            throw new x.ImageError(x.ImageError.WRONG_FORMAT);
        }
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1350:1379');
        _hm = new JPEGHeaders(binstr);
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1407:1429');
        _ep = new ExifParser();
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1433:1473');
        hasExif = !!_ep.init(_hm.get('app1')[0]);
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1498:1531');
        _info = _getDimensions.call(this);
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1536:2385');
        Basic.extend(this, {
            type: 'image/jpeg',
            size: _binstr.length,
            width: _info && _info.width || 0,
            height: _info && _info.height || 0,
            setExif: function (tag, value) {
                __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1724:1788');
                if (!hasExif) {
                    __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1745:1757');
                    return false;
                }
                __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1795:1964');
                if (Basic.typeOf(tag) === 'object') {
                    __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1838:1915');
                    Basic.each(tag, function (value, tag) {
                        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1883:1906');
                        _ep.setExif(tag, value);
                    });
                } else {
                    __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '1935:1958');
                    _ep.setExif(tag, value);
                }
                __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2002:2034');
                _hm.set('app1', _ep.getBinary());
            },
            writeHeaders: function () {
                __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2077:2210');
                if (!arguments.length) {
                    __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2165:2204');
                    return _binstr = _hm.restore(_binstr);
                }
                __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2216:2248');
                return _hm.restore(arguments[0]);
            },
            stripHeaders: function (binstr) {
                __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2297:2321');
                return _hm.strip(binstr);
            },
            purge: function () {
                __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2357:2374');
                _purge.call(this);
            }
        });
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2390:2493');
        if (hasExif) {
            __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2408:2489');
            this.meta = {
                tiff: _ep.TIFF(),
                exif: _ep.EXIF(),
                gps: _ep.GPS()
            };
        }
        __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2498:2704');
        function _purge() {
            __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2521:2604');
            if (!_ep || !_hm || !_br) {
                __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2554:2560');
                return;
            }
            __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2609:2620');
            _ep.purge();
            __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2625:2636');
            _hm.purge();
            __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2641:2655');
            _br.init(null);
            __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2660:2700');
            _binstr = _info = _hm = _ep = _br = null;
        }
    }
    __$coverCall('src/javascript/runtime/html5/image/JPEG.js', '2711:2722');
    return JPEG;
});

// Included from: src/javascript/runtime/html5/image/PNG.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/image/PNG.js", "/**\n * PNG.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/PNG\n@private\n*/\ndefine(\"moxie/runtime/html5/image/PNG\", [\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/html5/utils/BinaryReader\"\n], function(x, Basic, BinaryReader) {\n\t\n\tfunction PNG(binstr) {\n\t\tvar _binstr, _br, _hm, _ep, _info;\n\n\t\t_binstr = binstr;\n\n\t\t_br = new BinaryReader();\n\t\t_br.init(_binstr);\n\n\t\t// check if it's png\n\t\t(function() {\n\t\t\tvar idx = 0, i = 0\n\t\t\t, signature = [0x8950, 0x4E47, 0x0D0A, 0x1A0A]\n\t\t\t;\n\n\t\t\tfor (i = 0; i < signature.length; i++, idx += 2) {\n\t\t\t\tif (signature[i] != _br.SHORT(idx)) {\n\t\t\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t\t\t}\n\t\t\t}\n\t\t}());\n\n\t\tfunction _getDimensions() {\n\t\t\tvar chunk, idx;\n\n\t\t\tchunk = _getChunkAt.call(this, 8);\n\n\t\t\tif (chunk.type == 'IHDR') {\n\t\t\t\tidx = chunk.start;\n\t\t\t\treturn {\n\t\t\t\t\twidth: _br.LONG(idx),\n\t\t\t\t\theight: _br.LONG(idx += 4)\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tfunction _purge() {\n\t\t\tif (!_br) {\n\t\t\t\treturn; // ignore any repeating purge requests\n\t\t\t}\n\t\t\t_br.init(null);\n\t\t\t_binstr = _info = _hm = _ep = _br = null;\n\t\t}\n\n\t\t_info = _getDimensions.call(this);\n\n\t\tBasic.extend(this, {\n\t\t\ttype: 'image/png',\n\n\t\t\tsize: _binstr.length,\n\n\t\t\twidth: _info.width,\n\n\t\t\theight: _info.height,\n\n\t\t\tpurge: function() {\n\t\t\t\t_purge.call(this);\n\t\t\t}\n\t\t});\n\n\t\t// for PNG we can safely trigger purge automatically, as we do not keep any data for later\n\t\t_purge.call(this);\n\n\t\tfunction _getChunkAt(idx) {\n\t\t\tvar length, type, start, CRC;\n\n\t\t\tlength = _br.LONG(idx);\n\t\t\ttype = _br.STRING(idx += 4, 4);\n\t\t\tstart = idx += 4;\n\t\t\tCRC = _br.LONG(idx + length);\n\n\t\t\treturn {\n\t\t\t\tlength: length,\n\t\t\t\ttype: type,\n\t\t\t\tstart: start,\n\t\t\t\tCRC: CRC\n\t\t\t};\n\t\t}\n\t}\n\n\treturn PNG;\n});");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "247:1878");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "425:1860");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1864:1874");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "450:483");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "488:504");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "509:533");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "537:554");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "582:843");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "848:1091");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1096:1253");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1258:1291");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1296:1471");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1569:1586");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1591:1857");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "599:670");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "671:671");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "677:835");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "732:830");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "775:824");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "879:893");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "899:932");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "938:1071");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1076:1087");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "970:987");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "993:1066");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1119:1185");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1190:1204");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1209:1249");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1135:1141");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1443:1460");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1622:1650");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1656:1678");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1683:1713");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1718:1734");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1739:1767");
__$coverInitRange("src/javascript/runtime/html5/image/PNG.js", "1773:1853");
__$coverCall('src/javascript/runtime/html5/image/PNG.js', '247:1878');
define('moxie/runtime/html5/image/PNG', [
    'moxie/core/Exceptions',
    'moxie/core/utils/Basic',
    'moxie/runtime/html5/utils/BinaryReader'
], function (x, Basic, BinaryReader) {
    __$coverCall('src/javascript/runtime/html5/image/PNG.js', '425:1860');
    function PNG(binstr) {
        __$coverCall('src/javascript/runtime/html5/image/PNG.js', '450:483');
        var _binstr, _br, _hm, _ep, _info;
        __$coverCall('src/javascript/runtime/html5/image/PNG.js', '488:504');
        _binstr = binstr;
        __$coverCall('src/javascript/runtime/html5/image/PNG.js', '509:533');
        _br = new BinaryReader();
        __$coverCall('src/javascript/runtime/html5/image/PNG.js', '537:554');
        _br.init(_binstr);
        __$coverCall('src/javascript/runtime/html5/image/PNG.js', '582:843');
        (function () {
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '599:670');
            var idx = 0, i = 0, signature = [
                    35152,
                    20039,
                    3338,
                    6666
                ];
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '671:671');
            ;
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '677:835');
            for (i = 0; i < signature.length; i++, idx += 2) {
                __$coverCall('src/javascript/runtime/html5/image/PNG.js', '732:830');
                if (signature[i] != _br.SHORT(idx)) {
                    __$coverCall('src/javascript/runtime/html5/image/PNG.js', '775:824');
                    throw new x.ImageError(x.ImageError.WRONG_FORMAT);
                }
            }
        }());
        __$coverCall('src/javascript/runtime/html5/image/PNG.js', '848:1091');
        function _getDimensions() {
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '879:893');
            var chunk, idx;
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '899:932');
            chunk = _getChunkAt.call(this, 8);
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '938:1071');
            if (chunk.type == 'IHDR') {
                __$coverCall('src/javascript/runtime/html5/image/PNG.js', '970:987');
                idx = chunk.start;
                __$coverCall('src/javascript/runtime/html5/image/PNG.js', '993:1066');
                return {
                    width: _br.LONG(idx),
                    height: _br.LONG(idx += 4)
                };
            }
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1076:1087');
            return null;
        }
        __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1096:1253');
        function _purge() {
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1119:1185');
            if (!_br) {
                __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1135:1141');
                return;
            }
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1190:1204');
            _br.init(null);
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1209:1249');
            _binstr = _info = _hm = _ep = _br = null;
        }
        __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1258:1291');
        _info = _getDimensions.call(this);
        __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1296:1471');
        Basic.extend(this, {
            type: 'image/png',
            size: _binstr.length,
            width: _info.width,
            height: _info.height,
            purge: function () {
                __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1443:1460');
                _purge.call(this);
            }
        });
        __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1569:1586');
        _purge.call(this);
        __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1591:1857');
        function _getChunkAt(idx) {
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1622:1650');
            var length, type, start, CRC;
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1656:1678');
            length = _br.LONG(idx);
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1683:1713');
            type = _br.STRING(idx += 4, 4);
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1718:1734');
            start = idx += 4;
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1739:1767');
            CRC = _br.LONG(idx + length);
            __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1773:1853');
            return {
                length: length,
                type: type,
                start: start,
                CRC: CRC
            };
        }
    }
    __$coverCall('src/javascript/runtime/html5/image/PNG.js', '1864:1874');
    return PNG;
});

// Included from: src/javascript/runtime/html5/image/ImageInfo.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/image/ImageInfo.js", "/**\n * ImageInfo.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/ImageInfo\n@private\n*/\ndefine(\"moxie/runtime/html5/image/ImageInfo\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/html5/image/JPEG\",\n\t\"moxie/runtime/html5/image/PNG\"\n], function(Basic, x, JPEG, PNG) {\n\t/**\n\tOptional image investigation tool for HTML5 runtime. Provides the following features:\n\t- ability to distinguish image type (JPEG or PNG) by signature\n\t- ability to extract image width/height directly from it's internals, without preloading in memory (fast)\n\t- ability to extract APP headers from JPEGs (Exif, GPS, etc)\n\t- ability to replace width/height tags in extracted JPEG headers\n\t- ability to restore APP headers, that were for example stripped during image manipulation\n\n\t@class ImageInfo\n\t@constructor\n\t@param {String} binstr Image source as binary string\n\t*/\n\treturn function(binstr) {\n\t\tvar _cs = [JPEG, PNG], _img;\n\n\t\t// figure out the format, throw: ImageError.WRONG_FORMAT if not supported\n\t\t_img = (function() {\n\t\t\tfor (var i = 0; i < _cs.length; i++) {\n\t\t\t\ttry {\n\t\t\t\t\treturn new _cs[i](binstr);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\t// console.info(ex);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow new x.ImageError(x.ImageError.WRONG_FORMAT);\n\t\t}());\n\n\t\tBasic.extend(this, {\n\t\t\t/**\n\t\t\tImage Mime Type extracted from it's depths\n\n\t\t\t@property type\n\t\t\t@type {String}\n\t\t\t@default ''\n\t\t\t*/\n\t\t\ttype: '',\n\n\t\t\t/**\n\t\t\tImage size in bytes\n\n\t\t\t@property size\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\tsize: 0,\n\n\t\t\t/**\n\t\t\tImage width extracted from image source\n\n\t\t\t@property width\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\twidth: 0,\n\n\t\t\t/**\n\t\t\tImage height extracted from image source\n\n\t\t\t@property height\n\t\t\t@type {Number}\n\t\t\t@default 0\n\t\t\t*/\n\t\t\theight: 0,\n\n\t\t\t/**\n\t\t\tSets Exif tag. Currently applicable only for width and height tags. Obviously works only with JPEGs.\n\n\t\t\t@method setExif\n\t\t\t@param {String} tag Tag to set\n\t\t\t@param {Mixed} value Value to assign to the tag\n\t\t\t*/\n\t\t\tsetExif: function() {},\n\n\t\t\t/**\n\t\t\tRestores headers to the source.\n\n\t\t\t@method writeHeaders\n\t\t\t@param {String} data Image source as binary string\n\t\t\t@return {String} Updated binary string\n\t\t\t*/\n\t\t\twriteHeaders: function(data) {\n\t\t\t\treturn data;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tStrip all headers from the source.\n\n\t\t\t@method stripHeaders\n\t\t\t@param {String} data Image source as binary string\n\t\t\t@return {String} Updated binary string\n\t\t\t*/\n\t\t\tstripHeaders: function(data) {\n\t\t\t\treturn data;\n\t\t\t},\n\n\t\t\t/**\n\t\t\tDispose resources.\n\n\t\t\t@method purge\n\t\t\t*/\n\t\t\tpurge: function() {}\n\t\t});\n\n\t\tBasic.extend(this, _img);\n\n\t\tthis.purge = function() {\n\t\t\t_img.purge();\n\t\t\t_img = null;\n\t\t};\n\t};\n});\n");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "259:2785");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "1038:2781");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "1066:1093");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "1174:1395");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "1400:2681");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "2686:2710");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "2715:2777");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "1198:1333");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "1338:1387");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "1241:1328");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "1252:1277");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "2350:2361");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "2580:2591");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "2744:2756");
__$coverInitRange("src/javascript/runtime/html5/image/ImageInfo.js", "2761:2772");
__$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '259:2785');
define('moxie/runtime/html5/image/ImageInfo', [
    'moxie/core/utils/Basic',
    'moxie/core/Exceptions',
    'moxie/runtime/html5/image/JPEG',
    'moxie/runtime/html5/image/PNG'
], function (Basic, x, JPEG, PNG) {
    __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '1038:2781');
    return function (binstr) {
        __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '1066:1093');
        var _cs = [
                JPEG,
                PNG
            ], _img;
        __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '1174:1395');
        _img = function () {
            __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '1198:1333');
            for (var i = 0; i < _cs.length; i++) {
                __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '1241:1328');
                try {
                    __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '1252:1277');
                    return new _cs[i](binstr);
                } catch (ex) {
                }
            }
            __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '1338:1387');
            throw new x.ImageError(x.ImageError.WRONG_FORMAT);
        }();
        __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '1400:2681');
        Basic.extend(this, {
            type: '',
            size: 0,
            width: 0,
            height: 0,
            setExif: function () {
            },
            writeHeaders: function (data) {
                __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '2350:2361');
                return data;
            },
            stripHeaders: function (data) {
                __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '2580:2591');
                return data;
            },
            purge: function () {
            }
        });
        __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '2686:2710');
        Basic.extend(this, _img);
        __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '2715:2777');
        this.purge = function () {
            __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '2744:2756');
            _img.purge();
            __$coverCall('src/javascript/runtime/html5/image/ImageInfo.js', '2761:2772');
            _img = null;
        };
    };
});

// Included from: src/javascript/runtime/html5/image/MegaPixel.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/image/MegaPixel.js", "/**\n(The MIT License)\n\nCopyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>;\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n/**\n * Mega pixel image rendering library for iOS6 Safari\n *\n * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),\n * which causes unexpected subsampling when drawing it in canvas.\n * By using this library, you can safely render the image with proper stretching.\n *\n * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>\n * Released under the MIT license\n */\n\n/**\n@class moxie/runtime/html5/image/MegaPixel\n@private\n*/\ndefine(\"moxie/runtime/html5/image/MegaPixel\", [], function() {\n\n\t/**\n\t * Rendering image element (with resizing) into the canvas element\n\t */\n\tfunction renderImageToCanvas(img, canvas, options) {\n\t\tvar iw = img.naturalWidth, ih = img.naturalHeight;\n\t\tvar width = options.width, height = options.height;\n\t\tvar x = options.x || 0, y = options.y || 0;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tif (detectSubsampling(img)) {\n\t\t\tiw /= 2;\n\t\t\tih /= 2;\n\t\t}\n\t\tvar d = 1024; // size of tiling canvas\n\t\tvar tmpCanvas = document.createElement('canvas');\n\t\ttmpCanvas.width = tmpCanvas.height = d;\n\t\tvar tmpCtx = tmpCanvas.getContext('2d');\n\t\tvar vertSquashRatio = detectVerticalSquash(img, iw, ih);\n\t\tvar sy = 0;\n\t\twhile (sy < ih) {\n\t\t\tvar sh = sy + d > ih ? ih - sy : d;\n\t\t\tvar sx = 0;\n\t\t\twhile (sx < iw) {\n\t\t\t\tvar sw = sx + d > iw ? iw - sx : d;\n\t\t\t\ttmpCtx.clearRect(0, 0, d, d);\n\t\t\t\ttmpCtx.drawImage(img, -sx, -sy);\n\t\t\t\tvar dx = (sx * width / iw + x) << 0;\n\t\t\t\tvar dw = Math.ceil(sw * width / iw);\n\t\t\t\tvar dy = (sy * height / ih / vertSquashRatio + y) << 0;\n\t\t\t\tvar dh = Math.ceil(sh * height / ih / vertSquashRatio);\n\t\t\t\tctx.drawImage(tmpCanvas, 0, 0, sw, sh, dx, dy, dw, dh);\n\t\t\t\tsx += d;\n\t\t\t}\n\t\t\tsy += d;\n\t\t}\n\t\ttmpCanvas = tmpCtx = null;\n\t}\n\n\t/**\n\t * Detect subsampling in loaded image.\n\t * In iOS, larger images than 2M pixels may be subsampled in rendering.\n\t */\n\tfunction detectSubsampling(img) {\n\t\tvar iw = img.naturalWidth, ih = img.naturalHeight;\n\t\tif (iw * ih > 1024 * 1024) { // subsampling may happen over megapixel image\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tcanvas.width = canvas.height = 1;\n\t\t\tvar ctx = canvas.getContext('2d');\n\t\t\tctx.drawImage(img, -iw + 1, 0);\n\t\t\t// subsampled image becomes half smaller in rendering size.\n\t\t\t// check alpha channel value to confirm image is covering edge pixel or not.\n\t\t\t// if alpha value is 0 image is not covering, hence subsampled.\n\t\t\treturn ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\n\t/**\n\t * Detecting vertical squash in loaded image.\n\t * Fixes a bug which squash image vertically while drawing into canvas for some images.\n\t */\n\tfunction detectVerticalSquash(img, iw, ih) {\n\t\tvar canvas = document.createElement('canvas');\n\t\tcanvas.width = 1;\n\t\tcanvas.height = ih;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.drawImage(img, 0, 0);\n\t\tvar data = ctx.getImageData(0, 0, 1, ih).data;\n\t\t// search image edge pixel position in case it is squashed vertically.\n\t\tvar sy = 0;\n\t\tvar ey = ih;\n\t\tvar py = ih;\n\t\twhile (py > sy) {\n\t\t\tvar alpha = data[(py - 1) * 4 + 3];\n\t\t\tif (alpha === 0) {\n\t\t\t\tey = py;\n\t\t\t} else {\n\t\t\tsy = py;\n\t\t\t}\n\t\t\tpy = (ey + sy) >> 1;\n\t\t}\n\t\tcanvas = null;\n\t\tvar ratio = (py / ih);\n\t\treturn (ratio === 0) ? 1 : ratio;\n\t}\n\n\treturn {\n\t\tisSubsampled: detectSubsampling,\n\t\trenderTo: renderImageToCanvas\n\t};\n});\n");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "1581:4393");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "1724:2810");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2937:3559");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3710:4307");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4311:4389");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "1779:1828");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "1832:1882");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "1886:1928");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "1932:1965");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "1969:2025");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2029:2041");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2070:2118");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2122:2160");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2164:2203");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2207:2262");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2266:2276");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2280:2778");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2782:2807");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2002:2009");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2014:2021");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2301:2335");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2340:2350");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2355:2762");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2767:2774");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2377:2411");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2417:2445");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2451:2482");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2488:2523");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2529:2564");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2570:2624");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2630:2684");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2690:2744");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2750:2757");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "2973:3022");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3026:3556");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3105:3150");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3155:3187");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3192:3225");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3230:3260");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3475:3524");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3540:3552");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3757:3802");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3806:3822");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3826:3844");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3848:3881");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3885:3909");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "3913:3958");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4035:4045");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4049:4060");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4064:4075");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4079:4226");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4230:4243");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4247:4268");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4272:4304");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4100:4134");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4139:4198");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4203:4222");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4162:4169");
__$coverInitRange("src/javascript/runtime/html5/image/MegaPixel.js", "4186:4193");
__$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '1581:4393');
define('moxie/runtime/html5/image/MegaPixel', [], function () {
    __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '1724:2810');
    function renderImageToCanvas(img, canvas, options) {
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '1779:1828');
        var iw = img.naturalWidth, ih = img.naturalHeight;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '1832:1882');
        var width = options.width, height = options.height;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '1886:1928');
        var x = options.x || 0, y = options.y || 0;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '1932:1965');
        var ctx = canvas.getContext('2d');
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '1969:2025');
        if (detectSubsampling(img)) {
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2002:2009');
            iw /= 2;
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2014:2021');
            ih /= 2;
        }
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2029:2041');
        var d = 1024;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2070:2118');
        var tmpCanvas = document.createElement('canvas');
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2122:2160');
        tmpCanvas.width = tmpCanvas.height = d;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2164:2203');
        var tmpCtx = tmpCanvas.getContext('2d');
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2207:2262');
        var vertSquashRatio = detectVerticalSquash(img, iw, ih);
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2266:2276');
        var sy = 0;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2280:2778');
        while (sy < ih) {
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2301:2335');
            var sh = sy + d > ih ? ih - sy : d;
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2340:2350');
            var sx = 0;
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2355:2762');
            while (sx < iw) {
                __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2377:2411');
                var sw = sx + d > iw ? iw - sx : d;
                __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2417:2445');
                tmpCtx.clearRect(0, 0, d, d);
                __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2451:2482');
                tmpCtx.drawImage(img, -sx, -sy);
                __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2488:2523');
                var dx = sx * width / iw + x << 0;
                __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2529:2564');
                var dw = Math.ceil(sw * width / iw);
                __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2570:2624');
                var dy = sy * height / ih / vertSquashRatio + y << 0;
                __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2630:2684');
                var dh = Math.ceil(sh * height / ih / vertSquashRatio);
                __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2690:2744');
                ctx.drawImage(tmpCanvas, 0, 0, sw, sh, dx, dy, dw, dh);
                __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2750:2757');
                sx += d;
            }
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2767:2774');
            sy += d;
        }
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2782:2807');
        tmpCanvas = tmpCtx = null;
    }
    __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2937:3559');
    function detectSubsampling(img) {
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '2973:3022');
        var iw = img.naturalWidth, ih = img.naturalHeight;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3026:3556');
        if (iw * ih > 1024 * 1024) {
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3105:3150');
            var canvas = document.createElement('canvas');
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3155:3187');
            canvas.width = canvas.height = 1;
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3192:3225');
            var ctx = canvas.getContext('2d');
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3230:3260');
            ctx.drawImage(img, -iw + 1, 0);
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3475:3524');
            return ctx.getImageData(0, 0, 1, 1).data[3] === 0;
        } else {
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3540:3552');
            return false;
        }
    }
    __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3710:4307');
    function detectVerticalSquash(img, iw, ih) {
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3757:3802');
        var canvas = document.createElement('canvas');
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3806:3822');
        canvas.width = 1;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3826:3844');
        canvas.height = ih;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3848:3881');
        var ctx = canvas.getContext('2d');
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3885:3909');
        ctx.drawImage(img, 0, 0);
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '3913:3958');
        var data = ctx.getImageData(0, 0, 1, ih).data;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4035:4045');
        var sy = 0;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4049:4060');
        var ey = ih;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4064:4075');
        var py = ih;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4079:4226');
        while (py > sy) {
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4100:4134');
            var alpha = data[(py - 1) * 4 + 3];
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4139:4198');
            if (alpha === 0) {
                __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4162:4169');
                ey = py;
            } else {
                __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4186:4193');
                sy = py;
            }
            __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4203:4222');
            py = ey + sy >> 1;
        }
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4230:4243');
        canvas = null;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4247:4268');
        var ratio = py / ih;
        __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4272:4304');
        return ratio === 0 ? 1 : ratio;
    }
    __$coverCall('src/javascript/runtime/html5/image/MegaPixel.js', '4311:4389');
    return {
        isSubsampled: detectSubsampling,
        renderTo: renderImageToCanvas
    };
});

// Included from: src/javascript/runtime/html5/image/Image.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html5/image/Image.js", "/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html5/image/Image\n@private\n*/\ndefine(\"moxie/runtime/html5/image/Image\", [\n\t\"moxie/runtime/html5/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Encode\",\n\t\"moxie/file/Blob\",\n\t\"moxie/runtime/html5/image/ImageInfo\",\n\t\"moxie/runtime/html5/image/MegaPixel\",\n\t\"moxie/core/utils/Mime\",\n\t\"moxie/core/utils/Env\"\n], function(extensions, Basic, x, Encode, Blob, ImageInfo, MegaPixel, Mime, Env) {\n\t\n\tfunction HTML5Image() {\n\t\tvar me = this\n\t\t, _img, _imgInfo, _canvas, _binStr, _blob\n\t\t, _modified = false // is set true whenever image is modified\n\t\t, _preserveHeaders = true\n\t\t;\n\n\t\tBasic.extend(this, {\n\t\t\tloadFromBlob: function(blob) {\n\t\t\t\tvar comp = this, I = comp.getRuntime()\n\t\t\t\t, asBinary = arguments.length > 1 ? arguments[1] : true\n\t\t\t\t;\n\n\t\t\t\tif (!I.can('access_binary')) {\n\t\t\t\t\tthrow new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);\n\t\t\t\t}\n\n\t\t\t\t_blob = blob;\n\n\t\t\t\tif (blob.isDetached()) {\n\t\t\t\t\t_binStr = blob.getSource();\n\t\t\t\t\t_preload.call(this, _binStr);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t_readAsDataUrl.call(this, blob.getSource(), function(dataUrl) {\n\t\t\t\t\t\tif (asBinary) {\n\t\t\t\t\t\t\t_binStr = _toBinary(dataUrl);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_preload.call(comp, dataUrl);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tloadFromImage: function(img, exact) {\n\t\t\t\tthis.meta = img.meta;\n\n\t\t\t\t_blob = new Blob(null, {\n\t\t\t\t\tname: img.name,\n\t\t\t\t\tsize: img.size,\n\t\t\t\t\ttype: img.type\n\t\t\t\t});\n\n\t\t\t\t_preload.call(this, exact ? (_binStr = img.getAsBinaryString()) : img.getAsDataURL());\n\t\t\t},\n\n\t\t\tgetInfo: function() {\n\t\t\t\tvar I = this.getRuntime(), info;\n\n\t\t\t\tif (!_imgInfo && _binStr && I.can('access_image_binary')) {\n\t\t\t\t\t_imgInfo = new ImageInfo(_binStr);\n\t\t\t\t}\n\n\t\t\t\tinfo = {\n\t\t\t\t\twidth: _getImg().width || 0,\n\t\t\t\t\theight: _getImg().height || 0,\n\t\t\t\t\ttype: _blob.type || Mime.getFileMime(_blob.name),\n\t\t\t\t\tsize: _binStr && _binStr.length || _blob.size || 0,\n\t\t\t\t\tname: _blob.name || '',\n\t\t\t\t\tmeta: _imgInfo && _imgInfo.meta || this.meta || {}\n\t\t\t\t};\n\n\t\t\t\treturn info;\n\t\t\t},\n\n\t\t\tdownsize: function() {\n\t\t\t\t_downsize.apply(this, arguments);\n\t\t\t},\n\n\t\t\tgetAsCanvas: function() {\n\t\t\t\tif (_canvas) {\n\t\t\t\t\t_canvas.id = this.uid + '_canvas';\n\t\t\t\t}\n\t\t\t\treturn _canvas;\n\t\t\t},\n\n\t\t\tgetAsBlob: function(type, quality) {\n\t\t\t\tif (type !== this.type) {\n\t\t\t\t\t// if different mime type requested prepare image for conversion\n\t\t\t\t\t_downsize.call(this, this.width, this.height, false);\n\t\t\t\t}\n\t\t\t\treturn new Blob(null, {\n\t\t\t\t\ttype: type,\n\t\t\t\t\tdata: me.getAsBinaryString.call(this, type, quality)\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tgetAsDataURL: function(type) {\n\t\t\t\tvar quality = arguments[1] || 90;\n\n\t\t\t\t// if image has not been modified, return the source right away\n\t\t\t\tif (!_modified) {\n\t\t\t\t\treturn _img.src;\n\t\t\t\t}\n\n\t\t\t\tif ('image/jpeg' !== type) {\n\t\t\t\t\treturn _canvas.toDataURL('image/png');\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// older Geckos used to result in an exception on quality argument\n\t\t\t\t\t\treturn _canvas.toDataURL('image/jpeg', quality/100);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\treturn _canvas.toDataURL('image/jpeg');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tgetAsBinaryString: function(type, quality) {\n\t\t\t\t// if image has not been modified, return the source right away\n\t\t\t\tif (!_modified) {\n\t\t\t\t\t// if image was not loaded from binary string\n\t\t\t\t\tif (!_binStr) {\n\t\t\t\t\t\t_binStr = _toBinary(me.getAsDataURL(type, quality));\n\t\t\t\t\t}\n\t\t\t\t\treturn _binStr;\n\t\t\t\t}\n\n\t\t\t\tif ('image/jpeg' !== type) {\n\t\t\t\t\t_binStr = _toBinary(me.getAsDataURL(type, quality));\n\t\t\t\t} else {\n\t\t\t\t\tvar dataUrl;\n\n\t\t\t\t\t// if jpeg\n\t\t\t\t\tif (!quality) {\n\t\t\t\t\t\tquality = 90;\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// older Geckos used to result in an exception on quality argument\n\t\t\t\t\t\tdataUrl = _canvas.toDataURL('image/jpeg', quality/100);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tdataUrl = _canvas.toDataURL('image/jpeg');\n\t\t\t\t\t}\n\n\t\t\t\t\t_binStr = _toBinary(dataUrl);\n\n\t\t\t\t\tif (_imgInfo) {\n\t\t\t\t\t\t_binStr = _imgInfo.stripHeaders(_binStr);\n\n\t\t\t\t\t\tif (_preserveHeaders) {\n\t\t\t\t\t\t\t// update dimensions info in exif\n\t\t\t\t\t\t\tif (_imgInfo.meta && _imgInfo.meta.exif) {\n\t\t\t\t\t\t\t\t_imgInfo.setExif({\n\t\t\t\t\t\t\t\t\tPixelXDimension: this.width,\n\t\t\t\t\t\t\t\t\tPixelYDimension: this.height\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// re-inject the headers\n\t\t\t\t\t\t\t_binStr = _imgInfo.writeHeaders(_binStr);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// will be re-created from fresh on next getInfo call\n\t\t\t\t\t\t_imgInfo.purge();\n\t\t\t\t\t\t_imgInfo = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t_modified = false;\n\n\t\t\t\treturn _binStr;\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tme = null;\n\t\t\t\t_purge.call(this);\n\t\t\t\tthis.getRuntime().getShim().removeInstance(this.uid);\n\t\t\t}\n\t\t});\n\n\n\t\tfunction _getImg() {\n\t\t\tif (!_canvas && !_img) {\n\t\t\t\tthrow new x.ImageError(x.DOMException.INVALID_STATE_ERR);\n\t\t\t}\n\t\t\treturn _canvas || _img;\n\t\t}\n\n\n\t\tfunction _toBinary(str) {\n\t\t\treturn Encode.atob(str.substring(str.indexOf('base64,') + 7));\n\t\t}\n\n\n\t\tfunction _toDataUrl(str, type) {\n\t\t\treturn 'data:' + (type || '') + ';base64,' + Encode.btoa(str);\n\t\t}\n\n\n\t\tfunction _preload(str) {\n\t\t\tvar comp = this;\n\n\t\t\t_img = new Image();\n\t\t\t_img.onerror = function() {\n\t\t\t\t_purge.call(this);\n\t\t\t\tcomp.trigger('error', new x.ImageError(x.ImageError.WRONG_FORMAT));\n\t\t\t};\n\t\t\t_img.onload = function() {\n\t\t\t\tcomp.trigger('load');\n\t\t\t};\n\n\t\t\t_img.src = /^data:[^;]*;base64,/.test(str) ? str : _toDataUrl(str, _blob.type);\n\t\t}\n\n\n\t\tfunction _readAsDataUrl(file, callback) {\n\t\t\tvar comp = this, fr;\n\n\t\t\t// use FileReader if it's available\n\t\t\tif (window.FileReader) {\n\t\t\t\tfr = new FileReader();\n\t\t\t\tfr.onload = function() {\n\t\t\t\t\tcallback(this.result);\n\t\t\t\t};\n\t\t\t\tfr.onerror = function() {\n\t\t\t\t\tcomp.trigger('error', new x.FileException(x.FileException.NOT_READABLE_ERR));\n\t\t\t\t};\n\t\t\t\tfr.readAsDataURL(file);\n\t\t\t} else {\n\t\t\t\treturn callback(file.getAsDataURL());\n\t\t\t}\n\t\t}\n\n\t\tfunction _downsize(width, height, crop, preserveHeaders) {\n\t\t\tvar self = this\n\t\t\t, scale\n\t\t\t, mathFn\n\t\t\t, x = 0\n\t\t\t, y = 0\n\t\t\t, img\n\t\t\t, destWidth\n\t\t\t, destHeight\n\t\t\t, orientation\n\t\t\t;\n\n\t\t\t_preserveHeaders = preserveHeaders; // we will need to check this on export (see getAsBinaryString())\n\n\t\t\t// take into account orientation tag\n\t\t\torientation = (this.meta && this.meta.tiff && this.meta.tiff.Orientation) || 1;\n\n\t\t\tif (Basic.inArray(orientation, [5,6,7,8]) !== -1) { // values that require 90 degree rotation\n\t\t\t\t// swap dimensions\n\t\t\t\tvar tmp = width;\n\t\t\t\twidth = height;\n\t\t\t\theight = tmp;\n\t\t\t}\n\n\t\t\timg = _getImg();\n\n\t\t\t// unify dimensions\n\t\t\tmathFn = !crop ? Math.min : Math.max;\n\t\t\tscale = mathFn(width/img.width, height/img.height);\n\t\t\n\t\t\t// we only downsize here\n\t\t\tif (scale > 1 && (!crop || preserveHeaders)) { // when cropping one of dimensions may still exceed max, so process it anyway\n\t\t\t\tthis.trigger('Resize');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// prepare canvas if necessary\n\t\t\tif (!_canvas) {\n\t\t\t\t_canvas = document.createElement(\"canvas\");\n\t\t\t}\n\n\t\t\t// calculate dimensions of proportionally resized image\n\t\t\tdestWidth = Math.round(img.width * scale);\t\n\t\t\tdestHeight = Math.round(img.height * scale);\n\n\n\t\t\t// scale image and canvas\n\t\t\tif (crop) {\n\t\t\t\t_canvas.width = width;\n\t\t\t\t_canvas.height = height;\n\n\t\t\t\t// if dimensions of the resulting image still larger than canvas, center it\n\t\t\t\tif (destWidth > width) {\n\t\t\t\t\tx = Math.round((destWidth - width) / 2);\n\t\t\t\t}\n\n\t\t\t\tif (destHeight > height) {\n\t\t\t\t\ty = Math.round((destHeight - height) / 2);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_canvas.width = destWidth;\n\t\t\t\t_canvas.height = destHeight;\n\t\t\t}\n\n\t\t\t// rotate if required, according to orientation tag\n\t\t\tif (!_preserveHeaders) {\n\t\t\t\t_rotateToOrientaion(_canvas.width, _canvas.height, orientation);\n\t\t\t}\n\n\t\t\t_drawToCanvas.call(this, img, _canvas, -x, -y, destWidth, destHeight);\n\n\t\t\tthis.width = _canvas.width;\n\t\t\tthis.height = _canvas.height;\n\n\t\t\t_modified = true;\n\t\t\tself.trigger('Resize');\n\t\t}\n\n\n\t\tfunction _drawToCanvas(img, canvas, x, y, w, h) {\n\t\t\tif (Env.OS === 'iOS') { \n\t\t\t\t// avoid squish bug in iOS6\n\t\t\t\tMegaPixel.renderTo(img, canvas, { width: w, height: h, x: x, y: y });\n\t\t\t} else {\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\t\t\t\tctx.drawImage(img, x, y, w, h);\n\t\t\t}\n\t\t}\n\n\n\t\t/**\n\t\t* Transform canvas coordination according to specified frame size and orientation\n\t\t* Orientation value is from EXIF tag\n\t\t* @author Shinichi Tomita <shinichi.tomita@gmail.com>\n\t\t*/\n\t\tfunction _rotateToOrientaion(width, height, orientation) {\n\t\t\tswitch (orientation) {\n\t\t\t\tcase 5:\n\t\t\t\tcase 6:\n\t\t\t\tcase 7:\n\t\t\t\tcase 8:\n\t\t\t\t\t_canvas.width = height;\n\t\t\t\t\t_canvas.height = width;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t_canvas.width = width;\n\t\t\t\t\t_canvas.height = height;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t1 = The 0th row is at the visual top of the image, and the 0th column is the visual left-hand side.\n\t\t\t2 = The 0th row is at the visual top of the image, and the 0th column is the visual right-hand side.\n\t\t\t3 = The 0th row is at the visual bottom of the image, and the 0th column is the visual right-hand side.\n\t\t\t4 = The 0th row is at the visual bottom of the image, and the 0th column is the visual left-hand side.\n\t\t\t5 = The 0th row is the visual left-hand side of the image, and the 0th column is the visual top.\n\t\t\t6 = The 0th row is the visual right-hand side of the image, and the 0th column is the visual top.\n\t\t\t7 = The 0th row is the visual right-hand side of the image, and the 0th column is the visual bottom.\n\t\t\t8 = The 0th row is the visual left-hand side of the image, and the 0th column is the visual bottom.\n\t\t\t*/\n\n\t\t\tvar ctx = _canvas.getContext('2d');\n\t\t\tswitch (orientation) {\n\t\t\t\tcase 2:\n\t\t\t\t\t// horizontal flip\n\t\t\t\t\tctx.translate(width, 0);\n\t\t\t\t\tctx.scale(-1, 1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\t// 180 rotate left\n\t\t\t\t\tctx.translate(width, height);\n\t\t\t\t\tctx.rotate(Math.PI);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\t// vertical flip\n\t\t\t\t\tctx.translate(0, height);\n\t\t\t\t\tctx.scale(1, -1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\t// vertical flip + 90 rotate right\n\t\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\t\tctx.scale(1, -1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t\t// 90 rotate right\n\t\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\t\tctx.translate(0, -height);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 7:\n\t\t\t\t\t// horizontal flip + 90 rotate right\n\t\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\t\tctx.translate(width, -height);\n\t\t\t\t\tctx.scale(-1, 1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\t// 90 rotate left\n\t\t\t\t\tctx.rotate(-0.5 * Math.PI);\n\t\t\t\t\tctx.translate(-width, 0);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\n\t\tfunction _purge() {\n\t\t\tif (_imgInfo) {\n\t\t\t\t_imgInfo.purge();\n\t\t\t\t_imgInfo = null;\n\t\t\t}\n\t\t\t_binStr = _img = _canvas = _blob = null;\n\t\t\t_modified = false;\n\t\t}\n\t}\n\n\treturn (extensions.Image = HTML5Image);\n});\n");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "251:10510");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "644:10464");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10468:10506");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "670:821");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "822:822");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "827:4672");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4678:4823");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4829:4923");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4929:5030");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5036:5385");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5391:5825");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5830:7817");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7823:8101");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "8297:10300");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10306:10461");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "886:988");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "989:989");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "996:1096");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1103:1115");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1122:1426");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1032:1090");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1152:1178");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1185:1213");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1220:1226");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1246:1420");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1316:1375");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1383:1411");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1339:1367");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1480:1500");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1507:1600");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1607:1692");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1730:1761");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1768:1872");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1879:2160");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2167:2178");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "1833:1866");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2217:2249");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2291:2350");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2356:2370");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2311:2344");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2423:2582");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2588:2693");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2524:2576");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2740:2772");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2847:2891");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2898:3204");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2870:2885");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2932:2969");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "2989:3198");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3074:3125");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3153:3191");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3333:3514");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3521:4488");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4495:4512");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4519:4533");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3407:3487");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3494:3508");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3429:3480");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3555:3606");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3626:3637");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3661:3702");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3710:3925");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3933:3961");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3969:4482");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3683:3695");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3795:3849");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3877:3918");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "3991:4031");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4040:4367");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4436:4452");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4460:4475");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4112:4277");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4319:4359");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4163:4268");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4571:4580");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4586:4603");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4609:4661");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4702:4792");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4797:4819");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4731:4787");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4858:4919");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "4965:5026");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5064:5079");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5085:5103");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5108:5235");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5240:5297");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5303:5381");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5140:5157");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5163:5229");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5271:5291");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5436:5455");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5500:5821");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5529:5550");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5556:5614");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5620:5734");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5740:5762");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5586:5607");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5651:5727");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5780:5816");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "5892:6012");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6013:6013");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6019:6053");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6165:6243");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6249:6428");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6434:6449");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6478:6514");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6519:6569");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6605:6773");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6813:6880");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6945:6986");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6992:7035");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7071:7466");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7527:7624");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7630:7699");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7705:7731");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7736:7764");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7770:7786");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7791:7813");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6370:6385");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6391:6405");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6411:6423");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6734:6756");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6762:6768");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "6833:6875");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7087:7108");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7114:7137");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7224:7299");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7306:7385");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7254:7293");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7338:7379");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7403:7428");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7434:7461");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7556:7619");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7876:8097");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "7937:8005");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "8023:8056");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "8062:8092");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "8359:8574");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9422:9456");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9461:10296");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "8435:8457");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "8464:8486");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "8493:8498");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "8518:8539");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "8546:8569");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9525:9548");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9555:9571");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9578:9583");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9626:9654");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9661:9680");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9687:9692");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9733:9757");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9764:9780");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9787:9792");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9851:9876");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9883:9899");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9906:9911");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9954:9979");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "9986:10011");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10018:10023");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10084:10109");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10116:10145");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10152:10168");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10175:10180");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10222:10248");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10255:10279");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10286:10291");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10329:10391");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10396:10435");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10440:10457");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10349:10365");
__$coverInitRange("src/javascript/runtime/html5/image/Image.js", "10371:10386");
__$coverCall('src/javascript/runtime/html5/image/Image.js', '251:10510');
define('moxie/runtime/html5/image/Image', [
    'moxie/runtime/html5/Runtime',
    'moxie/core/utils/Basic',
    'moxie/core/Exceptions',
    'moxie/core/utils/Encode',
    'moxie/file/Blob',
    'moxie/runtime/html5/image/ImageInfo',
    'moxie/runtime/html5/image/MegaPixel',
    'moxie/core/utils/Mime',
    'moxie/core/utils/Env'
], function (extensions, Basic, x, Encode, Blob, ImageInfo, MegaPixel, Mime, Env) {
    __$coverCall('src/javascript/runtime/html5/image/Image.js', '644:10464');
    function HTML5Image() {
        __$coverCall('src/javascript/runtime/html5/image/Image.js', '670:821');
        var me = this, _img, _imgInfo, _canvas, _binStr, _blob, _modified = false, _preserveHeaders = true;
        __$coverCall('src/javascript/runtime/html5/image/Image.js', '822:822');
        ;
        __$coverCall('src/javascript/runtime/html5/image/Image.js', '827:4672');
        Basic.extend(this, {
            loadFromBlob: function (blob) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '886:988');
                var comp = this, I = comp.getRuntime(), asBinary = arguments.length > 1 ? arguments[1] : true;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '989:989');
                ;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '996:1096');
                if (!I.can('access_binary')) {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '1032:1090');
                    throw new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);
                }
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '1103:1115');
                _blob = blob;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '1122:1426');
                if (blob.isDetached()) {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '1152:1178');
                    _binStr = blob.getSource();
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '1185:1213');
                    _preload.call(this, _binStr);
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '1220:1226');
                    return;
                } else {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '1246:1420');
                    _readAsDataUrl.call(this, blob.getSource(), function (dataUrl) {
                        __$coverCall('src/javascript/runtime/html5/image/Image.js', '1316:1375');
                        if (asBinary) {
                            __$coverCall('src/javascript/runtime/html5/image/Image.js', '1339:1367');
                            _binStr = _toBinary(dataUrl);
                        }
                        __$coverCall('src/javascript/runtime/html5/image/Image.js', '1383:1411');
                        _preload.call(comp, dataUrl);
                    });
                }
            },
            loadFromImage: function (img, exact) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '1480:1500');
                this.meta = img.meta;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '1507:1600');
                _blob = new Blob(null, {
                    name: img.name,
                    size: img.size,
                    type: img.type
                });
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '1607:1692');
                _preload.call(this, exact ? _binStr = img.getAsBinaryString() : img.getAsDataURL());
            },
            getInfo: function () {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '1730:1761');
                var I = this.getRuntime(), info;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '1768:1872');
                if (!_imgInfo && _binStr && I.can('access_image_binary')) {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '1833:1866');
                    _imgInfo = new ImageInfo(_binStr);
                }
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '1879:2160');
                info = {
                    width: _getImg().width || 0,
                    height: _getImg().height || 0,
                    type: _blob.type || Mime.getFileMime(_blob.name),
                    size: _binStr && _binStr.length || _blob.size || 0,
                    name: _blob.name || '',
                    meta: _imgInfo && _imgInfo.meta || this.meta || {}
                };
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '2167:2178');
                return info;
            },
            downsize: function () {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '2217:2249');
                _downsize.apply(this, arguments);
            },
            getAsCanvas: function () {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '2291:2350');
                if (_canvas) {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '2311:2344');
                    _canvas.id = this.uid + '_canvas';
                }
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '2356:2370');
                return _canvas;
            },
            getAsBlob: function (type, quality) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '2423:2582');
                if (type !== this.type) {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '2524:2576');
                    _downsize.call(this, this.width, this.height, false);
                }
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '2588:2693');
                return new Blob(null, {
                    type: type,
                    data: me.getAsBinaryString.call(this, type, quality)
                });
            },
            getAsDataURL: function (type) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '2740:2772');
                var quality = arguments[1] || 90;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '2847:2891');
                if (!_modified) {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '2870:2885');
                    return _img.src;
                }
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '2898:3204');
                if ('image/jpeg' !== type) {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '2932:2969');
                    return _canvas.toDataURL('image/png');
                } else {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '2989:3198');
                    try {
                        __$coverCall('src/javascript/runtime/html5/image/Image.js', '3074:3125');
                        return _canvas.toDataURL('image/jpeg', quality / 100);
                    } catch (ex) {
                        __$coverCall('src/javascript/runtime/html5/image/Image.js', '3153:3191');
                        return _canvas.toDataURL('image/jpeg');
                    }
                }
            },
            getAsBinaryString: function (type, quality) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '3333:3514');
                if (!_modified) {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '3407:3487');
                    if (!_binStr) {
                        __$coverCall('src/javascript/runtime/html5/image/Image.js', '3429:3480');
                        _binStr = _toBinary(me.getAsDataURL(type, quality));
                    }
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '3494:3508');
                    return _binStr;
                }
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '3521:4488');
                if ('image/jpeg' !== type) {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '3555:3606');
                    _binStr = _toBinary(me.getAsDataURL(type, quality));
                } else {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '3626:3637');
                    var dataUrl;
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '3661:3702');
                    if (!quality) {
                        __$coverCall('src/javascript/runtime/html5/image/Image.js', '3683:3695');
                        quality = 90;
                    }
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '3710:3925');
                    try {
                        __$coverCall('src/javascript/runtime/html5/image/Image.js', '3795:3849');
                        dataUrl = _canvas.toDataURL('image/jpeg', quality / 100);
                    } catch (ex) {
                        __$coverCall('src/javascript/runtime/html5/image/Image.js', '3877:3918');
                        dataUrl = _canvas.toDataURL('image/jpeg');
                    }
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '3933:3961');
                    _binStr = _toBinary(dataUrl);
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '3969:4482');
                    if (_imgInfo) {
                        __$coverCall('src/javascript/runtime/html5/image/Image.js', '3991:4031');
                        _binStr = _imgInfo.stripHeaders(_binStr);
                        __$coverCall('src/javascript/runtime/html5/image/Image.js', '4040:4367');
                        if (_preserveHeaders) {
                            __$coverCall('src/javascript/runtime/html5/image/Image.js', '4112:4277');
                            if (_imgInfo.meta && _imgInfo.meta.exif) {
                                __$coverCall('src/javascript/runtime/html5/image/Image.js', '4163:4268');
                                _imgInfo.setExif({
                                    PixelXDimension: this.width,
                                    PixelYDimension: this.height
                                });
                            }
                            __$coverCall('src/javascript/runtime/html5/image/Image.js', '4319:4359');
                            _binStr = _imgInfo.writeHeaders(_binStr);
                        }
                        __$coverCall('src/javascript/runtime/html5/image/Image.js', '4436:4452');
                        _imgInfo.purge();
                        __$coverCall('src/javascript/runtime/html5/image/Image.js', '4460:4475');
                        _imgInfo = null;
                    }
                }
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '4495:4512');
                _modified = false;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '4519:4533');
                return _binStr;
            },
            destroy: function () {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '4571:4580');
                me = null;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '4586:4603');
                _purge.call(this);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '4609:4661');
                this.getRuntime().getShim().removeInstance(this.uid);
            }
        });
        __$coverCall('src/javascript/runtime/html5/image/Image.js', '4678:4823');
        function _getImg() {
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '4702:4792');
            if (!_canvas && !_img) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '4731:4787');
                throw new x.ImageError(x.DOMException.INVALID_STATE_ERR);
            }
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '4797:4819');
            return _canvas || _img;
        }
        __$coverCall('src/javascript/runtime/html5/image/Image.js', '4829:4923');
        function _toBinary(str) {
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '4858:4919');
            return Encode.atob(str.substring(str.indexOf('base64,') + 7));
        }
        __$coverCall('src/javascript/runtime/html5/image/Image.js', '4929:5030');
        function _toDataUrl(str, type) {
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '4965:5026');
            return 'data:' + (type || '') + ';base64,' + Encode.btoa(str);
        }
        __$coverCall('src/javascript/runtime/html5/image/Image.js', '5036:5385');
        function _preload(str) {
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '5064:5079');
            var comp = this;
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '5085:5103');
            _img = new Image();
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '5108:5235');
            _img.onerror = function () {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '5140:5157');
                _purge.call(this);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '5163:5229');
                comp.trigger('error', new x.ImageError(x.ImageError.WRONG_FORMAT));
            };
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '5240:5297');
            _img.onload = function () {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '5271:5291');
                comp.trigger('load');
            };
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '5303:5381');
            _img.src = /^data:[^;]*;base64,/.test(str) ? str : _toDataUrl(str, _blob.type);
        }
        __$coverCall('src/javascript/runtime/html5/image/Image.js', '5391:5825');
        function _readAsDataUrl(file, callback) {
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '5436:5455');
            var comp = this, fr;
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '5500:5821');
            if (window.FileReader) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '5529:5550');
                fr = new FileReader();
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '5556:5614');
                fr.onload = function () {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '5586:5607');
                    callback(this.result);
                };
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '5620:5734');
                fr.onerror = function () {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '5651:5727');
                    comp.trigger('error', new x.FileException(x.FileException.NOT_READABLE_ERR));
                };
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '5740:5762');
                fr.readAsDataURL(file);
            } else {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '5780:5816');
                return callback(file.getAsDataURL());
            }
        }
        __$coverCall('src/javascript/runtime/html5/image/Image.js', '5830:7817');
        function _downsize(width, height, crop, preserveHeaders) {
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '5892:6012');
            var self = this, scale, mathFn, x = 0, y = 0, img, destWidth, destHeight, orientation;
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '6013:6013');
            ;
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '6019:6053');
            _preserveHeaders = preserveHeaders;
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '6165:6243');
            orientation = this.meta && this.meta.tiff && this.meta.tiff.Orientation || 1;
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '6249:6428');
            if (Basic.inArray(orientation, [
                    5,
                    6,
                    7,
                    8
                ]) !== -1) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '6370:6385');
                var tmp = width;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '6391:6405');
                width = height;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '6411:6423');
                height = tmp;
            }
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '6434:6449');
            img = _getImg();
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '6478:6514');
            mathFn = !crop ? Math.min : Math.max;
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '6519:6569');
            scale = mathFn(width / img.width, height / img.height);
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '6605:6773');
            if (scale > 1 && (!crop || preserveHeaders)) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '6734:6756');
                this.trigger('Resize');
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '6762:6768');
                return;
            }
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '6813:6880');
            if (!_canvas) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '6833:6875');
                _canvas = document.createElement('canvas');
            }
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '6945:6986');
            destWidth = Math.round(img.width * scale);
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '6992:7035');
            destHeight = Math.round(img.height * scale);
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '7071:7466');
            if (crop) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '7087:7108');
                _canvas.width = width;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '7114:7137');
                _canvas.height = height;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '7224:7299');
                if (destWidth > width) {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '7254:7293');
                    x = Math.round((destWidth - width) / 2);
                }
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '7306:7385');
                if (destHeight > height) {
                    __$coverCall('src/javascript/runtime/html5/image/Image.js', '7338:7379');
                    y = Math.round((destHeight - height) / 2);
                }
            } else {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '7403:7428');
                _canvas.width = destWidth;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '7434:7461');
                _canvas.height = destHeight;
            }
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '7527:7624');
            if (!_preserveHeaders) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '7556:7619');
                _rotateToOrientaion(_canvas.width, _canvas.height, orientation);
            }
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '7630:7699');
            _drawToCanvas.call(this, img, _canvas, -x, -y, destWidth, destHeight);
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '7705:7731');
            this.width = _canvas.width;
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '7736:7764');
            this.height = _canvas.height;
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '7770:7786');
            _modified = true;
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '7791:7813');
            self.trigger('Resize');
        }
        __$coverCall('src/javascript/runtime/html5/image/Image.js', '7823:8101');
        function _drawToCanvas(img, canvas, x, y, w, h) {
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '7876:8097');
            if (Env.OS === 'iOS') {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '7937:8005');
                MegaPixel.renderTo(img, canvas, {
                    width: w,
                    height: h,
                    x: x,
                    y: y
                });
            } else {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '8023:8056');
                var ctx = canvas.getContext('2d');
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '8062:8092');
                ctx.drawImage(img, x, y, w, h);
            }
        }
        __$coverCall('src/javascript/runtime/html5/image/Image.js', '8297:10300');
        function _rotateToOrientaion(width, height, orientation) {
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '8359:8574');
            switch (orientation) {
            case 5:
            case 6:
            case 7:
            case 8:
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '8435:8457');
                _canvas.width = height;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '8464:8486');
                _canvas.height = width;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '8493:8498');
                break;
            default:
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '8518:8539');
                _canvas.width = width;
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '8546:8569');
                _canvas.height = height;
            }
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '9422:9456');
            var ctx = _canvas.getContext('2d');
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '9461:10296');
            switch (orientation) {
            case 2:
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9525:9548');
                ctx.translate(width, 0);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9555:9571');
                ctx.scale(-1, 1);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9578:9583');
                break;
            case 3:
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9626:9654');
                ctx.translate(width, height);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9661:9680');
                ctx.rotate(Math.PI);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9687:9692');
                break;
            case 4:
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9733:9757');
                ctx.translate(0, height);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9764:9780');
                ctx.scale(1, -1);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9787:9792');
                break;
            case 5:
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9851:9876');
                ctx.rotate(0.5 * Math.PI);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9883:9899');
                ctx.scale(1, -1);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9906:9911');
                break;
            case 6:
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9954:9979');
                ctx.rotate(0.5 * Math.PI);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '9986:10011');
                ctx.translate(0, -height);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '10018:10023');
                break;
            case 7:
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '10084:10109');
                ctx.rotate(0.5 * Math.PI);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '10116:10145');
                ctx.translate(width, -height);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '10152:10168');
                ctx.scale(-1, 1);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '10175:10180');
                break;
            case 8:
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '10222:10248');
                ctx.rotate(-0.5 * Math.PI);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '10255:10279');
                ctx.translate(-width, 0);
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '10286:10291');
                break;
            }
        }
        __$coverCall('src/javascript/runtime/html5/image/Image.js', '10306:10461');
        function _purge() {
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '10329:10391');
            if (_imgInfo) {
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '10349:10365');
                _imgInfo.purge();
                __$coverCall('src/javascript/runtime/html5/image/Image.js', '10371:10386');
                _imgInfo = null;
            }
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '10396:10435');
            _binStr = _img = _canvas = _blob = null;
            __$coverCall('src/javascript/runtime/html5/image/Image.js', '10440:10457');
            _modified = false;
        }
    }
    __$coverCall('src/javascript/runtime/html5/image/Image.js', '10468:10506');
    return extensions.Image = HTML5Image;
});

// Included from: src/javascript/runtime/flash/Runtime.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/flash/Runtime.js", "/**\n * Runtime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global ActiveXObject:true */\n\n/**\nDefines constructor for Flash runtime.\n\n@class moxie/runtime/flash/Runtime\n@private\n*/\ndefine(\"moxie/runtime/flash/Runtime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Env\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/Runtime\"\n], function(Basic, Env, Dom, x, Runtime) {\n\t\n\tvar type = 'flash', extensions = {};\n\n\t/**\n\tGet the version of the Flash Player\n\n\t@method getShimVersion\n\t@private\n\t@return {Number} Flash Player version\n\t*/\n\tfunction getShimVersion() {\n\t\tvar version;\n\n\t\ttry {\n\t\t\tversion = navigator.plugins['Shockwave Flash'];\n\t\t\tversion = version.description;\n\t\t} catch (e1) {\n\t\t\ttry {\n\t\t\t\tversion = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n\t\t\t} catch (e2) {\n\t\t\t\tversion = '0.0';\n\t\t\t}\n\t\t}\n\t\tversion = version.match(/\\d+/g);\n\t\treturn parseFloat(version[0] + '.' + version[1]);\n\t}\n\n\t/**\n\tConstructor for the Flash Runtime\n\n\t@class FlashRuntime\n\t@extends Runtime\n\t*/\n\tfunction FlashRuntime(options) {\n\t\tvar I = this, initTimer;\n\n\t\toptions = Basic.extend({ swf_url: Env.swf_url }, options);\n\n\t\tRuntime.call(this, options, type, {\n\t\t\taccess_binary: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\taccess_image_binary: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tdisplay_media: Runtime.capTrue,\n\t\t\tdo_cors: Runtime.capTrue,\n\t\t\tdrag_and_drop: false,\n\t\t\treport_upload_progress: function() {\n\t\t\t\treturn I.mode === 'client';\n\t\t\t},\n\t\t\tresize_image: Runtime.capTrue,\n\t\t\treturn_response_headers: false,\n\t\t\treturn_response_type: function(responseType) {\n\t\t\t\tif (responseType === 'json' && !!window.JSON) {\n\t\t\t\t\treturn true;\n\t\t\t\t} \n\t\t\t\treturn !Basic.arrayDiff(responseType, ['', 'text', 'document']) || I.mode === 'browser';\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn I.mode === 'browser' || !Basic.arrayDiff(code, [200, 404]);\n\t\t\t},\n\t\t\tselect_file: Runtime.capTrue,\n\t\t\tselect_multiple: Runtime.capTrue,\n\t\t\tsend_binary_string: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsend_browser_cookies: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsend_custom_headers: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsend_multipart: Runtime.capTrue,\n\t\t\tslice_blob: Runtime.capTrue,\n\t\t\tstream_upload: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsummon_file_dialog: false,\n\t\t\tupload_filesize: function(size) {\n\t\t\t\treturn Basic.parseSizeStr(size) <= 2097152 || I.mode === 'client';\n\t\t\t},\n\t\t\tuse_http_method: function(methods) {\n\t\t\t\treturn !Basic.arrayDiff(methods, ['GET', 'POST']);\n\t\t\t}\n\t\t}, { \n\t\t\t// capabilities that require specific mode\n\t\t\taccess_binary: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\taccess_image_binary: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\treport_upload_progress: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\treturn_response_type: function(responseType) {\n\t\t\t\treturn Basic.arrayDiff(responseType, ['', 'text', 'json', 'document']) ? 'browser' : ['client', 'browser'];\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn Basic.arrayDiff(code, [200, 404]) ? 'browser' : ['client', 'browser'];\n\t\t\t},\n\t\t\tsend_binary_string: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\tsend_browser_cookies: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\tsend_custom_headers: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\tstream_upload: function(value) {\n\t\t\t\treturn value ? 'client' : 'browser';\n\t\t\t},\n\t\t\tupload_filesize: function(size) {\n\t\t\t\treturn Basic.parseSizeStr(size) >= 2097152 ? 'client' : 'browser';\n\t\t\t}\n\t\t}, 'client');\n\n\n\t\t// minimal requirement for Flash Player version\n\t\tif (getShimVersion() < 11.3) {\n\t\t\tthis.mode = false; // with falsy mode, runtime won't operable, no matter what the mode was before\n\t\t}\n\n\n\t\tBasic.extend(this, {\n\n\t\t\tgetShim: function() {\n\t\t\t\treturn Dom.get(this.uid);\n\t\t\t},\n\n\t\t\tshimExec: function(component, action) {\n\t\t\t\tvar args = [].slice.call(arguments, 2);\n\t\t\t\treturn I.getShim().exec(this.uid, component, action, args);\n\t\t\t},\n\n\t\t\tinit: function() {\n\t\t\t\tvar html, el, container;\n\n\t\t\t\tcontainer = this.getShimContainer();\n\n\t\t\t\t// if not the minimal height, shims are not initialized in older browsers (e.g FF3.6, IE6,7,8, Safari 4.0,5.0, etc)\n\t\t\t\tBasic.extend(container.style, {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: '-8px',\n\t\t\t\t\tleft: '-8px',\n\t\t\t\t\twidth: '9px',\n\t\t\t\t\theight: '9px',\n\t\t\t\t\toverflow: 'hidden'\n\t\t\t\t});\n\n\t\t\t\t// insert flash object\n\t\t\t\thtml = '<object id=\"' + this.uid + '\" type=\"application/x-shockwave-flash\" data=\"' +  options.swf_url + '\" ';\n\n\t\t\t\tif (Env.browser === 'IE') {\n\t\t\t\t\thtml += 'classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" ';\n\t\t\t\t}\n\n\t\t\t\thtml += 'width=\"100%\" height=\"100%\" style=\"outline:0\">'  +\n\t\t\t\t\t'<param name=\"movie\" value=\"' + options.swf_url + '\" />' +\n\t\t\t\t\t'<param name=\"flashvars\" value=\"uid=' + escape(this.uid) + '&target=' + Env.global_event_dispatcher + '\" />' +\n\t\t\t\t\t'<param name=\"wmode\" value=\"transparent\" />' +\n\t\t\t\t\t'<param name=\"allowscriptaccess\" value=\"always\" />' +\n\t\t\t\t'</object>';\n\n\t\t\t\tif (Env.browser === 'IE') {\n\t\t\t\t\tel = document.createElement('div');\n\t\t\t\t\tcontainer.appendChild(el);\n\t\t\t\t\tel.outerHTML = html;\n\t\t\t\t\tel = container = null; // just in case\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.innerHTML = html;\n\t\t\t\t}\n\n\t\t\t\t// Init is dispatched by the shim\n\t\t\t\tinitTimer = setTimeout(function() {\n\t\t\t\t\tif (I && !I.initialized) { // runtime might be already destroyed by this moment\n\t\t\t\t\t\tI.trigger(\"Error\", new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));\n\t\t\t\t\t}\n\t\t\t\t}, 5000);\n\t\t\t},\n\n\t\t\tdestroy: (function(destroy) { // extend default destroy method\n\t\t\t\treturn function() {\n\t\t\t\t\tdestroy.call(I);\n\t\t\t\t\tclearTimeout(initTimer); // initialization check might be still onwait\n\t\t\t\t\toptions = initTimer = destroy = I = null;\n\t\t\t\t};\n\t\t\t}(this.destroy))\n\n\t\t}, extensions);\n\t}\n\n\tRuntime.addConstructor(type, FlashRuntime);\n\n\treturn extensions;\n});\n");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "321:6206");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "535:570");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "694:1083");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "1171:6135");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "6139:6181");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "6185:6202");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "724:735");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "740:993");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "997:1028");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "1032:1080");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "749:795");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "800:829");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "851:989");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "861:945");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "969:984");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "1206:1229");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "1234:1291");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "1296:3912");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "3968:4102");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "4108:6132");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "1372:1408");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "1462:1498");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "1639:1665");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "1796:1866");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "1873:1960");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "1849:1860");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "2012:2077");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "2200:2236");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "2291:2327");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "2381:2417");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "2533:2569");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "2648:2713");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "2765:2814");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "2915:2950");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "3004:3039");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "3096:3131");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "3193:3299");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "3351:3427");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "3480:3515");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "3570:3605");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "3659:3694");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "3742:3777");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "3826:3891");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "4002:4019");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "4159:4183");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "4239:4277");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "4283:4341");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "4376:4399");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "4406:4441");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "4568:4733");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "4767:4875");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "4882:4984");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "4991:5356");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "5363:5584");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "5629:5844");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "4915:4978");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "5396:5430");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "5437:5462");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "5469:5488");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "5495:5516");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "5552:5578");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "5670:5830");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "5756:5823");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "5923:6093");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "5948:5963");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "5970:5993");
__$coverInitRange("src/javascript/runtime/flash/Runtime.js", "6046:6086");
__$coverCall('src/javascript/runtime/flash/Runtime.js', '321:6206');
define('moxie/runtime/flash/Runtime', [
    'moxie/core/utils/Basic',
    'moxie/core/utils/Env',
    'moxie/core/utils/Dom',
    'moxie/core/Exceptions',
    'moxie/runtime/Runtime'
], function (Basic, Env, Dom, x, Runtime) {
    __$coverCall('src/javascript/runtime/flash/Runtime.js', '535:570');
    var type = 'flash', extensions = {};
    __$coverCall('src/javascript/runtime/flash/Runtime.js', '694:1083');
    function getShimVersion() {
        __$coverCall('src/javascript/runtime/flash/Runtime.js', '724:735');
        var version;
        __$coverCall('src/javascript/runtime/flash/Runtime.js', '740:993');
        try {
            __$coverCall('src/javascript/runtime/flash/Runtime.js', '749:795');
            version = navigator.plugins['Shockwave Flash'];
            __$coverCall('src/javascript/runtime/flash/Runtime.js', '800:829');
            version = version.description;
        } catch (e1) {
            __$coverCall('src/javascript/runtime/flash/Runtime.js', '851:989');
            try {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '861:945');
                version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');
            } catch (e2) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '969:984');
                version = '0.0';
            }
        }
        __$coverCall('src/javascript/runtime/flash/Runtime.js', '997:1028');
        version = version.match(/\d+/g);
        __$coverCall('src/javascript/runtime/flash/Runtime.js', '1032:1080');
        return parseFloat(version[0] + '.' + version[1]);
    }
    __$coverCall('src/javascript/runtime/flash/Runtime.js', '1171:6135');
    function FlashRuntime(options) {
        __$coverCall('src/javascript/runtime/flash/Runtime.js', '1206:1229');
        var I = this, initTimer;
        __$coverCall('src/javascript/runtime/flash/Runtime.js', '1234:1291');
        options = Basic.extend({ swf_url: Env.swf_url }, options);
        __$coverCall('src/javascript/runtime/flash/Runtime.js', '1296:3912');
        Runtime.call(this, options, type, {
            access_binary: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '1372:1408');
                return value && I.mode === 'browser';
            },
            access_image_binary: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '1462:1498');
                return value && I.mode === 'browser';
            },
            display_media: Runtime.capTrue,
            do_cors: Runtime.capTrue,
            drag_and_drop: false,
            report_upload_progress: function () {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '1639:1665');
                return I.mode === 'client';
            },
            resize_image: Runtime.capTrue,
            return_response_headers: false,
            return_response_type: function (responseType) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '1796:1866');
                if (responseType === 'json' && !!window.JSON) {
                    __$coverCall('src/javascript/runtime/flash/Runtime.js', '1849:1860');
                    return true;
                }
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '1873:1960');
                return !Basic.arrayDiff(responseType, [
                    '',
                    'text',
                    'document'
                ]) || I.mode === 'browser';
            },
            return_status_code: function (code) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '2012:2077');
                return I.mode === 'browser' || !Basic.arrayDiff(code, [
                    200,
                    404
                ]);
            },
            select_file: Runtime.capTrue,
            select_multiple: Runtime.capTrue,
            send_binary_string: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '2200:2236');
                return value && I.mode === 'browser';
            },
            send_browser_cookies: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '2291:2327');
                return value && I.mode === 'browser';
            },
            send_custom_headers: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '2381:2417');
                return value && I.mode === 'browser';
            },
            send_multipart: Runtime.capTrue,
            slice_blob: Runtime.capTrue,
            stream_upload: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '2533:2569');
                return value && I.mode === 'browser';
            },
            summon_file_dialog: false,
            upload_filesize: function (size) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '2648:2713');
                return Basic.parseSizeStr(size) <= 2097152 || I.mode === 'client';
            },
            use_http_method: function (methods) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '2765:2814');
                return !Basic.arrayDiff(methods, [
                    'GET',
                    'POST'
                ]);
            }
        }, {
            access_binary: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '2915:2950');
                return value ? 'browser' : 'client';
            },
            access_image_binary: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '3004:3039');
                return value ? 'browser' : 'client';
            },
            report_upload_progress: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '3096:3131');
                return value ? 'browser' : 'client';
            },
            return_response_type: function (responseType) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '3193:3299');
                return Basic.arrayDiff(responseType, [
                    '',
                    'text',
                    'json',
                    'document'
                ]) ? 'browser' : [
                    'client',
                    'browser'
                ];
            },
            return_status_code: function (code) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '3351:3427');
                return Basic.arrayDiff(code, [
                    200,
                    404
                ]) ? 'browser' : [
                    'client',
                    'browser'
                ];
            },
            send_binary_string: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '3480:3515');
                return value ? 'browser' : 'client';
            },
            send_browser_cookies: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '3570:3605');
                return value ? 'browser' : 'client';
            },
            send_custom_headers: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '3659:3694');
                return value ? 'browser' : 'client';
            },
            stream_upload: function (value) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '3742:3777');
                return value ? 'client' : 'browser';
            },
            upload_filesize: function (size) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '3826:3891');
                return Basic.parseSizeStr(size) >= 2097152 ? 'client' : 'browser';
            }
        }, 'client');
        __$coverCall('src/javascript/runtime/flash/Runtime.js', '3968:4102');
        if (getShimVersion() < 11.3) {
            __$coverCall('src/javascript/runtime/flash/Runtime.js', '4002:4019');
            this.mode = false;
        }
        __$coverCall('src/javascript/runtime/flash/Runtime.js', '4108:6132');
        Basic.extend(this, {
            getShim: function () {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '4159:4183');
                return Dom.get(this.uid);
            },
            shimExec: function (component, action) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '4239:4277');
                var args = [].slice.call(arguments, 2);
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '4283:4341');
                return I.getShim().exec(this.uid, component, action, args);
            },
            init: function () {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '4376:4399');
                var html, el, container;
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '4406:4441');
                container = this.getShimContainer();
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '4568:4733');
                Basic.extend(container.style, {
                    position: 'absolute',
                    top: '-8px',
                    left: '-8px',
                    width: '9px',
                    height: '9px',
                    overflow: 'hidden'
                });
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '4767:4875');
                html = '<object id="' + this.uid + '" type="application/x-shockwave-flash" data="' + options.swf_url + '" ';
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '4882:4984');
                if (Env.browser === 'IE') {
                    __$coverCall('src/javascript/runtime/flash/Runtime.js', '4915:4978');
                    html += 'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ';
                }
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '4991:5356');
                html += 'width="100%" height="100%" style="outline:0">' + '<param name="movie" value="' + options.swf_url + '" />' + '<param name="flashvars" value="uid=' + escape(this.uid) + '&target=' + Env.global_event_dispatcher + '" />' + '<param name="wmode" value="transparent" />' + '<param name="allowscriptaccess" value="always" />' + '</object>';
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '5363:5584');
                if (Env.browser === 'IE') {
                    __$coverCall('src/javascript/runtime/flash/Runtime.js', '5396:5430');
                    el = document.createElement('div');
                    __$coverCall('src/javascript/runtime/flash/Runtime.js', '5437:5462');
                    container.appendChild(el);
                    __$coverCall('src/javascript/runtime/flash/Runtime.js', '5469:5488');
                    el.outerHTML = html;
                    __$coverCall('src/javascript/runtime/flash/Runtime.js', '5495:5516');
                    el = container = null;
                } else {
                    __$coverCall('src/javascript/runtime/flash/Runtime.js', '5552:5578');
                    container.innerHTML = html;
                }
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '5629:5844');
                initTimer = setTimeout(function () {
                    __$coverCall('src/javascript/runtime/flash/Runtime.js', '5670:5830');
                    if (I && !I.initialized) {
                        __$coverCall('src/javascript/runtime/flash/Runtime.js', '5756:5823');
                        I.trigger('Error', new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));
                    }
                }, 5000);
            },
            destroy: function (destroy) {
                __$coverCall('src/javascript/runtime/flash/Runtime.js', '5923:6093');
                return function () {
                    __$coverCall('src/javascript/runtime/flash/Runtime.js', '5948:5963');
                    destroy.call(I);
                    __$coverCall('src/javascript/runtime/flash/Runtime.js', '5970:5993');
                    clearTimeout(initTimer);
                    __$coverCall('src/javascript/runtime/flash/Runtime.js', '6046:6086');
                    options = initTimer = destroy = I = null;
                };
            }(this.destroy)
        }, extensions);
    }
    __$coverCall('src/javascript/runtime/flash/Runtime.js', '6139:6181');
    Runtime.addConstructor(type, FlashRuntime);
    __$coverCall('src/javascript/runtime/flash/Runtime.js', '6185:6202');
    return extensions;
});

// Included from: src/javascript/runtime/flash/file/Blob.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/flash/file/Blob.js", "/**\n * Blob.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/file/Blob\n@private\n*/\ndefine(\"moxie/runtime/flash/file/Blob\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/file/Blob\"\n], function(extensions, Blob) {\n\n\tvar FlashBlob = {\n\t\tslice: function(blob, start, end, type) {\n\t\t\tvar self = this.getRuntime();\n\n\t\t\tif (start < 0) {\n\t\t\t\tstart = Math.max(blob.size + start, 0);\n\t\t\t} else if (start > 0) {\n\t\t\t\tstart = Math.min(start, blob.size);\n\t\t\t}\n\n\t\t\tif (end < 0) {\n\t\t\t\tend = Math.max(blob.size + end, 0);\n\t\t\t} else if (end > 0) {\n\t\t\t\tend = Math.min(end, blob.size);\n\t\t\t}\n\n\t\t\tblob = self.shimExec.call(this, 'Blob', 'slice', start, end, type || '');\n\n\t\t\tif (blob) {\n\t\t\t\tblob = new Blob(self.uid, blob);\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t};\n\n\treturn (extensions.Blob = FlashBlob);\n});");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "248:934");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "375:890");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "894:930");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "440:468");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "474:605");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "611:730");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "736:808");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "814:866");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "871:882");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "495:533");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "566:600");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "630:664");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "695:725");
__$coverInitRange("src/javascript/runtime/flash/file/Blob.js", "830:861");
__$coverCall('src/javascript/runtime/flash/file/Blob.js', '248:934');
define('moxie/runtime/flash/file/Blob', [
    'moxie/runtime/flash/Runtime',
    'moxie/file/Blob'
], function (extensions, Blob) {
    __$coverCall('src/javascript/runtime/flash/file/Blob.js', '375:890');
    var FlashBlob = {
            slice: function (blob, start, end, type) {
                __$coverCall('src/javascript/runtime/flash/file/Blob.js', '440:468');
                var self = this.getRuntime();
                __$coverCall('src/javascript/runtime/flash/file/Blob.js', '474:605');
                if (start < 0) {
                    __$coverCall('src/javascript/runtime/flash/file/Blob.js', '495:533');
                    start = Math.max(blob.size + start, 0);
                } else if (start > 0) {
                    __$coverCall('src/javascript/runtime/flash/file/Blob.js', '566:600');
                    start = Math.min(start, blob.size);
                }
                __$coverCall('src/javascript/runtime/flash/file/Blob.js', '611:730');
                if (end < 0) {
                    __$coverCall('src/javascript/runtime/flash/file/Blob.js', '630:664');
                    end = Math.max(blob.size + end, 0);
                } else if (end > 0) {
                    __$coverCall('src/javascript/runtime/flash/file/Blob.js', '695:725');
                    end = Math.min(end, blob.size);
                }
                __$coverCall('src/javascript/runtime/flash/file/Blob.js', '736:808');
                blob = self.shimExec.call(this, 'Blob', 'slice', start, end, type || '');
                __$coverCall('src/javascript/runtime/flash/file/Blob.js', '814:866');
                if (blob) {
                    __$coverCall('src/javascript/runtime/flash/file/Blob.js', '830:861');
                    blob = new Blob(self.uid, blob);
                }
                __$coverCall('src/javascript/runtime/flash/file/Blob.js', '871:882');
                return blob;
            }
        };
    __$coverCall('src/javascript/runtime/flash/file/Blob.js', '894:930');
    return extensions.Blob = FlashBlob;
});

// Included from: src/javascript/runtime/flash/file/FileInput.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/flash/file/FileInput.js", "/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/file/FileInput\n@private\n*/\ndefine(\"moxie/runtime/flash/file/FileInput\", [\n\t\"moxie/runtime/flash/Runtime\"\n], function(extensions) {\n\t\n\tvar FileInput = {\t\t\n\t\tinit: function(options) {\n\t\t\tthis.getRuntime().shimExec.call(this, 'FileInput', 'init', {\n\t\t\t\tname: options.name,\n\t\t\t\taccept: options.accept,\n\t\t\t\tmultiple: options.multiple\n\t\t\t});\n\t\t\tthis.trigger('ready');\n\t\t}\n\t};\n\n\treturn (extensions.FileInput = FileInput);\n});\n\n");
__$coverInitRange("src/javascript/runtime/flash/file/FileInput.js", "258:648");
__$coverInitRange("src/javascript/runtime/flash/file/FileInput.js", "365:599");
__$coverInitRange("src/javascript/runtime/flash/file/FileInput.js", "603:644");
__$coverInitRange("src/javascript/runtime/flash/file/FileInput.js", "416:565");
__$coverInitRange("src/javascript/runtime/flash/file/FileInput.js", "570:591");
__$coverCall('src/javascript/runtime/flash/file/FileInput.js', '258:648');
define('moxie/runtime/flash/file/FileInput', ['moxie/runtime/flash/Runtime'], function (extensions) {
    __$coverCall('src/javascript/runtime/flash/file/FileInput.js', '365:599');
    var FileInput = {
            init: function (options) {
                __$coverCall('src/javascript/runtime/flash/file/FileInput.js', '416:565');
                this.getRuntime().shimExec.call(this, 'FileInput', 'init', {
                    name: options.name,
                    accept: options.accept,
                    multiple: options.multiple
                });
                __$coverCall('src/javascript/runtime/flash/file/FileInput.js', '570:591');
                this.trigger('ready');
            }
        };
    __$coverCall('src/javascript/runtime/flash/file/FileInput.js', '603:644');
    return extensions.FileInput = FileInput;
});

// Included from: src/javascript/runtime/flash/file/FileReader.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/flash/file/FileReader.js", "/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/file/FileReader\n@private\n*/\ndefine(\"moxie/runtime/flash/file/FileReader\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/core/utils/Encode\"\n], function(extensions, Encode) {\n\n\tvar _result = '';\n\n\tfunction _formatData(data, op) {\n\t\tswitch (op) {\n\t\t\tcase 'readAsText':\n\t\t\t\treturn Encode.atob(data, 'utf8');\n\t\t\tcase 'readAsBinaryString':\n\t\t\t\treturn Encode.atob(data);\n\t\t\tcase 'readAsDataURL':\n\t\t\t\treturn data;\n\t\t}\n\t\treturn null;\n\t}\n\n\tvar FileReader = {\n\t\tread: function(op, blob) {\n\t\t\tvar target = this, self = target.getRuntime();\n\n\t\t\t// special prefix for DataURL read mode\n\t\t\tif (op === 'readAsDataURL') {\n\t\t\t\t_result = 'data:' + (blob.type || '') + ';base64,';\n\t\t\t}\n\n\t\t\ttarget.bind('Progress', function(e, data) {\n\t\t\t\tif (data) {\n\t\t\t\t\t_result += _formatData(data, op);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn self.shimExec.call(this, 'FileReader', 'readAsBase64', blob.uid);\n\t\t},\n\n\t\tgetResult: function() {\n\t\t\treturn _result;\n\t\t},\n\n\t\tdestroy: function() {\n\t\t\t_result = null;\n\t\t}\n\t};\n\n\treturn (extensions.FileReader = FileReader);\n});");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "260:1244");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "403:419");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "423:654");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "658:1193");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "1197:1240");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "458:636");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "640:651");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "498:530");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "566:590");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "621:632");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "709:754");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "803:892");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "898:1008");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "1014:1085");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "837:887");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "946:1001");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "963:995");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "1122:1136");
__$coverInitRange("src/javascript/runtime/flash/file/FileReader.js", "1171:1185");
__$coverCall('src/javascript/runtime/flash/file/FileReader.js', '260:1244');
define('moxie/runtime/flash/file/FileReader', [
    'moxie/runtime/flash/Runtime',
    'moxie/core/utils/Encode'
], function (extensions, Encode) {
    __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '403:419');
    var _result = '';
    __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '423:654');
    function _formatData(data, op) {
        __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '458:636');
        switch (op) {
        case 'readAsText':
            __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '498:530');
            return Encode.atob(data, 'utf8');
        case 'readAsBinaryString':
            __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '566:590');
            return Encode.atob(data);
        case 'readAsDataURL':
            __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '621:632');
            return data;
        }
        __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '640:651');
        return null;
    }
    __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '658:1193');
    var FileReader = {
            read: function (op, blob) {
                __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '709:754');
                var target = this, self = target.getRuntime();
                __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '803:892');
                if (op === 'readAsDataURL') {
                    __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '837:887');
                    _result = 'data:' + (blob.type || '') + ';base64,';
                }
                __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '898:1008');
                target.bind('Progress', function (e, data) {
                    __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '946:1001');
                    if (data) {
                        __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '963:995');
                        _result += _formatData(data, op);
                    }
                });
                __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '1014:1085');
                return self.shimExec.call(this, 'FileReader', 'readAsBase64', blob.uid);
            },
            getResult: function () {
                __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '1122:1136');
                return _result;
            },
            destroy: function () {
                __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '1171:1185');
                _result = null;
            }
        };
    __$coverCall('src/javascript/runtime/flash/file/FileReader.js', '1197:1240');
    return extensions.FileReader = FileReader;
});

// Included from: src/javascript/runtime/flash/file/FileReaderSync.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/flash/file/FileReaderSync.js", "/**\n * FileReaderSync.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/file/FileReaderSync\n@private\n*/\ndefine(\"moxie/runtime/flash/file/FileReaderSync\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/core/utils/Encode\"\n], function(extensions, Encode) {\n\t\n\tfunction _formatData(data, op) {\n\t\tswitch (op) {\n\t\t\tcase 'readAsText':\n\t\t\t\treturn Encode.atob(data, 'utf8');\n\t\t\tcase 'readAsBinaryString':\n\t\t\t\treturn Encode.atob(data);\n\t\t\tcase 'readAsDataURL':\n\t\t\t\treturn data;\n\t\t}\n\t\treturn null;\n\t}\n\n\tvar FileReaderSync = {\n\t\tread: function(op, blob) {\n\t\t\tvar result, self = this.getRuntime();\n\n\t\t\tresult = self.shimExec.call(this, 'FileReaderSync', 'readAsBase64', blob.uid);\n\t\t\tif (!result) {\n\t\t\t\treturn null; // or throw ex\n\t\t\t}\n\n\t\t\t// special prefix for DataURL read mode\n\t\t\tif (op === 'readAsDataURL') {\n\t\t\t\tresult = 'data:' + (blob.type || '') + ';base64,' + result;\n\t\t\t}\n\n\t\t\treturn _formatData(result, op, blob.type);\n\t\t}\n\t};\n\n\treturn (extensions.FileReaderSync = FileReaderSync);\n});");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "268:1140");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "416:647");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "651:1081");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "1085:1136");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "451:629");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "633:644");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "491:523");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "559:583");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "614:625");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "706:742");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "748:825");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "830:880");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "929:1026");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "1032:1073");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "849:860");
__$coverInitRange("src/javascript/runtime/flash/file/FileReaderSync.js", "963:1021");
__$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '268:1140');
define('moxie/runtime/flash/file/FileReaderSync', [
    'moxie/runtime/flash/Runtime',
    'moxie/core/utils/Encode'
], function (extensions, Encode) {
    __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '416:647');
    function _formatData(data, op) {
        __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '451:629');
        switch (op) {
        case 'readAsText':
            __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '491:523');
            return Encode.atob(data, 'utf8');
        case 'readAsBinaryString':
            __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '559:583');
            return Encode.atob(data);
        case 'readAsDataURL':
            __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '614:625');
            return data;
        }
        __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '633:644');
        return null;
    }
    __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '651:1081');
    var FileReaderSync = {
            read: function (op, blob) {
                __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '706:742');
                var result, self = this.getRuntime();
                __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '748:825');
                result = self.shimExec.call(this, 'FileReaderSync', 'readAsBase64', blob.uid);
                __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '830:880');
                if (!result) {
                    __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '849:860');
                    return null;
                }
                __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '929:1026');
                if (op === 'readAsDataURL') {
                    __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '963:1021');
                    result = 'data:' + (blob.type || '') + ';base64,' + result;
                }
                __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '1032:1073');
                return _formatData(result, op, blob.type);
            }
        };
    __$coverCall('src/javascript/runtime/flash/file/FileReaderSync.js', '1085:1136');
    return extensions.FileReaderSync = FileReaderSync;
});

// Included from: src/javascript/runtime/flash/xhr/XMLHttpRequest.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/xhr/XMLHttpRequest\n@private\n*/\ndefine(\"moxie/runtime/flash/xhr/XMLHttpRequest\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/file/Blob\",\n\t\"moxie/file/File\",\n\t\"moxie/file/FileReaderSync\",\n\t\"moxie/xhr/FormData\",\n\t\"moxie/runtime/Transporter\"\n], function(extensions, Basic, Blob, File, FileReaderSync, FormData, Transporter) {\n\t\n\tvar XMLHttpRequest = {\n\n\t\tsend: function(meta, data) {\n\t\t\tvar target = this, self = target.getRuntime();\n\n\t\t\tfunction send() {\n\t\t\t\tmeta.transport = self.mode;\n\t\t\t\tself.shimExec.call(target, 'XMLHttpRequest', 'send', meta, data);\n\t\t\t}\n\n\n\t\t\tfunction appendBlob(name, blob) {\n\t\t\t\tself.shimExec.call(target, 'XMLHttpRequest', 'appendBlob', name, blob.uid);\n\t\t\t\tdata = null;\n\t\t\t\tsend();\n\t\t\t}\n\n\n\t\t\tfunction attachBlob(blob, cb) {\n\t\t\t\tvar tr = new Transporter();\n\n\t\t\t\ttr.bind(\"TransportingComplete\", function() {\n\t\t\t\t\tcb(this.result);\n\t\t\t\t});\n\n\t\t\t\ttr.transport(blob.getSource(), blob.type, {\n\t\t\t\t\truid: self.uid\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// copy over the headers if any\n\t\t\tif (!Basic.isEmptyObj(meta.headers)) {\n\t\t\t\tBasic.each(meta.headers, function(value, header) {\n\t\t\t\t\tself.shimExec.call(target, 'XMLHttpRequest', 'setRequestHeader', header, value.toString()); // Silverlight doesn't accept integers into the arguments of type object\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// transfer over multipart params and blob itself\n\t\t\tif (data instanceof FormData) {\n\t\t\t\tvar blobField;\n\t\t\t\tdata.each(function(value, name) {\n\t\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t\tblobField = name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.shimExec.call(target, 'XMLHttpRequest', 'append', name, value);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (!data.hasBlob()) {\n\t\t\t\t\tdata = null;\n\t\t\t\t\tsend();\n\t\t\t\t} else {\n\t\t\t\t\tvar blob = data.getBlob();\n\t\t\t\t\tif (blob.isDetached()) {\n\t\t\t\t\t\tattachBlob(blob, function(attachedBlob) {\n\t\t\t\t\t\t\tblob.destroy();\n\t\t\t\t\t\t\tappendBlob(blobField, attachedBlob);\t\t\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tappendBlob(blobField, blob);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (data instanceof Blob) {\n\t\t\t\tif (data.isDetached()) {\n\t\t\t\t\tattachBlob(data, function(attachedBlob) {\n\t\t\t\t\t\tdata.destroy();\n\t\t\t\t\t\tdata = attachedBlob.uid;\n\t\t\t\t\t\tsend();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tdata = data.uid;\n\t\t\t\t\tsend();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsend();\n\t\t\t}\n\t\t},\n\n\t\tgetResponse: function(responseType) {\n\t\t\tvar frs, blob, self = this.getRuntime();\n\n\t\t\tblob = self.shimExec.call(this, 'XMLHttpRequest', 'getResponseAsBlob');\n\n\t\t\tif (blob) {\n\t\t\t\tblob = new File(self.uid, blob);\n\n\t\t\t\tif ('blob' === responseType) {\n\t\t\t\t\treturn blob;\n\t\t\t\t} else if (!!~Basic.inArray(responseType, [\"\", \"text\"])) {\n\t\t\t\t\tfrs = new FileReaderSync();\n\t\t\t\t\treturn frs.readAsText(blob);\n\t\t\t\t} else if ('arraybuffer' === responseType) {\n\n\t\t\t\t\t// do something\n\n\t\t\t\t} else if ('json' === responseType && !!window.JSON) {\n\t\t\t\t\tfrs = new FileReaderSync();\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn JSON.parse(frs.readAsText(blob));\n\t\t\t\t\t} catch (ex) {}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tabort: function(upload_complete_flag) {\n\t\t\tvar self = this.getRuntime();\n\n\t\t\tself.shimExec.call(this, 'XMLHttpRequest', 'abort');\n\n\t\t\tthis.dispatchEvent('readystatechange');\n\t\t\t// this.dispatchEvent('progress');\n\t\t\tthis.dispatchEvent('abort');\n\n\t\t\t//if (!upload_complete_flag) {\n\t\t\t\t// this.dispatchEvent('uploadprogress');\n\t\t\t//}\n\t\t}\n\t};\n\n\treturn (extensions.XMLHttpRequest = XMLHttpRequest);\n});");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "267:3502");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "586:3443");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "3447:3498");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "644:689");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "695:818");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "825:971");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "978:1202");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1243:1518");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1577:2422");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "717:743");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "749:813");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "863:937");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "943:954");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "960:966");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1014:1040");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1047:1120");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1127:1197");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1097:1112");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1286:1513");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1342:1432");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1613:1626");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1632:1826");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1833:2149");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1671:1818");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1706:1722");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1744:1811");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1861:1872");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1879:1885");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1905:1930");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1937:2143");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "1968:2087");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2017:2031");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2040:2075");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2109:2136");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2193:2393");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2223:2339");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2271:2285");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2293:2316");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2324:2330");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2359:2374");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2381:2387");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2411:2417");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2473:2512");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2518:2588");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2594:3079");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "3085:3096");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2610:2641");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2648:3074");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2684:2695");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2765:2791");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2798:2825");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2963:2989");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "2996:3068");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "3008:3047");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "3149:3177");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "3183:3234");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "3240:3278");
__$coverInitRange("src/javascript/runtime/flash/xhr/XMLHttpRequest.js", "3321:3348");
__$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '267:3502');
define('moxie/runtime/flash/xhr/XMLHttpRequest', [
    'moxie/runtime/flash/Runtime',
    'moxie/core/utils/Basic',
    'moxie/file/Blob',
    'moxie/file/File',
    'moxie/file/FileReaderSync',
    'moxie/xhr/FormData',
    'moxie/runtime/Transporter'
], function (extensions, Basic, Blob, File, FileReaderSync, FormData, Transporter) {
    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '586:3443');
    var XMLHttpRequest = {
            send: function (meta, data) {
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '644:689');
                var target = this, self = target.getRuntime();
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '695:818');
                function send() {
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '717:743');
                    meta.transport = self.mode;
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '749:813');
                    self.shimExec.call(target, 'XMLHttpRequest', 'send', meta, data);
                }
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '825:971');
                function appendBlob(name, blob) {
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '863:937');
                    self.shimExec.call(target, 'XMLHttpRequest', 'appendBlob', name, blob.uid);
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '943:954');
                    data = null;
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '960:966');
                    send();
                }
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '978:1202');
                function attachBlob(blob, cb) {
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1014:1040');
                    var tr = new Transporter();
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1047:1120');
                    tr.bind('TransportingComplete', function () {
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1097:1112');
                        cb(this.result);
                    });
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1127:1197');
                    tr.transport(blob.getSource(), blob.type, { ruid: self.uid });
                }
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1243:1518');
                if (!Basic.isEmptyObj(meta.headers)) {
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1286:1513');
                    Basic.each(meta.headers, function (value, header) {
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1342:1432');
                        self.shimExec.call(target, 'XMLHttpRequest', 'setRequestHeader', header, value.toString());
                    });
                }
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1577:2422');
                if (data instanceof FormData) {
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1613:1626');
                    var blobField;
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1632:1826');
                    data.each(function (value, name) {
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1671:1818');
                        if (value instanceof Blob) {
                            __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1706:1722');
                            blobField = name;
                        } else {
                            __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1744:1811');
                            self.shimExec.call(target, 'XMLHttpRequest', 'append', name, value);
                        }
                    });
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1833:2149');
                    if (!data.hasBlob()) {
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1861:1872');
                        data = null;
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1879:1885');
                        send();
                    } else {
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1905:1930');
                        var blob = data.getBlob();
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1937:2143');
                        if (blob.isDetached()) {
                            __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '1968:2087');
                            attachBlob(blob, function (attachedBlob) {
                                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2017:2031');
                                blob.destroy();
                                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2040:2075');
                                appendBlob(blobField, attachedBlob);
                            });
                        } else {
                            __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2109:2136');
                            appendBlob(blobField, blob);
                        }
                    }
                } else if (data instanceof Blob) {
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2193:2393');
                    if (data.isDetached()) {
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2223:2339');
                        attachBlob(data, function (attachedBlob) {
                            __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2271:2285');
                            data.destroy();
                            __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2293:2316');
                            data = attachedBlob.uid;
                            __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2324:2330');
                            send();
                        });
                    } else {
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2359:2374');
                        data = data.uid;
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2381:2387');
                        send();
                    }
                } else {
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2411:2417');
                    send();
                }
            },
            getResponse: function (responseType) {
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2473:2512');
                var frs, blob, self = this.getRuntime();
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2518:2588');
                blob = self.shimExec.call(this, 'XMLHttpRequest', 'getResponseAsBlob');
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2594:3079');
                if (blob) {
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2610:2641');
                    blob = new File(self.uid, blob);
                    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2648:3074');
                    if ('blob' === responseType) {
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2684:2695');
                        return blob;
                    } else if (!!~Basic.inArray(responseType, [
                            '',
                            'text'
                        ])) {
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2765:2791');
                        frs = new FileReaderSync();
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2798:2825');
                        return frs.readAsText(blob);
                    } else if ('arraybuffer' === responseType) {
                    } else if ('json' === responseType && !!window.JSON) {
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2963:2989');
                        frs = new FileReaderSync();
                        __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '2996:3068');
                        try {
                            __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '3008:3047');
                            return JSON.parse(frs.readAsText(blob));
                        } catch (ex) {
                        }
                    }
                }
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '3085:3096');
                return null;
            },
            abort: function (upload_complete_flag) {
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '3149:3177');
                var self = this.getRuntime();
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '3183:3234');
                self.shimExec.call(this, 'XMLHttpRequest', 'abort');
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '3240:3278');
                this.dispatchEvent('readystatechange');
                __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '3321:3348');
                this.dispatchEvent('abort');
            }
        };
    __$coverCall('src/javascript/runtime/flash/xhr/XMLHttpRequest.js', '3447:3498');
    return extensions.XMLHttpRequest = XMLHttpRequest;
});

// Included from: src/javascript/runtime/flash/runtime/Transporter.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/flash/runtime/Transporter.js", "/**\n * Transporter.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/runtime/Transporter\n@private\n*/\ndefine(\"moxie/runtime/flash/runtime/Transporter\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/file/Blob\"\n], function(extensions, Blob) {\n\n\tvar Transporter = {\n\t\tgetAsBlob: function(type) {\n\t\t\tvar self = this.getRuntime()\n\t\t\t, blob = self.shimExec.call(this, 'Transporter', 'getAsBlob', type)\n\t\t\t;\n\t\t\tif (blob) {\n\t\t\t\treturn new Blob(self.uid, blob);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n\n\treturn (extensions.Transporter = Transporter);\n});");
__$coverInitRange("src/javascript/runtime/flash/runtime/Transporter.js", "265:692");
__$coverInitRange("src/javascript/runtime/flash/runtime/Transporter.js", "402:639");
__$coverInitRange("src/javascript/runtime/flash/runtime/Transporter.js", "643:688");
__$coverInitRange("src/javascript/runtime/flash/runtime/Transporter.js", "455:557");
__$coverInitRange("src/javascript/runtime/flash/runtime/Transporter.js", "558:558");
__$coverInitRange("src/javascript/runtime/flash/runtime/Transporter.js", "563:615");
__$coverInitRange("src/javascript/runtime/flash/runtime/Transporter.js", "620:631");
__$coverInitRange("src/javascript/runtime/flash/runtime/Transporter.js", "579:610");
__$coverCall('src/javascript/runtime/flash/runtime/Transporter.js', '265:692');
define('moxie/runtime/flash/runtime/Transporter', [
    'moxie/runtime/flash/Runtime',
    'moxie/file/Blob'
], function (extensions, Blob) {
    __$coverCall('src/javascript/runtime/flash/runtime/Transporter.js', '402:639');
    var Transporter = {
            getAsBlob: function (type) {
                __$coverCall('src/javascript/runtime/flash/runtime/Transporter.js', '455:557');
                var self = this.getRuntime(), blob = self.shimExec.call(this, 'Transporter', 'getAsBlob', type);
                __$coverCall('src/javascript/runtime/flash/runtime/Transporter.js', '558:558');
                ;
                __$coverCall('src/javascript/runtime/flash/runtime/Transporter.js', '563:615');
                if (blob) {
                    __$coverCall('src/javascript/runtime/flash/runtime/Transporter.js', '579:610');
                    return new Blob(self.uid, blob);
                }
                __$coverCall('src/javascript/runtime/flash/runtime/Transporter.js', '620:631');
                return null;
            }
        };
    __$coverCall('src/javascript/runtime/flash/runtime/Transporter.js', '643:688');
    return extensions.Transporter = Transporter;
});

// Included from: src/javascript/runtime/flash/image/Image.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/flash/image/Image.js", "/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/flash/image/Image\n@private\n*/\ndefine(\"moxie/runtime/flash/image/Image\", [\n\t\"moxie/runtime/flash/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/Transporter\",\n\t\"moxie/file/Blob\",\n\t\"moxie/file/FileReaderSync\"\n], function(extensions, Basic, Transporter, Blob, FileReaderSync) {\n\t\n\tvar Image = {\n\t\tloadFromBlob: function(blob) {\n\t\t\tvar comp = this, self = comp.getRuntime();\n\n\t\t\tfunction exec(srcBlob) {\n\t\t\t\tself.shimExec.call(comp, 'Image', 'loadFromBlob', srcBlob.uid);\n\t\t\t\tcomp = self = null;\n\t\t\t}\n\n\t\t\tif (blob.isDetached()) { // binary string\n\t\t\t\tvar tr = new Transporter();\n\t\t\t\ttr.bind(\"TransportingComplete\", function() {\n\t\t\t\t\texec(tr.result.getSource());\n\t\t\t\t});\n\t\t\t\ttr.transport(blob.getSource(), blob.type, { ruid: self.uid });\n\t\t\t} else {\n\t\t\t\texec(blob.getSource());\n\t\t\t}\n\t\t},\n\n\t\tloadFromImage: function(img) {\n\t\t\tvar self = this.getRuntime();\n\t\t\treturn self.shimExec.call(this, 'Image', 'loadFromImage', img.uid);\n\t\t},\n\n\t\tgetAsBlob: function(type, quality) {\n\t\t\tvar self = this.getRuntime()\n\t\t\t, blob = self.shimExec.call(this, 'Image', 'getAsBlob', type, quality)\n\t\t\t;\n\t\t\tif (blob) {\n\t\t\t\treturn new Blob(self.uid, blob);\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\tgetAsDataURL: function() {\n\t\t\tvar self = this.getRuntime()\n\t\t\t, blob = self.Image.getAsBlob.apply(this, arguments)\n\t\t\t, frs\n\t\t\t;\n\t\t\tif (!blob) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tfrs = new FileReaderSync();\n\t\t\treturn frs.readAsDataURL(blob);\n\t\t}\n\t};\n\n\treturn (extensions.Image = Image);\n});");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "251:1664");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "504:1623");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1627:1660");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "554:595");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "601:721");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "727:1002");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "630:692");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "698:716");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "773:799");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "805:890");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "896:957");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "855:882");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "975:997");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1046:1074");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1079:1145");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1195:1300");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1301:1301");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1306:1358");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1363:1374");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1322:1353");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1414:1510");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1511:1511");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1516:1549");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1554:1580");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1585:1615");
__$coverInitRange("src/javascript/runtime/flash/image/Image.js", "1533:1544");
__$coverCall('src/javascript/runtime/flash/image/Image.js', '251:1664');
define('moxie/runtime/flash/image/Image', [
    'moxie/runtime/flash/Runtime',
    'moxie/core/utils/Basic',
    'moxie/runtime/Transporter',
    'moxie/file/Blob',
    'moxie/file/FileReaderSync'
], function (extensions, Basic, Transporter, Blob, FileReaderSync) {
    __$coverCall('src/javascript/runtime/flash/image/Image.js', '504:1623');
    var Image = {
            loadFromBlob: function (blob) {
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '554:595');
                var comp = this, self = comp.getRuntime();
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '601:721');
                function exec(srcBlob) {
                    __$coverCall('src/javascript/runtime/flash/image/Image.js', '630:692');
                    self.shimExec.call(comp, 'Image', 'loadFromBlob', srcBlob.uid);
                    __$coverCall('src/javascript/runtime/flash/image/Image.js', '698:716');
                    comp = self = null;
                }
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '727:1002');
                if (blob.isDetached()) {
                    __$coverCall('src/javascript/runtime/flash/image/Image.js', '773:799');
                    var tr = new Transporter();
                    __$coverCall('src/javascript/runtime/flash/image/Image.js', '805:890');
                    tr.bind('TransportingComplete', function () {
                        __$coverCall('src/javascript/runtime/flash/image/Image.js', '855:882');
                        exec(tr.result.getSource());
                    });
                    __$coverCall('src/javascript/runtime/flash/image/Image.js', '896:957');
                    tr.transport(blob.getSource(), blob.type, { ruid: self.uid });
                } else {
                    __$coverCall('src/javascript/runtime/flash/image/Image.js', '975:997');
                    exec(blob.getSource());
                }
            },
            loadFromImage: function (img) {
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '1046:1074');
                var self = this.getRuntime();
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '1079:1145');
                return self.shimExec.call(this, 'Image', 'loadFromImage', img.uid);
            },
            getAsBlob: function (type, quality) {
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '1195:1300');
                var self = this.getRuntime(), blob = self.shimExec.call(this, 'Image', 'getAsBlob', type, quality);
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '1301:1301');
                ;
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '1306:1358');
                if (blob) {
                    __$coverCall('src/javascript/runtime/flash/image/Image.js', '1322:1353');
                    return new Blob(self.uid, blob);
                }
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '1363:1374');
                return null;
            },
            getAsDataURL: function () {
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '1414:1510');
                var self = this.getRuntime(), blob = self.Image.getAsBlob.apply(this, arguments), frs;
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '1511:1511');
                ;
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '1516:1549');
                if (!blob) {
                    __$coverCall('src/javascript/runtime/flash/image/Image.js', '1533:1544');
                    return null;
                }
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '1554:1580');
                frs = new FileReaderSync();
                __$coverCall('src/javascript/runtime/flash/image/Image.js', '1585:1615');
                return frs.readAsDataURL(blob);
            }
        };
    __$coverCall('src/javascript/runtime/flash/image/Image.js', '1627:1660');
    return extensions.Image = Image;
});

// Included from: src/javascript/runtime/silverlight/Runtime.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/silverlight/Runtime.js", "/**\n * RunTime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global ActiveXObject:true */\n\n/**\nDefines constructor for Silverlight runtime.\n\n@class moxie/runtime/silverlight/Runtime\n@private\n*/\ndefine(\"moxie/runtime/silverlight/Runtime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Env\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/Runtime\"\n], function(Basic, Env, Dom, x, Runtime) {\n\t\n\tvar type = \"silverlight\", extensions = {};\n\n\tfunction isInstalled(version) {\n\t\tvar isVersionSupported = false, control = null, actualVer,\n\t\t\tactualVerArray, reqVerArray, requiredVersionPart, actualVersionPart, index = 0;\n\n\t\ttry {\n\t\t\ttry {\n\t\t\t\tcontrol = new ActiveXObject('AgControl.AgControl');\n\n\t\t\t\tif (control.IsVersionSupported(version)) {\n\t\t\t\t\tisVersionSupported = true;\n\t\t\t\t}\n\n\t\t\t\tcontrol = null;\n\t\t\t} catch (e) {\n\t\t\t\tvar plugin = navigator.plugins[\"Silverlight Plug-In\"];\n\n\t\t\t\tif (plugin) {\n\t\t\t\t\tactualVer = plugin.description;\n\n\t\t\t\t\tif (actualVer === \"1.0.30226.2\") {\n\t\t\t\t\t\tactualVer = \"2.0.30226.2\";\n\t\t\t\t\t}\n\n\t\t\t\t\tactualVerArray = actualVer.split(\".\");\n\n\t\t\t\t\twhile (actualVerArray.length > 3) {\n\t\t\t\t\t\tactualVerArray.pop();\n\t\t\t\t\t}\n\n\t\t\t\t\twhile ( actualVerArray.length < 4) {\n\t\t\t\t\t\tactualVerArray.push(0);\n\t\t\t\t\t}\n\n\t\t\t\t\treqVerArray = version.split(\".\");\n\n\t\t\t\t\twhile (reqVerArray.length > 4) {\n\t\t\t\t\t\treqVerArray.pop();\n\t\t\t\t\t}\n\n\t\t\t\t\tdo {\n\t\t\t\t\t\trequiredVersionPart = parseInt(reqVerArray[index], 10);\n\t\t\t\t\t\tactualVersionPart = parseInt(actualVerArray[index], 10);\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t} while (index < reqVerArray.length && requiredVersionPart === actualVersionPart);\n\n\t\t\t\t\tif (requiredVersionPart <= actualVersionPart && !isNaN(requiredVersionPart)) {\n\t\t\t\t\t\tisVersionSupported = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e2) {\n\t\t\tisVersionSupported = false;\n\t\t}\n\n\t\treturn isVersionSupported;\n\t}\n\n\t/**\n\tConstructor for the Silverlight Runtime\n\n\t@class SilverlightRuntime\n\t@extends Runtime\n\t*/\n\tfunction SilverlightRuntime(options) {\n\t\tvar I = this, initTimer;\n\n\t\toptions = Basic.extend({ xap_url: Env.xap_url }, options);\n\n\t\tRuntime.call(this, options, type, {\n\t\t\taccess_binary: Runtime.capTrue,\n\t\t\taccess_image_binary: Runtime.capTrue,\n\t\t\tdisplay_media: Runtime.capTrue,\n\t\t\tdo_cors: Runtime.capTrue,\n\t\t\tdrag_and_drop: false,\n\t\t\treport_upload_progress: Runtime.capTrue,\n\t\t\tresize_image: Runtime.capTrue,\n\t\t\treturn_response_headers: function(value) {\n\t\t\t\treturn value && I.mode === 'client';\n\t\t\t},\n\t\t\treturn_response_type: function(responseType) {\n\t\t\t\tif (responseType !== 'json') {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn !!window.JSON;\n\t\t\t\t}\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn I.mode === 'client' || !Basic.arrayDiff(code, [200, 404]);\n\t\t\t},\n\t\t\tselect_file: Runtime.capTrue,\n\t\t\tselect_multiple: Runtime.capTrue,\n\t\t\tsend_binary_string: Runtime.capTrue,\n\t\t\tsend_browser_cookies: function(value) {\n\t\t\t\treturn value && I.mode === 'browser';\n\t\t\t},\n\t\t\tsend_custom_headers: function(value) {\n\t\t\t\treturn value && I.mode === 'client';\n\t\t\t},\n\t\t\tsend_multipart: Runtime.capTrue,\n\t\t\tslice_blob: Runtime.capTrue,\n\t\t\tstream_upload: true,\n\t\t\tsummon_file_dialog: false,\n\t\t\tupload_filesize: Runtime.capTrue,\n\t\t\tuse_http_method: function(methods) {\n\t\t\t\treturn I.mode === 'client' || !Basic.arrayDiff(methods, ['GET', 'POST']);\n\t\t\t}\n\t\t}, { \n\t\t\t// capabilities that require specific mode\n\t\t\treturn_response_headers: function(value) {\n\t\t\t\treturn value ? 'client' : 'browser';\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn Basic.arrayDiff(code, [200, 404]) ? 'client' : ['client', 'browser'];\n\t\t\t},\n\t\t\tsend_browser_cookies: function(value) {\n\t\t\t\treturn value ? 'browser' : 'client';\n\t\t\t},\n\t\t\tsend_custom_headers: function(value) {\n\t\t\t\treturn value ? 'client' : 'browser';\n\t\t\t},\n\t\t\tuse_http_method: function(methods) {\n\t\t\t\treturn Basic.arrayDiff(methods, ['GET', 'POST']) ? 'client' : ['client', 'browser'];\n\t\t\t}\n\t\t});\n\n\n\t\t// minimal requirement\n\t\tif (!isInstalled('2.0.31005.0') || Env.browser === 'Opera') {\n\t\t\tthis.mode = false;\n\t\t}\n\n\n\t\tBasic.extend(this, {\n\t\t\tgetShim: function() {\n\t\t\t\treturn Dom.get(this.uid).content.Moxie;\n\t\t\t},\n\n\t\t\tshimExec: function(component, action) {\n\t\t\t\tvar args = [].slice.call(arguments, 2);\n\t\t\t\treturn I.getShim().exec(this.uid, component, action, args);\n\t\t\t},\n\n\t\t\tinit : function() {\n\t\t\t\tvar container;\n\n\t\t\t\tcontainer = this.getShimContainer();\n\n\t\t\t\tcontainer.innerHTML = '<object id=\"' + this.uid + '\" data=\"data:application/x-silverlight,\" type=\"application/x-silverlight-2\" width=\"100%\" height=\"100%\" style=\"outline:none;\">' +\n\t\t\t\t\t'<param name=\"source\" value=\"' + options.xap_url + '\"/>' +\n\t\t\t\t\t'<param name=\"background\" value=\"Transparent\"/>' +\n\t\t\t\t\t'<param name=\"windowless\" value=\"true\"/>' +\n\t\t\t\t\t'<param name=\"enablehtmlaccess\" value=\"true\"/>' +\n\t\t\t\t\t'<param name=\"initParams\" value=\"uid=' + this.uid + ',target=' + Env.global_event_dispatcher + '\"/>' +\n\t\t\t\t'</object>';\n\n\t\t\t\t// Init is dispatched by the shim\n\t\t\t\tinitTimer = setTimeout(function() {\n\t\t\t\t\tif (I && !I.initialized) { // runtime might be already destroyed by this moment\n\t\t\t\t\t\tI.trigger(\"Error\", new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));\n\t\t\t\t\t}\n\t\t\t\t}, Env.OS !== 'Windows'? 10000 : 5000); // give it more time to initialize in non Windows OS (like Mac)\n\t\t\t},\n\n\t\t\tdestroy: (function(destroy) { // extend default destroy method\n\t\t\t\treturn function() {\n\t\t\t\t\tdestroy.call(I);\n\t\t\t\t\tclearTimeout(initTimer); // initialization check might be still onwait\n\t\t\t\t\toptions = initTimer = destroy = I = null;\n\t\t\t\t};\n\t\t\t}(this.destroy))\n\n\t\t}, extensions);\n\t}\n\n\tRuntime.addConstructor(type, SilverlightRuntime); \n\n\treturn extensions;\n});\n");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "333:5693");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "553:594");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "598:1939");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "2039:5615");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "5619:5667");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "5672:5689");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "632:772");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "777:1906");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1911:1936");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "786:1854");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "796:846");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "853:932");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "939:953");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "901:926");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "976:1029");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1036:1849");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1055:1085");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1093:1166");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1174:1211");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1219:1288");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1296:1368");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1376:1408");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1416:1479");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1487:1718");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1726:1843");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1134:1159");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1261:1281");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1339:1361");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1455:1472");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1498:1552");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1560:1615");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1623:1630");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1811:1836");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "1876:1902");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "2080:2103");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "2108:2165");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "2170:3976");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "4007:4093");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "4099:5612");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "2499:2534");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "2596:2689");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "2632:2643");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "2663:2683");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "2741:2805");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "2970:3006");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "3060:3095");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "3306:3378");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "3489:3524");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "3576:3651");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "3706:3741");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "3795:3830");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "3882:3965");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "4072:4089");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "4149:4187");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "4243:4281");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "4287:4345");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "4381:4394");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "4401:4436");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "4443:4970");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "5015:5260");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "5056:5216");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "5142:5209");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "5403:5573");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "5428:5443");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "5450:5473");
__$coverInitRange("src/javascript/runtime/silverlight/Runtime.js", "5526:5566");
__$coverCall('src/javascript/runtime/silverlight/Runtime.js', '333:5693');
define('moxie/runtime/silverlight/Runtime', [
    'moxie/core/utils/Basic',
    'moxie/core/utils/Env',
    'moxie/core/utils/Dom',
    'moxie/core/Exceptions',
    'moxie/runtime/Runtime'
], function (Basic, Env, Dom, x, Runtime) {
    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '553:594');
    var type = 'silverlight', extensions = {};
    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '598:1939');
    function isInstalled(version) {
        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '632:772');
        var isVersionSupported = false, control = null, actualVer, actualVerArray, reqVerArray, requiredVersionPart, actualVersionPart, index = 0;
        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '777:1906');
        try {
            __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '786:1854');
            try {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '796:846');
                control = new ActiveXObject('AgControl.AgControl');
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '853:932');
                if (control.IsVersionSupported(version)) {
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '901:926');
                    isVersionSupported = true;
                }
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '939:953');
                control = null;
            } catch (e) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '976:1029');
                var plugin = navigator.plugins['Silverlight Plug-In'];
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1036:1849');
                if (plugin) {
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1055:1085');
                    actualVer = plugin.description;
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1093:1166');
                    if (actualVer === '1.0.30226.2') {
                        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1134:1159');
                        actualVer = '2.0.30226.2';
                    }
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1174:1211');
                    actualVerArray = actualVer.split('.');
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1219:1288');
                    while (actualVerArray.length > 3) {
                        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1261:1281');
                        actualVerArray.pop();
                    }
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1296:1368');
                    while (actualVerArray.length < 4) {
                        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1339:1361');
                        actualVerArray.push(0);
                    }
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1376:1408');
                    reqVerArray = version.split('.');
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1416:1479');
                    while (reqVerArray.length > 4) {
                        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1455:1472');
                        reqVerArray.pop();
                    }
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1487:1718');
                    do {
                        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1498:1552');
                        requiredVersionPart = parseInt(reqVerArray[index], 10);
                        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1560:1615');
                        actualVersionPart = parseInt(actualVerArray[index], 10);
                        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1623:1630');
                        index++;
                    } while (index < reqVerArray.length && requiredVersionPart === actualVersionPart);
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1726:1843');
                    if (requiredVersionPart <= actualVersionPart && !isNaN(requiredVersionPart)) {
                        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1811:1836');
                        isVersionSupported = true;
                    }
                }
            }
        } catch (e2) {
            __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1876:1902');
            isVersionSupported = false;
        }
        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '1911:1936');
        return isVersionSupported;
    }
    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '2039:5615');
    function SilverlightRuntime(options) {
        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '2080:2103');
        var I = this, initTimer;
        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '2108:2165');
        options = Basic.extend({ xap_url: Env.xap_url }, options);
        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '2170:3976');
        Runtime.call(this, options, type, {
            access_binary: Runtime.capTrue,
            access_image_binary: Runtime.capTrue,
            display_media: Runtime.capTrue,
            do_cors: Runtime.capTrue,
            drag_and_drop: false,
            report_upload_progress: Runtime.capTrue,
            resize_image: Runtime.capTrue,
            return_response_headers: function (value) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '2499:2534');
                return value && I.mode === 'client';
            },
            return_response_type: function (responseType) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '2596:2689');
                if (responseType !== 'json') {
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '2632:2643');
                    return true;
                } else {
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '2663:2683');
                    return !!window.JSON;
                }
            },
            return_status_code: function (code) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '2741:2805');
                return I.mode === 'client' || !Basic.arrayDiff(code, [
                    200,
                    404
                ]);
            },
            select_file: Runtime.capTrue,
            select_multiple: Runtime.capTrue,
            send_binary_string: Runtime.capTrue,
            send_browser_cookies: function (value) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '2970:3006');
                return value && I.mode === 'browser';
            },
            send_custom_headers: function (value) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '3060:3095');
                return value && I.mode === 'client';
            },
            send_multipart: Runtime.capTrue,
            slice_blob: Runtime.capTrue,
            stream_upload: true,
            summon_file_dialog: false,
            upload_filesize: Runtime.capTrue,
            use_http_method: function (methods) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '3306:3378');
                return I.mode === 'client' || !Basic.arrayDiff(methods, [
                    'GET',
                    'POST'
                ]);
            }
        }, {
            return_response_headers: function (value) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '3489:3524');
                return value ? 'client' : 'browser';
            },
            return_status_code: function (code) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '3576:3651');
                return Basic.arrayDiff(code, [
                    200,
                    404
                ]) ? 'client' : [
                    'client',
                    'browser'
                ];
            },
            send_browser_cookies: function (value) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '3706:3741');
                return value ? 'browser' : 'client';
            },
            send_custom_headers: function (value) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '3795:3830');
                return value ? 'client' : 'browser';
            },
            use_http_method: function (methods) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '3882:3965');
                return Basic.arrayDiff(methods, [
                    'GET',
                    'POST'
                ]) ? 'client' : [
                    'client',
                    'browser'
                ];
            }
        });
        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '4007:4093');
        if (!isInstalled('2.0.31005.0') || Env.browser === 'Opera') {
            __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '4072:4089');
            this.mode = false;
        }
        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '4099:5612');
        Basic.extend(this, {
            getShim: function () {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '4149:4187');
                return Dom.get(this.uid).content.Moxie;
            },
            shimExec: function (component, action) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '4243:4281');
                var args = [].slice.call(arguments, 2);
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '4287:4345');
                return I.getShim().exec(this.uid, component, action, args);
            },
            init: function () {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '4381:4394');
                var container;
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '4401:4436');
                container = this.getShimContainer();
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '4443:4970');
                container.innerHTML = '<object id="' + this.uid + '" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;">' + '<param name="source" value="' + options.xap_url + '"/>' + '<param name="background" value="Transparent"/>' + '<param name="windowless" value="true"/>' + '<param name="enablehtmlaccess" value="true"/>' + '<param name="initParams" value="uid=' + this.uid + ',target=' + Env.global_event_dispatcher + '"/>' + '</object>';
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '5015:5260');
                initTimer = setTimeout(function () {
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '5056:5216');
                    if (I && !I.initialized) {
                        __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '5142:5209');
                        I.trigger('Error', new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));
                    }
                }, Env.OS !== 'Windows' ? 10000 : 5000);
            },
            destroy: function (destroy) {
                __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '5403:5573');
                return function () {
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '5428:5443');
                    destroy.call(I);
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '5450:5473');
                    clearTimeout(initTimer);
                    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '5526:5566');
                    options = initTimer = destroy = I = null;
                };
            }(this.destroy)
        }, extensions);
    }
    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '5619:5667');
    Runtime.addConstructor(type, SilverlightRuntime);
    __$coverCall('src/javascript/runtime/silverlight/Runtime.js', '5672:5689');
    return extensions;
});

// Included from: src/javascript/runtime/silverlight/file/Blob.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/silverlight/file/Blob.js", "/**\n * Blob.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/Blob\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/Blob\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/file/Blob\"\n], function(extensions, Basic, Blob) {\n\treturn (extensions.Blob = Basic.extend({}, Blob));\n});");
__$coverInitRange("src/javascript/runtime/silverlight/file/Blob.js", "254:493");
__$coverInitRange("src/javascript/runtime/silverlight/file/Blob.js", "440:489");
__$coverCall('src/javascript/runtime/silverlight/file/Blob.js', '254:493');
define('moxie/runtime/silverlight/file/Blob', [
    'moxie/runtime/silverlight/Runtime',
    'moxie/core/utils/Basic',
    'moxie/runtime/flash/file/Blob'
], function (extensions, Basic, Blob) {
    __$coverCall('src/javascript/runtime/silverlight/file/Blob.js', '440:489');
    return extensions.Blob = Basic.extend({}, Blob);
});

// Included from: src/javascript/runtime/silverlight/file/FileInput.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/silverlight/file/FileInput.js", "/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/FileInput\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/FileInput\", [\n\t\"moxie/runtime/silverlight/Runtime\"\n], function(extensions) {\n\t\n\tvar FileInput = {\n\t\tinit: function(options) {\n\n\t\t\tfunction toFilters(accept) {\n\t\t\t\tvar filter = '';\n\t\t\t\tfor (var i = 0; i < accept.length; i++) {\n\t\t\t\t\tfilter += (filter !== '' ? '|' : '') + accept[i].title + \" | *.\" + accept[i].extensions.replace(/,/g, ';*.');\n\t\t\t\t}\n\t\t\t\treturn filter;\n\t\t\t}\n\t\t\t\n\t\t\tthis.getRuntime().shimExec.call(this, 'FileInput', 'init', toFilters(options.accept), options.name, options.multiple);\n\t\t\tthis.trigger('ready');\n\t\t}\n\t};\n\n\treturn (extensions.FileInput = FileInput);\n});");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileInput.js", "264:881");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileInput.js", "383:832");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileInput.js", "836:877");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileInput.js", "433:672");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileInput.js", "681:798");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileInput.js", "803:824");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileInput.js", "466:481");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileInput.js", "487:648");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileInput.js", "654:667");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileInput.js", "534:642");
__$coverCall('src/javascript/runtime/silverlight/file/FileInput.js', '264:881');
define('moxie/runtime/silverlight/file/FileInput', ['moxie/runtime/silverlight/Runtime'], function (extensions) {
    __$coverCall('src/javascript/runtime/silverlight/file/FileInput.js', '383:832');
    var FileInput = {
            init: function (options) {
                __$coverCall('src/javascript/runtime/silverlight/file/FileInput.js', '433:672');
                function toFilters(accept) {
                    __$coverCall('src/javascript/runtime/silverlight/file/FileInput.js', '466:481');
                    var filter = '';
                    __$coverCall('src/javascript/runtime/silverlight/file/FileInput.js', '487:648');
                    for (var i = 0; i < accept.length; i++) {
                        __$coverCall('src/javascript/runtime/silverlight/file/FileInput.js', '534:642');
                        filter += (filter !== '' ? '|' : '') + accept[i].title + ' | *.' + accept[i].extensions.replace(/,/g, ';*.');
                    }
                    __$coverCall('src/javascript/runtime/silverlight/file/FileInput.js', '654:667');
                    return filter;
                }
                __$coverCall('src/javascript/runtime/silverlight/file/FileInput.js', '681:798');
                this.getRuntime().shimExec.call(this, 'FileInput', 'init', toFilters(options.accept), options.name, options.multiple);
                __$coverCall('src/javascript/runtime/silverlight/file/FileInput.js', '803:824');
                this.trigger('ready');
            }
        };
    __$coverCall('src/javascript/runtime/silverlight/file/FileInput.js', '836:877');
    return extensions.FileInput = FileInput;
});

// Included from: src/javascript/runtime/silverlight/file/FileDrop.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/silverlight/file/FileDrop.js", "/**\n * FileDrop.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/FileDrop\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/FileDrop\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Dom\", \n\t\"moxie/core/utils/Events\"\n], function(extensions, Dom, Events) {\n\n\t// not exactly useful, since works only in safari (...crickets...)\n\tvar FileDrop = {\n\t\tinit: function() {\n\t\t\tvar comp = this, self = comp.getRuntime(), dropZone;\n\n\t\t\tdropZone = self.getShimContainer();\n\n\t\t\tEvents.addEvent(dropZone, 'dragover', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t}, comp.uid);\n\n\t\t\tEvents.addEvent(dropZone, 'dragenter', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar flag = Dom.get(self.uid).dragEnter(e);\n\t\t\t\t// If handled, then stop propagation of event in DOM\n\t\t\t\tif (flag) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t}, comp.uid);\n\n\t\t\tEvents.addEvent(dropZone, 'drop', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar flag = Dom.get(self.uid).dragDrop(e);\n\t\t\t\t// If handled, then stop propagation of event in DOM\n\t\t\t\tif (flag) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t}, comp.uid);\n\n\t\t\treturn self.shimExec.call(this, 'FileDrop', 'init');\n\t\t}\n\t};\n\n\treturn (extensions.FileDrop = FileDrop);\n});");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "262:1414");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "514:1367");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "1371:1410");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "555:606");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "612:646");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "652:808");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "814:1058");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "1064:1302");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "1308:1359");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "708:726");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "732:751");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "757:791");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "871:889");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "895:936");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "999:1041");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "1016:1035");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "1116:1134");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "1140:1180");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "1243:1285");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileDrop.js", "1260:1279");
__$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '262:1414');
define('moxie/runtime/silverlight/file/FileDrop', [
    'moxie/runtime/silverlight/Runtime',
    'moxie/core/utils/Dom',
    'moxie/core/utils/Events'
], function (extensions, Dom, Events) {
    __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '514:1367');
    var FileDrop = {
            init: function () {
                __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '555:606');
                var comp = this, self = comp.getRuntime(), dropZone;
                __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '612:646');
                dropZone = self.getShimContainer();
                __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '652:808');
                Events.addEvent(dropZone, 'dragover', function (e) {
                    __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '708:726');
                    e.preventDefault();
                    __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '732:751');
                    e.stopPropagation();
                    __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '757:791');
                    e.dataTransfer.dropEffect = 'copy';
                }, comp.uid);
                __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '814:1058');
                Events.addEvent(dropZone, 'dragenter', function (e) {
                    __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '871:889');
                    e.preventDefault();
                    __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '895:936');
                    var flag = Dom.get(self.uid).dragEnter(e);
                    __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '999:1041');
                    if (flag) {
                        __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '1016:1035');
                        e.stopPropagation();
                    }
                }, comp.uid);
                __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '1064:1302');
                Events.addEvent(dropZone, 'drop', function (e) {
                    __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '1116:1134');
                    e.preventDefault();
                    __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '1140:1180');
                    var flag = Dom.get(self.uid).dragDrop(e);
                    __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '1243:1285');
                    if (flag) {
                        __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '1260:1279');
                        e.stopPropagation();
                    }
                }, comp.uid);
                __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '1308:1359');
                return self.shimExec.call(this, 'FileDrop', 'init');
            }
        };
    __$coverCall('src/javascript/runtime/silverlight/file/FileDrop.js', '1371:1410');
    return extensions.FileDrop = FileDrop;
});

// Included from: src/javascript/runtime/silverlight/file/FileReader.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/silverlight/file/FileReader.js", "/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/FileReader\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/FileReader\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/file/FileReader\"\n], function(extensions, Basic, FileReader) {\n\treturn (extensions.FileReader = Basic.extend({}, FileReader));\n});");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileReader.js", "266:535");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileReader.js", "470:531");
__$coverCall('src/javascript/runtime/silverlight/file/FileReader.js', '266:535');
define('moxie/runtime/silverlight/file/FileReader', [
    'moxie/runtime/silverlight/Runtime',
    'moxie/core/utils/Basic',
    'moxie/runtime/flash/file/FileReader'
], function (extensions, Basic, FileReader) {
    __$coverCall('src/javascript/runtime/silverlight/file/FileReader.js', '470:531');
    return extensions.FileReader = Basic.extend({}, FileReader);
});

// Included from: src/javascript/runtime/silverlight/file/FileReaderSync.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/silverlight/file/FileReaderSync.js", "/**\n * FileReaderSync.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/file/FileReaderSync\n@private\n*/\ndefine(\"moxie/runtime/silverlight/file/FileReaderSync\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/file/FileReaderSync\"\n], function(extensions, Basic, FileReaderSync) {\n\treturn (extensions.FileReaderSync = Basic.extend({}, FileReaderSync));\n});");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileReaderSync.js", "274:563");
__$coverInitRange("src/javascript/runtime/silverlight/file/FileReaderSync.js", "490:559");
__$coverCall('src/javascript/runtime/silverlight/file/FileReaderSync.js', '274:563');
define('moxie/runtime/silverlight/file/FileReaderSync', [
    'moxie/runtime/silverlight/Runtime',
    'moxie/core/utils/Basic',
    'moxie/runtime/flash/file/FileReaderSync'
], function (extensions, Basic, FileReaderSync) {
    __$coverCall('src/javascript/runtime/silverlight/file/FileReaderSync.js', '490:559');
    return extensions.FileReaderSync = Basic.extend({}, FileReaderSync);
});

// Included from: src/javascript/runtime/silverlight/xhr/XMLHttpRequest.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/silverlight/xhr/XMLHttpRequest.js", "/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/xhr/XMLHttpRequest\n@private\n*/\ndefine(\"moxie/runtime/silverlight/xhr/XMLHttpRequest\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/xhr/XMLHttpRequest\"\n], function(extensions, Basic, XMLHttpRequest) {\n\treturn (extensions.XMLHttpRequest = Basic.extend({}, XMLHttpRequest));\n});");
__$coverInitRange("src/javascript/runtime/silverlight/xhr/XMLHttpRequest.js", "273:560");
__$coverInitRange("src/javascript/runtime/silverlight/xhr/XMLHttpRequest.js", "487:556");
__$coverCall('src/javascript/runtime/silverlight/xhr/XMLHttpRequest.js', '273:560');
define('moxie/runtime/silverlight/xhr/XMLHttpRequest', [
    'moxie/runtime/silverlight/Runtime',
    'moxie/core/utils/Basic',
    'moxie/runtime/flash/xhr/XMLHttpRequest'
], function (extensions, Basic, XMLHttpRequest) {
    __$coverCall('src/javascript/runtime/silverlight/xhr/XMLHttpRequest.js', '487:556');
    return extensions.XMLHttpRequest = Basic.extend({}, XMLHttpRequest);
});

// Included from: src/javascript/runtime/silverlight/runtime/Transporter.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/silverlight/runtime/Transporter.js", "/**\n * Transporter.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/silverlight/runtime/Transporter\n@private\n*/\ndefine(\"moxie/runtime/silverlight/runtime/Transporter\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/runtime/Transporter\"\n], function(extensions, Basic, Transporter) {\n\treturn (extensions.Transporter = Basic.extend({}, Transporter));\n});");
__$coverInitRange("src/javascript/runtime/silverlight/runtime/Transporter.js", "271:551");
__$coverInitRange("src/javascript/runtime/silverlight/runtime/Transporter.js", "484:547");
__$coverCall('src/javascript/runtime/silverlight/runtime/Transporter.js', '271:551');
define('moxie/runtime/silverlight/runtime/Transporter', [
    'moxie/runtime/silverlight/Runtime',
    'moxie/core/utils/Basic',
    'moxie/runtime/flash/runtime/Transporter'
], function (extensions, Basic, Transporter) {
    __$coverCall('src/javascript/runtime/silverlight/runtime/Transporter.js', '484:547');
    return extensions.Transporter = Basic.extend({}, Transporter);
});

// Included from: src/javascript/runtime/silverlight/image/Image.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/silverlight/image/Image.js", "/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n \n/**\n@class moxie/runtime/silverlight/image/Image\n@private\n*/\ndefine(\"moxie/runtime/silverlight/image/Image\", [\n\t\"moxie/runtime/silverlight/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/runtime/flash/image/Image\"\n], function(extensions, Basic, Image) {\n\treturn (extensions.Image = Basic.extend({}, Image, {\n\n\t\tgetInfo: function() {\n\t\t\tvar self = this.getRuntime()\n\t\t\t, grps = ['tiff', 'exif', 'gps']\n\t\t\t, info = { meta: {} }\n\t\t\t, rawInfo = self.shimExec.call(this, 'Image', 'getInfo')\n\t\t\t;\n\n\t\t\tif (rawInfo.meta) {\n\t\t\t\tBasic.each(grps, function(grp) {\n\t\t\t\t\tvar meta = rawInfo.meta[grp]\n\t\t\t\t\t, tag\n\t\t\t\t\t, i\n\t\t\t\t\t, length\n\t\t\t\t\t, value\n\t\t\t\t\t;\n\t\t\t\t\tif (meta && meta.keys) {\n\t\t\t\t\t\tinfo.meta[grp] = {};\n\t\t\t\t\t\tfor (i = 0, length = meta.keys.length; i < length; i++) {\n\t\t\t\t\t\t\ttag = meta.keys[i];\n\t\t\t\t\t\t\tvalue = meta[tag];\n\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\t// convert numbers\n\t\t\t\t\t\t\t\tif (/^(\\d|[1-9]\\d+)$/.test(value)) { // integer (make sure doesn't start with zero)\n\t\t\t\t\t\t\t\t\tvalue = parseInt(value, 10);\n\t\t\t\t\t\t\t\t} else if (/^\\d*\\.\\d+$/.test(value)) { // double\n\t\t\t\t\t\t\t\t\tvalue = parseFloat(value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tinfo.meta[grp][tag] = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tinfo.width = parseInt(rawInfo.width, 10);\n\t\t\tinfo.height = parseInt(rawInfo.height, 10);\n\t\t\tinfo.size = parseInt(rawInfo.size, 10);\n\t\t\tinfo.type = rawInfo.type;\n\t\t\tinfo.name = rawInfo.name;\n\n\t\t\treturn info;\n\t\t}\n\t}));\n});");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "258:1585");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "449:1581");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "530:682");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "683:683");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "689:1360");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "1366:1406");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "1411:1453");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "1458:1496");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "1501:1525");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "1530:1554");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "1560:1571");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "713:1355");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "751:831");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "832:832");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "839:1347");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "870:889");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "897:1340");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "962:980");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "989:1006");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "1015:1332");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "1063:1286");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "1296:1323");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "1156:1183");
__$coverInitRange("src/javascript/runtime/silverlight/image/Image.js", "1251:1276");
__$coverCall('src/javascript/runtime/silverlight/image/Image.js', '258:1585');
define('moxie/runtime/silverlight/image/Image', [
    'moxie/runtime/silverlight/Runtime',
    'moxie/core/utils/Basic',
    'moxie/runtime/flash/image/Image'
], function (extensions, Basic, Image) {
    __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '449:1581');
    return extensions.Image = Basic.extend({}, Image, {
        getInfo: function () {
            __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '530:682');
            var self = this.getRuntime(), grps = [
                    'tiff',
                    'exif',
                    'gps'
                ], info = { meta: {} }, rawInfo = self.shimExec.call(this, 'Image', 'getInfo');
            __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '683:683');
            ;
            __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '689:1360');
            if (rawInfo.meta) {
                __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '713:1355');
                Basic.each(grps, function (grp) {
                    __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '751:831');
                    var meta = rawInfo.meta[grp], tag, i, length, value;
                    __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '832:832');
                    ;
                    __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '839:1347');
                    if (meta && meta.keys) {
                        __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '870:889');
                        info.meta[grp] = {};
                        __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '897:1340');
                        for (i = 0, length = meta.keys.length; i < length; i++) {
                            __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '962:980');
                            tag = meta.keys[i];
                            __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '989:1006');
                            value = meta[tag];
                            __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '1015:1332');
                            if (value) {
                                __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '1063:1286');
                                if (/^(\d|[1-9]\d+)$/.test(value)) {
                                    __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '1156:1183');
                                    value = parseInt(value, 10);
                                } else if (/^\d*\.\d+$/.test(value)) {
                                    __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '1251:1276');
                                    value = parseFloat(value);
                                }
                                __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '1296:1323');
                                info.meta[grp][tag] = value;
                            }
                        }
                    }
                });
            }
            __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '1366:1406');
            info.width = parseInt(rawInfo.width, 10);
            __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '1411:1453');
            info.height = parseInt(rawInfo.height, 10);
            __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '1458:1496');
            info.size = parseInt(rawInfo.size, 10);
            __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '1501:1525');
            info.type = rawInfo.type;
            __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '1530:1554');
            info.name = rawInfo.name;
            __$coverCall('src/javascript/runtime/silverlight/image/Image.js', '1560:1571');
            return info;
        }
    });
});

// Included from: src/javascript/runtime/html4/Runtime.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html4/Runtime.js", "/**\n * Runtime.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/*global File:true */\n\n/**\nDefines constructor for HTML4 runtime.\n\n@class moxie/runtime/html4/Runtime\n@private\n*/\ndefine(\"moxie/runtime/html4/Runtime\", [\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/runtime/Runtime\",\n\t\"moxie/core/utils/Env\"\n], function(Basic, x, Runtime, Env) {\n\t\n\tvar type = 'html4', extensions = {};\n\n\tfunction Html4Runtime(options) {\n\t\tvar I = this\n\t\t, Test = Runtime.capTest\n\t\t, True = Runtime.capTrue\n\t\t;\n\n\t\tRuntime.call(this, options, type, {\n\t\t\taccess_binary: Test(window.FileReader || window.File && File.getAsDataURL),\n\t\t\taccess_image_binary: false,\n\t\t\tdisplay_media: Test(extensions.Image && (Env.can('create_canvas') || Env.can('use_data_uri_over32kb'))),\n\t\t\tdo_cors: false,\n\t\t\tdrag_and_drop: false,\n\t\t\tfilter_by_extension: Test(function() { // if you know how to feature-detect this, please suggest\n\t\t\t\treturn (Env.browser === 'Chrome' && Env.version >= 28) || (Env.browser === 'IE' && Env.version >= 10);\n\t\t\t}()),\n\t\t\tresize_image: function() {\n\t\t\t\treturn extensions.Image && I.can('access_binary') && Env.can('create_canvas');\n\t\t\t},\n\t\t\treport_upload_progress: false,\n\t\t\treturn_response_headers: false,\n\t\t\treturn_response_type: function(responseType) {\n\t\t\t\tif (responseType === 'json' && !!window.JSON) {\n\t\t\t\t\treturn true;\n\t\t\t\t} \n\t\t\t\treturn !!~Basic.inArray(responseType, ['text', 'document', '']);\n\t\t\t},\n\t\t\treturn_status_code: function(code) {\n\t\t\t\treturn !Basic.arrayDiff(code, [200, 404]);\n\t\t\t},\n\t\t\tselect_file: function() {\n\t\t\t\treturn Env.can('use_fileinput');\n\t\t\t},\n\t\t\tselect_multiple: false,\n\t\t\tsend_binary_string: false,\n\t\t\tsend_custom_headers: false,\n\t\t\tsend_multipart: true,\n\t\t\tslice_blob: false,\n\t\t\tstream_upload: function() {\n\t\t\t\treturn I.can('select_file');\n\t\t\t},\n\t\t\tsummon_file_dialog: Test(function() { // yeah... some dirty sniffing here...\n\t\t\t\treturn (Env.browser === 'Firefox' && Env.version >= 4) ||\n\t\t\t\t\t(Env.browser === 'Opera' && Env.version >= 12) ||\n\t\t\t\t\t!!~Basic.inArray(Env.browser, ['Chrome', 'Safari']);\n\t\t\t}()),\n\t\t\tupload_filesize: True,\n\t\t\tuse_http_method: function(methods) {\n\t\t\t\treturn !Basic.arrayDiff(methods, ['GET', 'POST']);\n\t\t\t}\n\t\t});\n\n\n\t\tBasic.extend(this, {\n\t\t\tinit : function() {\n\t\t\t\tthis.trigger(\"Init\");\n\t\t\t},\n\n\t\t\tdestroy: (function(destroy) { // extend default destroy method\n\t\t\t\treturn function() {\n\t\t\t\t\tdestroy.call(I);\n\t\t\t\t\tdestroy = I = null;\n\t\t\t\t};\n\t\t\t}(this.destroy))\n\t\t});\n\n\t\tBasic.extend(this.getShim(), extensions);\n\t}\n\n\tRuntime.addConstructor(type, Html4Runtime);\n\n\treturn extensions;\n});\n");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "312:2682");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "496:531");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "535:2611");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "2615:2657");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "2661:2678");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "570:638");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "639:639");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "644:2312");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "2318:2563");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "2568:2608");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "1046:1147");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "1192:1269");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "1400:1470");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "1477:1540");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "1453:1464");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "1592:1633");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "1674:1705");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "1883:1910");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "2002:2171");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "2252:2301");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "2366:2386");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "2465:2537");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "2490:2505");
__$coverInitRange("src/javascript/runtime/html4/Runtime.js", "2512:2530");
__$coverCall('src/javascript/runtime/html4/Runtime.js', '312:2682');
define('moxie/runtime/html4/Runtime', [
    'moxie/core/utils/Basic',
    'moxie/core/Exceptions',
    'moxie/runtime/Runtime',
    'moxie/core/utils/Env'
], function (Basic, x, Runtime, Env) {
    __$coverCall('src/javascript/runtime/html4/Runtime.js', '496:531');
    var type = 'html4', extensions = {};
    __$coverCall('src/javascript/runtime/html4/Runtime.js', '535:2611');
    function Html4Runtime(options) {
        __$coverCall('src/javascript/runtime/html4/Runtime.js', '570:638');
        var I = this, Test = Runtime.capTest, True = Runtime.capTrue;
        __$coverCall('src/javascript/runtime/html4/Runtime.js', '639:639');
        ;
        __$coverCall('src/javascript/runtime/html4/Runtime.js', '644:2312');
        Runtime.call(this, options, type, {
            access_binary: Test(window.FileReader || window.File && File.getAsDataURL),
            access_image_binary: false,
            display_media: Test(extensions.Image && (Env.can('create_canvas') || Env.can('use_data_uri_over32kb'))),
            do_cors: false,
            drag_and_drop: false,
            filter_by_extension: Test(function () {
                __$coverCall('src/javascript/runtime/html4/Runtime.js', '1046:1147');
                return Env.browser === 'Chrome' && Env.version >= 28 || Env.browser === 'IE' && Env.version >= 10;
            }()),
            resize_image: function () {
                __$coverCall('src/javascript/runtime/html4/Runtime.js', '1192:1269');
                return extensions.Image && I.can('access_binary') && Env.can('create_canvas');
            },
            report_upload_progress: false,
            return_response_headers: false,
            return_response_type: function (responseType) {
                __$coverCall('src/javascript/runtime/html4/Runtime.js', '1400:1470');
                if (responseType === 'json' && !!window.JSON) {
                    __$coverCall('src/javascript/runtime/html4/Runtime.js', '1453:1464');
                    return true;
                }
                __$coverCall('src/javascript/runtime/html4/Runtime.js', '1477:1540');
                return !!~Basic.inArray(responseType, [
                    'text',
                    'document',
                    ''
                ]);
            },
            return_status_code: function (code) {
                __$coverCall('src/javascript/runtime/html4/Runtime.js', '1592:1633');
                return !Basic.arrayDiff(code, [
                    200,
                    404
                ]);
            },
            select_file: function () {
                __$coverCall('src/javascript/runtime/html4/Runtime.js', '1674:1705');
                return Env.can('use_fileinput');
            },
            select_multiple: false,
            send_binary_string: false,
            send_custom_headers: false,
            send_multipart: true,
            slice_blob: false,
            stream_upload: function () {
                __$coverCall('src/javascript/runtime/html4/Runtime.js', '1883:1910');
                return I.can('select_file');
            },
            summon_file_dialog: Test(function () {
                __$coverCall('src/javascript/runtime/html4/Runtime.js', '2002:2171');
                return Env.browser === 'Firefox' && Env.version >= 4 || Env.browser === 'Opera' && Env.version >= 12 || !!~Basic.inArray(Env.browser, [
                    'Chrome',
                    'Safari'
                ]);
            }()),
            upload_filesize: True,
            use_http_method: function (methods) {
                __$coverCall('src/javascript/runtime/html4/Runtime.js', '2252:2301');
                return !Basic.arrayDiff(methods, [
                    'GET',
                    'POST'
                ]);
            }
        });
        __$coverCall('src/javascript/runtime/html4/Runtime.js', '2318:2563');
        Basic.extend(this, {
            init: function () {
                __$coverCall('src/javascript/runtime/html4/Runtime.js', '2366:2386');
                this.trigger('Init');
            },
            destroy: function (destroy) {
                __$coverCall('src/javascript/runtime/html4/Runtime.js', '2465:2537');
                return function () {
                    __$coverCall('src/javascript/runtime/html4/Runtime.js', '2490:2505');
                    destroy.call(I);
                    __$coverCall('src/javascript/runtime/html4/Runtime.js', '2512:2530');
                    destroy = I = null;
                };
            }(this.destroy)
        });
        __$coverCall('src/javascript/runtime/html4/Runtime.js', '2568:2608');
        Basic.extend(this.getShim(), extensions);
    }
    __$coverCall('src/javascript/runtime/html4/Runtime.js', '2615:2657');
    Runtime.addConstructor(type, Html4Runtime);
    __$coverCall('src/javascript/runtime/html4/Runtime.js', '2661:2678');
    return extensions;
});

// Included from: src/javascript/runtime/html4/file/FileInput.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html4/file/FileInput.js", "/**\n * FileInput.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html4/file/FileInput\n@private\n*/\ndefine(\"moxie/runtime/html4/file/FileInput\", [\n\t\"moxie/runtime/html4/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/utils/Events\",\n\t\"moxie/core/utils/Mime\",\n\t\"moxie/core/utils/Env\"\n], function(extensions, Basic, Dom, Events, Mime, Env) {\n\t\n\tfunction FileInput() {\n\t\tvar _uid, _files = [], _mimes = [], _options;\n\n\t\tfunction addInput() {\n\t\t\tvar comp = this, I = comp.getRuntime(), shimContainer, browseButton, currForm, form, input, uid;\n\n\t\t\tuid = Basic.guid('uid_');\n\n\t\t\tshimContainer = I.getShimContainer(); // we get new ref everytime to avoid memory leaks in IE\n\n\t\t\tif (_uid) { // move previous form out of the view\n\t\t\t\tcurrForm = Dom.get(_uid + '_form');\n\t\t\t\tif (currForm) {\n\t\t\t\t\tBasic.extend(currForm.style, { top: '100%' });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// build form in DOM, since innerHTML version not able to submit file for some reason\n\t\t\tform = document.createElement('form');\n\t\t\tform.setAttribute('id', uid + '_form');\n\t\t\tform.setAttribute('method', 'post');\n\t\t\tform.setAttribute('enctype', 'multipart/form-data');\n\t\t\tform.setAttribute('encoding', 'multipart/form-data');\n\n\t\t\tBasic.extend(form.style, {\n\t\t\t\toverflow: 'hidden',\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%'\n\t\t\t});\n\n\t\t\tinput = document.createElement('input');\n\t\t\tinput.setAttribute('id', uid);\n\t\t\tinput.setAttribute('type', 'file');\n\t\t\tinput.setAttribute('name', _options.name || 'Filedata');\n\t\t\tinput.setAttribute('accept', _mimes.join(','));\n\n\t\t\tBasic.extend(input.style, {\n\t\t\t\tfontSize: '999px',\n\t\t\t\topacity: 0\n\t\t\t});\n\n\t\t\tform.appendChild(input);\n\t\t\tshimContainer.appendChild(form);\n\n\t\t\t// prepare file input to be placed underneath the browse_button element\n\t\t\tBasic.extend(input.style, {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%'\n\t\t\t});\n\n\t\t\tif (Env.browser === 'IE' && Env.version < 10) {\n\t\t\t\tBasic.extend(input.style, {\n\t\t\t\t\tfilter : \"progid:DXImageTransform.Microsoft.Alpha(opacity=0)\"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tinput.onchange = function() { // there should be only one handler for this\n\t\t\t\tvar file;\n\n\t\t\t\tif (!this.value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this.files) {\n\t\t\t\t\tfile = this.files[0];\n\t\t\t\t} else {\n\t\t\t\t\tfile = {\n\t\t\t\t\t\tname: this.value\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t_files = [file];\n\n\t\t\t\tthis.onchange = function() {}; // clear event handler\n\t\t\t\taddInput.call(comp);\n\n\t\t\t\t// after file is initialized as o.File, we need to update form and input ids\n\t\t\t\tcomp.bind('change', function onChange() {\n\t\t\t\t\tvar input = Dom.get(uid), form = Dom.get(uid + '_form'), file;\n\n\t\t\t\t\tcomp.unbind('change', onChange);\n\n\t\t\t\t\tif (comp.files.length && input && form) {\n\t\t\t\t\t\tfile = comp.files[0];\n\n\t\t\t\t\t\tinput.setAttribute('id', file.uid);\n\t\t\t\t\t\tform.setAttribute('id', file.uid + '_form');\n\n\t\t\t\t\t\t// set upload target\n\t\t\t\t\t\tform.setAttribute('target', file.uid + '_iframe');\n\t\t\t\t\t}\n\t\t\t\t\tinput = form = null;\n\t\t\t\t}, 998);\n\n\t\t\t\tinput = form = null;\n\t\t\t\tcomp.trigger('change');\n\t\t\t};\n\n\n\t\t\t// route click event to the input\n\t\t\tif (I.can('summon_file_dialog')) {\n\t\t\t\tbrowseButton = Dom.get(_options.browse_button);\n\t\t\t\tEvents.removeEvent(browseButton, 'click', comp.uid);\n\t\t\t\tEvents.addEvent(browseButton, 'click', function(e) {\n\t\t\t\t\tif (input && !input.disabled) { // for some reason FF (up to 8.0.1 so far) lets to click disabled input[type=file]\n\t\t\t\t\t\tinput.click();\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}, comp.uid);\n\t\t\t}\n\n\t\t\t_uid = uid;\n\n\t\t\tshimContainer = currForm = browseButton = null;\n\t\t}\n\n\t\tBasic.extend(this, {\n\t\t\tinit: function(options) {\n\t\t\t\tvar comp = this, I = comp.getRuntime(), shimContainer;\n\n\t\t\t\t// figure out accept string\n\t\t\t\t_options = options;\n\t\t\t\t_mimes = options.accept.mimes || Mime.extList2mimes(options.accept, I.can('filter_by_extension'));\n\n\t\t\t\tshimContainer = I.getShimContainer();\n\n\t\t\t\t(function() {\n\t\t\t\t\tvar browseButton, zIndex, top;\n\n\t\t\t\t\tbrowseButton = Dom.get(options.browse_button);\n\n\t\t\t\t\t// Route click event to the input[type=file] element for browsers that support such behavior\n\t\t\t\t\tif (I.can('summon_file_dialog')) {\n\t\t\t\t\t\tif (Dom.getStyle(browseButton, 'position') === 'static') {\n\t\t\t\t\t\t\tbrowseButton.style.position = 'relative';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tzIndex = parseInt(Dom.getStyle(browseButton, 'z-index'), 10) || 1;\n\n\t\t\t\t\t\tbrowseButton.style.zIndex = zIndex;\n\t\t\t\t\t\tshimContainer.style.zIndex = zIndex - 1;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Since we have to place input[type=file] on top of the browse_button for some browsers,\n\t\t\t\t\tbrowse_button loses interactivity, so we restore it here */\n\t\t\t\t\ttop = I.can('summon_file_dialog') ? browseButton : shimContainer;\n\n\t\t\t\t\tEvents.addEvent(top, 'mouseover', function() {\n\t\t\t\t\t\tcomp.trigger('mouseenter');\n\t\t\t\t\t}, comp.uid);\n\n\t\t\t\t\tEvents.addEvent(top, 'mouseout', function() {\n\t\t\t\t\t\tcomp.trigger('mouseleave');\n\t\t\t\t\t}, comp.uid);\n\n\t\t\t\t\tEvents.addEvent(top, 'mousedown', function() {\n\t\t\t\t\t\tcomp.trigger('mousedown');\n\t\t\t\t\t}, comp.uid);\n\n\t\t\t\t\tEvents.addEvent(Dom.get(options.container), 'mouseup', function() {\n\t\t\t\t\t\tcomp.trigger('mouseup');\n\t\t\t\t\t}, comp.uid);\n\n\t\t\t\t\tbrowseButton = null;\n\t\t\t\t}());\n\n\t\t\t\taddInput.call(this);\n\n\t\t\t\tshimContainer = null;\n\n\t\t\t\t// trigger ready event asynchronously\n\t\t\t\tcomp.trigger({\n\t\t\t\t\ttype: 'ready',\n\t\t\t\t\tasync: true\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tgetFiles: function() {\n\t\t\t\treturn _files;\n\t\t\t},\n\n\t\t\tdisable: function(state) {\n\t\t\t\tvar input;\n\n\t\t\t\tif ((input = Dom.get(_uid))) {\n\t\t\t\t\tinput.disabled = !!state;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdestroy: function() {\n\t\t\t\tvar I = this.getRuntime()\n\t\t\t\t, shim = I.getShim()\n\t\t\t\t, shimContainer = I.getShimContainer()\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\tEvents.removeAllEvents(shimContainer, this.uid);\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.container), this.uid);\n\t\t\t\tEvents.removeAllEvents(_options && Dom.get(_options.browse_button), this.uid);\n\t\t\t\t\n\t\t\t\tif (shimContainer) {\n\t\t\t\t\tshimContainer.innerHTML = '';\n\t\t\t\t}\n\n\t\t\t\tshim.removeInstance(this.uid);\n\n\t\t\t\t_uid = _files = _mimes = _options = shimContainer = shim = null;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn (extensions.FileInput = FileInput);\n});");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "258:6203");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "527:6154");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "6158:6199");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "552:596");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "601:3706");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3711:6151");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "626:721");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "727:751");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "757:793");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "855:1026");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1121:1158");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1163:1201");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1206:1241");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1246:1297");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1302:1354");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1360:1505");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1511:1550");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1555:1584");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1589:1623");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1628:1683");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1688:1734");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1740:1811");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1817:1840");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1845:1876");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "1957:2079");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2085:2243");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2249:3195");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3239:3634");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3640:3650");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3656:3702");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "909:943");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "949:1021");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "970:1015");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2137:2238");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2328:2336");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2343:2379");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2386:2493");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2500:2515");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2522:2551");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2580:2599");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2687:3135");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3142:3161");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3167:3189");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2367:2373");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2409:2429");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2449:2487");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2734:2795");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2803:2834");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2842:3096");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3103:3122");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2890:2910");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2919:2953");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "2961:3004");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3040:3089");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3278:3324");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3330:3381");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3387:3629");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3445:3586");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3593:3611");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3566:3579");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3765:3818");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3857:3875");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3881:3978");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "3985:4021");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4028:5270");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5277:5296");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5303:5323");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5372:5430");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4047:4076");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4084:4129");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4235:4561");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4729:4793");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4801:4899");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4907:5004");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5012:5109");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5117:5233");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5241:5260");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4276:4390");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4399:4464");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4473:4507");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4515:4554");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4342:4382");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4854:4880");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "4959:4985");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5065:5090");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5191:5214");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5469:5482");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5525:5534");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5541:5607");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5577:5601");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5645:5742");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5743:5743");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5754:5801");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5807:5880");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5886:5963");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "5974:6034");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "6041:6070");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "6077:6140");
__$coverInitRange("src/javascript/runtime/html4/file/FileInput.js", "6000:6028");
__$coverCall('src/javascript/runtime/html4/file/FileInput.js', '258:6203');
define('moxie/runtime/html4/file/FileInput', [
    'moxie/runtime/html4/Runtime',
    'moxie/core/utils/Basic',
    'moxie/core/utils/Dom',
    'moxie/core/utils/Events',
    'moxie/core/utils/Mime',
    'moxie/core/utils/Env'
], function (extensions, Basic, Dom, Events, Mime, Env) {
    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '527:6154');
    function FileInput() {
        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '552:596');
        var _uid, _files = [], _mimes = [], _options;
        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '601:3706');
        function addInput() {
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '626:721');
            var comp = this, I = comp.getRuntime(), shimContainer, browseButton, currForm, form, input, uid;
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '727:751');
            uid = Basic.guid('uid_');
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '757:793');
            shimContainer = I.getShimContainer();
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '855:1026');
            if (_uid) {
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '909:943');
                currForm = Dom.get(_uid + '_form');
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '949:1021');
                if (currForm) {
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '970:1015');
                    Basic.extend(currForm.style, { top: '100%' });
                }
            }
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1121:1158');
            form = document.createElement('form');
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1163:1201');
            form.setAttribute('id', uid + '_form');
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1206:1241');
            form.setAttribute('method', 'post');
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1246:1297');
            form.setAttribute('enctype', 'multipart/form-data');
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1302:1354');
            form.setAttribute('encoding', 'multipart/form-data');
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1360:1505');
            Basic.extend(form.style, {
                overflow: 'hidden',
                position: 'absolute',
                top: 0,
                left: 0,
                width: '100%',
                height: '100%'
            });
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1511:1550');
            input = document.createElement('input');
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1555:1584');
            input.setAttribute('id', uid);
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1589:1623');
            input.setAttribute('type', 'file');
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1628:1683');
            input.setAttribute('name', _options.name || 'Filedata');
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1688:1734');
            input.setAttribute('accept', _mimes.join(','));
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1740:1811');
            Basic.extend(input.style, {
                fontSize: '999px',
                opacity: 0
            });
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1817:1840');
            form.appendChild(input);
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1845:1876');
            shimContainer.appendChild(form);
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '1957:2079');
            Basic.extend(input.style, {
                position: 'absolute',
                top: 0,
                left: 0,
                width: '100%',
                height: '100%'
            });
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2085:2243');
            if (Env.browser === 'IE' && Env.version < 10) {
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2137:2238');
                Basic.extend(input.style, { filter: 'progid:DXImageTransform.Microsoft.Alpha(opacity=0)' });
            }
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2249:3195');
            input.onchange = function () {
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2328:2336');
                var file;
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2343:2379');
                if (!this.value) {
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2367:2373');
                    return;
                }
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2386:2493');
                if (this.files) {
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2409:2429');
                    file = this.files[0];
                } else {
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2449:2487');
                    file = { name: this.value };
                }
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2500:2515');
                _files = [file];
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2522:2551');
                this.onchange = function () {
                };
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2580:2599');
                addInput.call(comp);
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2687:3135');
                comp.bind('change', function onChange() {
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2734:2795');
                    var input = Dom.get(uid), form = Dom.get(uid + '_form'), file;
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2803:2834');
                    comp.unbind('change', onChange);
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2842:3096');
                    if (comp.files.length && input && form) {
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2890:2910');
                        file = comp.files[0];
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2919:2953');
                        input.setAttribute('id', file.uid);
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '2961:3004');
                        form.setAttribute('id', file.uid + '_form');
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3040:3089');
                        form.setAttribute('target', file.uid + '_iframe');
                    }
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3103:3122');
                    input = form = null;
                }, 998);
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3142:3161');
                input = form = null;
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3167:3189');
                comp.trigger('change');
            };
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3239:3634');
            if (I.can('summon_file_dialog')) {
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3278:3324');
                browseButton = Dom.get(_options.browse_button);
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3330:3381');
                Events.removeEvent(browseButton, 'click', comp.uid);
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3387:3629');
                Events.addEvent(browseButton, 'click', function (e) {
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3445:3586');
                    if (input && !input.disabled) {
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3566:3579');
                        input.click();
                    }
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3593:3611');
                    e.preventDefault();
                }, comp.uid);
            }
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3640:3650');
            _uid = uid;
            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3656:3702');
            shimContainer = currForm = browseButton = null;
        }
        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3711:6151');
        Basic.extend(this, {
            init: function (options) {
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3765:3818');
                var comp = this, I = comp.getRuntime(), shimContainer;
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3857:3875');
                _options = options;
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3881:3978');
                _mimes = options.accept.mimes || Mime.extList2mimes(options.accept, I.can('filter_by_extension'));
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '3985:4021');
                shimContainer = I.getShimContainer();
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4028:5270');
                (function () {
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4047:4076');
                    var browseButton, zIndex, top;
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4084:4129');
                    browseButton = Dom.get(options.browse_button);
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4235:4561');
                    if (I.can('summon_file_dialog')) {
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4276:4390');
                        if (Dom.getStyle(browseButton, 'position') === 'static') {
                            __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4342:4382');
                            browseButton.style.position = 'relative';
                        }
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4399:4464');
                        zIndex = parseInt(Dom.getStyle(browseButton, 'z-index'), 10) || 1;
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4473:4507');
                        browseButton.style.zIndex = zIndex;
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4515:4554');
                        shimContainer.style.zIndex = zIndex - 1;
                    }
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4729:4793');
                    top = I.can('summon_file_dialog') ? browseButton : shimContainer;
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4801:4899');
                    Events.addEvent(top, 'mouseover', function () {
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4854:4880');
                        comp.trigger('mouseenter');
                    }, comp.uid);
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4907:5004');
                    Events.addEvent(top, 'mouseout', function () {
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '4959:4985');
                        comp.trigger('mouseleave');
                    }, comp.uid);
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5012:5109');
                    Events.addEvent(top, 'mousedown', function () {
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5065:5090');
                        comp.trigger('mousedown');
                    }, comp.uid);
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5117:5233');
                    Events.addEvent(Dom.get(options.container), 'mouseup', function () {
                        __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5191:5214');
                        comp.trigger('mouseup');
                    }, comp.uid);
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5241:5260');
                    browseButton = null;
                }());
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5277:5296');
                addInput.call(this);
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5303:5323');
                shimContainer = null;
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5372:5430');
                comp.trigger({
                    type: 'ready',
                    async: true
                });
            },
            getFiles: function () {
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5469:5482');
                return _files;
            },
            disable: function (state) {
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5525:5534');
                var input;
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5541:5607');
                if (input = Dom.get(_uid)) {
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5577:5601');
                    input.disabled = !!state;
                }
            },
            destroy: function () {
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5645:5742');
                var I = this.getRuntime(), shim = I.getShim(), shimContainer = I.getShimContainer();
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5743:5743');
                ;
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5754:5801');
                Events.removeAllEvents(shimContainer, this.uid);
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5807:5880');
                Events.removeAllEvents(_options && Dom.get(_options.container), this.uid);
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5886:5963');
                Events.removeAllEvents(_options && Dom.get(_options.browse_button), this.uid);
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '5974:6034');
                if (shimContainer) {
                    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '6000:6028');
                    shimContainer.innerHTML = '';
                }
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '6041:6070');
                shim.removeInstance(this.uid);
                __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '6077:6140');
                _uid = _files = _mimes = _options = shimContainer = shim = null;
            }
        });
    }
    __$coverCall('src/javascript/runtime/html4/file/FileInput.js', '6158:6199');
    return extensions.FileInput = FileInput;
});

// Included from: src/javascript/runtime/html4/file/FileReader.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html4/file/FileReader.js", "/**\n * FileReader.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html4/file/FileReader\n@private\n*/\ndefine(\"moxie/runtime/html4/file/FileReader\", [\n\t\"moxie/runtime/html4/Runtime\",\n\t\"moxie/runtime/html5/file/FileReader\"\n], function(extensions, FileReader) {\n\treturn (extensions.FileReader = FileReader);\n});\n");
__$coverInitRange("src/javascript/runtime/html4/file/FileReader.js", "260:465");
__$coverInitRange("src/javascript/runtime/html4/file/FileReader.js", "418:461");
__$coverCall('src/javascript/runtime/html4/file/FileReader.js', '260:465');
define('moxie/runtime/html4/file/FileReader', [
    'moxie/runtime/html4/Runtime',
    'moxie/runtime/html5/file/FileReader'
], function (extensions, FileReader) {
    __$coverCall('src/javascript/runtime/html4/file/FileReader.js', '418:461');
    return extensions.FileReader = FileReader;
});

// Included from: src/javascript/runtime/html4/xhr/XMLHttpRequest.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "/**\n * XMLHttpRequest.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html4/xhr/XMLHttpRequest\n@private\n*/\ndefine(\"moxie/runtime/html4/xhr/XMLHttpRequest\", [\n\t\"moxie/runtime/html4/Runtime\",\n\t\"moxie/core/utils/Basic\",\n\t\"moxie/core/utils/Dom\",\n\t\"moxie/core/utils/Url\",\n\t\"moxie/core/Exceptions\",\n\t\"moxie/core/utils/Events\",\n\t\"moxie/file/Blob\",\n\t\"moxie/xhr/FormData\"\n], function(extensions, Basic, Dom, Url, x, Events, Blob, FormData) {\n\t\n\tfunction XMLHttpRequest() {\n\t\tvar _status, _response, _iframe;\n\n\t\tfunction cleanup(cb) {\n\t\t\tvar target = this, uid, form, inputs, i, hasFile = false;\n\n\t\t\tif (!_iframe) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tuid = _iframe.id.replace(/_iframe$/, '');\n\n\t\t\tform = Dom.get(uid + '_form');\n\t\t\tif (form) {\n\t\t\t\tinputs = form.getElementsByTagName('input');\n\t\t\t\ti = inputs.length;\n\n\t\t\t\twhile (i--) {\n\t\t\t\t\tswitch (inputs[i].getAttribute('type')) {\n\t\t\t\t\t\tcase 'hidden':\n\t\t\t\t\t\t\tinputs[i].parentNode.removeChild(inputs[i]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'file':\n\t\t\t\t\t\t\thasFile = true; // flag the case for later\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tinputs = [];\n\n\t\t\t\tif (!hasFile) { // we need to keep the form for sake of possible retries\n\t\t\t\t\tform.parentNode.removeChild(form);\n\t\t\t\t}\n\t\t\t\tform = null;\n\t\t\t}\n\n\t\t\t// without timeout, request is marked as canceled (in console)\n\t\t\tsetTimeout(function() {\n\t\t\t\tEvents.removeEvent(_iframe, 'load', target.uid);\n\t\t\t\tif (_iframe.parentNode) { // #382\n\t\t\t\t\t_iframe.parentNode.removeChild(_iframe);\n\t\t\t\t}\n\n\t\t\t\t// check if shim container has any other children, if - not, remove it as well\n\t\t\t\tvar shimContainer = target.getRuntime().getShimContainer();\n\t\t\t\tif (!shimContainer.children.length) {\n\t\t\t\t\tshimContainer.parentNode.removeChild(shimContainer);\n\t\t\t\t}\n\n\t\t\t\tshimContainer = _iframe = null;\n\t\t\t\tcb();\n\t\t\t}, 1);\n\t\t}\n\n\t\tBasic.extend(this, {\n\t\t\tsend: function(meta, data) {\n\t\t\t\tvar target = this, I = target.getRuntime(), uid, form, input, blob;\n\n\t\t\t\t_status = _response = null;\n\n\t\t\t\tfunction createIframe() {\n\t\t\t\t\tvar container = I.getShimContainer() || document.body\n\t\t\t\t\t, temp = document.createElement('div')\n\t\t\t\t\t;\n\n\t\t\t\t\t// IE 6 won't be able to set the name using setAttribute or iframe.name\n\t\t\t\t\ttemp.innerHTML = '<iframe id=\"' + uid + '_iframe\" name=\"' + uid + '_iframe\" src=\"javascript:&quot;&quot;\" style=\"display:none\"></iframe>';\n\t\t\t\t\t_iframe = temp.firstChild;\n\t\t\t\t\tcontainer.appendChild(_iframe);\n\n\t\t\t\t\t/* _iframe.onreadystatechange = function() {\n\t\t\t\t\t\tconsole.info(_iframe.readyState);\n\t\t\t\t\t};*/\n\n\t\t\t\t\tEvents.addEvent(_iframe, 'load', function() { // _iframe.onload doesn't work in IE lte 8\n\t\t\t\t\t\tvar el;\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tel = _iframe.contentWindow.document || _iframe.contentDocument || window.frames[_iframe.id].document;\n\n\t\t\t\t\t\t\t// try to detect some standard error pages\n\t\t\t\t\t\t\tif (/^4(0[0-9]|1[0-7]|2[2346])\\s/.test(el.title)) { // test if title starts with 4xx HTTP error\n\t\t\t\t\t\t\t\t_status = el.title.replace(/^(\\d+).*$/, '$1');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_status = 200;\n\t\t\t\t\t\t\t\t// get result\n\t\t\t\t\t\t\t\t_response = Basic.trim(el.body.innerHTML);\n\n\t\t\t\t\t\t\t\t// we need to fire these at least once\n\t\t\t\t\t\t\t\ttarget.trigger({\n\t\t\t\t\t\t\t\t\ttype: 'progress',\n\t\t\t\t\t\t\t\t\tloaded: _response.length,\n\t\t\t\t\t\t\t\t\ttotal: _response.length\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tif (blob) { // if we were uploading a file\n\t\t\t\t\t\t\t\t\ttarget.trigger({\n\t\t\t\t\t\t\t\t\t\ttype: 'uploadprogress',\n\t\t\t\t\t\t\t\t\t\tloaded: blob.size || 1025,\n\t\t\t\t\t\t\t\t\t\ttotal: blob.size || 1025\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\tif (Url.hasSameOrigin(meta.url)) {\n\t\t\t\t\t\t\t\t// if response is sent with error code, iframe in IE gets redirected to res://ieframe.dll/http_x.htm\n\t\t\t\t\t\t\t\t// which obviously results to cross domain error (wtf?)\n\t\t\t\t\t\t\t\t_status = 404;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcleanup.call(target, function() {\n\t\t\t\t\t\t\t\t\ttarget.trigger('error');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\t\n\t\t\t\t\t\n\t\t\t\t\t\tcleanup.call(target, function() {\n\t\t\t\t\t\t\ttarget.trigger('load');\n\t\t\t\t\t\t});\n\t\t\t\t\t}, target.uid);\n\t\t\t\t} // end createIframe\n\n\t\t\t\t// prepare data to be sent and convert if required\n\t\t\t\tif (data instanceof FormData && data.hasBlob()) {\n\t\t\t\t\tblob = data.getBlob();\n\t\t\t\t\tuid = blob.uid;\n\t\t\t\t\tinput = Dom.get(uid);\n\t\t\t\t\tform = Dom.get(uid + '_form');\n\t\t\t\t\tif (!form) {\n\t\t\t\t\t\tthrow new x.DOMException(x.DOMException.NOT_FOUND_ERR);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tuid = Basic.guid('uid_');\n\n\t\t\t\t\tform = document.createElement('form');\n\t\t\t\t\tform.setAttribute('id', uid + '_form');\n\t\t\t\t\tform.setAttribute('method', meta.method);\n\t\t\t\t\tform.setAttribute('enctype', 'multipart/form-data');\n\t\t\t\t\tform.setAttribute('encoding', 'multipart/form-data');\n\t\t\t\t\tform.setAttribute('target', uid + '_iframe');\n\n\t\t\t\t\tI.getShimContainer().appendChild(form);\n\t\t\t\t}\n\n\t\t\t\tif (data instanceof FormData) {\n\t\t\t\t\tdata.each(function(value, name) {\n\t\t\t\t\t\tif (value instanceof Blob) {\n\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\tinput.setAttribute('name', name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar hidden = document.createElement('input');\n\n\t\t\t\t\t\t\tBasic.extend(hidden, {\n\t\t\t\t\t\t\t\ttype : 'hidden',\n\t\t\t\t\t\t\t\tname : name,\n\t\t\t\t\t\t\t\tvalue : value\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// make sure that input[type=\"file\"], if it's there, comes last\n\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\tform.insertBefore(hidden, input);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tform.appendChild(hidden);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// set destination url\n\t\t\t\tform.setAttribute(\"action\", meta.url);\n\n\t\t\t\tcreateIframe();\n\t\t\t\tform.submit();\n\t\t\t\ttarget.trigger('loadstart');\n\t\t\t},\n\n\t\t\tgetStatus: function() {\n\t\t\t\treturn _status;\n\t\t\t},\n\n\t\t\tgetResponse: function(responseType) {\n\t\t\t\tif ('json' === responseType) {\n\t\t\t\t\t// strip off <pre>..</pre> tags that might be enclosing the response\n\t\t\t\t\tif (Basic.typeOf(_response) === 'string' && !!window.JSON) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn JSON.parse(_response.replace(/^\\s*<pre[^>]*>/, '').replace(/<\\/pre>\\s*$/, ''));\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t} else if ('document' === responseType) {\n\n\t\t\t\t}\n\t\t\t\treturn _response;\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tvar target = this;\n\n\t\t\t\tif (_iframe && _iframe.contentWindow) {\n\t\t\t\t\tif (_iframe.contentWindow.stop) { // FireFox/Safari/Chrome\n\t\t\t\t\t\t_iframe.contentWindow.stop();\n\t\t\t\t\t} else if (_iframe.contentWindow.document.execCommand) { // IE\n\t\t\t\t\t\t_iframe.contentWindow.document.execCommand('Stop');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_iframe.src = \"about:blank\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcleanup.call(this, function() {\n\t\t\t\t\t// target.dispatchEvent('readystatechange');\n\t\t\t\t\ttarget.dispatchEvent('abort');\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn (extensions.XMLHttpRequest = XMLHttpRequest);\n});");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "267:6621");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "596:6562");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "6566:6617");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "626:657");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "662:1913");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1918:6559");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "688:744");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "750:781");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "787:827");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "833:862");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "867:1361");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1433:1909");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "770:776");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "883:926");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "932:949");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "956:1198");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1204:1215");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1222:1339");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1345:1356");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "975:1192");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1045:1088");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1097:1102");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1130:1144");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1180:1185");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1300:1333");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1461:1508");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1514:1598");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1688:1746");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1752:1852");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1859:1889");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1895:1899");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1553:1592");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1795:1846");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "1975:2041");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "2048:2074");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "2081:4066");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4148:4796");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4803:5372");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5406:5443");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5450:5464");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5470:5483");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5489:5516");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "2112:2214");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "2215:2215");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "2300:2437");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "2444:2469");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "2476:2506");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "2615:4060");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "2710:2716");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "2725:3951");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "3966:4039");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "2738:2838");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "2898:3555");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "3002:3047");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "3073:3086");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "3118:3159");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "3217:3339");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "3350:3546");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "3402:3536");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "3585:3943");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "3801:3814");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "3840:3918");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "3928:3934");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "3883:3906");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4007:4029");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4203:4224");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4231:4245");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4252:4272");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4279:4308");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4315:4395");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4334:4388");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4415:4439");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4447:4484");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4491:4529");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4536:4576");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4583:4634");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4641:4693");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4700:4744");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4752:4790");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4840:5366");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4880:5357");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4916:4978");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "4937:4969");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5002:5046");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5056:5156");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5237:5349");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5258:5290");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5316:5340");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5556:5570");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5624:6009");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "6015:6031");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5734:5955");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5801:5948");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5814:5899");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "5929:5940");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "6067:6084");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "6091:6417");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "6424:6548");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "6136:6411");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "6201:6229");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "6305:6355");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "6377:6404");
__$coverInitRange("src/javascript/runtime/html4/xhr/XMLHttpRequest.js", "6511:6540");
__$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '267:6621');
define('moxie/runtime/html4/xhr/XMLHttpRequest', [
    'moxie/runtime/html4/Runtime',
    'moxie/core/utils/Basic',
    'moxie/core/utils/Dom',
    'moxie/core/utils/Url',
    'moxie/core/Exceptions',
    'moxie/core/utils/Events',
    'moxie/file/Blob',
    'moxie/xhr/FormData'
], function (extensions, Basic, Dom, Url, x, Events, Blob, FormData) {
    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '596:6562');
    function XMLHttpRequest() {
        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '626:657');
        var _status, _response, _iframe;
        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '662:1913');
        function cleanup(cb) {
            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '688:744');
            var target = this, uid, form, inputs, i, hasFile = false;
            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '750:781');
            if (!_iframe) {
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '770:776');
                return;
            }
            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '787:827');
            uid = _iframe.id.replace(/_iframe$/, '');
            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '833:862');
            form = Dom.get(uid + '_form');
            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '867:1361');
            if (form) {
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '883:926');
                inputs = form.getElementsByTagName('input');
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '932:949');
                i = inputs.length;
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '956:1198');
                while (i--) {
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '975:1192');
                    switch (inputs[i].getAttribute('type')) {
                    case 'hidden':
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1045:1088');
                        inputs[i].parentNode.removeChild(inputs[i]);
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1097:1102');
                        break;
                    case 'file':
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1130:1144');
                        hasFile = true;
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1180:1185');
                        break;
                    }
                }
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1204:1215');
                inputs = [];
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1222:1339');
                if (!hasFile) {
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1300:1333');
                    form.parentNode.removeChild(form);
                }
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1345:1356');
                form = null;
            }
            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1433:1909');
            setTimeout(function () {
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1461:1508');
                Events.removeEvent(_iframe, 'load', target.uid);
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1514:1598');
                if (_iframe.parentNode) {
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1553:1592');
                    _iframe.parentNode.removeChild(_iframe);
                }
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1688:1746');
                var shimContainer = target.getRuntime().getShimContainer();
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1752:1852');
                if (!shimContainer.children.length) {
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1795:1846');
                    shimContainer.parentNode.removeChild(shimContainer);
                }
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1859:1889');
                shimContainer = _iframe = null;
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1895:1899');
                cb();
            }, 1);
        }
        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1918:6559');
        Basic.extend(this, {
            send: function (meta, data) {
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '1975:2041');
                var target = this, I = target.getRuntime(), uid, form, input, blob;
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '2048:2074');
                _status = _response = null;
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '2081:4066');
                function createIframe() {
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '2112:2214');
                    var container = I.getShimContainer() || document.body, temp = document.createElement('div');
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '2215:2215');
                    ;
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '2300:2437');
                    temp.innerHTML = '<iframe id="' + uid + '_iframe" name="' + uid + '_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>';
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '2444:2469');
                    _iframe = temp.firstChild;
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '2476:2506');
                    container.appendChild(_iframe);
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '2615:4060');
                    Events.addEvent(_iframe, 'load', function () {
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '2710:2716');
                        var el;
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '2725:3951');
                        try {
                            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '2738:2838');
                            el = _iframe.contentWindow.document || _iframe.contentDocument || window.frames[_iframe.id].document;
                            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '2898:3555');
                            if (/^4(0[0-9]|1[0-7]|2[2346])\s/.test(el.title)) {
                                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '3002:3047');
                                _status = el.title.replace(/^(\d+).*$/, '$1');
                            } else {
                                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '3073:3086');
                                _status = 200;
                                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '3118:3159');
                                _response = Basic.trim(el.body.innerHTML);
                                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '3217:3339');
                                target.trigger({
                                    type: 'progress',
                                    loaded: _response.length,
                                    total: _response.length
                                });
                                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '3350:3546');
                                if (blob) {
                                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '3402:3536');
                                    target.trigger({
                                        type: 'uploadprogress',
                                        loaded: blob.size || 1025,
                                        total: blob.size || 1025
                                    });
                                }
                            }
                        } catch (ex) {
                            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '3585:3943');
                            if (Url.hasSameOrigin(meta.url)) {
                                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '3801:3814');
                                _status = 404;
                            } else {
                                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '3840:3918');
                                cleanup.call(target, function () {
                                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '3883:3906');
                                    target.trigger('error');
                                });
                                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '3928:3934');
                                return;
                            }
                        }
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '3966:4039');
                        cleanup.call(target, function () {
                            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4007:4029');
                            target.trigger('load');
                        });
                    }, target.uid);
                }
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4148:4796');
                if (data instanceof FormData && data.hasBlob()) {
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4203:4224');
                    blob = data.getBlob();
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4231:4245');
                    uid = blob.uid;
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4252:4272');
                    input = Dom.get(uid);
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4279:4308');
                    form = Dom.get(uid + '_form');
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4315:4395');
                    if (!form) {
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4334:4388');
                        throw new x.DOMException(x.DOMException.NOT_FOUND_ERR);
                    }
                } else {
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4415:4439');
                    uid = Basic.guid('uid_');
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4447:4484');
                    form = document.createElement('form');
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4491:4529');
                    form.setAttribute('id', uid + '_form');
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4536:4576');
                    form.setAttribute('method', meta.method);
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4583:4634');
                    form.setAttribute('enctype', 'multipart/form-data');
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4641:4693');
                    form.setAttribute('encoding', 'multipart/form-data');
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4700:4744');
                    form.setAttribute('target', uid + '_iframe');
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4752:4790');
                    I.getShimContainer().appendChild(form);
                }
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4803:5372');
                if (data instanceof FormData) {
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4840:5366');
                    data.each(function (value, name) {
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4880:5357');
                        if (value instanceof Blob) {
                            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4916:4978');
                            if (input) {
                                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '4937:4969');
                                input.setAttribute('name', name);
                            }
                        } else {
                            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5002:5046');
                            var hidden = document.createElement('input');
                            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5056:5156');
                            Basic.extend(hidden, {
                                type: 'hidden',
                                name: name,
                                value: value
                            });
                            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5237:5349');
                            if (input) {
                                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5258:5290');
                                form.insertBefore(hidden, input);
                            } else {
                                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5316:5340');
                                form.appendChild(hidden);
                            }
                        }
                    });
                }
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5406:5443');
                form.setAttribute('action', meta.url);
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5450:5464');
                createIframe();
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5470:5483');
                form.submit();
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5489:5516');
                target.trigger('loadstart');
            },
            getStatus: function () {
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5556:5570');
                return _status;
            },
            getResponse: function (responseType) {
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5624:6009');
                if ('json' === responseType) {
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5734:5955');
                    if (Basic.typeOf(_response) === 'string' && !!window.JSON) {
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5801:5948');
                        try {
                            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5814:5899');
                            return JSON.parse(_response.replace(/^\s*<pre[^>]*>/, '').replace(/<\/pre>\s*$/, ''));
                        } catch (ex) {
                            __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '5929:5940');
                            return null;
                        }
                    }
                } else if ('document' === responseType) {
                }
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '6015:6031');
                return _response;
            },
            abort: function () {
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '6067:6084');
                var target = this;
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '6091:6417');
                if (_iframe && _iframe.contentWindow) {
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '6136:6411');
                    if (_iframe.contentWindow.stop) {
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '6201:6229');
                        _iframe.contentWindow.stop();
                    } else if (_iframe.contentWindow.document.execCommand) {
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '6305:6355');
                        _iframe.contentWindow.document.execCommand('Stop');
                    } else {
                        __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '6377:6404');
                        _iframe.src = 'about:blank';
                    }
                }
                __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '6424:6548');
                cleanup.call(this, function () {
                    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '6511:6540');
                    target.dispatchEvent('abort');
                });
            }
        });
    }
    __$coverCall('src/javascript/runtime/html4/xhr/XMLHttpRequest.js', '6566:6617');
    return extensions.XMLHttpRequest = XMLHttpRequest;
});

// Included from: src/javascript/runtime/html4/image/Image.js

if (typeof __$coverObject === "undefined"){
	if (typeof window !== "undefined") window.__$coverObject = {};
	else if (typeof global !== "undefined") global.__$coverObject = {};
	else throw new Error("cannot find the global scope");
}
var __$coverInit = function(name, code){
	if (!__$coverObject[name]) __$coverObject[name] = {__code: code};
};
var __$coverInitRange = function(name, range){
	if (!__$coverObject[name][range]) __$coverObject[name][range] = 0;
};
var __$coverCall = function(name, range){
	__$coverObject[name][range]++;
};
__$coverInit("src/javascript/runtime/html4/image/Image.js", "/**\n * Image.js\n *\n * Copyright 2013, Moxiecode Systems AB\n * Released under GPL License.\n *\n * License: http://www.plupload.com/license\n * Contributing: http://www.plupload.com/contributing\n */\n\n/**\n@class moxie/runtime/html4/image/Image\n@private\n*/\ndefine(\"moxie/runtime/html4/image/Image\", [\n\t\"moxie/runtime/html4/Runtime\",\n\t\"moxie/runtime/html5/image/Image\"\n], function(extensions, Image) {\n\treturn (extensions.Image = Image);\n});");
__$coverInitRange("src/javascript/runtime/html4/image/Image.js", "251:433");
__$coverInitRange("src/javascript/runtime/html4/image/Image.js", "396:429");
__$coverCall('src/javascript/runtime/html4/image/Image.js', '251:433');
define('moxie/runtime/html4/image/Image', [
    'moxie/runtime/html4/Runtime',
    'moxie/runtime/html5/image/Image'
], function (extensions, Image) {
    __$coverCall('src/javascript/runtime/html4/image/Image.js', '396:429');
    return extensions.Image = Image;
});

expose(["moxie/core/utils/Basic","moxie/core/I18n","moxie/core/utils/Mime","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/Blob","moxie/file/File","moxie/file/FileInput","moxie/file/FileDrop","moxie/runtime/RuntimeTarget","moxie/file/FileReader","moxie/core/utils/Url","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/runtime/Transporter","moxie/image/Image","moxie/core/utils/Events"]);
})(this);
(function() {
	var baseDir = '';
	var scripts = document.getElementsByTagName('script');
	for (var i = 0; i < scripts.length; i++) {
		var src = scripts[i].src;
		if (src.indexOf('/moxie.cov.js') != -1) {
			baseDir = src.substring(0, src.lastIndexOf('/'));
		}
	}
	document.write('<script type="text/javascript" src="' + baseDir + '/../../src/javascript/o.js"></script>');
})();
